function sI(s,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function xT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Am={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function aI(){if(Nv)return Kl;Nv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Kl.Fragment=t,Kl.jsx=e,Kl.jsxs=e,Kl}var Ov;function oI(){return Ov||(Ov=1,Am.exports=aI()),Am.exports}var U=oI(),Im={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function lI(){if(Mv)return Ct;Mv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,z={};function L(V,it,ct){this.props=V,this.context=it,this.refs=z,this.updater=ct||M}L.prototype.isReactComponent={},L.prototype.setState=function(V,it){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,it,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function nt(){}nt.prototype=L.prototype;function tt(V,it,ct){this.props=V,this.context=it,this.refs=z,this.updater=ct||M}var W=tt.prototype=new nt;W.constructor=tt,K(W,L.prototype),W.isPureReactComponent=!0;var ot=Array.isArray,lt={H:null,A:null,T:null,S:null,V:null},dt=Object.prototype.hasOwnProperty;function D(V,it,ct,st,vt,Vt){return ct=Vt.ref,{$$typeof:s,type:V,key:it,ref:ct!==void 0?ct:null,props:Vt}}function A(V,it){return D(V.type,it,void 0,void 0,void 0,V.props)}function w(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function x(V){var it={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return it[ct]})}var O=/\/+/g;function k(V,it){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):it.toString(36)}function C(){}function qe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(it){V.status==="pending"&&(V.status="fulfilled",V.value=it)},function(it){V.status==="pending"&&(V.status="rejected",V.reason=it)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function fe(V,it,ct,st,vt){var Vt=typeof V;(Vt==="undefined"||Vt==="boolean")&&(V=null);var At=!1;if(V===null)At=!0;else switch(Vt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(V.$$typeof){case s:case t:At=!0;break;case v:return At=V._init,fe(At(V._payload),it,ct,st,vt)}}if(At)return vt=vt(V),At=st===""?"."+k(V,0):st,ot(vt)?(ct="",At!=null&&(ct=At.replace(O,"$&/")+"/"),fe(vt,it,ct,"",function(Wn){return Wn})):vt!=null&&(w(vt)&&(vt=A(vt,ct+(vt.key==null||V&&V.key===vt.key?"":(""+vt.key).replace(O,"$&/")+"/")+At)),it.push(vt)),1;At=0;var Oe=st===""?".":st+":";if(ot(V))for(var ne=0;ne<V.length;ne++)st=V[ne],Vt=Oe+k(st,ne),At+=fe(st,it,ct,Vt,vt);else if(ne=I(V),typeof ne=="function")for(V=ne.call(V),ne=0;!(st=V.next()).done;)st=st.value,Vt=Oe+k(st,ne++),At+=fe(st,it,ct,Vt,vt);else if(Vt==="object"){if(typeof V.then=="function")return fe(qe(V),it,ct,st,vt);throw it=String(V),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return At}function Y(V,it,ct){if(V==null)return V;var st=[],vt=0;return fe(V,st,"","",function(Vt){return it.call(ct,Vt,vt++)}),st}function ut(V){if(V._status===-1){var it=V._result;it=it(),it.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=it)}if(V._status===1)return V._result.default;throw V._result}var yt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function qt(){}return Ct.Children={map:Y,forEach:function(V,it,ct){Y(V,function(){it.apply(this,arguments)},ct)},count:function(V){var it=0;return Y(V,function(){it++}),it},toArray:function(V){return Y(V,function(it){return it})||[]},only:function(V){if(!w(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ct.Component=L,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=tt,Ct.StrictMode=i,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(V){return lt.H.useMemoCache(V)}},Ct.cache=function(V){return function(){return V.apply(null,arguments)}},Ct.cloneElement=function(V,it,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var st=K({},V.props),vt=V.key,Vt=void 0;if(it!=null)for(At in it.ref!==void 0&&(Vt=void 0),it.key!==void 0&&(vt=""+it.key),it)!dt.call(it,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&it.ref===void 0||(st[At]=it[At]);var At=arguments.length-2;if(At===1)st.children=ct;else if(1<At){for(var Oe=Array(At),ne=0;ne<At;ne++)Oe[ne]=arguments[ne+2];st.children=Oe}return D(V.type,vt,void 0,void 0,Vt,st)},Ct.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ct.createElement=function(V,it,ct){var st,vt={},Vt=null;if(it!=null)for(st in it.key!==void 0&&(Vt=""+it.key),it)dt.call(it,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(vt[st]=it[st]);var At=arguments.length-2;if(At===1)vt.children=ct;else if(1<At){for(var Oe=Array(At),ne=0;ne<At;ne++)Oe[ne]=arguments[ne+2];vt.children=Oe}if(V&&V.defaultProps)for(st in At=V.defaultProps,At)vt[st]===void 0&&(vt[st]=At[st]);return D(V,Vt,void 0,void 0,null,vt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(V){return{$$typeof:d,render:V}},Ct.isValidElement=w,Ct.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ut}},Ct.memo=function(V,it){return{$$typeof:p,type:V,compare:it===void 0?null:it}},Ct.startTransition=function(V){var it=lt.T,ct={};lt.T=ct;try{var st=V(),vt=lt.S;vt!==null&&vt(ct,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(qt,yt)}catch(Vt){yt(Vt)}finally{lt.T=it}},Ct.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Ct.use=function(V){return lt.H.use(V)},Ct.useActionState=function(V,it,ct){return lt.H.useActionState(V,it,ct)},Ct.useCallback=function(V,it){return lt.H.useCallback(V,it)},Ct.useContext=function(V){return lt.H.useContext(V)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(V,it){return lt.H.useDeferredValue(V,it)},Ct.useEffect=function(V,it,ct){var st=lt.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(V,it)},Ct.useId=function(){return lt.H.useId()},Ct.useImperativeHandle=function(V,it,ct){return lt.H.useImperativeHandle(V,it,ct)},Ct.useInsertionEffect=function(V,it){return lt.H.useInsertionEffect(V,it)},Ct.useLayoutEffect=function(V,it){return lt.H.useLayoutEffect(V,it)},Ct.useMemo=function(V,it){return lt.H.useMemo(V,it)},Ct.useOptimistic=function(V,it){return lt.H.useOptimistic(V,it)},Ct.useReducer=function(V,it,ct){return lt.H.useReducer(V,it,ct)},Ct.useRef=function(V){return lt.H.useRef(V)},Ct.useState=function(V){return lt.H.useState(V)},Ct.useSyncExternalStore=function(V,it,ct){return lt.H.useSyncExternalStore(V,it,ct)},Ct.useTransition=function(){return lt.H.useTransition()},Ct.version="19.1.0",Ct}var Pv;function Tg(){return Pv||(Pv=1,Im.exports=lI()),Im.exports}var $=Tg();const VT=xT($),uI=sI({__proto__:null,default:VT},[$]);var wm={exports:{}},Ql={},Rm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function cI(){return kv||(kv=1,function(s){function t(Y,ut){var yt=Y.length;Y.push(ut);t:for(;0<yt;){var qt=yt-1>>>1,V=Y[qt];if(0<a(V,ut))Y[qt]=ut,Y[yt]=V,yt=qt;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ut=Y[0],yt=Y.pop();if(yt!==ut){Y[0]=yt;t:for(var qt=0,V=Y.length,it=V>>>1;qt<it;){var ct=2*(qt+1)-1,st=Y[ct],vt=ct+1,Vt=Y[vt];if(0>a(st,yt))vt<V&&0>a(Vt,st)?(Y[qt]=Vt,Y[vt]=yt,qt=vt):(Y[qt]=st,Y[ct]=yt,qt=ct);else if(vt<V&&0>a(Vt,yt))Y[qt]=Vt,Y[vt]=yt,qt=vt;else break t}}return ut}function a(Y,ut){var yt=Y.sortIndex-ut.sortIndex;return yt!==0?yt:Y.id-ut.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var g=[],p=[],v=1,T=null,I=3,M=!1,K=!1,z=!1,L=!1,nt=typeof setTimeout=="function"?setTimeout:null,tt=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ot(Y){for(var ut=e(p);ut!==null;){if(ut.callback===null)i(p);else if(ut.startTime<=Y)i(p),ut.sortIndex=ut.expirationTime,t(g,ut);else break;ut=e(p)}}function lt(Y){if(z=!1,ot(Y),!K)if(e(g)!==null)K=!0,dt||(dt=!0,k());else{var ut=e(p);ut!==null&&fe(lt,ut.startTime-Y)}}var dt=!1,D=-1,A=5,w=-1;function x(){return L?!0:!(s.unstable_now()-w<A)}function O(){if(L=!1,dt){var Y=s.unstable_now();w=Y;var ut=!0;try{t:{K=!1,z&&(z=!1,tt(D),D=-1),M=!0;var yt=I;try{e:{for(ot(Y),T=e(g);T!==null&&!(T.expirationTime>Y&&x());){var qt=T.callback;if(typeof qt=="function"){T.callback=null,I=T.priorityLevel;var V=qt(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof V=="function"){T.callback=V,ot(Y),ut=!0;break e}T===e(g)&&i(g),ot(Y)}else i(g);T=e(g)}if(T!==null)ut=!0;else{var it=e(p);it!==null&&fe(lt,it.startTime-Y),ut=!1}}break t}finally{T=null,I=yt,M=!1}ut=void 0}}finally{ut?k():dt=!1}}}var k;if(typeof W=="function")k=function(){W(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,qe=C.port2;C.port1.onmessage=O,k=function(){qe.postMessage(null)}}else k=function(){nt(O,0)};function fe(Y,ut){D=nt(function(){Y(s.unstable_now())},ut)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(Y){switch(I){case 1:case 2:case 3:var ut=3;break;default:ut=I}var yt=I;I=ut;try{return Y()}finally{I=yt}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Y,ut){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var yt=I;I=Y;try{return ut()}finally{I=yt}},s.unstable_scheduleCallback=function(Y,ut,yt){var qt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?qt+yt:qt):yt=qt,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=yt+V,Y={id:v++,callback:ut,priorityLevel:Y,startTime:yt,expirationTime:V,sortIndex:-1},yt>qt?(Y.sortIndex=yt,t(p,Y),e(g)===null&&Y===e(p)&&(z?(tt(D),D=-1):z=!0,fe(lt,yt-qt))):(Y.sortIndex=V,t(g,Y),K||M||(K=!0,dt||(dt=!0,k()))),Y},s.unstable_shouldYield=x,s.unstable_wrapCallback=function(Y){var ut=I;return function(){var yt=I;I=ut;try{return Y.apply(this,arguments)}finally{I=yt}}}}(Cm)),Cm}var Uv;function hI(){return Uv||(Uv=1,Rm.exports=cI()),Rm.exports}var Dm={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function fI(){if(Lv)return Je;Lv=1;var s=Tg();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:g,containerInfo:p,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,v)},Je.flushSync=function(g){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=p,i.p=v,i.d.f()}},Je.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},Je.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Je.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:M}):v==="script"&&i.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Je.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},Je.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=d(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Je.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},Je.requestFormReset=function(g){i.d.r(g)},Je.unstable_batchedUpdates=function(g,p){return g(p)},Je.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var Bv;function NT(){if(Bv)return Dm.exports;Bv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Dm.exports=fI(),Dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function dI(){if(zv)return Ql;zv=1;var s=hI(),t=Tg(),e=NT();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),n;if(m===u)return d(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,b=f.child;b;){if(b===o){E=!0,o=f,u=m;break}if(b===u){E=!0,u=f,o=m;break}b=b.sibling}if(!E){for(b=m.child;b;){if(b===o){E=!0,o=m,u=f;break}if(b===u){E=!0,u=m,o=f;break}b=b.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),tt=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case L:return"Profiler";case z:return"StrictMode";case lt:return"Suspense";case dt:return"SuspenseList";case w:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case W:return(n.displayName||"Context")+".Provider";case tt:return(n._context.displayName||"Context")+".Consumer";case ot:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:qe(n.type)||"Memo";case A:r=n._payload,n=n._init;try{return qe(n(r))}catch{}}return null}var fe=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},qt=[],V=-1;function it(n){return{current:n}}function ct(n){0>V||(n.current=qt[V],qt[V]=null,V--)}function st(n,r){V++,qt[V]=n.current,n.current=r}var vt=it(null),Vt=it(null),At=it(null),Oe=it(null);function ne(n,r){switch(st(At,r),st(Vt,n),st(vt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?av(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=av(r),n=ov(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ct(vt),st(vt,n)}function Wn(){ct(vt),ct(Vt),ct(At)}function or(n){n.memoizedState!==null&&st(Oe,n);var r=vt.current,o=ov(r,n.type);r!==o&&(st(Vt,n),st(vt,o))}function Ei(n){Vt.current===n&&(ct(vt),ct(Vt)),Oe.current===n&&(ct(Oe),jl._currentValue=yt)}var ns=Object.prototype.hasOwnProperty,is=s.unstable_scheduleCallback,rs=s.unstable_cancelCallback,Lo=s.unstable_shouldYield,ku=s.unstable_requestPaint,Rn=s.unstable_now,Af=s.unstable_getCurrentPriorityLevel,Bo=s.unstable_ImmediatePriority,ha=s.unstable_UserBlockingPriority,ss=s.unstable_NormalPriority,If=s.unstable_LowPriority,fa=s.unstable_IdlePriority,zo=s.log,Uu=s.unstable_setDisableYieldValue,de=null,Ht=null;function mn(n){if(typeof zo=="function"&&Uu(n),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(de,n)}catch{}}var $e=Math.clz32?Math.clz32:as,Lu=Math.log,wf=Math.LN2;function as(n){return n>>>=0,n===0?32:31-(Lu(n)/wf|0)|0}var os=256,ls=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function da(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=Fn(u):(E&=b,E!==0?f=Fn(E):o||(o=b&~n,o!==0&&(f=Fn(o))))):(b=u&~m,b!==0?f=Fn(b):E!==0?f=Fn(E):o||(o=u&~n,o!==0&&(f=Fn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function us(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function jo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qo(){var n=os;return os<<=1,(os&4194048)===0&&(os=256),n}function Fo(){var n=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),n}function Ti(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function bi(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Go(n,r,o,u,f,m){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,R=n.expirationTimes,q=n.hiddenUpdates;for(o=E&~o;0<o;){var X=31-$e(o),Z=1<<X;b[X]=0,R[X]=-1;var G=q[X];if(G!==null)for(q[X]=null,X=0;X<G.length;X++){var H=G[X];H!==null&&(H.lane&=-536870913)}o&=~Z}u!==0&&Jn(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~r))}function Jn(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-$e(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Ho(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-$e(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function lr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ma(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ur(){var n=ut.p;return n!==0?n:(n=window.event,n===void 0?32:wv(n.type))}function Bu(n,r){var o=ut.p;try{return ut.p=n,r()}finally{ut.p=o}}var re=Math.random().toString(36).slice(2),we="__reactFiber$"+re,Ee="__reactProps$"+re,Cn="__reactContainer$"+re,Ko="__reactEvents$"+re,Rf="__reactListeners$"+re,cr="__reactHandles$"+re,zu="__reactResources$"+re,cs="__reactMarker$"+re;function hr(n){delete n[we],delete n[Ee],delete n[Ko],delete n[Rf],delete n[cr]}function Si(n){var r=n[we];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Cn]||o[we]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=hv(n);n!==null;){if(o=n[we])return o;n=hv(n)}return r}n=o,o=n.parentNode}return null}function Zn(n){if(n=n[we]||n[Cn]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function ti(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function en(n){var r=n[zu];return r||(r=n[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function _e(n){n[cs]=!0}var Qo=new Set,ga={};function Gn(n,r){Ai(n,r),Ai(n+"Capture",r)}function Ai(n,r){for(ga[n]=r,n=0;n<r.length;n++)Qo.add(r[n])}var ju=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},hs={};function Fu(n){return ns.call(hs,n)?!0:ns.call(qu,n)?!1:ju.test(n)?hs[n]=!0:(qu[n]=!0,!1)}function fr(n,r,o){if(Fu(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ei(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Fe(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var fs,Gu;function Ii(n){if(fs===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);fs=r&&r[1]||"",Gu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+n+Gu}var pa=!1;function _a(n,r){if(!n||pa)return"";pa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var G=H}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(H){G=H}n.call(Z.prototype)}}else{try{throw Error()}catch(H){G=H}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&G&&typeof H.stack=="string")return[H.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],b=m[1];if(E&&b){var R=E.split(`
`),q=b.split(`
`);for(f=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===R.length||f===q.length)for(u=R.length-1,f=q.length-1;1<=u&&0<=f&&R[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(R[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||R[u]!==q[f]){var X=`
`+R[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{pa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ii(o):""}function Yo(n){switch(n.tag){case 26:case 27:case 5:return Ii(n.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return _a(n.type,!1);case 11:return _a(n.type.render,!1);case 1:return _a(n.type,!0);case 31:return Ii("Activity");default:return""}}function ya(n){try{var r="";do r+=Yo(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function nn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Cf(n){var r=Xo(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function va(n){n._valueTracker||(n._valueTracker=Cf(n))}function $o(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Xo(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function ds(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Df=/[\n"\\]/g;function Te(n){return n.replace(Df,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gn(n,r,o,u,f,m,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+nn(r)):n.value!==""+nn(r)&&(n.value=""+nn(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?dr(n,E,nn(r)):o!=null?dr(n,E,nn(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+nn(b):n.removeAttribute("name")}function ms(n,r,o,u,f,m,E,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+nn(o):"",r=r!=null?""+nn(r):o,b||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function dr(n,r,o){r==="number"&&ds(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function wi(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+nn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Xt(n,r,o){if(r!=null&&(r=""+nn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+nn(o):""}function gs(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(fe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=nn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Dn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hu(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||ps.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Wo(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&Hu(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&Hu(n,m,r[m])}function Jo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(n){return Vf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ri=null;function xn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ci=null,Di=null;function Zo(n){var r=Zn(n);if(r&&(n=r.stateNode)){var o=n[Ee]||null;t:switch(n=r.stateNode,r.type){case"input":if(gn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Te(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Ee]||null;if(!f)throw Error(i(90));gn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&$o(u)}break t;case"textarea":Xt(n,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&wi(n,!!o.multiple,r,!1)}}}var ni=!1;function Ku(n,r,o){if(ni)return n(r,o);ni=!0;try{var u=n(r);return u}finally{if(ni=!1,(Ci!==null||Di!==null)&&(Bc(),Ci&&(r=Ci,n=Di,Di=Ci=null,Zo(r),n)))for(r=0;r<n.length;r++)Zo(n[r])}}function _s(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Ee]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Hn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{Vn=!1}var ii=null,mr=null,xi=null;function tl(){if(xi)return xi;var n,r=mr,o=r.length,u,f="value"in ii?ii.value:ii.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&r[o-u]===f[m-u];u++);return xi=f.slice(n,1<u?1-u:void 0)}function ri(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function si(){return!0}function el(){return!1}function Me(n){function r(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?si:el,this.isPropagationStopped=el,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),r}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=Me(Gt),vs=v({},Gt,{view:0,detail:0}),Qu=Me(vs),ba,Sa,ai,Es=v({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ai&&(ai&&n.type==="mousemove"?(ba=n.screenX-ai.screenX,Sa=n.screenY-ai.screenY):Sa=ba=0,ai=n),ba)},movementY:function(n){return"movementY"in n?n.movementY:Sa}}),Nn=Me(Es),Yu=v({},Es,{dataTransfer:0}),Nf=Me(Yu),Ts=v({},vs,{relatedTarget:0}),Aa=Me(Ts),nl=v({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ia=Me(nl),Xu=v({},Gt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wa=Me(Xu),Of=v({},Gt,{data:0}),il=Me(Of),bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Wu[n])?!!r[n]:!1}function Ss(){return rl}var Ju=v({},vs,{key:function(n){if(n.key){var r=bs[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ri(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$u[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(n){return n.type==="keypress"?ri(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ri(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ra=Me(Ju),Zu=v({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=Me(Zu),Vi=v({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),tc=Me(Vi),ec=v({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=Me(ec),ic=v({},Es,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ca=Me(ic),rn=v({},Gt,{newState:0,oldState:0}),rc=Me(rn),sc=[9,13,27,32],oi=Hn&&"CompositionEvent"in window,h=null;Hn&&"documentMode"in document&&(h=document.documentMode);var _=Hn&&"TextEvent"in window&&!h,y=Hn&&(!oi||h&&8<h&&11>=h),S=" ",B=!1;function Q(n,r){switch(n){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function at(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ut=!1;function Re(n,r){switch(n){case"compositionend":return at(r);case"keypress":return r.which!==32?null:(B=!0,S);case"textInput":return n=r.data,n===S&&B?null:n;default:return null}}function Lt(n,r){if(Ut)return n==="compositionend"||!oi&&Q(n,r)?(n=tl(),xi=mr=ii=null,Ut=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return y&&r.locale!=="ko"?null:r.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Pe[n.type]:r==="textarea"}function Ni(n,r,o,u){Ci?Di?Di.push(u):Di=[u]:Ci=u,r=Hc(r,"onChange"),0<r.length&&(o=new Ta("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Ge=null,li=null;function al(n){ev(n,0)}function ac(n){var r=ti(n);if($o(r))return n}function bp(n,r){if(n==="change")return r}var Sp=!1;if(Hn){var Mf;if(Hn){var Pf="oninput"in document;if(!Pf){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),Pf=typeof Ap.oninput=="function"}Mf=Pf}else Mf=!1;Sp=Mf&&(!document.documentMode||9<document.documentMode)}function Ip(){Ge&&(Ge.detachEvent("onpropertychange",wp),li=Ge=null)}function wp(n){if(n.propertyName==="value"&&ac(li)){var r=[];Ni(r,li,n,xn(n)),Ku(al,r)}}function PS(n,r,o){n==="focusin"?(Ip(),Ge=r,li=o,Ge.attachEvent("onpropertychange",wp)):n==="focusout"&&Ip()}function kS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ac(li)}function US(n,r){if(n==="click")return ac(r)}function LS(n,r){if(n==="input"||n==="change")return ac(r)}function BS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var pn=typeof Object.is=="function"?Object.is:BS;function ol(n,r){if(pn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ns.call(r,f)||!pn(n[f],r[f]))return!1}return!0}function Rp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cp(n,r){var o=Rp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Rp(o)}}function Dp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Dp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function xp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ds(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ds(n.document)}return r}function kf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var zS=Hn&&"documentMode"in document&&11>=document.documentMode,Da=null,Uf=null,ll=null,Lf=!1;function Vp(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Lf||Da==null||Da!==ds(u)||(u=Da,"selectionStart"in u&&kf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ll&&ol(ll,u)||(ll=u,u=Hc(Uf,"onSelect"),0<u.length&&(r=new Ta("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Da)))}function As(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var xa={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Bf={},Np={};Hn&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function Is(n){if(Bf[n])return Bf[n];if(!xa[n])return n;var r=xa[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Np)return Bf[n]=r[o];return n}var Op=Is("animationend"),Mp=Is("animationiteration"),Pp=Is("animationstart"),jS=Is("transitionrun"),qS=Is("transitionstart"),FS=Is("transitioncancel"),kp=Is("transitionend"),Up=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function Kn(n,r){Up.set(n,r),Gn(r,[n])}var Lp=new WeakMap;function On(n,r){if(typeof n=="object"&&n!==null){var o=Lp.get(n);return o!==void 0?o:(r={value:n,source:r,stack:ya(r)},Lp.set(n,r),r)}return{value:n,source:r,stack:ya(r)}}var Mn=[],Va=0,jf=0;function oc(){for(var n=Va,r=jf=Va=0;r<n;){var o=Mn[r];Mn[r++]=null;var u=Mn[r];Mn[r++]=null;var f=Mn[r];Mn[r++]=null;var m=Mn[r];if(Mn[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&Bp(o,f,m)}}function lc(n,r,o,u){Mn[Va++]=n,Mn[Va++]=r,Mn[Va++]=o,Mn[Va++]=u,jf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function qf(n,r,o,u){return lc(n,r,o,u),uc(n)}function Na(n,r){return lc(n,null,null,r),uc(n)}function Bp(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-$e(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function uc(n){if(50<Ol)throw Ol=0,Yd=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Oa={};function GS(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,r,o,u){return new GS(n,r,o,u)}function Ff(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Oi(n,r){var o=n.alternate;return o===null?(o=_n(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function zp(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function cc(n,r,o,u,f,m){var E=0;if(u=n,typeof n=="function")Ff(n)&&(E=1);else if(typeof n=="string")E=KA(n,o,vt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case w:return n=_n(31,o,r,f),n.elementType=w,n.lanes=m,n;case K:return ws(o.children,f,m,r);case z:E=8,f|=24;break;case L:return n=_n(12,o,r,f|2),n.elementType=L,n.lanes=m,n;case lt:return n=_n(13,o,r,f),n.elementType=lt,n.lanes=m,n;case dt:return n=_n(19,o,r,f),n.elementType=dt,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nt:case W:E=10;break t;case tt:E=9;break t;case ot:E=11;break t;case D:E=14;break t;case A:E=16,u=null;break t}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=_n(E,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function ws(n,r,o,u){return n=_n(7,n,u,r),n.lanes=o,n}function Gf(n,r,o){return n=_n(6,n,null,r),n.lanes=o,n}function Hf(n,r,o){return r=_n(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ma=[],Pa=0,hc=null,fc=0,Pn=[],kn=0,Rs=null,Mi=1,Pi="";function Cs(n,r){Ma[Pa++]=fc,Ma[Pa++]=hc,hc=n,fc=r}function jp(n,r,o){Pn[kn++]=Mi,Pn[kn++]=Pi,Pn[kn++]=Rs,Rs=n;var u=Mi;n=Pi;var f=32-$e(u)-1;u&=~(1<<f),o+=1;var m=32-$e(r)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Mi=1<<32-$e(r)+f|o<<f|u,Pi=m+n}else Mi=1<<m|o<<f|u,Pi=n}function Kf(n){n.return!==null&&(Cs(n,1),jp(n,1,0))}function Qf(n){for(;n===hc;)hc=Ma[--Pa],Ma[Pa]=null,fc=Ma[--Pa],Ma[Pa]=null;for(;n===Rs;)Rs=Pn[--kn],Pn[kn]=null,Pi=Pn[--kn],Pn[kn]=null,Mi=Pn[--kn],Pn[kn]=null}var sn=null,me=null,Ft=!1,Ds=null,ui=!1,Yf=Error(i(519));function xs(n){var r=Error(i(418,""));throw hl(On(r,n)),Yf}function qp(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[we]=n,r[Ee]=u,o){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Mt(Pl[o],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":Mt("invalid",r),ms(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),va(r);break;case"select":Mt("invalid",r);break;case"textarea":Mt("invalid",r),gs(r,u.value,u.defaultValue,u.children),va(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||sv(r.textContent,o)?(u.popover!=null&&(Mt("beforetoggle",r),Mt("toggle",r)),u.onScroll!=null&&Mt("scroll",r),u.onScrollEnd!=null&&Mt("scrollend",r),u.onClick!=null&&(r.onclick=Kc),r=!0):r=!1,r||xs(n)}function Fp(n){for(sn=n.return;sn;)switch(sn.tag){case 5:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:sn=sn.return}}function ul(n){if(n!==sn)return!1;if(!Ft)return Fp(n),Ft=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||cm(n.type,n.memoizedProps)),o=!o),o&&me&&xs(n),Fp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){me=Yn(n.nextSibling);break t}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}me=null}}else r===27?(r=me,xr(n.type)?(n=mm,mm=null,me=n):me=r):me=sn?Yn(n.stateNode.nextSibling):null;return!0}function cl(){me=sn=null,Ft=!1}function Gp(){var n=Ds;return n!==null&&(hn===null?hn=n:hn.push.apply(hn,n),Ds=null),n}function hl(n){Ds===null?Ds=[n]:Ds.push(n)}var Xf=it(null),Vs=null,ki=null;function gr(n,r,o){st(Xf,r._currentValue),r._currentValue=o}function Ui(n){n._currentValue=Xf.current,ct(Xf)}function $f(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Wf(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;t:for(;m!==null;){var b=m;m=f;for(var R=0;R<r.length;R++)if(b.context===r[R]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),$f(m.return,o,n),u||(E=null);break t}m=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),$f(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function fl(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=f.type;pn(f.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(f===Oe.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(jl):n=[jl])}f=f.return}n!==null&&Wf(r,n,o,u),r.flags|=262144}function dc(n){for(n=n.firstContext;n!==null;){if(!pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ns(n){Vs=n,ki=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function We(n){return Hp(Vs,n)}function mc(n,r){return Vs===null&&Ns(n),Hp(n,r)}function Hp(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ki===null){if(n===null)throw Error(i(308));ki=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ki=ki.next=r;return o}var HS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},KS=s.unstable_scheduleCallback,QS=s.unstable_NormalPriority,De={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new HS,data:new Map,refCount:0}}function dl(n){n.refCount--,n.refCount===0&&KS(QS,function(){n.controller.abort()})}var ml=null,Zf=0,ka=0,Ua=null;function YS(n,r){if(ml===null){var o=ml=[];Zf=0,ka=em(),Ua={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Zf++,r.then(Kp,Kp),r}function Kp(){if(--Zf===0&&ml!==null){Ua!==null&&(Ua.status="fulfilled");var n=ml;ml=null,ka=0,Ua=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function XS(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Qp=Y.S;Y.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&YS(n,r),Qp!==null&&Qp(n,r)};var Os=it(null);function td(){var n=Os.current;return n!==null?n:ie.pooledCache}function gc(n,r){r===null?st(Os,Os.current):st(Os,r.pool)}function Yp(){var n=td();return n===null?null:{parent:De._currentValue,pool:n}}var gl=Error(i(460)),Xp=Error(i(474)),pc=Error(i(542)),ed={then:function(){}};function $p(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _c(){}function Wp(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(_c,_c),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Zp(n),n;default:if(typeof r.status=="string")r.then(_c,_c);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Zp(n),n}throw pl=r,gl}}var pl=null;function Jp(){if(pl===null)throw Error(i(459));var n=pl;return pl=null,n}function Zp(n){if(n===gl||n===pc)throw Error(i(483))}var pr=!1;function nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _r(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function yr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=uc(n),Bp(n,null,o),r}return lc(n,u,r,o),uc(n)}function _l(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Ho(n,o)}}function rd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var sd=!1;function yl(){if(sd){var n=Ua;if(n!==null)throw n}}function vl(n,r,o,u){sd=!1;var f=n.updateQueue;pr=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var R=b,q=R.next;R.next=null,E===null?m=q:E.next=q,E=R;var X=n.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==E&&(b===null?X.firstBaseUpdate=q:b.next=q,X.lastBaseUpdate=R))}if(m!==null){var Z=f.baseState;E=0,X=q=R=null,b=m;do{var G=b.lane&-536870913,H=G!==b.lane;if(H?(Bt&G)===G:(u&G)===G){G!==0&&G===ka&&(sd=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var St=n,Tt=b;G=r;var Jt=o;switch(Tt.tag){case 1:if(St=Tt.payload,typeof St=="function"){Z=St.call(Jt,Z,G);break t}Z=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Tt.payload,G=typeof St=="function"?St.call(Jt,Z,G):St,G==null)break t;Z=v({},Z,G);break t;case 2:pr=!0}}G=b.callback,G!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[G]:H.push(G))}else H={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(q=X=H,R=Z):X=X.next=H,E|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;H=b,b=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);X===null&&(R=Z),f.baseState=R,f.firstBaseUpdate=q,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),wr|=E,n.lanes=E,n.memoizedState=Z}}function t_(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function e_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)t_(o[n],r)}var La=it(null),yc=it(0);function n_(n,r){n=Gi,st(yc,n),st(La,r),Gi=n|r.baseLanes}function ad(){st(yc,Gi),st(La,La.current)}function od(){Gi=yc.current,ct(La),ct(yc)}var vr=0,Dt=null,$t=null,be=null,vc=!1,Ba=!1,Ms=!1,Ec=0,El=0,za=null,$S=0;function ye(){throw Error(i(321))}function ld(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!pn(n[o],r[o]))return!1;return!0}function ud(n,r,o,u,f,m){return vr=m,Dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=n===null||n.memoizedState===null?B_:z_,Ms=!1,m=o(u,f),Ms=!1,Ba&&(m=r_(r,o,u,f)),i_(n),m}function i_(n){Y.H=wc;var r=$t!==null&&$t.next!==null;if(vr=0,be=$t=Dt=null,vc=!1,El=0,za=null,r)throw Error(i(300));n===null||ke||(n=n.dependencies,n!==null&&dc(n)&&(ke=!0))}function r_(n,r,o,u){Dt=n;var f=0;do{if(Ba&&(za=null),El=0,Ba=!1,25<=f)throw Error(i(301));if(f+=1,be=$t=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=iA,m=r(o,u)}while(Ba);return m}function WS(){var n=Y.H,r=n.useState()[0];return r=typeof r.then=="function"?Tl(r):r,n=n.useState()[0],($t!==null?$t.memoizedState:null)!==n&&(Dt.flags|=1024),r}function cd(){var n=Ec!==0;return Ec=0,n}function hd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function fd(n){if(vc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vc=!1}vr=0,be=$t=Dt=null,Ba=!1,El=Ec=0,za=null}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Dt.memoizedState=be=n:be=be.next=n,be}function Se(){if($t===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var r=be===null?Dt.memoizedState:be.next;if(r!==null)be=r,$t=n;else{if(n===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},be===null?Dt.memoizedState=be=n:be=be.next=n}return be}function dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(n){var r=El;return El+=1,za===null&&(za=[]),n=Wp(za,n,r),r=Dt,(be===null?r.memoizedState:be.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?B_:z_),n}function Tc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tl(n);if(n.$$typeof===W)return We(n)}throw Error(i(438,String(n)))}function md(n){var r=null,o=Dt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=dd(),Dt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=x;return r.index++,o}function Li(n,r){return typeof r=="function"?r(n):r}function bc(n){var r=Se();return gd(r,$t,n)}function gd(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var b=E=null,R=null,q=r,X=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Bt&Z)===Z:(vr&Z)===Z){var G=q.revertLane;if(G===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===ka&&(X=!0);else if((vr&G)===G){q=q.next,G===ka&&(X=!0);continue}else Z={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(b=R=Z,E=m):R=R.next=Z,Dt.lanes|=G,wr|=G;Z=q.action,Ms&&o(m,Z),m=q.hasEagerState?q.eagerState:o(m,Z)}else G={lane:Z,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(b=R=G,E=m):R=R.next=G,Dt.lanes|=Z,wr|=Z;q=q.next}while(q!==null&&q!==r);if(R===null?E=m:R.next=b,!pn(m,n.memoizedState)&&(ke=!0,X&&(o=Ua,o!==null)))throw o;n.memoizedState=m,n.baseState=E,n.baseQueue=R,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function pd(n){var r=Se(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);pn(m,r.memoizedState)||(ke=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function s_(n,r,o){var u=Dt,f=Se(),m=Ft;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var E=!pn(($t||f).memoizedState,o);E&&(f.memoizedState=o,ke=!0),f=f.queue;var b=l_.bind(null,u,f,n);if(bl(2048,8,b,[n]),f.getSnapshot!==r||E||be!==null&&be.memoizedState.tag&1){if(u.flags|=2048,ja(9,Sc(),o_.bind(null,u,f,o,r),null),ie===null)throw Error(i(349));m||(vr&124)!==0||a_(u,r,o)}return o}function a_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Dt.updateQueue,r===null?(r=dd(),Dt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function o_(n,r,o,u){r.value=o,r.getSnapshot=u,u_(r)&&c_(n)}function l_(n,r,o){return o(function(){u_(r)&&c_(n)})}function u_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!pn(n,o)}catch{return!0}}function c_(n){var r=Na(n,2);r!==null&&bn(r,n,2)}function _d(n){var r=un();if(typeof n=="function"){var o=n;if(n=o(),Ms){mn(!0);try{o()}finally{mn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:n},r}function h_(n,r,o,u){return n.baseState=o,gd(n,$t,typeof u=="function"?u:Li)}function JS(n,r,o,u,f){if(Ic(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,f_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function f_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=Y.T,E={};Y.T=E;try{var b=o(f,u),R=Y.S;R!==null&&R(E,b),d_(n,r,b)}catch(q){yd(n,r,q)}finally{Y.T=m}}else try{m=o(f,u),d_(n,r,m)}catch(q){yd(n,r,q)}}function d_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){m_(n,r,u)},function(u){return yd(n,r,u)}):m_(n,r,o)}function m_(n,r,o){r.status="fulfilled",r.value=o,g_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,f_(n,o)))}function yd(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,g_(r),r=r.next;while(r!==u)}n.action=null}function g_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function p_(n,r){return r}function __(n,r){if(Ft){var o=ie.formState;if(o!==null){t:{var u=Dt;if(Ft){if(me){e:{for(var f=me,m=ui;f.nodeType!==8;){if(!m){f=null;break e}if(f=Yn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){me=Yn(f.nextSibling),u=f.data==="F!";break t}}xs(u)}u=!1}u&&(r=o[0])}}return o=un(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p_,lastRenderedState:r},o.queue=u,o=k_.bind(null,Dt,u),u.dispatch=o,u=_d(!1),m=Sd.bind(null,Dt,!1,u.queue),u=un(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=JS.bind(null,Dt,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function y_(n){var r=Se();return v_(r,$t,n)}function v_(n,r,o){if(r=gd(n,r,p_)[0],n=bc(Li)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Tl(r)}catch(E){throw E===gl?pc:E}else u=r;r=Se();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Dt.flags|=2048,ja(9,Sc(),ZS.bind(null,f,o),null)),[u,m,n]}function ZS(n,r){n.action=r}function E_(n){var r=Se(),o=$t;if(o!==null)return v_(r,o,n);Se(),r=r.memoizedState,o=Se();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function ja(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Dt.updateQueue,r===null&&(r=dd(),Dt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function Sc(){return{destroy:void 0,resource:void 0}}function T_(){return Se().memoizedState}function Ac(n,r,o,u){var f=un();u=u===void 0?null:u,Dt.flags|=n,f.memoizedState=ja(1|r,Sc(),o,u)}function bl(n,r,o,u){var f=Se();u=u===void 0?null:u;var m=f.memoizedState.inst;$t!==null&&u!==null&&ld(u,$t.memoizedState.deps)?f.memoizedState=ja(r,m,o,u):(Dt.flags|=n,f.memoizedState=ja(1|r,m,o,u))}function b_(n,r){Ac(8390656,8,n,r)}function S_(n,r){bl(2048,8,n,r)}function A_(n,r){return bl(4,2,n,r)}function I_(n,r){return bl(4,4,n,r)}function w_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function R_(n,r,o){o=o!=null?o.concat([n]):null,bl(4,4,w_.bind(null,r,n),o)}function vd(){}function C_(n,r){var o=Se();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&ld(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function D_(n,r){var o=Se();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&ld(r,u[1]))return u[0];if(u=n(),Ms){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,r],u}function Ed(n,r,o){return o===void 0||(vr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=Ny(),Dt.lanes|=n,wr|=n,o)}function x_(n,r,o,u){return pn(o,r)?o:La.current!==null?(n=Ed(n,o,u),pn(n,r)||(ke=!0),n):(vr&42)===0?(ke=!0,n.memoizedState=o):(n=Ny(),Dt.lanes|=n,wr|=n,r)}function V_(n,r,o,u,f){var m=ut.p;ut.p=m!==0&&8>m?m:8;var E=Y.T,b={};Y.T=b,Sd(n,!1,r,o);try{var R=f(),q=Y.S;if(q!==null&&q(b,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=XS(R,u);Sl(n,r,X,Tn(n))}else Sl(n,r,u,Tn(n))}catch(Z){Sl(n,r,{then:function(){},status:"rejected",reason:Z},Tn())}finally{ut.p=m,Y.T=E}}function tA(){}function Td(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=N_(n).queue;V_(n,f,r,yt,o===null?tA:function(){return O_(n),o(u)})}function N_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:yt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function O_(n){var r=N_(n).next.queue;Sl(n,r,{},Tn())}function bd(){return We(jl)}function M_(){return Se().memoizedState}function P_(){return Se().memoizedState}function eA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Tn();n=_r(o);var u=yr(r,n,o);u!==null&&(bn(u,r,o),_l(u,r,o)),r={cache:Jf()},n.payload=r;return}r=r.return}}function nA(n,r,o){var u=Tn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ic(n)?U_(r,o):(o=qf(n,r,o,u),o!==null&&(bn(o,n,u),L_(o,r,u)))}function k_(n,r,o){var u=Tn();Sl(n,r,o,u)}function Sl(n,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ic(n))U_(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,b=m(E,o);if(f.hasEagerState=!0,f.eagerState=b,pn(b,E))return lc(n,r,f,0),ie===null&&oc(),!1}catch{}finally{}if(o=qf(n,r,f,u),o!==null)return bn(o,n,u),L_(o,r,u),!0}return!1}function Sd(n,r,o,u){if(u={lane:2,revertLane:em(),action:u,hasEagerState:!1,eagerState:null,next:null},Ic(n)){if(r)throw Error(i(479))}else r=qf(n,o,u,2),r!==null&&bn(r,n,2)}function Ic(n){var r=n.alternate;return n===Dt||r!==null&&r===Dt}function U_(n,r){Ba=vc=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function L_(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Ho(n,o)}}var wc={readContext:We,use:Tc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},B_={readContext:We,use:Tc,useCallback:function(n,r){return un().memoizedState=[n,r===void 0?null:r],n},useContext:We,useEffect:b_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Ac(4194308,4,w_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Ac(4194308,4,n,r)},useInsertionEffect:function(n,r){Ac(4,2,n,r)},useMemo:function(n,r){var o=un();r=r===void 0?null:r;var u=n();if(Ms){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=un();if(o!==void 0){var f=o(r);if(Ms){mn(!0);try{o(r)}finally{mn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=nA.bind(null,Dt,n),[u.memoizedState,n]},useRef:function(n){var r=un();return n={current:n},r.memoizedState=n},useState:function(n){n=_d(n);var r=n.queue,o=k_.bind(null,Dt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:vd,useDeferredValue:function(n,r){var o=un();return Ed(o,n,r)},useTransition:function(){var n=_d(!1);return n=V_.bind(null,Dt,n.queue,!0,!1),un().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Dt,f=un();if(Ft){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ie===null)throw Error(i(349));(Bt&124)!==0||a_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,b_(l_.bind(null,u,m,n),[n]),u.flags|=2048,ja(9,Sc(),o_.bind(null,u,m,o,r),null),o},useId:function(){var n=un(),r=ie.identifierPrefix;if(Ft){var o=Pi,u=Mi;o=(u&~(1<<32-$e(u)-1)).toString(32)+o,r=""+r+"R"+o,o=Ec++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=$S++,r=""+r+"r"+o.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:bd,useFormState:__,useActionState:__,useOptimistic:function(n){var r=un();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Sd.bind(null,Dt,!0,o),o.dispatch=r,[n,r]},useMemoCache:md,useCacheRefresh:function(){return un().memoizedState=eA.bind(null,Dt)}},z_={readContext:We,use:Tc,useCallback:C_,useContext:We,useEffect:S_,useImperativeHandle:R_,useInsertionEffect:A_,useLayoutEffect:I_,useMemo:D_,useReducer:bc,useRef:T_,useState:function(){return bc(Li)},useDebugValue:vd,useDeferredValue:function(n,r){var o=Se();return x_(o,$t.memoizedState,n,r)},useTransition:function(){var n=bc(Li)[0],r=Se().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:s_,useId:M_,useHostTransitionStatus:bd,useFormState:y_,useActionState:y_,useOptimistic:function(n,r){var o=Se();return h_(o,$t,n,r)},useMemoCache:md,useCacheRefresh:P_},iA={readContext:We,use:Tc,useCallback:C_,useContext:We,useEffect:S_,useImperativeHandle:R_,useInsertionEffect:A_,useLayoutEffect:I_,useMemo:D_,useReducer:pd,useRef:T_,useState:function(){return pd(Li)},useDebugValue:vd,useDeferredValue:function(n,r){var o=Se();return $t===null?Ed(o,n,r):x_(o,$t.memoizedState,n,r)},useTransition:function(){var n=pd(Li)[0],r=Se().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:s_,useId:M_,useHostTransitionStatus:bd,useFormState:E_,useActionState:E_,useOptimistic:function(n,r){var o=Se();return $t!==null?h_(o,$t,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:md,useCacheRefresh:P_},qa=null,Al=0;function Rc(n){var r=Al;return Al+=1,qa===null&&(qa=[]),Wp(qa,n,r)}function Il(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Cc(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function j_(n){var r=n._init;return r(n._payload)}function q_(n){function r(P,N){if(n){var j=P.deletions;j===null?(P.deletions=[N],P.flags|=16):j.push(N)}}function o(P,N){if(!n)return null;for(;N!==null;)r(P,N),N=N.sibling;return null}function u(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function f(P,N){return P=Oi(P,N),P.index=0,P.sibling=null,P}function m(P,N,j){return P.index=j,n?(j=P.alternate,j!==null?(j=j.index,j<N?(P.flags|=67108866,N):j):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function E(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,N,j,J){return N===null||N.tag!==6?(N=Gf(j,P.mode,J),N.return=P,N):(N=f(N,j),N.return=P,N)}function R(P,N,j,J){var mt=j.type;return mt===K?X(P,N,j.props.children,J,j.key):N!==null&&(N.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===A&&j_(mt)===N.type)?(N=f(N,j.props),Il(N,j),N.return=P,N):(N=cc(j.type,j.key,j.props,null,P.mode,J),Il(N,j),N.return=P,N)}function q(P,N,j,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==j.containerInfo||N.stateNode.implementation!==j.implementation?(N=Hf(j,P.mode,J),N.return=P,N):(N=f(N,j.children||[]),N.return=P,N)}function X(P,N,j,J,mt){return N===null||N.tag!==7?(N=ws(j,P.mode,J,mt),N.return=P,N):(N=f(N,j),N.return=P,N)}function Z(P,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Gf(""+N,P.mode,j),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case I:return j=cc(N.type,N.key,N.props,null,P.mode,j),Il(j,N),j.return=P,j;case M:return N=Hf(N,P.mode,j),N.return=P,N;case A:var J=N._init;return N=J(N._payload),Z(P,N,j)}if(fe(N)||k(N))return N=ws(N,P.mode,j,null),N.return=P,N;if(typeof N.then=="function")return Z(P,Rc(N),j);if(N.$$typeof===W)return Z(P,mc(P,N),j);Cc(P,N)}return null}function G(P,N,j,J){var mt=N!==null?N.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return mt!==null?null:b(P,N,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return j.key===mt?R(P,N,j,J):null;case M:return j.key===mt?q(P,N,j,J):null;case A:return mt=j._init,j=mt(j._payload),G(P,N,j,J)}if(fe(j)||k(j))return mt!==null?null:X(P,N,j,J,null);if(typeof j.then=="function")return G(P,N,Rc(j),J);if(j.$$typeof===W)return G(P,N,mc(P,j),J);Cc(P,j)}return null}function H(P,N,j,J,mt){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return P=P.get(j)||null,b(N,P,""+J,mt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return P=P.get(J.key===null?j:J.key)||null,R(N,P,J,mt);case M:return P=P.get(J.key===null?j:J.key)||null,q(N,P,J,mt);case A:var Nt=J._init;return J=Nt(J._payload),H(P,N,j,J,mt)}if(fe(J)||k(J))return P=P.get(j)||null,X(N,P,J,mt,null);if(typeof J.then=="function")return H(P,N,j,Rc(J),mt);if(J.$$typeof===W)return H(P,N,j,mc(N,J),mt);Cc(N,J)}return null}function St(P,N,j,J){for(var mt=null,Nt=null,pt=N,bt=N=0,Le=null;pt!==null&&bt<j.length;bt++){pt.index>bt?(Le=pt,pt=null):Le=pt.sibling;var jt=G(P,pt,j[bt],J);if(jt===null){pt===null&&(pt=Le);break}n&&pt&&jt.alternate===null&&r(P,pt),N=m(jt,N,bt),Nt===null?mt=jt:Nt.sibling=jt,Nt=jt,pt=Le}if(bt===j.length)return o(P,pt),Ft&&Cs(P,bt),mt;if(pt===null){for(;bt<j.length;bt++)pt=Z(P,j[bt],J),pt!==null&&(N=m(pt,N,bt),Nt===null?mt=pt:Nt.sibling=pt,Nt=pt);return Ft&&Cs(P,bt),mt}for(pt=u(pt);bt<j.length;bt++)Le=H(pt,P,bt,j[bt],J),Le!==null&&(n&&Le.alternate!==null&&pt.delete(Le.key===null?bt:Le.key),N=m(Le,N,bt),Nt===null?mt=Le:Nt.sibling=Le,Nt=Le);return n&&pt.forEach(function(Pr){return r(P,Pr)}),Ft&&Cs(P,bt),mt}function Tt(P,N,j,J){if(j==null)throw Error(i(151));for(var mt=null,Nt=null,pt=N,bt=N=0,Le=null,jt=j.next();pt!==null&&!jt.done;bt++,jt=j.next()){pt.index>bt?(Le=pt,pt=null):Le=pt.sibling;var Pr=G(P,pt,jt.value,J);if(Pr===null){pt===null&&(pt=Le);break}n&&pt&&Pr.alternate===null&&r(P,pt),N=m(Pr,N,bt),Nt===null?mt=Pr:Nt.sibling=Pr,Nt=Pr,pt=Le}if(jt.done)return o(P,pt),Ft&&Cs(P,bt),mt;if(pt===null){for(;!jt.done;bt++,jt=j.next())jt=Z(P,jt.value,J),jt!==null&&(N=m(jt,N,bt),Nt===null?mt=jt:Nt.sibling=jt,Nt=jt);return Ft&&Cs(P,bt),mt}for(pt=u(pt);!jt.done;bt++,jt=j.next())jt=H(pt,P,bt,jt.value,J),jt!==null&&(n&&jt.alternate!==null&&pt.delete(jt.key===null?bt:jt.key),N=m(jt,N,bt),Nt===null?mt=jt:Nt.sibling=jt,Nt=jt);return n&&pt.forEach(function(rI){return r(P,rI)}),Ft&&Cs(P,bt),mt}function Jt(P,N,j,J){if(typeof j=="object"&&j!==null&&j.type===K&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case I:t:{for(var mt=j.key;N!==null;){if(N.key===mt){if(mt=j.type,mt===K){if(N.tag===7){o(P,N.sibling),J=f(N,j.props.children),J.return=P,P=J;break t}}else if(N.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===A&&j_(mt)===N.type){o(P,N.sibling),J=f(N,j.props),Il(J,j),J.return=P,P=J;break t}o(P,N);break}else r(P,N);N=N.sibling}j.type===K?(J=ws(j.props.children,P.mode,J,j.key),J.return=P,P=J):(J=cc(j.type,j.key,j.props,null,P.mode,J),Il(J,j),J.return=P,P=J)}return E(P);case M:t:{for(mt=j.key;N!==null;){if(N.key===mt)if(N.tag===4&&N.stateNode.containerInfo===j.containerInfo&&N.stateNode.implementation===j.implementation){o(P,N.sibling),J=f(N,j.children||[]),J.return=P,P=J;break t}else{o(P,N);break}else r(P,N);N=N.sibling}J=Hf(j,P.mode,J),J.return=P,P=J}return E(P);case A:return mt=j._init,j=mt(j._payload),Jt(P,N,j,J)}if(fe(j))return St(P,N,j,J);if(k(j)){if(mt=k(j),typeof mt!="function")throw Error(i(150));return j=mt.call(j),Tt(P,N,j,J)}if(typeof j.then=="function")return Jt(P,N,Rc(j),J);if(j.$$typeof===W)return Jt(P,N,mc(P,j),J);Cc(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,N!==null&&N.tag===6?(o(P,N.sibling),J=f(N,j),J.return=P,P=J):(o(P,N),J=Gf(j,P.mode,J),J.return=P,P=J),E(P)):o(P,N)}return function(P,N,j,J){try{Al=0;var mt=Jt(P,N,j,J);return qa=null,mt}catch(pt){if(pt===gl||pt===pc)throw pt;var Nt=_n(29,pt,null,P.mode);return Nt.lanes=J,Nt.return=P,Nt}finally{}}}var Fa=q_(!0),F_=q_(!1),Un=it(null),ci=null;function Er(n){var r=n.alternate;st(xe,xe.current&1),st(Un,n),ci===null&&(r===null||La.current!==null||r.memoizedState!==null)&&(ci=n)}function G_(n){if(n.tag===22){if(st(xe,xe.current),st(Un,n),ci===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(ci=n)}}else Tr()}function Tr(){st(xe,xe.current),st(Un,Un.current)}function Bi(n){ct(Un),ci===n&&(ci=null),ct(xe)}var xe=it(0);function Dc(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||dm(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ad(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:v({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Id={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Tn(),f=_r(u);f.payload=r,o!=null&&(f.callback=o),r=yr(n,f,u),r!==null&&(bn(r,n,u),_l(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Tn(),f=_r(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=yr(n,f,u),r!==null&&(bn(r,n,u),_l(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Tn(),u=_r(o);u.tag=2,r!=null&&(u.callback=r),r=yr(n,u,o),r!==null&&(bn(r,n,o),_l(r,n,o))}};function H_(n,r,o,u,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!ol(o,u)||!ol(f,m):!0}function K_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Id.enqueueReplaceState(r,r.state,null)}function Ps(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var xc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Q_(n){xc(n)}function Y_(n){console.error(n)}function X_(n){xc(n)}function Vc(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function $_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wd(n,r,o){return o=_r(o),o.tag=3,o.payload={element:null},o.callback=function(){Vc(n,r)},o}function W_(n){return n=_r(n),n.tag=3,n}function J_(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){$_(r,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){$_(r,o,u),typeof f!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function rA(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&fl(r,o,f,!0),o=Un.current,o!==null){switch(o.tag){case 13:return ci===null?$d():o.alternate===null&&ge===0&&(ge=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===ed?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Jd(n,u,f)),!1;case 22:return o.flags|=65536,u===ed?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Jd(n,u,f)),!1}throw Error(i(435,o.tag))}return Jd(n,u,f),$d(),!1}if(Ft)return r=Un.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Yf&&(n=Error(i(422),{cause:u}),hl(On(n,o)))):(u!==Yf&&(r=Error(i(423),{cause:u}),hl(On(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=On(u,o),f=wd(n.stateNode,u,f),rd(n,f),ge!==4&&(ge=2)),!1;var m=Error(i(520),{cause:u});if(m=On(m,o),Nl===null?Nl=[m]:Nl.push(m),ge!==4&&(ge=2),r===null)return!0;u=On(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=wd(o.stateNode,u,n),rd(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Rr===null||!Rr.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=W_(f),J_(f,n,o,u),rd(o,f),!1}o=o.return}while(o!==null);return!1}var Z_=Error(i(461)),ke=!1;function He(n,r,o,u){r.child=n===null?F_(r,null,o,u):Fa(r,n.child,o,u)}function ty(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return Ns(r),u=ud(n,r,o,E,m,f),b=cd(),n!==null&&!ke?(hd(n,r,f),zi(n,r,f)):(Ft&&b&&Kf(r),r.flags|=1,He(n,r,u,f),r.child)}function ey(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Ff(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,ny(n,r,m,u,f)):(n=cc(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Md(n,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:ol,o(E,u)&&n.ref===r.ref)return zi(n,r,f)}return r.flags|=1,n=Oi(m,u),n.ref=r.ref,n.return=r,r.child=n}function ny(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(ol(m,u)&&n.ref===r.ref)if(ke=!1,r.pendingProps=u=m,Md(n,f))(n.flags&131072)!==0&&(ke=!0);else return r.lanes=n.lanes,zi(n,r,f)}return Rd(n,r,o,u,f)}function iy(n,r,o){var u=r.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return ry(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&gc(r,m!==null?m.cachePool:null),m!==null?n_(r,m):ad(),G_(r);else return r.lanes=r.childLanes=536870912,ry(n,r,m!==null?m.baseLanes|o:o,o)}else m!==null?(gc(r,m.cachePool),n_(r,m),Tr(),r.memoizedState=null):(n!==null&&gc(r,null),ad(),Tr());return He(n,r,f,o),r.child}function ry(n,r,o,u){var f=td();return f=f===null?null:{parent:De._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},n!==null&&gc(r,null),ad(),G_(r),n!==null&&fl(n,r,u,!0),null}function Nc(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Rd(n,r,o,u,f){return Ns(r),o=ud(n,r,o,u,void 0,f),u=cd(),n!==null&&!ke?(hd(n,r,f),zi(n,r,f)):(Ft&&u&&Kf(r),r.flags|=1,He(n,r,o,f),r.child)}function sy(n,r,o,u,f,m){return Ns(r),r.updateQueue=null,o=r_(r,u,o,f),i_(n),u=cd(),n!==null&&!ke?(hd(n,r,m),zi(n,r,m)):(Ft&&u&&Kf(r),r.flags|=1,He(n,r,o,m),r.child)}function ay(n,r,o,u,f){if(Ns(r),r.stateNode===null){var m=Oa,E=o.contextType;typeof E=="object"&&E!==null&&(m=We(E)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Id,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},nd(r),E=o.contextType,m.context=typeof E=="object"&&E!==null?We(E):Oa,m.state=r.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Ad(r,o,E,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Id.enqueueReplaceState(m,m.state,null),vl(r,u,m,f),yl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var b=r.memoizedProps,R=Ps(o,b);m.props=R;var q=m.context,X=o.contextType;E=Oa,typeof X=="object"&&X!==null&&(E=We(X));var Z=o.getDerivedStateFromProps;X=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||q!==E)&&K_(r,m,u,E),pr=!1;var G=r.memoizedState;m.state=G,vl(r,u,m,f),yl(),q=r.memoizedState,b||G!==q||pr?(typeof Z=="function"&&(Ad(r,o,Z,u),q=r.memoizedState),(R=pr||H_(r,o,R,u,G,q,E))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),m.props=u,m.state=q,m.context=E,u=R):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,id(n,r),E=r.memoizedProps,X=Ps(o,E),m.props=X,Z=r.pendingProps,G=m.context,q=o.contextType,R=Oa,typeof q=="object"&&q!==null&&(R=We(q)),b=o.getDerivedStateFromProps,(q=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==Z||G!==R)&&K_(r,m,u,R),pr=!1,G=r.memoizedState,m.state=G,vl(r,u,m,f),yl();var H=r.memoizedState;E!==Z||G!==H||pr||n!==null&&n.dependencies!==null&&dc(n.dependencies)?(typeof b=="function"&&(Ad(r,o,b,u),H=r.memoizedState),(X=pr||H_(r,o,X,u,G,H,R)||n!==null&&n.dependencies!==null&&dc(n.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,H,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,H,R)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=H),m.props=u,m.state=H,m.context=R,u=X):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,Nc(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=Fa(r,n.child,null,f),r.child=Fa(r,null,o,f)):He(n,r,o,f),r.memoizedState=m.state,n=r.child):n=zi(n,r,f),n}function oy(n,r,o,u){return cl(),r.flags|=256,He(n,r,o,u),r.child}var Cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(n){return{baseLanes:n,cachePool:Yp()}}function xd(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Ln),n}function ly(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(xe.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ft){if(f?Er(r):Tr(),Ft){var b=me,R;if(R=b){t:{for(R=b,b=ui;R.nodeType!==8;){if(!b){b=null;break t}if(R=Yn(R.nextSibling),R===null){b=null;break t}}b=R}b!==null?(r.memoizedState={dehydrated:b,treeContext:Rs!==null?{id:Mi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},R=_n(18,null,null,0),R.stateNode=b,R.return=r,r.child=R,sn=r,me=null,R=!0):R=!1}R||xs(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return dm(b)?r.lanes=32:r.lanes=536870912,null;Bi(r)}return b=u.children,u=u.fallback,f?(Tr(),f=r.mode,b=Oc({mode:"hidden",children:b},f),u=ws(u,f,o,null),b.return=r,u.return=r,b.sibling=u,r.child=b,f=r.child,f.memoizedState=Dd(o),f.childLanes=xd(n,E,o),r.memoizedState=Cd,u):(Er(r),Vd(r,b))}if(R=n.memoizedState,R!==null&&(b=R.dehydrated,b!==null)){if(m)r.flags&256?(Er(r),r.flags&=-257,r=Nd(n,r,o)):r.memoizedState!==null?(Tr(),r.child=n.child,r.flags|=128,r=null):(Tr(),f=u.fallback,b=r.mode,u=Oc({mode:"visible",children:u.children},b),f=ws(f,b,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,Fa(r,n.child,null,o),u=r.child,u.memoizedState=Dd(o),u.childLanes=xd(n,E,o),r.memoizedState=Cd,r=f);else if(Er(r),dm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var q=E.dgst;E=q,u=Error(i(419)),u.stack="",u.digest=E,hl({value:u,source:null,stack:null}),r=Nd(n,r,o)}else if(ke||fl(n,r,o,!1),E=(o&n.childLanes)!==0,ke||E){if(E=ie,E!==null&&(u=o&-o,u=(u&42)!==0?1:lr(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==R.retryLane))throw R.retryLane=u,Na(n,u),bn(E,n,u),Z_;b.data==="$?"||$d(),r=Nd(n,r,o)}else b.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=R.treeContext,me=Yn(b.nextSibling),sn=r,Ft=!0,Ds=null,ui=!1,n!==null&&(Pn[kn++]=Mi,Pn[kn++]=Pi,Pn[kn++]=Rs,Mi=n.id,Pi=n.overflow,Rs=r),r=Vd(r,u.children),r.flags|=4096);return r}return f?(Tr(),f=u.fallback,b=r.mode,R=n.child,q=R.sibling,u=Oi(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,q!==null?f=Oi(q,f):(f=ws(f,b,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,b=n.child.memoizedState,b===null?b=Dd(o):(R=b.cachePool,R!==null?(q=De._currentValue,R=R.parent!==q?{parent:q,pool:q}:R):R=Yp(),b={baseLanes:b.baseLanes|o,cachePool:R}),f.memoizedState=b,f.childLanes=xd(n,E,o),r.memoizedState=Cd,u):(Er(r),o=n.child,n=o.sibling,o=Oi(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=o,r.memoizedState=null,o)}function Vd(n,r){return r=Oc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Oc(n,r){return n=_n(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Nd(n,r,o){return Fa(r,n.child,null,o),n=Vd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function uy(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),$f(n.return,r,o)}function Od(n,r,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function cy(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;if(He(n,r,u.children,o),u=xe.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uy(n,o,r);else if(n.tag===19)uy(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(st(xe,u),f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&Dc(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Od(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Dc(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Od(r,!0,o,null,m);break;case"together":Od(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function zi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),wr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(fl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Oi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Oi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Md(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&dc(n)))}function sA(n,r,o){switch(r.tag){case 3:ne(r,r.stateNode.containerInfo),gr(r,De,n.memoizedState.cache),cl();break;case 27:case 5:or(r);break;case 4:ne(r,r.stateNode.containerInfo);break;case 10:gr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Er(r),r.flags|=128,null):(o&r.child.childLanes)!==0?ly(n,r,o):(Er(r),n=zi(n,r,o),n!==null?n.sibling:null);Er(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(fl(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return cy(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(xe,xe.current),u)break;return null;case 22:case 23:return r.lanes=0,iy(n,r,o);case 24:gr(r,De,n.memoizedState.cache)}return zi(n,r,o)}function hy(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)ke=!0;else{if(!Md(n,o)&&(r.flags&128)===0)return ke=!1,sA(n,r,o);ke=(n.flags&131072)!==0}else ke=!1,Ft&&(r.flags&1048576)!==0&&jp(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:t:{n=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Ff(u)?(n=Ps(u,n),r.tag=1,r=ay(null,r,u,n,o)):(r.tag=0,r=Rd(null,r,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ot){r.tag=11,r=ty(null,r,u,n,o);break t}else if(f===D){r.tag=14,r=ey(null,r,u,n,o);break t}}throw r=qe(u)||u,Error(i(306,r,""))}}return r;case 0:return Rd(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Ps(u,r.pendingProps),ay(n,r,u,f,o);case 3:t:{if(ne(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,id(n,r),vl(r,u,null,o);var E=r.memoizedState;if(u=E.cache,gr(r,De,u),u!==m.cache&&Wf(r,[De],o,!0),yl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=oy(n,r,u,o);break t}else if(u!==f){f=On(Error(i(424)),r),hl(f),r=oy(n,r,u,o);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(me=Yn(n.firstChild),sn=r,Ft=!0,Ds=null,ui=!0,o=F_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(cl(),u===f){r=zi(n,r,o);break t}He(n,r,u,o)}r=r.child}return r;case 26:return Nc(n,r),n===null?(o=gv(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ft||(o=r.type,n=r.pendingProps,u=Qc(At.current).createElement(o),u[we]=r,u[Ee]=n,Qe(u,o,n),_e(u),r.stateNode=u):r.memoizedState=gv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return or(r),n===null&&Ft&&(u=r.stateNode=fv(r.type,r.pendingProps,At.current),sn=r,ui=!0,f=me,xr(r.type)?(mm=f,me=Yn(u.firstChild)):me=f),He(n,r,r.pendingProps.children,o),Nc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ft&&((f=u=me)&&(u=OA(u,r.type,r.pendingProps,ui),u!==null?(r.stateNode=u,sn=r,me=Yn(u.firstChild),ui=!1,f=!0):f=!1),f||xs(r)),or(r),f=r.type,m=r.pendingProps,E=n!==null?n.memoizedProps:null,u=m.children,cm(f,m)?u=null:E!==null&&cm(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=ud(n,r,WS,null,null,o),jl._currentValue=f),Nc(n,r),He(n,r,u,o),r.child;case 6:return n===null&&Ft&&((n=o=me)&&(o=MA(o,r.pendingProps,ui),o!==null?(r.stateNode=o,sn=r,me=null,n=!0):n=!1),n||xs(r)),null;case 13:return ly(n,r,o);case 4:return ne(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=Fa(r,null,u,o):He(n,r,u,o),r.child;case 11:return ty(n,r,r.type,r.pendingProps,o);case 7:return He(n,r,r.pendingProps,o),r.child;case 8:return He(n,r,r.pendingProps.children,o),r.child;case 12:return He(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,gr(r,r.type,u.value),He(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Ns(r),f=We(f),u=u(f),r.flags|=1,He(n,r,u,o),r.child;case 14:return ey(n,r,r.type,r.pendingProps,o);case 15:return ny(n,r,r.type,r.pendingProps,o);case 19:return cy(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=Oc(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=Oi(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return iy(n,r,o);case 24:return Ns(r),u=We(De),n===null?(f=td(),f===null&&(f=ie,m=Jf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},nd(r),gr(r,De,f)):((n.lanes&o)!==0&&(id(n,r),vl(r,null,null,o),yl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),gr(r,De,u)):(u=m.cache,gr(r,De,u),u!==f.cache&&Wf(r,[De],o,!0))),He(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ji(n){n.flags|=4}function fy(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ev(r)){if(r=Un.current,r!==null&&((Bt&4194048)===Bt?ci!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||r!==ci))throw pl=ed,Xp;n.flags|=8192}}function Mc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Fo():536870912,n.lanes|=r,Qa|=r)}function wl(n,r){if(!Ft)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function le(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function aA(n,r,o){var u=r.pendingProps;switch(Qf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(r),null;case 1:return le(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Ui(De),Wn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ul(r)?ji(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gp())),le(r),null;case 26:return o=r.memoizedState,n===null?(ji(r),o!==null?(le(r),fy(r,o)):(le(r),r.flags&=-16777217)):o?o!==n.memoizedState?(ji(r),le(r),fy(r,o)):(le(r),r.flags&=-16777217):(n.memoizedProps!==u&&ji(r),le(r),r.flags&=-16777217),null;case 27:Ei(r),o=At.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return le(r),null}n=vt.current,ul(r)?qp(r):(n=fv(f,u,o),r.stateNode=n,ji(r))}return le(r),null;case 5:if(Ei(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return le(r),null}if(n=vt.current,ul(r))qp(r);else{switch(f=Qc(At.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[we]=r,n[Ee]=u;t:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;t:switch(Qe(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&ji(r)}}return le(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&ji(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=At.current,ul(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=sn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[we]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||sv(n.nodeValue,o)),n||xs(r)}else n=Qc(n).createTextNode(u),n[we]=r,r.stateNode=n}return le(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ul(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[we]=r}else cl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;le(r),f=!1}else f=Gp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Bi(r),r):(Bi(r),null)}if(Bi(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Mc(r,r.updateQueue),le(r),null;case 4:return Wn(),n===null&&sm(r.stateNode.containerInfo),le(r),null;case 10:return Ui(r.type),le(r),null;case 19:if(ct(xe),f=r.memoizedState,f===null)return le(r),null;if(u=(r.flags&128)!==0,m=f.rendering,m===null)if(u)wl(f,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Dc(n),m!==null){for(r.flags|=128,wl(f,!1),n=m.updateQueue,r.updateQueue=n,Mc(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)zp(o,n),o=o.sibling;return st(xe,xe.current&1|2),r.child}n=n.sibling}f.tail!==null&&Rn()>Uc&&(r.flags|=128,u=!0,wl(f,!1),r.lanes=4194304)}else{if(!u)if(n=Dc(m),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,Mc(r,n),wl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ft)return le(r),null}else 2*Rn()-f.renderingStartTime>Uc&&o!==536870912&&(r.flags|=128,u=!0,wl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Rn(),r.sibling=null,n=xe.current,st(xe,u?n&1|2:n&1),r):(le(r),null);case 22:case 23:return Bi(r),od(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(le(r),r.subtreeFlags&6&&(r.flags|=8192)):le(r),o=r.updateQueue,o!==null&&Mc(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&ct(Os),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Ui(De),le(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function oA(n,r){switch(Qf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ui(De),Wn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ei(r),null;case 13:if(Bi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));cl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ct(xe),null;case 4:return Wn(),null;case 10:return Ui(r.type),null;case 22:case 23:return Bi(r),od(),n!==null&&ct(Os),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Ui(De),null;case 25:return null;default:return null}}function dy(n,r){switch(Qf(r),r.tag){case 3:Ui(De),Wn();break;case 26:case 27:case 5:Ei(r);break;case 4:Wn();break;case 13:Bi(r);break;case 19:ct(xe);break;case 10:Ui(r.type);break;case 22:case 23:Bi(r),od(),n!==null&&ct(Os);break;case 24:Ui(De)}}function Rl(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(b){ee(r,r.return,b)}}function br(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=r;var R=o,q=b;try{q()}catch(X){ee(f,R,X)}}}u=u.next}while(u!==m)}}catch(X){ee(r,r.return,X)}}function my(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{e_(r,o)}catch(u){ee(n,n.return,u)}}}function gy(n,r,o){o.props=Ps(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ee(n,r,u)}}function Cl(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ee(n,r,f)}}function hi(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ee(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ee(n,r,f)}else o.current=null}function py(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ee(n,n.return,f)}}function Pd(n,r,o){try{var u=n.stateNode;CA(u,n.type,o,r),u[Ee]=r}catch(f){ee(n,n.return,f)}}function _y(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&xr(n.type)||n.tag===4}function kd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||_y(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ud(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Kc));else if(u!==4&&(u===27&&xr(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Ud(n,r,o),n=n.sibling;n!==null;)Ud(n,r,o),n=n.sibling}function Pc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&xr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Pc(n,r,o),n=n.sibling;n!==null;)Pc(n,r,o),n=n.sibling}function yy(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Qe(r,u,o),r[we]=n,r[Ee]=o}catch(m){ee(n,n.return,m)}}var qi=!1,ve=!1,Ld=!1,vy=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function lA(n,r){if(n=n.containerInfo,lm=Zc,n=xp(n),kf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var E=0,b=-1,R=-1,q=0,X=0,Z=n,G=null;e:for(;;){for(var H;Z!==o||f!==0&&Z.nodeType!==3||(b=E+f),Z!==m||u!==0&&Z.nodeType!==3||(R=E+u),Z.nodeType===3&&(E+=Z.nodeValue.length),(H=Z.firstChild)!==null;)G=Z,Z=H;for(;;){if(Z===n)break e;if(G===o&&++q===f&&(b=E),G===m&&++X===u&&(R=E),(H=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=H}o=b===-1||R===-1?null:{start:b,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(um={focusedElem:n,selectionRange:o},Zc=!1,Ue=r;Ue!==null;)if(r=Ue,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Ue=n;else for(;Ue!==null;){switch(r=Ue,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var St=Ps(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(St,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){ee(o,o.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)fm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":fm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Ue=n;break}Ue=r.return}}function Ey(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Sr(n,o),u&4&&Rl(5,o);break;case 1:if(Sr(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(E){ee(o,o.return,E)}else{var f=Ps(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ee(o,o.return,E)}}u&64&&my(o),u&512&&Cl(o,o.return);break;case 3:if(Sr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{e_(n,r)}catch(E){ee(o,o.return,E)}}break;case 27:r===null&&u&4&&yy(o);case 26:case 5:Sr(n,o),r===null&&u&4&&py(o),u&512&&Cl(o,o.return);break;case 12:Sr(n,o);break;case 13:Sr(n,o),u&4&&Sy(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=_A.bind(null,o),PA(n,o))));break;case 22:if(u=o.memoizedState!==null||qi,!u){r=r!==null&&r.memoizedState!==null||ve,f=qi;var m=ve;qi=u,(ve=r)&&!m?Ar(n,o,(o.subtreeFlags&8772)!==0):Sr(n,o),qi=f,ve=m}break;case 30:break;default:Sr(n,o)}}function Ty(n){var r=n.alternate;r!==null&&(n.alternate=null,Ty(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&hr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var se=null,cn=!1;function Fi(n,r,o){for(o=o.child;o!==null;)by(n,r,o),o=o.sibling}function by(n,r,o){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(de,o)}catch{}switch(o.tag){case 26:ve||hi(o,r),Fi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ve||hi(o,r);var u=se,f=cn;xr(o.type)&&(se=o.stateNode,cn=!1),Fi(n,r,o),Ul(o.stateNode),se=u,cn=f;break;case 5:ve||hi(o,r);case 6:if(u=se,f=cn,se=null,Fi(n,r,o),se=u,cn=f,se!==null)if(cn)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){ee(o,r,m)}else try{se.removeChild(o.stateNode)}catch(m){ee(o,r,m)}break;case 18:se!==null&&(cn?(n=se,cv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Hl(n)):cv(se,o.stateNode));break;case 4:u=se,f=cn,se=o.stateNode.containerInfo,cn=!0,Fi(n,r,o),se=u,cn=f;break;case 0:case 11:case 14:case 15:ve||br(2,o,r),ve||br(4,o,r),Fi(n,r,o);break;case 1:ve||(hi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&gy(o,r,u)),Fi(n,r,o);break;case 21:Fi(n,r,o);break;case 22:ve=(u=ve)||o.memoizedState!==null,Fi(n,r,o),ve=u;break;default:Fi(n,r,o)}}function Sy(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Hl(n)}catch(o){ee(r,r.return,o)}}function uA(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new vy),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new vy),r;default:throw Error(i(435,n.tag))}}function Bd(n,r){var o=uA(n);r.forEach(function(u){var f=yA.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function yn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,E=r,b=E;t:for(;b!==null;){switch(b.tag){case 27:if(xr(b.type)){se=b.stateNode,cn=!1;break t}break;case 5:se=b.stateNode,cn=!1;break t;case 3:case 4:se=b.stateNode.containerInfo,cn=!0;break t}b=b.return}if(se===null)throw Error(i(160));by(m,E,f),se=null,cn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ay(r,n),r=r.sibling}var Qn=null;function Ay(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(r,n),vn(n),u&4&&(br(3,n,n.return),Rl(3,n),br(5,n,n.return));break;case 1:yn(r,n),vn(n),u&512&&(ve||o===null||hi(o,o.return)),u&64&&qi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Qn;if(yn(r,n),vn(n),u&512&&(ve||o===null||hi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[cs]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Qe(m,u,o),m[we]=n,_e(m),u=m;break t;case"link":var E=yv("link","href",f).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(m=E[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break e}}m=f.createElement(u),Qe(m,u,o),f.head.appendChild(m);break;case"meta":if(E=yv("meta","content",f).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(m=E[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break e}}m=f.createElement(u),Qe(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[we]=n,_e(m),u=m}n.stateNode=u}else vv(f,n.type,n.stateNode);else n.stateNode=_v(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?vv(f,n.type,n.stateNode):_v(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Pd(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(r,n),vn(n),u&512&&(ve||o===null||hi(o,o.return)),o!==null&&u&4&&Pd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(r,n),vn(n),u&512&&(ve||o===null||hi(o,o.return)),n.flags&32){f=n.stateNode;try{Dn(f,"")}catch(H){ee(n,n.return,H)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Pd(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Ld=!0);break;case 6:if(yn(r,n),vn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(H){ee(n,n.return,H)}}break;case 3:if($c=null,f=Qn,Qn=Yc(r.containerInfo),yn(r,n),Qn=f,vn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Hl(r.containerInfo)}catch(H){ee(n,n.return,H)}Ld&&(Ld=!1,Iy(n));break;case 4:u=Qn,Qn=Yc(n.stateNode.containerInfo),yn(r,n),vn(n),Qn=u;break;case 12:yn(r,n),vn(n);break;case 13:yn(r,n),vn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Hd=Rn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bd(n,u)));break;case 22:f=n.memoizedState!==null;var R=o!==null&&o.memoizedState!==null,q=qi,X=ve;if(qi=q||f,ve=X||R,yn(r,n),ve=X,qi=q,vn(n),u&8192)t:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||R||qi||ve||ks(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){R=o=r;try{if(m=R.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=R.stateNode;var Z=R.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(H){ee(R,R.return,H)}}}else if(r.tag===6){if(o===null){R=r;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(H){ee(R,R.return,H)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Bd(n,o))));break;case 19:yn(r,n),vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bd(n,u)));break;case 30:break;case 21:break;default:yn(r,n),vn(n)}}function vn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(_y(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=kd(n);Pc(n,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(Dn(E,""),o.flags&=-33);var b=kd(n);Pc(n,b,E);break;case 3:case 4:var R=o.stateNode.containerInfo,q=kd(n);Ud(n,q,R);break;default:throw Error(i(161))}}catch(X){ee(n,n.return,X)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Iy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Iy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Sr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ey(n,r.alternate,r),r=r.sibling}function ks(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:br(4,r,r.return),ks(r);break;case 1:hi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&gy(r,r.return,o),ks(r);break;case 27:Ul(r.stateNode);case 26:case 5:hi(r,r.return),ks(r);break;case 22:r.memoizedState===null&&ks(r);break;case 30:ks(r);break;default:ks(r)}n=n.sibling}}function Ar(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Ar(f,m,o),Rl(4,m);break;case 1:if(Ar(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){ee(u,u.return,q)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)t_(R[f],b)}catch(q){ee(u,u.return,q)}}o&&E&64&&my(m),Cl(m,m.return);break;case 27:yy(m);case 26:case 5:Ar(f,m,o),o&&u===null&&E&4&&py(m),Cl(m,m.return);break;case 12:Ar(f,m,o);break;case 13:Ar(f,m,o),o&&E&4&&Sy(f,m);break;case 22:m.memoizedState===null&&Ar(f,m,o),Cl(m,m.return);break;case 30:break;default:Ar(f,m,o)}r=r.sibling}}function zd(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&dl(o))}function jd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&dl(n))}function fi(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)wy(n,r,o,u),r=r.sibling}function wy(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:fi(n,r,o,u),f&2048&&Rl(9,r);break;case 1:fi(n,r,o,u);break;case 3:fi(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&dl(n)));break;case 12:if(f&2048){fi(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,E=m.id,b=m.onPostCommit;typeof b=="function"&&b(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){ee(r,r.return,R)}}else fi(n,r,o,u);break;case 13:fi(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?fi(n,r,o,u):Dl(n,r):m._visibility&2?fi(n,r,o,u):(m._visibility|=2,Ga(n,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&zd(E,r);break;case 24:fi(n,r,o,u),f&2048&&jd(r.alternate,r);break;default:fi(n,r,o,u)}}function Ga(n,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,E=r,b=o,R=u,q=E.flags;switch(E.tag){case 0:case 11:case 15:Ga(m,E,b,R,f),Rl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?Ga(m,E,b,R,f):Dl(m,E):(X._visibility|=2,Ga(m,E,b,R,f)),f&&q&2048&&zd(E.alternate,E);break;case 24:Ga(m,E,b,R,f),f&&q&2048&&jd(E.alternate,E);break;default:Ga(m,E,b,R,f)}r=r.sibling}}function Dl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:Dl(o,u),f&2048&&zd(u.alternate,u);break;case 24:Dl(o,u),f&2048&&jd(u.alternate,u);break;default:Dl(o,u)}r=r.sibling}}var xl=8192;function Ha(n){if(n.subtreeFlags&xl)for(n=n.child;n!==null;)Ry(n),n=n.sibling}function Ry(n){switch(n.tag){case 26:Ha(n),n.flags&xl&&n.memoizedState!==null&&YA(Qn,n.memoizedState,n.memoizedProps);break;case 5:Ha(n);break;case 3:case 4:var r=Qn;Qn=Yc(n.stateNode.containerInfo),Ha(n),Qn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=xl,xl=16777216,Ha(n),xl=r):Ha(n));break;default:Ha(n)}}function Cy(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ue=u,xy(u,n)}Cy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Dy(n),n=n.sibling}function Dy(n){switch(n.tag){case 0:case 11:case 15:Vl(n),n.flags&2048&&br(9,n,n.return);break;case 3:Vl(n);break;case 12:Vl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,kc(n)):Vl(n);break;default:Vl(n)}}function kc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ue=u,xy(u,n)}Cy(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:br(8,r,r.return),kc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,kc(r));break;default:kc(r)}n=n.sibling}}function xy(n,r){for(;Ue!==null;){var o=Ue;switch(o.tag){case 0:case 11:case 15:br(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:dl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ue=u;else t:for(o=n;Ue!==null;){u=Ue;var f=u.sibling,m=u.return;if(Ty(u),u===o){Ue=null;break t}if(f!==null){f.return=m,Ue=f;break t}Ue=m}}}var cA={getCacheForType:function(n){var r=We(De),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},hA=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ie=null,Ot=null,Bt=0,Qt=0,En=null,Ir=!1,Ka=!1,qd=!1,Gi=0,ge=0,wr=0,Us=0,Fd=0,Ln=0,Qa=0,Nl=null,hn=null,Gd=!1,Hd=0,Uc=1/0,Lc=null,Rr=null,Ke=0,Cr=null,Ya=null,Xa=0,Kd=0,Qd=null,Vy=null,Ol=0,Yd=null;function Tn(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(Y.T!==null){var n=ka;return n!==0?n:em()}return ur()}function Ny(){Ln===0&&(Ln=(Bt&536870912)===0||Ft?qo():536870912);var n=Un.current;return n!==null&&(n.flags|=32),Ln}function bn(n,r,o){(n===ie&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&($a(n,0),Dr(n,Bt,Ln,!1)),bi(n,o),((Kt&2)===0||n!==ie)&&(n===ie&&((Kt&2)===0&&(Us|=o),ge===4&&Dr(n,Bt,Ln,!1)),di(n))}function Oy(n,r,o){if((Kt&6)!==0)throw Error(i(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||us(n,r),f=u?mA(n,r):Wd(n,r,!0),m=u;do{if(f===0){Ka&&!u&&Dr(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!fA(o)){f=Wd(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var b=n;f=Nl;var R=b.current.memoizedState.isDehydrated;if(R&&($a(b,E).flags|=256),E=Wd(b,E,!1),E!==2){if(qd&&!R){b.errorRecoveryDisabledLanes|=m,Us|=m,f=4;break t}m=hn,hn=f,m!==null&&(hn===null?hn=m:hn.push.apply(hn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){$a(n,0),Dr(n,r,0,!0);break}t:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Dr(u,r,Ln,!Ir);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Hd+300-Rn(),10<f)){if(Dr(u,r,Ln,!Ir),da(u,0,!0)!==0)break t;u.timeoutHandle=lv(My.bind(null,u,o,hn,Lc,Gd,r,Ln,Us,Qa,Ir,m,2,-0,0),f);break t}My(u,o,hn,Lc,Gd,r,Ln,Us,Qa,Ir,m,0,-0,0)}}break}while(!0);di(n)}function My(n,r,o,u,f,m,E,b,R,q,X,Z,G,H){if(n.timeoutHandle=-1,Z=r.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:QA},Ry(r),Z=XA(),Z!==null)){n.cancelPendingCommit=Z(jy.bind(null,n,r,m,o,u,f,E,b,R,X,1,G,H)),Dr(n,m,E,!q);return}jy(n,r,m,o,u,f,E,b,R)}function fA(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!pn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Dr(n,r,o,u){r&=~Fd,r&=~Us,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-$e(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&Jn(n,o,r)}function Bc(){return(Kt&6)===0?(Ml(0),!1):!0}function Xd(){if(Ot!==null){if(Qt===0)var n=Ot.return;else n=Ot,ki=Vs=null,fd(n),qa=null,Al=0,n=Ot;for(;n!==null;)dy(n.alternate,n),n=n.return;Ot=null}}function $a(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,xA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Xd(),ie=n,Ot=o=Oi(n.current,null),Bt=r,Qt=0,En=null,Ir=!1,Ka=us(n,r),qd=!1,Qa=Ln=Fd=Us=wr=ge=0,hn=Nl=null,Gd=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-$e(u),m=1<<f;r|=n[f],u&=~m}return Gi=r,oc(),o}function Py(n,r){Dt=null,Y.H=wc,r===gl||r===pc?(r=Jp(),Qt=3):r===Xp?(r=Jp(),Qt=4):Qt=r===Z_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,En=r,Ot===null&&(ge=1,Vc(n,On(r,n.current)))}function ky(){var n=Y.H;return Y.H=wc,n===null?wc:n}function Uy(){var n=Y.A;return Y.A=cA,n}function $d(){ge=4,Ir||(Bt&4194048)!==Bt&&Un.current!==null||(Ka=!0),(wr&134217727)===0&&(Us&134217727)===0||ie===null||Dr(ie,Bt,Ln,!1)}function Wd(n,r,o){var u=Kt;Kt|=2;var f=ky(),m=Uy();(ie!==n||Bt!==r)&&(Lc=null,$a(n,r)),r=!1;var E=ge;t:do try{if(Qt!==0&&Ot!==null){var b=Ot,R=En;switch(Qt){case 8:Xd(),E=6;break t;case 3:case 2:case 9:case 6:Un.current===null&&(r=!0);var q=Qt;if(Qt=0,En=null,Wa(n,b,R,q),o&&Ka){E=0;break t}break;default:q=Qt,Qt=0,En=null,Wa(n,b,R,q)}}dA(),E=ge;break}catch(X){Py(n,X)}while(!0);return r&&n.shellSuspendCounter++,ki=Vs=null,Kt=u,Y.H=f,Y.A=m,Ot===null&&(ie=null,Bt=0,oc()),E}function dA(){for(;Ot!==null;)Ly(Ot)}function mA(n,r){var o=Kt;Kt|=2;var u=ky(),f=Uy();ie!==n||Bt!==r?(Lc=null,Uc=Rn()+500,$a(n,r)):Ka=us(n,r);t:do try{if(Qt!==0&&Ot!==null){r=Ot;var m=En;e:switch(Qt){case 1:Qt=0,En=null,Wa(n,r,m,1);break;case 2:case 9:if($p(m)){Qt=0,En=null,By(r);break}r=function(){Qt!==2&&Qt!==9||ie!==n||(Qt=7),di(n)},m.then(r,r);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:$p(m)?(Qt=0,En=null,By(r)):(Qt=0,En=null,Wa(n,r,m,7));break;case 5:var E=null;switch(Ot.tag){case 26:E=Ot.memoizedState;case 5:case 27:var b=Ot;if(!E||Ev(E)){Qt=0,En=null;var R=b.sibling;if(R!==null)Ot=R;else{var q=b.return;q!==null?(Ot=q,zc(q)):Ot=null}break e}}Qt=0,En=null,Wa(n,r,m,5);break;case 6:Qt=0,En=null,Wa(n,r,m,6);break;case 8:Xd(),ge=6;break t;default:throw Error(i(462))}}gA();break}catch(X){Py(n,X)}while(!0);return ki=Vs=null,Y.H=u,Y.A=f,Kt=o,Ot!==null?0:(ie=null,Bt=0,oc(),ge)}function gA(){for(;Ot!==null&&!Lo();)Ly(Ot)}function Ly(n){var r=hy(n.alternate,n,Gi);n.memoizedProps=n.pendingProps,r===null?zc(n):Ot=r}function By(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=sy(o,r,r.pendingProps,r.type,void 0,Bt);break;case 11:r=sy(o,r,r.pendingProps,r.type.render,r.ref,Bt);break;case 5:fd(r);default:dy(o,r),r=Ot=zp(r,Gi),r=hy(o,r,Gi)}n.memoizedProps=n.pendingProps,r===null?zc(n):Ot=r}function Wa(n,r,o,u){ki=Vs=null,fd(r),qa=null,Al=0;var f=r.return;try{if(rA(n,f,r,o,Bt)){ge=1,Vc(n,On(o,n.current)),Ot=null;return}}catch(m){if(f!==null)throw Ot=f,m;ge=1,Vc(n,On(o,n.current)),Ot=null;return}r.flags&32768?(Ft||u===1?n=!0:Ka||(Bt&536870912)!==0?n=!1:(Ir=n=!0,(u===2||u===9||u===3||u===6)&&(u=Un.current,u!==null&&u.tag===13&&(u.flags|=16384))),zy(r,n)):zc(r)}function zc(n){var r=n;do{if((r.flags&32768)!==0){zy(r,Ir);return}n=r.return;var o=aA(r.alternate,r,Gi);if(o!==null){Ot=o;return}if(r=r.sibling,r!==null){Ot=r;return}Ot=r=n}while(r!==null);ge===0&&(ge=5)}function zy(n,r){do{var o=oA(n.alternate,n);if(o!==null){o.flags&=32767,Ot=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ot=n;return}Ot=n=o}while(n!==null);ge=6,Ot=null}function jy(n,r,o,u,f,m,E,b,R){n.cancelPendingCommit=null;do jc();while(Ke!==0);if((Kt&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=jf,Go(n,o,m,E,b,R),n===ie&&(Ot=ie=null,Bt=0),Ya=r,Cr=n,Xa=o,Kd=m,Qd=f,Vy=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,vA(ss,function(){return Ky(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=ut.p,ut.p=2,E=Kt,Kt|=4;try{lA(n,r,o)}finally{Kt=E,ut.p=f,Y.T=u}}Ke=1,qy(),Fy(),Gy()}}function qy(){if(Ke===1){Ke=0;var n=Cr,r=Ya,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ut.p;ut.p=2;var f=Kt;Kt|=4;try{Ay(r,n);var m=um,E=xp(n.containerInfo),b=m.focusedElem,R=m.selectionRange;if(E!==b&&b&&b.ownerDocument&&Dp(b.ownerDocument.documentElement,b)){if(R!==null&&kf(b)){var q=R.start,X=R.end;if(X===void 0&&(X=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(X,b.value.length);else{var Z=b.ownerDocument||document,G=Z&&Z.defaultView||window;if(G.getSelection){var H=G.getSelection(),St=b.textContent.length,Tt=Math.min(R.start,St),Jt=R.end===void 0?Tt:Math.min(R.end,St);!H.extend&&Tt>Jt&&(E=Jt,Jt=Tt,Tt=E);var P=Cp(b,Tt),N=Cp(b,Jt);if(P&&N&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==N.node||H.focusOffset!==N.offset)){var j=Z.createRange();j.setStart(P.node,P.offset),H.removeAllRanges(),Tt>Jt?(H.addRange(j),H.extend(N.node,N.offset)):(j.setEnd(N.node,N.offset),H.addRange(j))}}}}for(Z=[],H=b;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var J=Z[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Zc=!!lm,um=lm=null}finally{Kt=f,ut.p=u,Y.T=o}}n.current=r,Ke=2}}function Fy(){if(Ke===2){Ke=0;var n=Cr,r=Ya,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ut.p;ut.p=2;var f=Kt;Kt|=4;try{Ey(n,r.alternate,r)}finally{Kt=f,ut.p=u,Y.T=o}}Ke=3}}function Gy(){if(Ke===4||Ke===3){Ke=0,ku();var n=Cr,r=Ya,o=Xa,u=Vy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ke=5:(Ke=0,Ya=Cr=null,Hy(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Rr=null),ma(o),r=r.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Y.T,f=ut.p,ut.p=2,Y.T=null;try{for(var m=n.onRecoverableError,E=0;E<u.length;E++){var b=u[E];m(b.value,{componentStack:b.stack})}}finally{Y.T=r,ut.p=f}}(Xa&3)!==0&&jc(),di(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Yd?Ol++:(Ol=0,Yd=n):Ol=0,Ml(0)}}function Hy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,dl(r)))}function jc(n){return qy(),Fy(),Gy(),Ky()}function Ky(){if(Ke!==5)return!1;var n=Cr,r=Kd;Kd=0;var o=ma(Xa),u=Y.T,f=ut.p;try{ut.p=32>o?32:o,Y.T=null,o=Qd,Qd=null;var m=Cr,E=Xa;if(Ke=0,Ya=Cr=null,Xa=0,(Kt&6)!==0)throw Error(i(331));var b=Kt;if(Kt|=4,Dy(m.current),wy(m,m.current,E,o),Kt=b,Ml(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(de,m)}catch{}return!0}finally{ut.p=f,Y.T=u,Hy(n,r)}}function Qy(n,r,o){r=On(o,r),r=wd(n.stateNode,r,2),n=yr(n,r,2),n!==null&&(bi(n,2),di(n))}function ee(n,r,o){if(n.tag===3)Qy(n,n,o);else for(;r!==null;){if(r.tag===3){Qy(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Rr===null||!Rr.has(u))){n=On(o,n),o=W_(2),u=yr(r,o,2),u!==null&&(J_(o,u,r,n),bi(u,2),di(u));break}}r=r.return}}function Jd(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new hA;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(qd=!0,f.add(o),n=pA.bind(null,n,r,o),r.then(n,n))}function pA(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ie===n&&(Bt&o)===o&&(ge===4||ge===3&&(Bt&62914560)===Bt&&300>Rn()-Hd?(Kt&2)===0&&$a(n,0):Fd|=o,Qa===Bt&&(Qa=0)),di(n)}function Yy(n,r){r===0&&(r=Fo()),n=Na(n,r),n!==null&&(bi(n,r),di(n))}function _A(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Yy(n,o)}function yA(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Yy(n,o)}function vA(n,r){return is(n,r)}var qc=null,Ja=null,Zd=!1,Fc=!1,tm=!1,Ls=0;function di(n){n!==Ja&&n.next===null&&(Ja===null?qc=Ja=n:Ja=Ja.next=n),Fc=!0,Zd||(Zd=!0,TA())}function Ml(n,r){if(!tm&&Fc){tm=!0;do for(var o=!1,u=qc;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-$e(42|n)+1)-1,m&=f&~(E&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Jy(u,m))}else m=Bt,m=da(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||us(u,m)||(o=!0,Jy(u,m));u=u.next}while(o);tm=!1}}function EA(){Xy()}function Xy(){Fc=Zd=!1;var n=0;Ls!==0&&(DA()&&(n=Ls),Ls=0);for(var r=Rn(),o=null,u=qc;u!==null;){var f=u.next,m=$y(u,r);m===0?(u.next=null,o===null?qc=f:o.next=f,f===null&&(Ja=o)):(o=u,(n!==0||(m&3)!==0)&&(Fc=!0)),u=f}Ml(n)}function $y(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-$e(m),b=1<<E,R=f[E];R===-1?((b&o)===0||(b&u)!==0)&&(f[E]=jo(b,r)):R<=r&&(n.expiredLanes|=b),m&=~b}if(r=ie,o=Bt,o=da(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&rs(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||us(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&rs(u),ma(o)){case 2:case 8:o=ha;break;case 32:o=ss;break;case 268435456:o=fa;break;default:o=ss}return u=Wy.bind(null,n),o=is(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&rs(u),n.callbackPriority=2,n.callbackNode=null,2}function Wy(n,r){if(Ke!==0&&Ke!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(jc()&&n.callbackNode!==o)return null;var u=Bt;return u=da(n,n===ie?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Oy(n,u,r),$y(n,Rn()),n.callbackNode!=null&&n.callbackNode===o?Wy.bind(null,n):null)}function Jy(n,r){if(jc())return null;Oy(n,r,!0)}function TA(){VA(function(){(Kt&6)!==0?is(Bo,EA):Xy()})}function em(){return Ls===0&&(Ls=qo()),Ls}function Zy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ea(""+n)}function tv(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function bA(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=Zy((f[Ee]||null).action),E=u.submitter;E&&(r=(r=E[Ee]||null)?Zy(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var b=new Ta("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ls!==0){var R=E?tv(f,E):new FormData(f);Td(o,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(b.preventDefault(),R=E?tv(f,E):new FormData(f),Td(o,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var nm=0;nm<zf.length;nm++){var im=zf[nm],SA=im.toLowerCase(),AA=im[0].toUpperCase()+im.slice(1);Kn(SA,"on"+AA)}Kn(Op,"onAnimationEnd"),Kn(Mp,"onAnimationIteration"),Kn(Pp,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(jS,"onTransitionRun"),Kn(qS,"onTransitionStart"),Kn(FS,"onTransitionCancel"),Kn(kp,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function ev(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var b=u[E],R=b.instance,q=b.currentTarget;if(b=b.listener,R!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=q;try{m(f)}catch(X){xc(X)}f.currentTarget=null,m=R}else for(E=0;E<u.length;E++){if(b=u[E],R=b.instance,q=b.currentTarget,b=b.listener,R!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=q;try{m(f)}catch(X){xc(X)}f.currentTarget=null,m=R}}}}function Mt(n,r){var o=r[Ko];o===void 0&&(o=r[Ko]=new Set);var u=n+"__bubble";o.has(u)||(nv(r,n,2,!1),o.add(u))}function rm(n,r,o){var u=0;r&&(u|=4),nv(o,n,u,r)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function sm(n){if(!n[Gc]){n[Gc]=!0,Qo.forEach(function(o){o!=="selectionchange"&&(IA.has(o)||rm(o,!1,n),rm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Gc]||(r[Gc]=!0,rm("selectionchange",!1,r))}}function nv(n,r,o,u){switch(wv(r)){case 2:var f=JA;break;case 8:f=ZA;break;default:f=vm}o=f.bind(null,r,o,n),f=void 0,!Vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function am(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=u.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=Si(b),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){u=m=E;continue t}b=b.parentNode}}u=u.return}Ku(function(){var q=m,X=xn(o),Z=[];t:{var G=Up.get(n);if(G!==void 0){var H=Ta,St=n;switch(n){case"keypress":if(ri(o)===0)break t;case"keydown":case"keyup":H=Ra;break;case"focusin":St="focus",H=Aa;break;case"focusout":St="blur",H=Aa;break;case"beforeblur":case"afterblur":H=Aa;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=tc;break;case Op:case Mp:case Pp:H=Ia;break;case kp:H=nc;break;case"scroll":case"scrollend":H=Qu;break;case"wheel":H=Ca;break;case"copy":case"cut":case"paste":H=wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=sl;break;case"toggle":case"beforetoggle":H=rc}var Tt=(r&4)!==0,Jt=!Tt&&(n==="scroll"||n==="scrollend"),P=Tt?G!==null?G+"Capture":null:G;Tt=[];for(var N=q,j;N!==null;){var J=N;if(j=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||j===null||P===null||(J=_s(N,P),J!=null&&Tt.push(kl(N,J,j))),Jt)break;N=N.return}0<Tt.length&&(G=new H(G,St,null,o,X),Z.push({event:G,listeners:Tt}))}}if((r&7)===0){t:{if(G=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",G&&o!==Ri&&(St=o.relatedTarget||o.fromElement)&&(Si(St)||St[Cn]))break t;if((H||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,H?(St=o.relatedTarget||o.toElement,H=q,St=St?Si(St):null,St!==null&&(Jt=l(St),Tt=St.tag,St!==Jt||Tt!==5&&Tt!==27&&Tt!==6)&&(St=null)):(H=null,St=q),H!==St)){if(Tt=Nn,J="onMouseLeave",P="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=sl,J="onPointerLeave",P="onPointerEnter",N="pointer"),Jt=H==null?G:ti(H),j=St==null?G:ti(St),G=new Tt(J,N+"leave",H,o,X),G.target=Jt,G.relatedTarget=j,J=null,Si(X)===q&&(Tt=new Tt(P,N+"enter",St,o,X),Tt.target=j,Tt.relatedTarget=Jt,J=Tt),Jt=J,H&&St)e:{for(Tt=H,P=St,N=0,j=Tt;j;j=Za(j))N++;for(j=0,J=P;J;J=Za(J))j++;for(;0<N-j;)Tt=Za(Tt),N--;for(;0<j-N;)P=Za(P),j--;for(;N--;){if(Tt===P||P!==null&&Tt===P.alternate)break e;Tt=Za(Tt),P=Za(P)}Tt=null}else Tt=null;H!==null&&iv(Z,G,H,Tt,!1),St!==null&&Jt!==null&&iv(Z,Jt,St,Tt,!0)}}t:{if(G=q?ti(q):window,H=G.nodeName&&G.nodeName.toLowerCase(),H==="select"||H==="input"&&G.type==="file")var mt=bp;else if(Ce(G))if(Sp)mt=LS;else{mt=kS;var Nt=PS}else H=G.nodeName,!H||H.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Jo(q.elementType)&&(mt=bp):mt=US;if(mt&&(mt=mt(n,q))){Ni(Z,mt,o,X);break t}Nt&&Nt(n,G,q),n==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&dr(G,"number",G.value)}switch(Nt=q?ti(q):window,n){case"focusin":(Ce(Nt)||Nt.contentEditable==="true")&&(Da=Nt,Uf=q,ll=null);break;case"focusout":ll=Uf=Da=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Vp(Z,o,X);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":Vp(Z,o,X)}var pt;if(oi)t:{switch(n){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Ut?Q(n,o)&&(bt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(bt="onCompositionStart");bt&&(y&&o.locale!=="ko"&&(Ut||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Ut&&(pt=tl()):(ii=X,mr="value"in ii?ii.value:ii.textContent,Ut=!0)),Nt=Hc(q,bt),0<Nt.length&&(bt=new il(bt,n,null,o,X),Z.push({event:bt,listeners:Nt}),pt?bt.data=pt:(pt=at(o),pt!==null&&(bt.data=pt)))),(pt=_?Re(n,o):Lt(n,o))&&(bt=Hc(q,"onBeforeInput"),0<bt.length&&(Nt=new il("onBeforeInput","beforeinput",null,o,X),Z.push({event:Nt,listeners:bt}),Nt.data=pt)),bA(Z,n,q,o,X)}ev(Z,r)})}function kl(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Hc(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=_s(n,o),f!=null&&u.unshift(kl(n,f,m)),f=_s(n,r),f!=null&&u.push(kl(n,f,m))),n.tag===3)return u;n=n.return}return[]}function Za(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function iv(n,r,o,u,f){for(var m=r._reactName,E=[];o!==null&&o!==u;){var b=o,R=b.alternate,q=b.stateNode;if(b=b.tag,R!==null&&R===u)break;b!==5&&b!==26&&b!==27||q===null||(R=q,f?(q=_s(o,m),q!=null&&E.unshift(kl(o,q,R))):f||(q=_s(o,m),q!=null&&E.push(kl(o,q,R)))),o=o.return}E.length!==0&&n.push({event:r,listeners:E})}var wA=/\r\n?/g,RA=/\u0000|\uFFFD/g;function rv(n){return(typeof n=="string"?n:""+n).replace(wA,`
`).replace(RA,"")}function sv(n,r){return r=rv(r),rv(n)===r}function Kc(){}function Wt(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Dn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Dn(n,""+u);break;case"className":ei(n,"class",u);break;case"tabIndex":ei(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(n,o,u);break;case"style":Wo(n,u,m);break;case"data":if(r!=="object"){ei(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ea(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Wt(n,r,"name",f.name,f,null),Wt(n,r,"formEncType",f.formEncType,f,null),Wt(n,r,"formMethod",f.formMethod,f,null),Wt(n,r,"formTarget",f.formTarget,f,null)):(Wt(n,r,"encType",f.encType,f,null),Wt(n,r,"method",f.method,f,null),Wt(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ea(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Kc);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ea(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),fr(n,"popover",u);break;case"xlinkActuate":Fe(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Fe(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Fe(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Fe(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Fe(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Fe(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Fe(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Fe(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Fe(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=xf.get(o)||o,fr(n,o,u))}}function om(n,r,o,u,f,m){switch(o){case"style":Wo(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Dn(n,u):(typeof u=="number"||typeof u=="bigint")&&Dn(n,""+u);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Ee]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):fr(n,o,u)}}}function Qe(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Wt(n,r,m,E,o,null)}}f&&Wt(n,r,"srcSet",o.srcSet,o,null),u&&Wt(n,r,"src",o.src,o,null);return;case"input":Mt("invalid",n);var b=m=E=f=null,R=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":E=X;break;case"checked":R=X;break;case"defaultChecked":q=X;break;case"value":m=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:Wt(n,r,u,X,o,null)}}ms(n,m,b,R,q,E,f,!1),va(n);return;case"select":Mt("invalid",n),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:Wt(n,r,f,b,o,null)}r=m,o=E,n.multiple=!!u,r!=null?wi(n,!!u,r,!1):o!=null&&wi(n,!!u,o,!0);return;case"textarea":Mt("invalid",n),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Wt(n,r,E,b,o,null)}gs(n,u,f,m),va(n);return;case"option":for(R in o)if(o.hasOwnProperty(R)&&(u=o[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(n,r,R,u,o,null)}return;case"dialog":Mt("beforetoggle",n),Mt("toggle",n),Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(u=0;u<Pl.length;u++)Mt(Pl[u],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Wt(n,r,q,u,o,null)}return;default:if(Jo(r)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&om(n,r,X,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&Wt(n,r,b,u,o,null))}function CA(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,b=null,R=null,q=null,X=null;for(H in o){var Z=o[H];if(o.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":R=Z;default:u.hasOwnProperty(H)||Wt(n,r,H,null,u,Z)}}for(var G in u){var H=u[G];if(Z=o[G],u.hasOwnProperty(G)&&(H!=null||Z!=null))switch(G){case"type":m=H;break;case"name":f=H;break;case"checked":q=H;break;case"defaultChecked":X=H;break;case"value":E=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:H!==Z&&Wt(n,r,G,H,u,Z)}}gn(n,E,b,R,q,X,m,f);return;case"select":H=E=b=G=null;for(m in o)if(R=o[m],o.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":H=R;default:u.hasOwnProperty(m)||Wt(n,r,m,null,u,R)}for(f in u)if(m=u[f],R=o[f],u.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":G=m;break;case"defaultValue":b=m;break;case"multiple":E=m;default:m!==R&&Wt(n,r,f,m,u,R)}r=b,o=E,u=H,G!=null?wi(n,!!o,G,!1):!!u!=!!o&&(r!=null?wi(n,!!o,r,!0):wi(n,!!o,o?[]:"",!1));return;case"textarea":H=G=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Wt(n,r,b,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":G=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Wt(n,r,E,f,u,m)}Xt(n,G,H);return;case"option":for(var St in o)if(G=o[St],o.hasOwnProperty(St)&&G!=null&&!u.hasOwnProperty(St))switch(St){case"selected":n.selected=!1;break;default:Wt(n,r,St,null,u,G)}for(R in u)if(G=u[R],H=o[R],u.hasOwnProperty(R)&&G!==H&&(G!=null||H!=null))switch(R){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Wt(n,r,R,G,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in o)G=o[Tt],o.hasOwnProperty(Tt)&&G!=null&&!u.hasOwnProperty(Tt)&&Wt(n,r,Tt,null,u,G);for(q in u)if(G=u[q],H=o[q],u.hasOwnProperty(q)&&G!==H&&(G!=null||H!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:Wt(n,r,q,G,u,H)}return;default:if(Jo(r)){for(var Jt in o)G=o[Jt],o.hasOwnProperty(Jt)&&G!==void 0&&!u.hasOwnProperty(Jt)&&om(n,r,Jt,void 0,u,G);for(X in u)G=u[X],H=o[X],!u.hasOwnProperty(X)||G===H||G===void 0&&H===void 0||om(n,r,X,G,u,H);return}}for(var P in o)G=o[P],o.hasOwnProperty(P)&&G!=null&&!u.hasOwnProperty(P)&&Wt(n,r,P,null,u,G);for(Z in u)G=u[Z],H=o[Z],!u.hasOwnProperty(Z)||G===H||G==null&&H==null||Wt(n,r,Z,G,u,H)}var lm=null,um=null;function Qc(n){return n.nodeType===9?n:n.ownerDocument}function av(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ov(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function cm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hm=null;function DA(){var n=window.event;return n&&n.type==="popstate"?n===hm?!1:(hm=n,!0):(hm=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,xA=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(n){return uv.resolve(null).then(n).catch(NA)}:lv;function NA(n){setTimeout(function(){throw n})}function xr(n){return n==="head"}function cv(n,r){var o=r,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&Ul(E.documentElement),o&2&&Ul(E.body),o&4)for(o=E.head,Ul(o),E=o.firstChild;E;){var b=E.nextSibling,R=E.nodeName;E[cs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(f===0){n.removeChild(m),Hl(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Hl(r)}function fm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":fm(o),hr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function OA(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[cs])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function MA(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yn(n.nextSibling),n===null))return null;return n}function dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function PA(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var mm=null;function hv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function fv(n,r,o){switch(r=Qc(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Ul(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);hr(n)}var Bn=new Map,dv=new Set;function Yc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Hi=ut.d;ut.d={f:kA,r:UA,D:LA,C:BA,L:zA,m:jA,X:FA,S:qA,M:GA};function kA(){var n=Hi.f(),r=Bc();return n||r}function UA(n){var r=Zn(n);r!==null&&r.tag===5&&r.type==="form"?O_(r):Hi.r(n)}var to=typeof document>"u"?null:document;function mv(n,r,o){var u=to;if(u&&typeof r=="string"&&r){var f=Te(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),dv.has(f)||(dv.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Qe(r,"link",n),_e(r),u.head.appendChild(r)))}}function LA(n){Hi.D(n),mv("dns-prefetch",n,null)}function BA(n,r){Hi.C(n,r),mv("preconnect",n,r)}function zA(n,r,o){Hi.L(n,r,o);var u=to;if(u&&n&&r){var f='link[rel="preload"][as="'+Te(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Te(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Te(o.imageSizes)+'"]')):f+='[href="'+Te(n)+'"]';var m=f;switch(r){case"style":m=eo(n);break;case"script":m=no(n)}Bn.has(m)||(n=v({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Bn.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(Ll(m))||r==="script"&&u.querySelector(Bl(m))||(r=u.createElement("link"),Qe(r,"link",n),_e(r),u.head.appendChild(r)))}}function jA(n,r){Hi.m(n,r);var o=to;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=no(n)}if(!Bn.has(m)&&(n=v({rel:"modulepreload",href:n},r),Bn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bl(m)))return}u=o.createElement("link"),Qe(u,"link",n),_e(u),o.head.appendChild(u)}}}function qA(n,r,o){Hi.S(n,r,o);var u=to;if(u&&n){var f=en(u).hoistableStyles,m=eo(n);r=r||"default";var E=f.get(m);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(Ll(m)))b.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Bn.get(m))&&gm(n,o);var R=E=u.createElement("link");_e(R),Qe(R,"link",n),R._p=new Promise(function(q,X){R.onload=q,R.onerror=X}),R.addEventListener("load",function(){b.loading|=1}),R.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xc(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(m,E)}}}function FA(n,r){Hi.X(n,r);var o=to;if(o&&n){var u=en(o).hoistableScripts,f=no(n),m=u.get(f);m||(m=o.querySelector(Bl(f)),m||(n=v({src:n,async:!0},r),(r=Bn.get(f))&&pm(n,r),m=o.createElement("script"),_e(m),Qe(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function GA(n,r){Hi.M(n,r);var o=to;if(o&&n){var u=en(o).hoistableScripts,f=no(n),m=u.get(f);m||(m=o.querySelector(Bl(f)),m||(n=v({src:n,async:!0,type:"module"},r),(r=Bn.get(f))&&pm(n,r),m=o.createElement("script"),_e(m),Qe(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function gv(n,r,o,u){var f=(f=At.current)?Yc(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=eo(o.href),o=en(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=eo(o.href);var m=en(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(Ll(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Bn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bn.set(n,o),m||HA(f,n,o,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=no(o),o=en(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function eo(n){return'href="'+Te(n)+'"'}function Ll(n){return'link[rel="stylesheet"]['+n+"]"}function pv(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function HA(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Qe(r,"link",o),_e(r),n.head.appendChild(r))}function no(n){return'[src="'+Te(n)+'"]'}function Bl(n){return"script[async]"+n}function _v(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Te(o.href)+'"]');if(u)return r.instance=u,_e(u),u;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_e(u),Qe(u,"style",f),Xc(u,o.precedence,n),r.instance=u;case"stylesheet":f=eo(o.href);var m=n.querySelector(Ll(f));if(m)return r.state.loading|=4,r.instance=m,_e(m),m;u=pv(o),(f=Bn.get(f))&&gm(u,f),m=(n.ownerDocument||n).createElement("link"),_e(m);var E=m;return E._p=new Promise(function(b,R){E.onload=b,E.onerror=R}),Qe(m,"link",u),r.state.loading|=4,Xc(m,o.precedence,n),r.instance=m;case"script":return m=no(o.src),(f=n.querySelector(Bl(m)))?(r.instance=f,_e(f),f):(u=o,(f=Bn.get(m))&&(u=v({},o),pm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),_e(f),Qe(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Xc(u,o.precedence,n));return r.instance}function Xc(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===r)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function gm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function pm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var $c=null;function yv(n,r,o){if($c===null){var u=new Map,f=$c=new Map;f.set(o,u)}else f=$c,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[cs]||m[we]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=n+E;var b=u.get(E);b?b.push(m):u.set(E,[m])}}return u}function vv(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function KA(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ev(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var zl=null;function QA(){}function YA(n,r,o){if(zl===null)throw Error(i(475));var u=zl;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=eo(o.href),m=n.querySelector(Ll(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Wc.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=m,_e(m);return}m=n.ownerDocument||n,o=pv(o),(f=Bn.get(f))&&gm(o,f),m=m.createElement("link"),_e(m);var E=m;E._p=new Promise(function(b,R){E.onload=b,E.onerror=R}),Qe(m,"link",o),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Wc.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function XA(){if(zl===null)throw Error(i(475));var n=zl;return n.stylesheets&&n.count===0&&_m(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&_m(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Wc(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jc=null;function _m(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jc=new Map,r.forEach($A,n),Jc=null,Wc.call(n))}function $A(n,r){if(!(r.state.loading&4)){var o=Jc.get(n);if(o)var u=o.get(null);else{o=new Map,Jc.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=Wc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var jl={$$typeof:W,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function WA(n,r,o,u,f,m,E,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Tv(n,r,o,u,f,m,E,b,R,q,X,Z){return n=new WA(n,r,o,E,b,R,q,Z),r=1,m===!0&&(r|=24),m=_n(3,null,null,r),n.current=m,m.stateNode=n,r=Jf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},nd(m),n}function bv(n){return n?(n=Oa,n):Oa}function Sv(n,r,o,u,f,m){f=bv(f),u.context===null?u.context=f:u.pendingContext=f,u=_r(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=yr(n,u,r),o!==null&&(bn(o,n,r),_l(o,n,r))}function Av(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function ym(n,r){Av(n,r),(n=n.alternate)&&Av(n,r)}function Iv(n){if(n.tag===13){var r=Na(n,67108864);r!==null&&bn(r,n,67108864),ym(n,67108864)}}var Zc=!0;function JA(n,r,o,u){var f=Y.T;Y.T=null;var m=ut.p;try{ut.p=2,vm(n,r,o,u)}finally{ut.p=m,Y.T=f}}function ZA(n,r,o,u){var f=Y.T;Y.T=null;var m=ut.p;try{ut.p=8,vm(n,r,o,u)}finally{ut.p=m,Y.T=f}}function vm(n,r,o,u){if(Zc){var f=Em(u);if(f===null)am(n,r,u,th,o),Rv(n,u);else if(eI(f,n,r,o,u))u.stopPropagation();else if(Rv(n,u),r&4&&-1<tI.indexOf(n)){for(;f!==null;){var m=Zn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Fn(m.pendingLanes);if(E!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var R=1<<31-$e(E);b.entanglements[1]|=R,E&=~R}di(m),(Kt&6)===0&&(Uc=Rn()+500,Ml(0))}}break;case 13:b=Na(m,2),b!==null&&bn(b,m,2),Bc(),ym(m,2)}if(m=Em(u),m===null&&am(n,r,u,th,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else am(n,r,u,null,o)}}function Em(n){return n=xn(n),Tm(n)}var th=null;function Tm(n){if(th=null,n=Si(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return th=n,null}function wv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Af()){case Bo:return 2;case ha:return 8;case ss:case If:return 32;case fa:return 268435456;default:return 32}default:return 32}}var bm=!1,Vr=null,Nr=null,Or=null,ql=new Map,Fl=new Map,Mr=[],tI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(n,r){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(r.pointerId)}}function Gl(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Zn(r),r!==null&&Iv(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function eI(n,r,o,u,f){switch(r){case"focusin":return Vr=Gl(Vr,n,r,o,u,f),!0;case"dragenter":return Nr=Gl(Nr,n,r,o,u,f),!0;case"mouseover":return Or=Gl(Or,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return ql.set(m,Gl(ql.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Fl.set(m,Gl(Fl.get(m)||null,n,r,o,u,f)),!0}return!1}function Cv(n){var r=Si(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,Bu(n.priority,function(){if(o.tag===13){var u=Tn();u=lr(u);var f=Na(o,u);f!==null&&bn(f,o,u),ym(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Em(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ri=u,o.target.dispatchEvent(u),Ri=null}else return r=Zn(o),r!==null&&Iv(r),n.blockedOn=o,!1;r.shift()}return!0}function Dv(n,r,o){eh(n)&&o.delete(r)}function nI(){bm=!1,Vr!==null&&eh(Vr)&&(Vr=null),Nr!==null&&eh(Nr)&&(Nr=null),Or!==null&&eh(Or)&&(Or=null),ql.forEach(Dv),Fl.forEach(Dv)}function nh(n,r){n.blockedOn===r&&(n.blockedOn=null,bm||(bm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nI)))}var ih=null;function xv(n){ih!==n&&(ih=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ih===n&&(ih=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(Tm(u||o)===null)continue;break}var m=Zn(o);m!==null&&(n.splice(r,3),r-=3,Td(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Hl(n){function r(R){return nh(R,n)}Vr!==null&&nh(Vr,n),Nr!==null&&nh(Nr,n),Or!==null&&nh(Or,n),ql.forEach(r),Fl.forEach(r);for(var o=0;o<Mr.length;o++){var u=Mr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Mr.length&&(o=Mr[0],o.blockedOn===null);)Cv(o),o.blockedOn===null&&Mr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[Ee]||null;if(typeof m=="function")E||xv(o);else if(E){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Ee]||null)b=E.formAction;else if(Tm(f)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),xv(o)}}}function Sm(n){this._internalRoot=n}rh.prototype.render=Sm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Tn();Sv(o,u,n,r,null,null)},rh.prototype.unmount=Sm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Sv(n.current,2,null,n,null,null),Bc(),r[Cn]=null}};function rh(n){this._internalRoot=n}rh.prototype.unstable_scheduleHydration=function(n){if(n){var r=ur();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Mr.length&&r!==0&&r<Mr[o].priority;o++);Mr.splice(o,0,n),o===0&&Cv(n)}};var Vv=t.version;if(Vv!=="19.1.0")throw Error(i(527,Vv,"19.1.0"));ut.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var iI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{de=sh.inject(iI),Ht=sh}catch{}}return Ql.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=Q_,m=Y_,E=X_,b=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=Tv(n,1,!1,null,null,o,u,f,m,E,b,null),n[Cn]=r.current,sm(n),new Sm(r)},Ql.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=Q_,E=Y_,b=X_,R=null,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks),o.formState!==void 0&&(q=o.formState)),r=Tv(n,1,!0,r,o??null,u,f,m,E,b,R,q),r.context=bv(null),o=r.current,u=Tn(),u=lr(u),f=_r(u),f.callback=null,yr(o,f,u),o=u,r.current.lanes=o,bi(r,o),di(r),n[Cn]=r.current,sm(n),new rh(r)},Ql.version="19.1.0",Ql}var jv;function mI(){if(jv)return wm.exports;jv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),wm.exports=dI(),wm.exports}var gI=mI();const pI=xT(gI);NT();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},uu.apply(this,arguments)}var Fr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Fr||(Fr={}));const qv="popstate";function _I(s){s===void 0&&(s={});function t(i,a){let{pathname:l,search:c,hash:d}=i.location;return Fm("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Rh(a)}return vI(t,e,null,s)}function ce(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function OT(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yI(){return Math.random().toString(36).substr(2,8)}function Fv(s,t){return{usr:s.state,key:s.key,idx:t}}function Fm(s,t,e,i){return e===void 0&&(e=null),uu({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Vo(t):t,{state:e,key:t&&t.key||i||yI()})}function Rh(s){let{pathname:t="/",search:e="",hash:i=""}=s;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Vo(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substr(e),s=s.substr(0,e));let i=s.indexOf("?");i>=0&&(t.search=s.substr(i),s=s.substr(0,i)),s&&(t.pathname=s)}return t}function vI(s,t,e,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d=Fr.Pop,g=null,p=v();p==null&&(p=0,c.replaceState(uu({},c.state,{idx:p}),""));function v(){return(c.state||{idx:null}).idx}function T(){d=Fr.Pop;let L=v(),nt=L==null?null:L-p;p=L,g&&g({action:d,location:z.location,delta:nt})}function I(L,nt){d=Fr.Push;let tt=Fm(z.location,L,nt);p=v()+1;let W=Fv(tt,p),ot=z.createHref(tt);try{c.pushState(W,"",ot)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;a.location.assign(ot)}l&&g&&g({action:d,location:z.location,delta:1})}function M(L,nt){d=Fr.Replace;let tt=Fm(z.location,L,nt);p=v();let W=Fv(tt,p),ot=z.createHref(tt);c.replaceState(W,"",ot),l&&g&&g({action:d,location:z.location,delta:0})}function K(L){let nt=a.location.origin!=="null"?a.location.origin:a.location.href,tt=typeof L=="string"?L:Rh(L);return tt=tt.replace(/ $/,"%20"),ce(nt,"No window.location.(origin|href) available to create URL for href: "+tt),new URL(tt,nt)}let z={get action(){return d},get location(){return s(a,c)},listen(L){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(qv,T),g=L,()=>{a.removeEventListener(qv,T),g=null}},createHref(L){return t(a,L)},createURL:K,encodeLocation(L){let nt=K(L);return{pathname:nt.pathname,search:nt.search,hash:nt.hash}},push:I,replace:M,go(L){return c.go(L)}};return z}var Gv;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Gv||(Gv={}));function EI(s,t,e){return e===void 0&&(e="/"),TI(s,t,e)}function TI(s,t,e,i){let a=typeof t=="string"?Vo(t):t,l=vo(a.pathname||"/",e);if(l==null)return null;let c=MT(s);bI(c);let d=null;for(let g=0;d==null&&g<c.length;++g){let p=OI(l);d=VI(c[g],p)}return d}function MT(s,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let a=(l,c,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};g.relativePath.startsWith("/")&&(ce(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let p=Hr([i,g.relativePath]),v=e.concat(g);l.children&&l.children.length>0&&(ce(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),MT(l.children,t,v,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:DI(p,l.index),routesMeta:v})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let g of PT(l.path))a(l,c,g)}),t}function PT(s){let t=s.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=PT(i.join("/")),d=[];return d.push(...c.map(g=>g===""?l:[l,g].join("/"))),a&&d.push(...c),d.map(g=>s.startsWith("/")&&g===""?"/":g)}function bI(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:xI(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const SI=/^:[\w-]+$/,AI=3,II=2,wI=1,RI=10,CI=-2,Hv=s=>s==="*";function DI(s,t){let e=s.split("/"),i=e.length;return e.some(Hv)&&(i+=CI),t&&(i+=II),e.filter(a=>!Hv(a)).reduce((a,l)=>a+(SI.test(l)?AI:l===""?wI:RI),i)}function xI(s,t){return s.length===t.length&&s.slice(0,-1).every((i,a)=>i===t[a])?s[s.length-1]-t[t.length-1]:0}function VI(s,t,e){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let g=i[d],p=d===i.length-1,v=l==="/"?t:t.slice(l.length)||"/",T=Gm({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),I=g.route;if(!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Hr([l,T.pathname]),pathnameBase:UI(Hr([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=Hr([l,T.pathnameBase]))}return c}function Gm(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,i]=NI(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,v,T)=>{let{paramName:I,isOptional:M}=v;if(I==="*"){let z=d[T]||"";c=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const K=d[T];return M&&!K?p[I]=void 0:p[I]=(K||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function NI(s,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),OT(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,g)=>(i.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function OI(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return OT(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function vo(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=s.charAt(e);return i&&i!=="/"?null:s.slice(e)||"/"}function MI(s,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:a=""}=typeof s=="string"?Vo(s):s;return{pathname:e?e.startsWith("/")?e:PI(e,t):t,search:LI(i),hash:BI(a)}}function PI(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function xm(s,t,e,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kI(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function bg(s,t){let e=kI(s);return t?e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function Sg(s,t,e,i){i===void 0&&(i=!1);let a;typeof s=="string"?a=Vo(s):(a=uu({},s),ce(!a.pathname||!a.pathname.includes("?"),xm("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),xm("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),xm("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=e;else{let T=t.length-1;if(!i&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),T-=1;a.pathname=I.join("/")}d=T>=0?t[T]:"/"}let g=MI(a,d),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&e.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}const Hr=s=>s.join("/").replace(/\/\/+/g,"/"),UI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),LI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,BI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function zI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const kT=["post","put","patch","delete"];new Set(kT);const jI=["get",...kT];new Set(jI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},cu.apply(this,arguments)}const Xh=$.createContext(null),UT=$.createContext(null),nr=$.createContext(null),$h=$.createContext(null),ir=$.createContext({outlet:null,matches:[],isDataRoute:!1}),LT=$.createContext(null);function qI(s,t){let{relative:e}=t===void 0?{}:t;No()||ce(!1);let{basename:i,navigator:a}=$.useContext(nr),{hash:l,pathname:c,search:d}=Jh(s,{relative:e}),g=c;return i!=="/"&&(g=c==="/"?i:Hr([i,c])),a.createHref({pathname:g,search:d,hash:l})}function No(){return $.useContext($h)!=null}function rr(){return No()||ce(!1),$.useContext($h).location}function BT(s){$.useContext(nr).static||$.useLayoutEffect(s)}function Wh(){let{isDataRoute:s}=$.useContext(ir);return s?iw():FI()}function FI(){No()||ce(!1);let s=$.useContext(Xh),{basename:t,future:e,navigator:i}=$.useContext(nr),{matches:a}=$.useContext(ir),{pathname:l}=rr(),c=JSON.stringify(bg(a,e.v7_relativeSplatPath)),d=$.useRef(!1);return BT(()=>{d.current=!0}),$.useCallback(function(p,v){if(v===void 0&&(v={}),!d.current)return;if(typeof p=="number"){i.go(p);return}let T=Sg(p,JSON.parse(c),l,v.relative==="path");s==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:Hr([t,T.pathname])),(v.replace?i.replace:i.push)(T,v.state,v)},[t,i,c,l,s])}const GI=$.createContext(null);function HI(s){let t=$.useContext(ir).outlet;return t&&$.createElement(GI.Provider,{value:s},t)}function Jh(s,t){let{relative:e}=t===void 0?{}:t,{future:i}=$.useContext(nr),{matches:a}=$.useContext(ir),{pathname:l}=rr(),c=JSON.stringify(bg(a,i.v7_relativeSplatPath));return $.useMemo(()=>Sg(s,JSON.parse(c),l,e==="path"),[s,c,l,e])}function KI(s,t){return QI(s,t)}function QI(s,t,e,i){No()||ce(!1);let{navigator:a,static:l}=$.useContext(nr),{matches:c}=$.useContext(ir),d=c[c.length-1],g=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let v=rr(),T;if(t){var I;let nt=typeof t=="string"?Vo(t):t;p==="/"||(I=nt.pathname)!=null&&I.startsWith(p)||ce(!1),T=nt}else T=v;let M=T.pathname||"/",K=M;if(p!=="/"){let nt=p.replace(/^\//,"").split("/");K="/"+M.replace(/^\//,"").split("/").slice(nt.length).join("/")}let z=EI(s,{pathname:K}),L=JI(z&&z.map(nt=>Object.assign({},nt,{params:Object.assign({},g,nt.params),pathname:Hr([p,a.encodeLocation?a.encodeLocation(nt.pathname).pathname:nt.pathname]),pathnameBase:nt.pathnameBase==="/"?p:Hr([p,a.encodeLocation?a.encodeLocation(nt.pathnameBase).pathname:nt.pathnameBase])})),c,e,i);return t&&L?$.createElement($h.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:Fr.Pop}},L):L}function YI(){let s=nw(),t=zI(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),e?$.createElement("pre",{style:a},e):null,null)}const XI=$.createElement(YI,null);class $I extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?$.createElement(ir.Provider,{value:this.props.routeContext},$.createElement(LT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WI(s){let{routeContext:t,match:e,children:i}=s,a=$.useContext(Xh);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ir.Provider,{value:t},i)}function JI(s,t,e,i){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),s==null){var l;if(!e)return null;if(e.errors)s=e.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let c=s,d=(a=e)==null?void 0:a.errors;if(d!=null){let v=c.findIndex(T=>T.route.id&&(d==null?void 0:d[T.route.id])!==void 0);v>=0||ce(!1),c=c.slice(0,Math.min(c.length,v+1))}let g=!1,p=-1;if(e&&i&&i.v7_partialHydration)for(let v=0;v<c.length;v++){let T=c[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=v),T.route.id){let{loaderData:I,errors:M}=e,K=T.route.loader&&I[T.route.id]===void 0&&(!M||M[T.route.id]===void 0);if(T.route.lazy||K){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((v,T,I)=>{let M,K=!1,z=null,L=null;e&&(M=d&&T.route.id?d[T.route.id]:void 0,z=T.route.errorElement||XI,g&&(p<0&&I===0?(rw("route-fallback"),K=!0,L=null):p===I&&(K=!0,L=T.route.hydrateFallbackElement||null)));let nt=t.concat(c.slice(0,I+1)),tt=()=>{let W;return M?W=z:K?W=L:T.route.Component?W=$.createElement(T.route.Component,null):T.route.element?W=T.route.element:W=v,$.createElement(WI,{match:T,routeContext:{outlet:v,matches:nt,isDataRoute:e!=null},children:W})};return e&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?$.createElement($I,{location:e.location,revalidation:e.revalidation,component:z,error:M,children:tt(),routeContext:{outlet:null,matches:nt,isDataRoute:!0}}):tt()},null)}var zT=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(zT||{}),jT=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(jT||{});function ZI(s){let t=$.useContext(Xh);return t||ce(!1),t}function tw(s){let t=$.useContext(UT);return t||ce(!1),t}function ew(s){let t=$.useContext(ir);return t||ce(!1),t}function qT(s){let t=ew(),e=t.matches[t.matches.length-1];return e.route.id||ce(!1),e.route.id}function nw(){var s;let t=$.useContext(LT),e=tw(),i=qT();return t!==void 0?t:(s=e.errors)==null?void 0:s[i]}function iw(){let{router:s}=ZI(zT.UseNavigateStable),t=qT(jT.UseNavigateStable),e=$.useRef(!1);return BT(()=>{e.current=!0}),$.useCallback(function(a,l){l===void 0&&(l={}),e.current&&(typeof a=="number"?s.navigate(a):s.navigate(a,cu({fromRouteId:t},l)))},[s,t])}const Kv={};function rw(s,t,e){Kv[s]||(Kv[s]=!0)}function sw(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Qv(s){let{to:t,replace:e,state:i,relative:a}=s;No()||ce(!1);let{future:l,static:c}=$.useContext(nr),{matches:d}=$.useContext(ir),{pathname:g}=rr(),p=Wh(),v=Sg(t,bg(d,l.v7_relativeSplatPath),g,a==="path"),T=JSON.stringify(v);return $.useEffect(()=>p(JSON.parse(T),{replace:e,state:i,relative:a}),[p,T,a,e,i]),null}function aw(s){return HI(s.context)}function Xn(s){ce(!1)}function ow(s){let{basename:t="/",children:e=null,location:i,navigationType:a=Fr.Pop,navigator:l,static:c=!1,future:d}=s;No()&&ce(!1);let g=t.replace(/^\/*/,"/"),p=$.useMemo(()=>({basename:g,navigator:l,static:c,future:cu({v7_relativeSplatPath:!1},d)}),[g,d,l,c]);typeof i=="string"&&(i=Vo(i));let{pathname:v="/",search:T="",hash:I="",state:M=null,key:K="default"}=i,z=$.useMemo(()=>{let L=vo(v,g);return L==null?null:{location:{pathname:L,search:T,hash:I,state:M,key:K},navigationType:a}},[g,v,T,I,M,K,a]);return z==null?null:$.createElement(nr.Provider,{value:p},$.createElement($h.Provider,{children:e,value:z}))}function lw(s){let{children:t,location:e}=s;return KI(Hm(t),e)}new Promise(()=>{});function Hm(s,t){t===void 0&&(t=[]);let e=[];return $.Children.forEach(s,(i,a)=>{if(!$.isValidElement(i))return;let l=[...t,a];if(i.type===$.Fragment){e.push.apply(e,Hm(i.props.children,l));return}i.type!==Xn&&ce(!1),!i.props.index||!i.props.children||ce(!1);let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Hm(i.props.children,l)),e.push(c)}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ch(){return Ch=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},Ch.apply(this,arguments)}function FT(s,t){if(s==null)return{};var e={},i=Object.keys(s),a,l;for(l=0;l<i.length;l++)a=i[l],!(t.indexOf(a)>=0)&&(e[a]=s[a]);return e}function uw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function cw(s,t){return s.button===0&&(!t||t==="_self")&&!uw(s)}const hw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fw=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dw="6";try{window.__reactRouterVersion=dw}catch{}const mw=$.createContext({isTransitioning:!1}),gw="startTransition",Yv=uI[gw];function pw(s){let{basename:t,children:e,future:i,window:a}=s,l=$.useRef();l.current==null&&(l.current=_I({window:a,v5Compat:!0}));let c=l.current,[d,g]=$.useState({action:c.action,location:c.location}),{v7_startTransition:p}=i||{},v=$.useCallback(T=>{p&&Yv?Yv(()=>g(T)):g(T)},[g,p]);return $.useLayoutEffect(()=>c.listen(v),[c,v]),$.useEffect(()=>sw(i),[i]),$.createElement(ow,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,future:i})}const _w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GT=$.forwardRef(function(t,e){let{onClick:i,relative:a,reloadDocument:l,replace:c,state:d,target:g,to:p,preventScrollReset:v,viewTransition:T}=t,I=FT(t,hw),{basename:M}=$.useContext(nr),K,z=!1;if(typeof p=="string"&&yw.test(p)&&(K=p,_w))try{let W=new URL(window.location.href),ot=p.startsWith("//")?new URL(W.protocol+p):new URL(p),lt=vo(ot.pathname,M);ot.origin===W.origin&&lt!=null?p=lt+ot.search+ot.hash:z=!0}catch{}let L=qI(p,{relative:a}),nt=Ew(p,{replace:c,state:d,target:g,preventScrollReset:v,relative:a,viewTransition:T});function tt(W){i&&i(W),W.defaultPrevented||nt(W)}return $.createElement("a",Ch({},I,{href:K||L,onClick:z||l?i:tt,ref:e,target:g}))}),io=$.forwardRef(function(t,e){let{"aria-current":i="page",caseSensitive:a=!1,className:l="",end:c=!1,style:d,to:g,viewTransition:p,children:v}=t,T=FT(t,fw),I=Jh(g,{relative:T.relative}),M=rr(),K=$.useContext(UT),{navigator:z,basename:L}=$.useContext(nr),nt=K!=null&&Tw(I)&&p===!0,tt=z.encodeLocation?z.encodeLocation(I).pathname:I.pathname,W=M.pathname,ot=K&&K.navigation&&K.navigation.location?K.navigation.location.pathname:null;a||(W=W.toLowerCase(),ot=ot?ot.toLowerCase():null,tt=tt.toLowerCase()),ot&&L&&(ot=vo(ot,L)||ot);const lt=tt!=="/"&&tt.endsWith("/")?tt.length-1:tt.length;let dt=W===tt||!c&&W.startsWith(tt)&&W.charAt(lt)==="/",D=ot!=null&&(ot===tt||!c&&ot.startsWith(tt)&&ot.charAt(tt.length)==="/"),A={isActive:dt,isPending:D,isTransitioning:nt},w=dt?i:void 0,x;typeof l=="function"?x=l(A):x=[l,dt?"active":null,D?"pending":null,nt?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(A):d;return $.createElement(GT,Ch({},T,{"aria-current":w,className:x,ref:e,style:O,to:g,viewTransition:p}),typeof v=="function"?v(A):v)});var Km;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Km||(Km={}));var Xv;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Xv||(Xv={}));function vw(s){let t=$.useContext(Xh);return t||ce(!1),t}function Ew(s,t){let{target:e,replace:i,state:a,preventScrollReset:l,relative:c,viewTransition:d}=t===void 0?{}:t,g=Wh(),p=rr(),v=Jh(s,{relative:c});return $.useCallback(T=>{if(cw(T,e)){T.preventDefault();let I=i!==void 0?i:Rh(p)===Rh(v);g(s,{replace:I,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[p,g,v,i,a,e,s,l,c,d])}function Tw(s,t){t===void 0&&(t={});let e=$.useContext(mw);e==null&&ce(!1);let{basename:i}=vw(Km.useViewTransitionState),a=Jh(s,{relative:t.relative});if(!e.isTransitioning)return!1;let l=vo(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=vo(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Gm(a.pathname,c)!=null||Gm(a.pathname,l)!=null}var $v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=function(s){const t=[];let e=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},bw=function(s){const t=[];let e=0,i=0;for(;e<s.length;){const a=s[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[e++],c=s[e++],d=s[e++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(g>>10)),t[i++]=String.fromCharCode(56320+(g&1023))}else{const l=s[e++],c=s[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},KT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let I=(d&15)<<2|p>>6,M=p&63;g||(M=64,c||(I=64)),i.push(e[v],e[T],e[I],e[M])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(HT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):bw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const p=a<s.length?e[s.charAt(a)]:64;++a;const T=a<s.length?e[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new Sw;const I=l<<2|d>>4;if(i.push(I),p!==64){const M=d<<4&240|p>>2;if(i.push(M),T!==64){const K=p<<6&192|T;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Sw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Aw=function(s){const t=HT(s);return KT.encodeByteArray(t,!0)},Dh=function(s){return Aw(s).replace(/\./g,"")},QT=function(s){try{return KT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=()=>Iw().__FIREBASE_DEFAULTS__,Rw=()=>{if(typeof process>"u"||typeof $v>"u")return;const s=$v.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Cw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&QT(s[1]);return t&&JSON.parse(t)},Zh=()=>{try{return ww()||Rw()||Cw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},YT=s=>{var t,e;return(e=(t=Zh())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},Dw=s=>{const t=YT(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},XT=()=>{var s;return(s=Zh())===null||s===void 0?void 0:s.config},$T=s=>{var t;return(t=Zh())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Dh(JSON.stringify(e)),Dh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ow(){var s;const t=(s=Zh())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function kw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uw(){const s=Ve();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function WT(){return!Ow()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JT(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((s,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="FirebaseError";class sr extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Bw,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?zw(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new sr(a,d,i)}}function zw(s,t){return s.replace(jw,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const jw=/\{\$([^}]+)}/g;function qw(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function xh(s,t){if(s===t)return!0;const e=Object.keys(s),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=s[a],c=t[a];if(Wv(l)&&Wv(c)){if(!xh(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Wv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(s){const t=[];for(const[e,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Fw(s,t){const e=new Gw(s,t);return e.subscribe.bind(e)}class Gw{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Hw(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Vm),a.error===void 0&&(a.error=Vm),a.complete===void 0&&(a.complete=Vm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hw(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(s){return s&&s._delegate?s._delegate:s}class $s{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new xw;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Yw(t))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=zs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zs){return this.instances.has(t)}getOptions(t=zs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Qw(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=zs){return this.component?this.component.multipleInstances?t:zs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qw(s){return s===zs?void 0:s}function Yw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Kw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const $w={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Ww=Pt.INFO,Jw={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Zw=(s,t,...e)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),a=Jw[t];if(a)console[a](`[${i}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ag{constructor(t){this.name=t,this._logLevel=Ww,this._logHandler=Zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$w[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const tR=(s,t)=>t.some(e=>s instanceof e);let Jv,Zv;function eR(){return Jv||(Jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nR(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZT=new WeakMap,Qm=new WeakMap,t0=new WeakMap,Nm=new WeakMap,Ig=new WeakMap;function iR(s){const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{e(Kr(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&ZT.set(e,s)}).catch(()=>{}),Ig.set(t,s),t}function rR(s){if(Qm.has(s))return;const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Qm.set(s,t)}let Ym={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Qm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||t0.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Kr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function sR(s){Ym=s(Ym)}function aR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=s.call(Om(this),t,...e);return t0.set(i,t.sort?t.sort():[t]),Kr(i)}:nR().includes(s)?function(...t){return s.apply(Om(this),t),Kr(ZT.get(this))}:function(...t){return Kr(s.apply(Om(this),t))}}function oR(s){return typeof s=="function"?aR(s):(s instanceof IDBTransaction&&rR(s),tR(s,eR())?new Proxy(s,Ym):s)}function Kr(s){if(s instanceof IDBRequest)return iR(s);if(Nm.has(s))return Nm.get(s);const t=oR(s);return t!==s&&(Nm.set(s,t),Ig.set(t,s)),t}const Om=s=>Ig.get(s);function lR(s,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,t),d=Kr(c);return i&&c.addEventListener("upgradeneeded",g=>{i(Kr(c.result),g.oldVersion,g.newVersion,Kr(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const uR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],Mm=new Map;function tE(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Mm.get(t))return Mm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=cR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||uR.includes(e)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),a&&g.done]))[0]};return Mm.set(t,l),l}sR(s=>({...s,get:(t,e,i)=>tE(t,e)||s.get(t,e,i),has:(t,e)=>!!tE(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(fR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function fR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Xm="@firebase/app",eE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Ag("@firebase/app"),dR="@firebase/app-compat",mR="@firebase/analytics-compat",gR="@firebase/analytics",pR="@firebase/app-check-compat",_R="@firebase/app-check",yR="@firebase/auth",vR="@firebase/auth-compat",ER="@firebase/database",TR="@firebase/data-connect",bR="@firebase/database-compat",SR="@firebase/functions",AR="@firebase/functions-compat",IR="@firebase/installations",wR="@firebase/installations-compat",RR="@firebase/messaging",CR="@firebase/messaging-compat",DR="@firebase/performance",xR="@firebase/performance-compat",VR="@firebase/remote-config",NR="@firebase/remote-config-compat",OR="@firebase/storage",MR="@firebase/storage-compat",PR="@firebase/firestore",kR="@firebase/vertexai-preview",UR="@firebase/firestore-compat",LR="firebase",BR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]",zR={[Xm]:"fire-core",[dR]:"fire-core-compat",[gR]:"fire-analytics",[mR]:"fire-analytics-compat",[_R]:"fire-app-check",[pR]:"fire-app-check-compat",[yR]:"fire-auth",[vR]:"fire-auth-compat",[ER]:"fire-rtdb",[TR]:"fire-data-connect",[bR]:"fire-rtdb-compat",[SR]:"fire-fn",[AR]:"fire-fn-compat",[IR]:"fire-iid",[wR]:"fire-iid-compat",[RR]:"fire-fcm",[CR]:"fire-fcm-compat",[DR]:"fire-perf",[xR]:"fire-perf-compat",[VR]:"fire-rc",[NR]:"fire-rc-compat",[OR]:"fire-gcs",[MR]:"fire-gcs-compat",[PR]:"fire-fst",[UR]:"fire-fst-compat",[kR]:"fire-vertex","fire-js":"fire-js",[LR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,jR=new Map,Wm=new Map;function nE(s,t){try{s.container.addComponent(t)}catch(e){Zi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Eo(s){const t=s.name;if(Wm.has(t))return Zi.debug(`There were multiple attempts to register component ${t}.`),!1;Wm.set(t,s);for(const e of Vh.values())nE(e,s);for(const e of jR.values())nE(e,s);return!0}function wg(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Qi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new bu("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=BR;function e0(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const i=Object.assign({name:$m,automaticDataCollectionEnabled:!1},t),a=i.name;if(typeof a!="string"||!a)throw Qr.create("bad-app-name",{appName:String(a)});if(e||(e=XT()),!e)throw Qr.create("no-options");const l=Vh.get(a);if(l){if(xh(e,l.options)&&xh(i,l.config))return l;throw Qr.create("duplicate-app",{appName:a})}const c=new Xw(a);for(const g of Wm.values())c.addComponent(g);const d=new FR(e,i,c);return Vh.set(a,d),d}function n0(s=$m){const t=Vh.get(s);if(!t&&s===$m&&XT())return e0();if(!t)throw Qr.create("no-app",{appName:s});return t}function Yr(s,t,e){var i;let a=(i=zR[s])!==null&&i!==void 0?i:s;e&&(a+=`-${e}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Zi.warn(d.join(" "));return}Eo(new $s(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="firebase-heartbeat-database",HR=1,hu="firebase-heartbeat-store";let Pm=null;function i0(){return Pm||(Pm=lR(GR,HR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hu)}catch(e){console.warn(e)}}}}).catch(s=>{throw Qr.create("idb-open",{originalErrorMessage:s.message})})),Pm}async function KR(s){try{const e=(await i0()).transaction(hu),i=await e.objectStore(hu).get(r0(s));return await e.done,i}catch(t){if(t instanceof sr)Zi.warn(t.message);else{const e=Qr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Zi.warn(e.message)}}}async function iE(s,t){try{const i=(await i0()).transaction(hu,"readwrite");await i.objectStore(hu).put(t,r0(s)),await i.done}catch(e){if(e instanceof sr)Zi.warn(e.message);else{const i=Qr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Zi.warn(i.message)}}}function r0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,YR=30*24*60*60*1e3;class XR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new WR(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=rE();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=YR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Zi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rE(),{heartbeatsToSend:i,unsentEntries:a}=$R(this._heartbeatsCache.heartbeats),l=Dh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Zi.warn(e),""}}}function rE(){return new Date().toISOString().substring(0,10)}function $R(s,t=QR){const e=[];let i=s.slice();for(const a of s){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),sE(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),sE(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class WR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JT()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await KR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return iE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return iE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function sE(s){return Dh(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(s){Eo(new $s("platform-logger",t=>new hR(t),"PRIVATE")),Eo(new $s("heartbeat",t=>new XR(t),"PRIVATE")),Yr(Xm,eE,s),Yr(Xm,eE,"esm2017"),Yr("fire-js","")}JR("");function Rg(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(s);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(s,i[a])&&(e[i[a]]=s[i[a]]);return e}function s0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZR=s0,a0=new bu("auth","Firebase",s0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Ag("@firebase/auth");function t1(s,...t){Nh.logLevel<=Pt.WARN&&Nh.warn(`Auth (${Oo}): ${s}`,...t)}function mh(s,...t){Nh.logLevel<=Pt.ERROR&&Nh.error(`Auth (${Oo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(s,...t){throw Dg(s,...t)}function $n(s,...t){return Dg(s,...t)}function Cg(s,t,e){const i=Object.assign(Object.assign({},ZR()),{[t]:e});return new bu("auth","Firebase",i).create(t,{appName:s.name})}function Qs(s){return Cg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e1(s,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&_i(s,"argument-error"),Cg(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dg(s,...t){if(typeof s!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(e,...i)}return a0.create(s,...t)}function It(s,t,...e){if(!s)throw Dg(t,...e)}function Yi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw mh(t),new Error(t)}function tr(s,t){s||Yi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function n1(){return aE()==="http:"||aE()==="https:"}function aE(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n1()||Pw()||"connection"in navigator)?navigator.onLine:!0}function r1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,e){this.shortDelay=t,this.longDelay=e,tr(e>t,"Short delay should be less than long delay!"),this.isMobile=Nw()||kw()}get(){return i1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(s,t){tr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Au(3e4,6e4);function Vg(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Mo(s,t,e,i,a={}){return l0(s,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const d=Su(Object.assign({key:s.config.apiKey},c)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p=Object.assign({method:t,headers:g},l);return Mw()||(p.referrerPolicy="no-referrer"),o0.fetch()(u0(s,s.config.apiHost,e,d),p)})}async function l0(s,t,e){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},s1),t);try{const a=new l1(s),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ah(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw ah(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw ah(s,"user-disabled",c);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Cg(s,v,p);_i(s,v)}}catch(a){if(a instanceof sr)throw a;_i(s,"network-request-failed",{message:String(a)})}}async function o1(s,t,e,i,a={}){const l=await Mo(s,t,e,i,a);return"mfaPendingCredential"in l&&_i(s,"multi-factor-auth-required",{_serverResponse:l}),l}function u0(s,t,e,i){const a=`${t}${e}?${i}`;return s.config.emulator?xg(s.config,a):`${s.config.apiScheme}://${a}`}class l1{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),a1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ah(s,t,e){const i={appName:s.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=$n(s,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(s,t){return Mo(s,"POST","/v1/accounts:delete",t)}async function c0(s,t){return Mo(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function c1(s,t=!1){const e=je(s),i=await e.getIdToken(t),a=Ng(i);It(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:iu(km(a.auth_time)),issuedAtTime:iu(km(a.iat)),expirationTime:iu(km(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function km(s){return Number(s)*1e3}function Ng(s){const[t,e,i]=s.split(".");if(t===void 0||e===void 0||i===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{const a=QT(e);return a?JSON.parse(a):(mh("Failed to decode base64 JWT payload"),null)}catch(a){return mh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function oE(s){const t=Ng(s);return It(t,"internal-error"),It(typeof t.exp<"u","internal-error"),It(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(s,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof sr&&h1(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function h1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(s){var t;const e=s.auth,i=await s.getIdToken(),a=await fu(s,c0(e,{idToken:i}));It(a==null?void 0:a.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?h0(l.providerUserInfo):[],d=m1(s.providerData,c),g=s.isAnonymous,p=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),v=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Zm(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(s,T)}async function d1(s){const t=je(s);await Oh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function m1(s,t){return[...s.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function h0(s){return s.map(t=>{var{providerId:e}=t,i=Rg(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(s,t){const e=await l0(s,{},async()=>{const i=Su({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=u0(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",o0.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function p1(s,t){return Mo(s,"POST","/v2/accounts:revokeToken",Vg(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(typeof t.idToken<"u","internal-error"),It(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):oE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){It(t.length!==0,"internal-error");const e=oE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await g1(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new go;return i&&(It(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(It(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(It(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s,t){It(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Xi{constructor(t){var{uid:e,auth:i,stsTokenManager:a}=t,l=Rg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Zm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await fu(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return c1(this,t)}reload(){return d1(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Xi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Oh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(Qs(this.auth));const t=await this.getIdToken();return await fu(this,u1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,a,l,c,d,g,p,v;const T=(i=e.displayName)!==null&&i!==void 0?i:void 0,I=(a=e.email)!==null&&a!==void 0?a:void 0,M=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,K=(c=e.photoURL)!==null&&c!==void 0?c:void 0,z=(d=e.tenantId)!==null&&d!==void 0?d:void 0,L=(g=e._redirectEventId)!==null&&g!==void 0?g:void 0,nt=(p=e.createdAt)!==null&&p!==void 0?p:void 0,tt=(v=e.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:ot,isAnonymous:lt,providerData:dt,stsTokenManager:D}=e;It(W&&D,t,"internal-error");const A=go.fromJSON(this.name,D);It(typeof W=="string",t,"internal-error"),kr(T,t.name),kr(I,t.name),It(typeof ot=="boolean",t,"internal-error"),It(typeof lt=="boolean",t,"internal-error"),kr(M,t.name),kr(K,t.name),kr(z,t.name),kr(L,t.name),kr(nt,t.name),kr(tt,t.name);const w=new Xi({uid:W,auth:t,email:I,emailVerified:ot,displayName:T,isAnonymous:lt,photoURL:K,phoneNumber:M,tenantId:z,stsTokenManager:A,createdAt:nt,lastLoginAt:tt});return dt&&Array.isArray(dt)&&(w.providerData=dt.map(x=>Object.assign({},x))),L&&(w._redirectEventId=L),w}static async _fromIdTokenResponse(t,e,i=!1){const a=new go;a.updateFromServerResponse(e);const l=new Xi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await Oh(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];It(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?h0(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new go;d.updateFromIdToken(i);const g=new Xi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Zm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=new Map;function $i(s){tr(s instanceof Function,"Expected a class definition");let t=lE.get(s);return t?(tr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,lE.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}f0.type="NONE";const uE=f0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(s,t,e){return`firebase:${s}:${t}:${e}`}class po{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=gh(this.userKey,a.apiKey,l),this.fullPersistenceKey=gh("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Xi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new po($i(uE),t,i);const a=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||$i(uE);const c=gh(i,t.config.apiKey,t.name);let d=null;for(const p of e)try{const v=await p._get(c);if(v){const T=Xi._fromJSON(t,v);p!==l&&(d=T),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new po(l,t,i):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new po(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(p0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(d0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(y0(t))return"Blackberry";if(v0(t))return"Webos";if(m0(t))return"Safari";if((t.includes("chrome/")||g0(t))&&!t.includes("edge/"))return"Chrome";if(_0(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function d0(s=Ve()){return/firefox\//i.test(s)}function m0(s=Ve()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function g0(s=Ve()){return/crios\//i.test(s)}function p0(s=Ve()){return/iemobile/i.test(s)}function _0(s=Ve()){return/android/i.test(s)}function y0(s=Ve()){return/blackberry/i.test(s)}function v0(s=Ve()){return/webos/i.test(s)}function Og(s=Ve()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function _1(s=Ve()){var t;return Og(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function y1(){return Uw()&&document.documentMode===10}function E0(s=Ve()){return Og(s)||_0(s)||v0(s)||y0(s)||/windows phone/i.test(s)||p0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(s,t=[]){let e;switch(s){case"Browser":e=cE(Ve());break;case"Worker":e=`${cE(Ve())}-${s}`;break;default:e=s}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Oo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(s,t={}){return Mo(s,"GET","/v2/passwordPolicy",Vg(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=6;class b1{constructor(t){var e,i,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:T1,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(e=g.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hE(this),this.idTokenSubscription=new hE(this),this.beforeStateQueue=new v1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=$i(e)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await po.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await c0(this,{idToken:t}),i=await Xi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Qi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,d=a==null?void 0:a._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&(g!=null&&g.user)&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Oh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=r1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Qi(this.app))return Promise.reject(Qs(this));const e=t?je(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Qi(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await E1(this),e=new b1(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new bu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await p1(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&$i(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[$i(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,i,a);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=T0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&t1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tf(s){return je(s)}class hE{constructor(t){this.auth=t,this.observer=null,this.addObserver=Fw(e=>this.observer=e)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A1(s){Mg=s}function I1(s){return Mg.loadJS(s)}function w1(){return Mg.gapiScript}function R1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(s,t){const e=wg(s,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(xh(l,t??{}))return a;_i(a,"already-initialized")}return e.initialize({options:t})}function D1(s,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map($i);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function x1(s,t,e){const i=tf(s);It(i._canInitEmulator,i,"emulator-config-failed"),It(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,l=b0(t),{host:c,port:d}=V1(t),g=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${c}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})}),N1()}function b0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function V1(s){const t=b0(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:fE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:fE(c)}}}function fE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function N1(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Yi("not implemented")}_getIdTokenResponse(t){return Yi("not implemented")}_linkToIdToken(t,e){return Yi("not implemented")}_getReauthenticationResolver(t){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(s,t){return o1(s,"POST","/v1/accounts:signInWithIdp",Vg(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="http://localhost";class Ws extends S0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ws(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):_i("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=e,l=Rg(e,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Ws(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return _o(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,_o(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,_o(t,e)}buildRequest(){const t={requestUri:O1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Su(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Pg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Iu{constructor(){super("facebook.com")}static credential(t){return Ws._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ws._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ki.credentialFromTaggedObject(t)}static credentialFromError(t){return Ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ki.credential(e,i)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Iu{constructor(){super("github.com")}static credential(t){return Ws._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Iu{constructor(){super("twitter.com")}static credential(t,e){return Ws._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return jr.credential(e,i)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await Xi._fromIdTokenResponse(t,i,a),c=dE(i);return new To({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=dE(i);return new To({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function dE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends sr{constructor(t,e,i,a){var l;super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Mh(t,e,i,a)}}function A0(s,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(s,l,t,i):l})}async function M1(s,t,e=!1){const i=await fu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return To._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(s,t,e=!1){const{auth:i}=s;if(Qi(i.app))return Promise.reject(Qs(i));const a="reauthenticate";try{const l=await fu(s,A0(i,a,t,s),e);It(l.idToken,i,"internal-error");const c=Ng(l.idToken);It(c,i,"internal-error");const{sub:d}=c;return It(s.uid===d,i,"user-mismatch"),To._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_i(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(s,t,e=!1){if(Qi(s.app))return Promise.reject(Qs(s));const i="signIn",a=await A0(s,i,t),l=await To._fromIdTokenResponse(s,i,a);return e||await s._updateCurrentUser(l.user),l}function U1(s,t,e,i){return je(s).onIdTokenChanged(t,e,i)}function L1(s,t,e){return je(s).beforeAuthStateChanged(t,e)}function B1(s,t,e,i){return je(s).onAuthStateChanged(t,e,i)}function I0(s){return je(s).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1e3,j1=10;class R0 extends w0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);y1()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,j1):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}R0.type="LOCAL";const q1=R0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends w0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}C0.type="SESSION";const D0=C0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new ef(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(e.origin,l)),g=await F1(d);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(s="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const p=kg("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function H1(s){pi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function K1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q1(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function Y1(){return x0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="firebaseLocalStorageDb",X1=1,kh="firebaseLocalStorage",N0="fbase_key";class wu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function nf(s,t){return s.transaction([kh],t?"readwrite":"readonly").objectStore(kh)}function $1(){const s=indexedDB.deleteDatabase(V0);return new wu(s).toPromise()}function tg(){const s=indexedDB.open(V0,X1);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(kh,{keyPath:N0})}catch(a){e(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(kh)?t(i):(i.close(),await $1(),t(await tg()))})})}async function mE(s,t,e){const i=nf(s,!0).put({[N0]:t,value:e});return new wu(i).toPromise()}async function W1(s,t){const e=nf(s,!1).get(t),i=await new wu(e).toPromise();return i===void 0?null:i.value}function gE(s,t){const e=nf(s,!0).delete(t);return new wu(e).toPromise()}const J1=800,Z1=3;class O0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>Z1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ef._getInstance(Y1()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await K1(),!this.activeServiceWorker)return;this.sender=new G1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Q1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tg();return await mE(t,Ph,"1"),await gE(t,Ph),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>mE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>W1(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>gE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=nf(a,!1).getAll();return new wu(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O0.type="LOCAL";const tC=O0;new Au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(s,t){return t?$i(t):(It(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends S0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return _o(t,this._buildIdpRequest())}_linkToIdToken(t,e){return _o(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return _o(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function eC(s){return k1(s.auth,new Ug(s),s.bypassAuthState)}function nC(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),P1(e,new Ug(s),s.bypassAuthState)}async function iC(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),M1(e,new Ug(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return iC;case"reauthViaPopup":case"reauthViaRedirect":return nC;default:_i(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Au(2e3,1e4);async function sC(s,t,e){if(Qi(s.app))return Promise.reject($n(s,"operation-not-supported-in-this-environment"));const i=tf(s);e1(s,t,Pg);const a=M0(i,e);return new Ks(i,"signInViaPopup",t,a).executeNotNull()}class Ks extends P0{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ks.currentPopupAction&&Ks.currentPopupAction.cancel(),Ks.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ks.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,rC.get())};t()}}Ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="pendingRedirect",ph=new Map;class oC extends P0{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=ph.get(this.auth._key());if(!t){try{const i=await lC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}ph.set(this.auth._key(),t)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lC(s,t){const e=hC(t),i=cC(s);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function uC(s,t){ph.set(s._key(),t)}function cC(s){return $i(s._redirectPersistence)}function hC(s){return gh(aC,s.config.apiKey,s.name)}async function fC(s,t,e=!1){if(Qi(s.app))return Promise.reject(Qs(s));const i=tf(s),a=M0(i,t),c=await new oC(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=10*60*1e3;class mC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!gC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!k0(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError($n(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=dC&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(t))}saveEventToCache(t){this.cachedEventUids.add(pE(t)),this.lastProcessedEventTime=Date.now()}}function pE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function k0({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function gC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(s,t={}){return Mo(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yC=/^https?/;async function vC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await pC(s);for(const e of t)try{if(EC(e))return}catch{}_i(s,"unauthorized-domain")}function EC(s){const t=Jm(),{protocol:e,hostname:i}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!yC.test(e))return!1;if(_C.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Au(3e4,6e4);function _E(){const s=pi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function bC(s){return new Promise((t,e)=>{var i,a,l;function c(){_E(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_E(),e($n(s,"network-request-failed"))},timeout:TC.get()})}if(!((a=(i=pi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=pi().gapi)===null||l===void 0)&&l.load)c();else{const d=R1("iframefcb");return pi()[d]=()=>{gapi.load?c():e($n(s,"network-request-failed"))},I1(`${w1()}?onload=${d}`).catch(g=>e(g))}}).catch(t=>{throw _h=null,t})}let _h=null;function SC(s){return _h=_h||bC(s),_h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new Au(5e3,15e3),IC="__/auth/iframe",wC="emulator/auth/iframe",RC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(s){const t=s.config;It(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?xg(t,wC):`https://${s.config.authDomain}/${IC}`,i={apiKey:t.apiKey,appName:s.name,v:Oo},a=CC.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Su(i).slice(1)}`}async function xC(s){const t=await SC(s),e=pi().gapi;return It(e,s,"internal-error"),t.open({where:document.body,url:DC(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RC,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=$n(s,"network-request-failed"),d=pi().setTimeout(()=>{l(c)},AC.get());function g(){pi().clearTimeout(d),a(i)}i.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NC=500,OC=600,MC="_blank",PC="http://localhost";class yE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kC(s,t,e,i=NC,a=OC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const g=Object.assign(Object.assign({},VC),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Ve().toLowerCase();e&&(d=g0(p)?MC:e),d0(p)&&(t=t||PC,g.scrollbars="yes");const v=Object.entries(g).reduce((I,[M,K])=>`${I}${M}=${K},`,"");if(_1(p)&&d!=="_self")return UC(t||"",d),new yE(null);const T=window.open(t||"",d,v);It(T,s,"popup-blocked");try{T.focus()}catch{}return new yE(T)}function UC(s,t){const e=document.createElement("a");e.href=s,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="__/auth/handler",BC="emulator/auth/handler",zC=encodeURIComponent("fac");async function vE(s,t,e,i,a,l){It(s.config.authDomain,s,"auth-domain-config-required"),It(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:i,v:Oo,eventId:a};if(t instanceof Pg){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",qw(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(t instanceof Iu){const v=t.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await s._getAppCheckToken(),p=g?`#${zC}=${encodeURIComponent(g)}`:"";return`${jC(s)}?${Su(d).slice(1)}${p}`}function jC({config:s}){return s.emulator?xg(s,BC):`https://${s.authDomain}/${LC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class qC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D0,this._completeRedirectFn=fC,this._overrideRedirectResult=uC}async _openPopup(t,e,i,a){var l;tr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await vE(t,e,i,Jm(),a);return kC(t,c,kg())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await vE(t,e,i,Jm(),a);return H1(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(tr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await xC(t),i=new mC(t);return e.register("authEvent",a=>(It(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Um,{type:Um},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Um];c!==void 0&&e(!!c),_i(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=vC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return E0()||m0()||Og()}}const FC=qC;var EE="@firebase/auth",TE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KC(s){Eo(new $s("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;It(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T0(s)},p=new S1(i,a,l,g);return D1(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Eo(new $s("auth-internal",t=>{const e=tf(t.getProvider("auth").getImmediate());return(i=>new GC(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(EE,TE,HC(s)),Yr(EE,TE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=5*60,YC=$T("authIdTokenMaxAge")||QC;let bE=null;const XC=s=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>YC)return;const a=e==null?void 0:e.token;bE!==a&&(bE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $C(s=n0()){const t=wg(s,"auth");if(t.isInitialized())return t.getImmediate();const e=C1(s,{popupRedirectResolver:FC,persistence:[tC,q1,D0]}),i=$T("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=XC(l.toString());L1(e,c,()=>c(e.currentUser)),U1(e,d=>c(d))}}const a=YT("auth");return a&&x1(e,`http://${a}`),e}function WC(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}A1({loadJS(s){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=t,i.onerror=a=>{const l=$n("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",WC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KC("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function JC(s,t,e,i){function a(l){return l instanceof e?l:new e(function(c){c(l)})}return new(e||(e=Promise))(function(l,c){function d(v){try{p(i.next(v))}catch(T){c(T)}}function g(v){try{p(i.throw(v))}catch(T){c(T)}}function p(v){v.done?l(v.value):a(v.value).then(d,g)}p((i=i.apply(s,[])).next())})}function ZC(s,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(v){return g([p,v])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,a=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){e.label=p[1];break}if(p[0]===6&&e.label<l[1]){e.label=l[1],l=p;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(p);break}l[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(s,e)}catch(v){p=[6,v],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mo=function(){return mo=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++){e=arguments[i];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},mo.apply(this,arguments)},U0=function(s){return{loading:s==null,value:s}},tD=function(){return function(s,t){switch(t.type){case"error":return mo(mo({},s),{error:t.error,loading:!1,value:void 0});case"reset":return U0(t.defaultValue);case"value":return mo(mo({},s),{error:void 0,loading:!1,value:t.value});default:return s}}},eD=function(s){var t=s?s():void 0,e=$.useReducer(tD(),U0(t)),i=e[0],a=e[1],l=$.useCallback(function(){var g=s?s():void 0;a({type:"reset",defaultValue:g})},[s]),c=$.useCallback(function(g){a({type:"error",error:g})},[]),d=$.useCallback(function(g){a({type:"value",value:g})},[]);return $.useMemo(function(){return{error:i.error,loading:i.loading,reset:l,setError:c,setValue:d,value:i.value}},[i.error,i.loading,l,c,d,i.value])},nD=function(s,t){var e=eD(function(){return s.currentUser}),i=e.error,a=e.loading,l=e.setError,c=e.setValue,d=e.value;return $.useEffect(function(){var g=B1(s,function(p){return JC(void 0,void 0,void 0,function(){var v;return ZC(this,function(T){switch(T.label){case 0:return[3,4];case 1:return T.trys.push([1,3,,4]),[4,t.onUserChanged(p)];case 2:return T.sent(),[3,4];case 3:return v=T.sent(),l(v),[3,4];case 4:return c(p),[2]}})})},l);return function(){g()}},[s]),[d,a,i]},iD="firebase",rD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(iD,rD,"app");var SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,L0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function w(){}w.prototype=A.prototype,D.D=A.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(x,O,k){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return A.prototype[O].apply(x,C)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,w){w||(w=0);var x=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)x[O]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(O=0;16>O;++O)x[O]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=D.g[0],w=D.g[1],O=D.g[2];var k=D.g[3],C=A+(k^w&(O^k))+x[0]+3614090360&4294967295;A=w+(C<<7&4294967295|C>>>25),C=k+(O^A&(w^O))+x[1]+3905402710&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(w^k&(A^w))+x[2]+606105819&4294967295,O=k+(C<<17&4294967295|C>>>15),C=w+(A^O&(k^A))+x[3]+3250441966&4294967295,w=O+(C<<22&4294967295|C>>>10),C=A+(k^w&(O^k))+x[4]+4118548399&4294967295,A=w+(C<<7&4294967295|C>>>25),C=k+(O^A&(w^O))+x[5]+1200080426&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(w^k&(A^w))+x[6]+2821735955&4294967295,O=k+(C<<17&4294967295|C>>>15),C=w+(A^O&(k^A))+x[7]+4249261313&4294967295,w=O+(C<<22&4294967295|C>>>10),C=A+(k^w&(O^k))+x[8]+1770035416&4294967295,A=w+(C<<7&4294967295|C>>>25),C=k+(O^A&(w^O))+x[9]+2336552879&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(w^k&(A^w))+x[10]+4294925233&4294967295,O=k+(C<<17&4294967295|C>>>15),C=w+(A^O&(k^A))+x[11]+2304563134&4294967295,w=O+(C<<22&4294967295|C>>>10),C=A+(k^w&(O^k))+x[12]+1804603682&4294967295,A=w+(C<<7&4294967295|C>>>25),C=k+(O^A&(w^O))+x[13]+4254626195&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(w^k&(A^w))+x[14]+2792965006&4294967295,O=k+(C<<17&4294967295|C>>>15),C=w+(A^O&(k^A))+x[15]+1236535329&4294967295,w=O+(C<<22&4294967295|C>>>10),C=A+(O^k&(w^O))+x[1]+4129170786&4294967295,A=w+(C<<5&4294967295|C>>>27),C=k+(w^O&(A^w))+x[6]+3225465664&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^w&(k^A))+x[11]+643717713&4294967295,O=k+(C<<14&4294967295|C>>>18),C=w+(k^A&(O^k))+x[0]+3921069994&4294967295,w=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(w^O))+x[5]+3593408605&4294967295,A=w+(C<<5&4294967295|C>>>27),C=k+(w^O&(A^w))+x[10]+38016083&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^w&(k^A))+x[15]+3634488961&4294967295,O=k+(C<<14&4294967295|C>>>18),C=w+(k^A&(O^k))+x[4]+3889429448&4294967295,w=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(w^O))+x[9]+568446438&4294967295,A=w+(C<<5&4294967295|C>>>27),C=k+(w^O&(A^w))+x[14]+3275163606&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^w&(k^A))+x[3]+4107603335&4294967295,O=k+(C<<14&4294967295|C>>>18),C=w+(k^A&(O^k))+x[8]+1163531501&4294967295,w=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(w^O))+x[13]+2850285829&4294967295,A=w+(C<<5&4294967295|C>>>27),C=k+(w^O&(A^w))+x[2]+4243563512&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^w&(k^A))+x[7]+1735328473&4294967295,O=k+(C<<14&4294967295|C>>>18),C=w+(k^A&(O^k))+x[12]+2368359562&4294967295,w=O+(C<<20&4294967295|C>>>12),C=A+(w^O^k)+x[5]+4294588738&4294967295,A=w+(C<<4&4294967295|C>>>28),C=k+(A^w^O)+x[8]+2272392833&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^w)+x[11]+1839030562&4294967295,O=k+(C<<16&4294967295|C>>>16),C=w+(O^k^A)+x[14]+4259657740&4294967295,w=O+(C<<23&4294967295|C>>>9),C=A+(w^O^k)+x[1]+2763975236&4294967295,A=w+(C<<4&4294967295|C>>>28),C=k+(A^w^O)+x[4]+1272893353&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^w)+x[7]+4139469664&4294967295,O=k+(C<<16&4294967295|C>>>16),C=w+(O^k^A)+x[10]+3200236656&4294967295,w=O+(C<<23&4294967295|C>>>9),C=A+(w^O^k)+x[13]+681279174&4294967295,A=w+(C<<4&4294967295|C>>>28),C=k+(A^w^O)+x[0]+3936430074&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^w)+x[3]+3572445317&4294967295,O=k+(C<<16&4294967295|C>>>16),C=w+(O^k^A)+x[6]+76029189&4294967295,w=O+(C<<23&4294967295|C>>>9),C=A+(w^O^k)+x[9]+3654602809&4294967295,A=w+(C<<4&4294967295|C>>>28),C=k+(A^w^O)+x[12]+3873151461&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^w)+x[15]+530742520&4294967295,O=k+(C<<16&4294967295|C>>>16),C=w+(O^k^A)+x[2]+3299628645&4294967295,w=O+(C<<23&4294967295|C>>>9),C=A+(O^(w|~k))+x[0]+4096336452&4294967295,A=w+(C<<6&4294967295|C>>>26),C=k+(w^(A|~O))+x[7]+1126891415&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~w))+x[14]+2878612391&4294967295,O=k+(C<<15&4294967295|C>>>17),C=w+(k^(O|~A))+x[5]+4237533241&4294967295,w=O+(C<<21&4294967295|C>>>11),C=A+(O^(w|~k))+x[12]+1700485571&4294967295,A=w+(C<<6&4294967295|C>>>26),C=k+(w^(A|~O))+x[3]+2399980690&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~w))+x[10]+4293915773&4294967295,O=k+(C<<15&4294967295|C>>>17),C=w+(k^(O|~A))+x[1]+2240044497&4294967295,w=O+(C<<21&4294967295|C>>>11),C=A+(O^(w|~k))+x[8]+1873313359&4294967295,A=w+(C<<6&4294967295|C>>>26),C=k+(w^(A|~O))+x[15]+4264355552&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~w))+x[6]+2734768916&4294967295,O=k+(C<<15&4294967295|C>>>17),C=w+(k^(O|~A))+x[13]+1309151649&4294967295,w=O+(C<<21&4294967295|C>>>11),C=A+(O^(w|~k))+x[4]+4149444226&4294967295,A=w+(C<<6&4294967295|C>>>26),C=k+(w^(A|~O))+x[11]+3174756917&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~w))+x[2]+718787259&4294967295,O=k+(C<<15&4294967295|C>>>17),C=w+(k^(O|~A))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var w=A-this.blockSize,x=this.B,O=this.h,k=0;k<A;){if(O==0)for(;k<=w;)a(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<A;)if(x[O++]=D.charCodeAt(k++),O==this.blockSize){a(this,x),O=0;break}}else for(;k<A;)if(x[O++]=D[k++],O==this.blockSize){a(this,x),O=0;break}}this.h=O,this.o+=A},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var w=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=w&255,w/=256;for(this.u(D),D=Array(16),A=w=0;4>A;++A)for(var x=0;32>x;x+=8)D[w++]=this.g[A]>>>x&255;return D};function l(D,A){var w=d;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=A(D)}function c(D,A){this.h=A;for(var w=[],x=!0,O=D.length-1;0<=O;O--){var k=D[O]|0;x&&k==A||(w[O]=k,x=!1)}this.g=w}var d={};function g(D){return-128<=D&&128>D?l(D,function(A){return new c([A|0],0>A?-1:0)}):new c([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return L(p(-D));for(var A=[],w=1,x=0;D>=w;x++)A[x]=D/w|0,w*=4294967296;return new c(A,0)}function v(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return L(v(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(A,8)),x=T,O=0;O<D.length;O+=8){var k=Math.min(8,D.length-O),C=parseInt(D.substring(O,O+k),A);8>k?(k=p(Math.pow(A,k)),x=x.j(k).add(p(C))):(x=x.j(w),x=x.add(p(C)))}return x}var T=g(0),I=g(1),M=g(16777216);s=c.prototype,s.m=function(){if(z(this))return-L(this).m();for(var D=0,A=1,w=0;w<this.g.length;w++){var x=this.i(w);D+=(0<=x?x:4294967296+x)*A,A*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(z(this))return"-"+L(this).toString(D);for(var A=p(Math.pow(D,6)),w=this,x="";;){var O=ot(w,A).g;w=nt(w,O.j(A));var k=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=O,K(w))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function z(D){return D.h==-1}s.l=function(D){return D=nt(this,D),z(D)?-1:K(D)?0:1};function L(D){for(var A=D.g.length,w=[],x=0;x<A;x++)w[x]=~D.g[x];return new c(w,~D.h).add(I)}s.abs=function(){return z(this)?L(this):this},s.add=function(D){for(var A=Math.max(this.g.length,D.g.length),w=[],x=0,O=0;O<=A;O++){var k=x+(this.i(O)&65535)+(D.i(O)&65535),C=(k>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);x=C>>>16,k&=65535,C&=65535,w[O]=C<<16|k}return new c(w,w[w.length-1]&-2147483648?-1:0)};function nt(D,A){return D.add(L(A))}s.j=function(D){if(K(this)||K(D))return T;if(z(this))return z(D)?L(this).j(L(D)):L(L(this).j(D));if(z(D))return L(this.j(L(D)));if(0>this.l(M)&&0>D.l(M))return p(this.m()*D.m());for(var A=this.g.length+D.g.length,w=[],x=0;x<2*A;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<D.g.length;O++){var k=this.i(x)>>>16,C=this.i(x)&65535,qe=D.i(O)>>>16,fe=D.i(O)&65535;w[2*x+2*O]+=C*fe,tt(w,2*x+2*O),w[2*x+2*O+1]+=k*fe,tt(w,2*x+2*O+1),w[2*x+2*O+1]+=C*qe,tt(w,2*x+2*O+1),w[2*x+2*O+2]+=k*qe,tt(w,2*x+2*O+2)}for(x=0;x<A;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=A;x<2*A;x++)w[x]=0;return new c(w,0)};function tt(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function W(D,A){this.g=D,this.h=A}function ot(D,A){if(K(A))throw Error("division by zero");if(K(D))return new W(T,T);if(z(D))return A=ot(L(D),A),new W(L(A.g),L(A.h));if(z(A))return A=ot(D,L(A)),new W(L(A.g),A.h);if(30<D.g.length){if(z(D)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var w=I,x=A;0>=x.l(D);)w=lt(w),x=lt(x);var O=dt(w,1),k=dt(x,1);for(x=dt(x,2),w=dt(w,2);!K(x);){var C=k.add(x);0>=C.l(D)&&(O=O.add(w),k=C),x=dt(x,1),w=dt(w,1)}return A=nt(D,O.j(A)),new W(O,A)}for(O=T;0<=D.l(A);){for(w=Math.max(1,Math.floor(D.m()/A.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=p(w),C=k.j(A);z(C)||0<C.l(D);)w-=x,k=p(w),C=k.j(A);K(k)&&(k=I),O=O.add(k),D=nt(D,C)}return new W(O,D)}s.A=function(D){return ot(this,D).h},s.and=function(D){for(var A=Math.max(this.g.length,D.g.length),w=[],x=0;x<A;x++)w[x]=this.i(x)&D.i(x);return new c(w,this.h&D.h)},s.or=function(D){for(var A=Math.max(this.g.length,D.g.length),w=[],x=0;x<A;x++)w[x]=this.i(x)|D.i(x);return new c(w,this.h|D.h)},s.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),w=[],x=0;x<A;x++)w[x]=this.i(x)^D.i(x);return new c(w,this.h^D.h)};function lt(D){for(var A=D.g.length+1,w=[],x=0;x<A;x++)w[x]=D.i(x)<<1|D.i(x-1)>>>31;return new c(w,D.h)}function dt(D,A){var w=A>>5;A%=32;for(var x=D.g.length-w,O=[],k=0;k<x;k++)O[k]=0<A?D.i(k+w)>>>A|D.i(k+w+1)<<32-A:D.i(k+w);return new c(O,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,L0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Ys=c}).apply(typeof SE<"u"?SE:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Zl,z0,yh,eg,j0,q0,F0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,y){return h==Array.prototype||h==Object.prototype||(h[_]=y.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var _=0;_<h.length;++_){var y=h[_];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=e(this);function a(h,_){if(_)t:{var y=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in y))break t;y=y[B]}h=h[h.length-1],S=y[h],_=_(S),_!=S&&_!=null&&t(y,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var y=0,S=!1,B={next:function(){if(!S&&y<h.length){var Q=y++;return{value:_(Q,h[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,y){return h.call.apply(h.bind,arguments)}function T(h,_,y){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),h.apply(_,B)}}return function(){return h.apply(_,arguments)}}function I(h,_,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,I.apply(null,arguments)}function M(h,_){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function K(h,_){function y(){}y.prototype=_.prototype,h.aa=_.prototype,h.prototype=new y,h.prototype.constructor=h,h.Qb=function(S,B,Q){for(var at=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)at[Ut-2]=arguments[Ut];return _.prototype[B].apply(S,at)}}function z(h){const _=h.length;if(0<_){const y=Array(_);for(let S=0;S<_;S++)y[S]=h[S];return y}return[]}function L(h,_){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(g(S)){const B=h.length||0,Q=S.length||0;h.length=B+Q;for(let at=0;at<Q;at++)h[B+at]=S[at]}else h.push(S)}}class nt{constructor(_,y){this.i=_,this.j=y,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function tt(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ot(h){return ot[" "](h),h}ot[" "]=function(){};var lt=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function dt(h,_,y){for(const S in h)_.call(y,h[S],S,h)}function D(h,_){for(const y in h)_.call(void 0,h[y],y,h)}function A(h){const _={};for(const y in h)_[y]=h[y];return _}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(h,_){let y,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(y in S)h[y]=S[y];for(let Q=0;Q<w.length;Q++)y=w[Q],Object.prototype.hasOwnProperty.call(S,y)&&(h[y]=S[y])}}function O(h){var _=1;h=h.split(":");const y=[];for(;0<_&&h.length;)y.push(h.shift()),_--;return h.length&&y.push(h.join(":")),y}function k(h){d.setTimeout(()=>{throw h},0)}function C(){var h=qt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class qe{constructor(){this.h=this.g=null}add(_,y){const S=fe.get();S.set(_,y),this.h?this.h.next=S:this.g=S,this.h=S}}var fe=new nt(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(_,y){this.h=_,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,yt=!1,qt=new qe,V=()=>{const h=d.Promise.resolve(void 0);ut=()=>{h.then(it)}};var it=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(y){k(y)}var _=fe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}yt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const y=()=>{};d.addEventListener("test",y,_),d.removeEventListener("test",y,_)}catch{}return h}();function Vt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var y=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(lt){t:{try{ot(_.nodeName);var B=!0;break t}catch{}B=!1}B||(_=null)}}else y=="mouseover"?_=h.fromElement:y=="mouseout"&&(_=h.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:At[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Vt.aa.h.call(this)}}K(Vt,st);var At={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),ne=0;function Wn(h,_,y,S,B){this.listener=h,this.proxy=null,this.src=_,this.type=y,this.capture=!!S,this.ha=B,this.key=++ne,this.da=this.fa=!1}function or(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ei(h){this.src=h,this.g={},this.h=0}Ei.prototype.add=function(h,_,y,S,B){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var at=is(h,_,S,B);return-1<at?(_=h[at],y||(_.fa=!1)):(_=new Wn(_,this.src,Q,!!S,B),_.fa=y,h.push(_)),_};function ns(h,_){var y=_.type;if(y in h.g){var S=h.g[y],B=Array.prototype.indexOf.call(S,_,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(S,B,1),Q&&(or(_),h.g[y].length==0&&(delete h.g[y],h.h--))}}function is(h,_,y,S){for(var B=0;B<h.length;++B){var Q=h[B];if(!Q.da&&Q.listener==_&&Q.capture==!!y&&Q.ha==S)return B}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),Lo={};function ku(h,_,y,S,B){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)ku(h,_[Q],y,S,B);return null}return y=Uu(y),h&&h[Oe]?h.K(_,y,p(S)?!!S.capture:!1,B):Rn(h,_,y,!1,S,B)}function Rn(h,_,y,S,B,Q){if(!_)throw Error("Invalid event type");var at=p(B)?!!B.capture:!!B,Ut=fa(h);if(Ut||(h[rs]=Ut=new Ei(h)),y=Ut.add(_,y,S,at,Q),y.proxy)return y;if(S=Af(),y.proxy=S,S.src=h,S.listener=y,h.addEventListener)vt||(B=at),B===void 0&&(B=!1),h.addEventListener(_.toString(),S,B);else if(h.attachEvent)h.attachEvent(ss(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Af(){function h(y){return _.call(h.src,h.listener,y)}const _=If;return h}function Bo(h,_,y,S,B){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Bo(h,_[Q],y,S,B);else S=p(S)?!!S.capture:!!S,y=Uu(y),h&&h[Oe]?(h=h.i,_=String(_).toString(),_ in h.g&&(Q=h.g[_],y=is(Q,y,S,B),-1<y&&(or(Q[y]),Array.prototype.splice.call(Q,y,1),Q.length==0&&(delete h.g[_],h.h--)))):h&&(h=fa(h))&&(_=h.g[_.toString()],h=-1,_&&(h=is(_,y,S,B)),(y=-1<h?_[h]:null)&&ha(y))}function ha(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])ns(_.i,h);else{var y=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(y,S,h.capture):_.detachEvent?_.detachEvent(ss(y),S):_.addListener&&_.removeListener&&_.removeListener(S),(y=fa(_))?(ns(y,h),y.h==0&&(y.src=null,_[rs]=null)):or(h)}}}function ss(h){return h in Lo?Lo[h]:Lo[h]="on"+h}function If(h,_){if(h.da)h=!0;else{_=new Vt(_,this);var y=h.listener,S=h.ha||h.src;h.fa&&ha(h),h=y.call(S,_)}return h}function fa(h){return h=h[rs],h instanceof Ei?h:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uu(h){return typeof h=="function"?h:(h[zo]||(h[zo]=function(_){return h.handleEvent(_)}),h[zo])}function de(){ct.call(this),this.i=new Ei(this),this.M=this,this.F=null}K(de,ct),de.prototype[Oe]=!0,de.prototype.removeEventListener=function(h,_,y,S){Bo(this,h,_,y,S)};function Ht(h,_){var y,S=h.F;if(S)for(y=[];S;S=S.F)y.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var B=_;_=new st(S,h),x(_,B)}if(B=!0,y)for(var Q=y.length-1;0<=Q;Q--){var at=_.g=y[Q];B=mn(at,S,!0,_)&&B}if(at=_.g=h,B=mn(at,S,!0,_)&&B,B=mn(at,S,!1,_)&&B,y)for(Q=0;Q<y.length;Q++)at=_.g=y[Q],B=mn(at,S,!1,_)&&B}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var y=h.g[_],S=0;S<y.length;S++)or(y[S]);delete h.g[_],h.h--}}this.F=null},de.prototype.K=function(h,_,y,S){return this.i.add(String(h),_,!1,y,S)},de.prototype.L=function(h,_,y,S){return this.i.add(String(h),_,!0,y,S)};function mn(h,_,y,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var B=!0,Q=0;Q<_.length;++Q){var at=_[Q];if(at&&!at.da&&at.capture==y){var Ut=at.listener,Re=at.ha||at.src;at.fa&&ns(h.i,at),B=Ut.call(Re,S)!==!1&&B}}return B&&!S.defaultPrevented}function $e(h,_,y){if(typeof h=="function")y&&(h=I(h,y));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Lu(h){h.g=$e(()=>{h.g=null,h.i&&(h.i=!1,Lu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class wf extends ct{constructor(_,y){super(),this.m=_,this.l=y,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Lu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(h){ct.call(this),this.h=h,this.g={}}K(as,ct);var os=[];function ls(h){dt(h.g,function(_,y){this.g.hasOwnProperty(y)&&ha(_)},h),h.g={}}as.prototype.N=function(){as.aa.N.call(this),ls(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=d.JSON.stringify,da=d.JSON.parse,us=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function jo(){}jo.prototype.h=null;function qo(h){return h.h||(h.h=h.i())}function Fo(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bi(){st.call(this,"d")}K(bi,st);function Go(){st.call(this,"c")}K(Go,st);var Jn={},Ho=null;function lr(){return Ho=Ho||new de}Jn.La="serverreachability";function ma(h){st.call(this,Jn.La,h)}K(ma,st);function ur(h){const _=lr();Ht(_,new ma(_))}Jn.STAT_EVENT="statevent";function Bu(h,_){st.call(this,Jn.STAT_EVENT,h),this.stat=_}K(Bu,st);function re(h){const _=lr();Ht(_,new Bu(_,h))}Jn.Ma="timingevent";function we(h,_){st.call(this,Jn.Ma,h),this.size=_}K(we,st);function Ee(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function Ko(h,_,y,S,B,Q){h.info(function(){if(h.g)if(Q)for(var at="",Ut=Q.split("&"),Re=0;Re<Ut.length;Re++){var Lt=Ut[Re].split("=");if(1<Lt.length){var Pe=Lt[0];Lt=Lt[1];var Ce=Pe.split("_");at=2<=Ce.length&&Ce[1]=="type"?at+(Pe+"="+Lt+"&"):at+(Pe+"=redacted&")}}else at=null;else at=Q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+_+`
`+y+`
`+at})}function Rf(h,_,y,S,B,Q,at){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+_+`
`+y+`
`+Q+" "+at})}function cr(h,_,y,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+cs(h,y)+(S?" "+S:"")})}function zu(h,_){h.info(function(){return"TIMEOUT: "+_})}Cn.prototype.info=function(){};function cs(h,_){if(!h.g)return _;if(!_)return null;try{var y=JSON.parse(_);if(y){for(h=0;h<y.length;h++)if(Array.isArray(y[h])){var S=y[h];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var at=1;at<B.length;at++)B[at]=""}}}}return Fn(y)}catch{return _}}var hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zn;function ti(){}K(ti,jo),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Zn=new ti;function en(h,_,y,S){this.j=h,this.i=_,this.l=y,this.R=S||1,this.U=new as(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var Qo={},ga={};function Gn(h,_,y){h.L=1,h.v=gs(gn(_)),h.m=y,h.P=!0,Ai(h,null)}function Ai(h,_){h.F=Date.now(),hs(h),h.A=gn(h.v);var y=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Zo(y.i,"t",S),h.C=0,y=h.j.J,h.h=new _e,h.g=nc(h.j,y?_:null,!h.m),0<h.O&&(h.M=new wf(I(h.Y,h,h.g),h.O)),_=h.U,y=h.g,S=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(os[0]=B.toString()),B=os);for(var Q=0;Q<B.length;Q++){var at=ku(y,B[Q],S||_.handleEvent,!1,_.h||_);if(!at)break;_.g[at.key]=at}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ur(),Ko(h.i,h.u,h.A,h.l,h.R,h.m)}en.prototype.ca=function(h){h=h.target;const _=this.M;_&&Nn(h)==3?_.j():this.Y(h)},en.prototype.Y=function(h){try{if(h==this.g)t:{const Ce=Nn(this.g);var _=this.g.Ba();const Ni=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||Ce!=4||_==7||(_==8||0>=Ni?ur(3):ur(2)),fr(this);var y=this.g.Z();this.X=y;e:if(ju(this)){var S=Yu(this.g);h="";var B=S.length,Q=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),ei(this);var at="";break e}this.h.i=new d.TextDecoder}for(_=0;_<B;_++)this.h.h=!0,h+=this.h.i.decode(S[_],{stream:!(Q&&_==B-1)});S.length=0,this.h.g+=h,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=y==200,Rf(this.i,this.u,this.A,this.l,this.R,Ce,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Re=this.g;if((Ut=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tt(Ut)){var Lt=Ut;break e}}Lt=null}if(y=Lt)cr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,y);else{this.o=!1,this.s=3,re(12),Fe(this),ei(this);break t}}if(this.P){y=!0;let Ge;for(;!this.J&&this.C<at.length;)if(Ge=qu(this,at),Ge==ga){Ce==4&&(this.s=4,re(14),y=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==Qo){this.s=4,re(15),cr(this.i,this.l,at,"[Invalid Chunk]"),y=!1;break}else cr(this.i,this.l,Ge,null),fs(this,Ge);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||at.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)cr(this.i,this.l,at,"[Invalid Chunked Response]"),Fe(this),ei(this);else if(0<at.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),Ss(Pe),Pe.M=!0,re(11))}}else cr(this.i,this.l,at,null),fs(this,at);Ce==4&&Fe(this),this.o&&!this.J&&(Ce==4?Zu(this.j,this):(this.o=!1,hs(this)))}else Nf(this.g),y==400&&0<at.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),Fe(this),ei(this)}}}catch{}finally{}};function ju(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function qu(h,_){var y=h.C,S=_.indexOf(`
`,y);return S==-1?ga:(y=Number(_.substring(y,S)),isNaN(y)?Qo:(S+=1,S+y>_.length?ga:(_=_.slice(S,S+y),h.C=S+y,_)))}en.prototype.cancel=function(){this.J=!0,Fe(this)};function hs(h){h.S=Date.now()+h.I,Fu(h,h.I)}function Fu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ee(I(h.ba,h),_)}function fr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}en.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(zu(this.i,this.A),this.L!=2&&(ur(),re(17)),Fe(this),this.s=2,ei(this)):Fu(this,this.S-h)};function ei(h){h.j.G==0||h.J||Zu(h.j,h)}function Fe(h){fr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,ls(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function fs(h,_){try{var y=h.j;if(y.G!=0&&(y.g==h||Yo(y.h,h))){if(!h.K&&Yo(y.h,h)&&y.G==3){try{var S=y.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<h.F)Ra(y),Ia(y);else break t;rl(y),re(18)}}else y.za=B[1],0<y.za-y.T&&37500>B[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ee(I(y.Za,y),6e3));if(1>=_a(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Vi(y,11)}else if((h.K||y.g==h)&&Ra(y),!tt(_))for(B=y.Da.g.parse(_),_=0;_<B.length;_++){let Lt=B[_];if(y.T=Lt[0],Lt=Lt[1],y.G==2)if(Lt[0]=="c"){y.K=Lt[1],y.ia=Lt[2];const Pe=Lt[3];Pe!=null&&(y.la=Pe,y.j.info("VER="+y.la));const Ce=Lt[4];Ce!=null&&(y.Aa=Ce,y.j.info("SVER="+y.Aa));const Ni=Lt[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(S=1.5*Ni,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const Ge=h.g;if(Ge){const li=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(li){var Q=S.h;Q.g||li.indexOf("spdy")==-1&&li.indexOf("quic")==-1&&li.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ya(Q,Q.h),Q.h=null))}if(S.D){const al=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(S.ya=al,Xt(S.I,S.D,al))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-h.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var at=h;if(S.qa=ec(S,S.J?S.ia:null,S.W),at.K){nn(S.h,at);var Ut=at,Re=S.L;Re&&(Ut.I=Re),Ut.B&&(fr(Ut),hs(Ut)),S.g=at}else Wu(S);0<y.i.length&&wa(y)}else Lt[0]!="stop"&&Lt[0]!="close"||Vi(y,7);else y.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Vi(y,7):nl(y):Lt[0]!="noop"&&y.l&&y.l.ta(Lt),y.v=0)}}ur(4)}catch{}}var Gu=class{constructor(h,_){this.g=h,this.map=_}};function Ii(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _a(h){return h.h?1:h.g?h.g.size:0}function Yo(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ya(h,_){h.g?h.g.add(_):h.h=_}function nn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ii.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Xo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const y of h.g.values())_=_.concat(y.D);return _}return z(h.i)}function Cf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],y=h.length,S=0;S<y;S++)_.push(h[S]);return _}_=[],y=0;for(S in h)_[y++]=h[S];return _}function va(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var y=0;y<h;y++)_.push(y);return _}_=[],y=0;for(const S in h)_[y++]=S;return _}}}function $o(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var y=va(h),S=Cf(h),B=S.length,Q=0;Q<B;Q++)_.call(void 0,S[Q],y&&y[Q],h)}var ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Df(h,_){if(h){h=h.split("&");for(var y=0;y<h.length;y++){var S=h[y].indexOf("="),B=null;if(0<=S){var Q=h[y].substring(0,S);B=h[y].substring(S+1)}else Q=h[y];_(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Te(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Te){this.h=h.h,ms(this,h.j),this.o=h.o,this.g=h.g,dr(this,h.s),this.l=h.l;var _=h.i,y=new Ri;y.i=_.i,_.g&&(y.g=new Map(_.g),y.h=_.h),wi(this,y),this.m=h.m}else h&&(_=String(h).match(ds))?(this.h=!1,ms(this,_[1]||"",!0),this.o=Dn(_[2]||""),this.g=Dn(_[3]||"",!0),dr(this,_[4]),this.l=Dn(_[5]||"",!0),wi(this,_[6]||"",!0),this.m=Dn(_[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}Te.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ps(_,Wo,!0),":");var y=this.g;return(y||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ps(_,Wo,!0),"@"),h.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&h.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&h.push("/"),h.push(ps(y,y.charAt(0)=="/"?xf:Jo,!0))),(y=this.i.toString())&&h.push("?",y),(y=this.m)&&h.push("#",ps(y,Ea)),h.join("")};function gn(h){return new Te(h)}function ms(h,_,y){h.j=y?Dn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function dr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function wi(h,_,y){_ instanceof Ri?(h.i=_,Ku(h.i,h.h)):(y||(_=ps(_,Vf)),h.i=new Ri(_,h.h))}function Xt(h,_,y){h.i.set(_,y)}function gs(h){return Xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ps(h,_,y){return typeof h=="string"?(h=encodeURI(h).replace(_,Hu),y&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Hu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wo=/[#\/\?@]/g,Jo=/[#\?:]/g,xf=/[#\?]/g,Vf=/[#\?@]/g,Ea=/#/g;function Ri(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&Df(h.i,function(_,y){h.add(decodeURIComponent(_.replace(/\+/g," ")),y)}))}s=Ri.prototype,s.add=function(h,_){xn(this),this.i=null,h=ni(this,h);var y=this.g.get(h);return y||this.g.set(h,y=[]),y.push(_),this.h+=1,this};function Ci(h,_){xn(h),_=ni(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Di(h,_){return xn(h),_=ni(h,_),h.g.has(_)}s.forEach=function(h,_){xn(this),this.g.forEach(function(y,S){y.forEach(function(B){h.call(_,B,S,this)},this)},this)},s.na=function(){xn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),y=[];for(let S=0;S<_.length;S++){const B=h[S];for(let Q=0;Q<B.length;Q++)y.push(_[S])}return y},s.V=function(h){xn(this);let _=[];if(typeof h=="string")Di(this,h)&&(_=_.concat(this.g.get(ni(this,h))));else{h=Array.from(this.g.values());for(let y=0;y<h.length;y++)_=_.concat(h[y])}return _},s.set=function(h,_){return xn(this),this.i=null,h=ni(this,h),Di(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Zo(h,_,y){Ci(h,_),0<y.length&&(h.i=null,h.g.set(ni(h,_),z(y)),h.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var y=0;y<_.length;y++){var S=_[y];const Q=encodeURIComponent(String(S)),at=this.V(S);for(S=0;S<at.length;S++){var B=Q;at[S]!==""&&(B+="="+encodeURIComponent(String(at[S]))),h.push(B)}}return this.i=h.join("&")};function ni(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ku(h,_){_&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(y,S){var B=S.toLowerCase();S!=B&&(Ci(this,S),Zo(this,B,y))},h)),h.j=_}function _s(h,_){const y=new Cn;if(d.Image){const S=new Image;S.onload=M(Vn,y,"TestLoadImage: loaded",!0,_,S),S.onerror=M(Vn,y,"TestLoadImage: error",!1,_,S),S.onabort=M(Vn,y,"TestLoadImage: abort",!1,_,S),S.ontimeout=M(Vn,y,"TestLoadImage: timeout",!1,_,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Hn(h,_){const y=new Cn,S=new AbortController,B=setTimeout(()=>{S.abort(),Vn(y,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(B),Q.ok?Vn(y,"TestPingServer: ok",!0,_):Vn(y,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),Vn(y,"TestPingServer: error",!1,_)})}function Vn(h,_,y,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(y)}catch{}}function ys(){this.g=new us}function ii(h,_,y){const S=y||"";try{$o(h,function(B,Q){let at=B;p(B)&&(at=Fn(B)),_.push(S+Q+"="+encodeURIComponent(at))})}catch(B){throw _.push(S+"type="+encodeURIComponent("_badmap")),B}}function mr(h){this.l=h.Ub||null,this.j=h.eb||!1}K(mr,jo),mr.prototype.g=function(){return new xi(this.l,this.j)},mr.prototype.i=function(h){return function(){return h}}({});function xi(h,_){de.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(xi,de),s=xi.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,si(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function tl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ri(this):si(this),this.readyState==3&&tl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,ri(this))},s.Qa=function(h){this.g&&(this.response=h,ri(this))},s.ga=function(){this.g&&ri(this)};function ri(h){h.readyState=4,h.l=null,h.j=null,h.v=null,si(h)}s.setRequestHeader=function(h,_){this.u.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var y=_.next();!y.done;)y=y.value,h.push(y[0]+": "+y[1]),y=_.next();return h.join(`\r
`)};function si(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function el(h){let _="";return dt(h,function(y,S){_+=S,_+=":",_+=y,_+=`\r
`}),_}function Me(h,_,y){t:{for(S in y){var S=!1;break t}S=!0}S||(y=el(y),typeof h=="string"?y!=null&&encodeURIComponent(String(y)):Xt(h,_,y))}function Gt(h){de.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Gt,de);var Ta=/^https?$/i,vs=["POST","PUT"];s=Gt.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,_,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zn.g(),this.v=this.o?qo(this.o):qo(Zn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){Qu(this,Q);return}if(h=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)y.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())y.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(vs,_,void 0))||S||B||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,at]of y)this.g.setRequestHeader(Q,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Es(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Qu(this,Q)}};function Qu(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,ba(h),ai(h)}function ba(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ht(this,"complete"),Ht(this,"abort"),ai(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Gt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Sa(this):this.bb())},s.bb=function(){Sa(this)};function Sa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Nn(h)!=4||h.Z()!=2)){if(h.u&&Nn(h)==4)$e(h.Ea,0,h);else if(Ht(h,"readystatechange"),Nn(h)==4){h.h=!1;try{const at=h.Z();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var y;if(!(y=_)){var S;if(S=at===0){var B=String(h.D).match(ds)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),S=!Ta.test(B?B.toLowerCase():"")}y=S}if(y)Ht(h,"complete"),Ht(h,"success");else{h.m=6;try{var Q=2<Nn(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",ba(h)}}finally{ai(h)}}}}function ai(h,_){if(h.g){Es(h);const y=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ht(h,"ready");try{y.onreadystatechange=S}catch{}}}function Es(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Nn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),da(_)}};function Yu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nf(h){const _={};h=(h.g&&2<=Nn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(tt(h[S]))continue;var y=O(h[S]);const B=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const Q=_[B]||[];_[B]=Q,Q.push(y)}D(_,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(h,_,y){return y&&y.internalChannelParams&&y.internalChannelParams[h]||_}function Aa(h){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,h),this.cb=Ts("retryDelaySeedMs",1e4,h),this.Wa=Ts("forwardChannelMaxRetries",2,h),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(h&&h.concurrentRequestLimit),this.Da=new ys,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Aa.prototype,s.la=8,s.G=1,s.connect=function(h,_,y,S){re(0),this.W=h,this.H=_||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=ec(this,null,this.W),wa(this)};function nl(h){if(Xu(h),h.G==3){var _=h.U++,y=gn(h.I);if(Xt(y,"SID",h.K),Xt(y,"RID",_),Xt(y,"TYPE","terminate"),bs(h,y),_=new en(h,h.j,_),_.L=2,_.v=gs(gn(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=_.v,y=!0),y||(_.g=nc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),hs(_)}tc(h)}function Ia(h){h.g&&(Ss(h),h.g.cancel(),h.g=null)}function Xu(h){Ia(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ra(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function wa(h){if(!pa(h.h)&&!h.s){h.s=!0;var _=h.Ga;ut||V(),yt||(ut(),yt=!0),qt.add(_,h),h.B=0}}function Of(h,_){return _a(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ee(I(h.Ga,h,_),sl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new en(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=A(Q),x(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)t:{for(var _=0,y=0;y<this.i.length;y++){e:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=y;break t}if(_===4096||y===this.i.length-1){_=y+1;break t}}_=1e3}else _=1e3;_=$u(this,B,_),y=gn(this.I),Xt(y,"RID",h),Xt(y,"CVER",22),this.D&&Xt(y,"X-HTTP-Session-Id",this.D),bs(this,y),Q&&(this.O?_="headers="+encodeURIComponent(String(el(Q)))+"&"+_:this.m&&Me(y,this.m,Q)),ya(this.h,B),this.Ua&&Xt(y,"TYPE","init"),this.P?(Xt(y,"$req",_),Xt(y,"SID","null"),B.T=!0,Gn(B,y,null)):Gn(B,y,_),this.G=2}}else this.G==3&&(h?il(this,h):this.i.length==0||pa(this.h)||il(this))};function il(h,_){var y;_?y=_.l:y=h.U++;const S=gn(h.I);Xt(S,"SID",h.K),Xt(S,"RID",y),Xt(S,"AID",h.T),bs(h,S),h.m&&h.o&&Me(S,h.m,h.o),y=new en(h,h.j,y,h.B+1),h.m===null&&(y.H=h.o),_&&(h.i=_.D.concat(h.i)),_=$u(h,y,1e3),y.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ya(h.h,y),Gn(y,S,_)}function bs(h,_){h.H&&dt(h.H,function(y,S){Xt(_,S,y)}),h.l&&$o({},function(y,S){Xt(_,S,y)})}function $u(h,_,y){y=Math.min(h.i.length,y);var S=h.l?I(h.l.Na,h.l,h):null;t:{var B=h.i;let Q=-1;for(;;){const at=["count="+y];Q==-1?0<y?(Q=B[0].g,at.push("ofs="+Q)):Q=0:at.push("ofs="+Q);let Ut=!0;for(let Re=0;Re<y;Re++){let Lt=B[Re].g;const Pe=B[Re].map;if(Lt-=Q,0>Lt)Q=Math.max(0,B[Re].g-100),Ut=!1;else try{ii(Pe,at,"req"+Lt+"_")}catch{S&&S(Pe)}}if(Ut){S=at.join("&");break t}}}return h=h.i.splice(0,y),_.D=h,S}function Wu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ut||V(),yt||(ut(),yt=!0),qt.add(_,h),h.v=0}}function rl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ee(I(h.Fa,h),sl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ee(I(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Ia(this),Ju(this))};function Ss(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ju(h){h.g=new en(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=gn(h.qa);Xt(_,"RID","rpc"),Xt(_,"SID",h.K),Xt(_,"AID",h.T),Xt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xt(_,"TO",h.ja),Xt(_,"TYPE","xmlhttp"),bs(h,_),h.m&&h.o&&Me(_,h.m,h.o),h.L&&(h.g.I=h.L);var y=h.g;h=h.ia,y.L=1,y.v=gs(gn(_)),y.m=null,y.P=!0,Ai(y,h)}s.Za=function(){this.C!=null&&(this.C=null,Ia(this),rl(this),re(19))};function Ra(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Zu(h,_){var y=null;if(h.g==_){Ra(h),Ss(h),h.g=null;var S=2}else if(Yo(h.h,_))y=_.D,nn(h.h,_),S=1;else return;if(h.G!=0){if(_.o)if(S==1){y=_.m?_.m.length:0,_=Date.now()-_.F;var B=h.B;S=lr(),Ht(S,new we(S,y)),wa(h)}else Wu(h);else if(B=_.s,B==3||B==0&&0<_.X||!(S==1&&Of(h,_)||S==2&&rl(h)))switch(y&&0<y.length&&(_=h.h,_.i=_.i.concat(y)),B){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function sl(h,_){let y=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(y*=2),y*_}function Vi(h,_){if(h.j.info("Error code "+_),_==2){var y=I(h.fb,h),S=h.Xa;const B=!S;S=new Te(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ms(S,"https"),gs(S),B?_s(S.toString(),y):Hn(S.toString(),y)}else re(2);h.G=0,h.l&&h.l.sa(_),tc(h),Xu(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function tc(h){if(h.G=0,h.ka=[],h.l){const _=Xo(h.h);(_.length!=0||h.i.length!=0)&&(L(h.ka,_),L(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function ec(h,_,y){var S=y instanceof Te?gn(y):new Te(y);if(S.g!="")_&&(S.g=_+"."+S.g),dr(S,S.s);else{var B=d.location;S=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;var Q=new Te(null);S&&ms(Q,S),_&&(Q.g=_),B&&dr(Q,B),y&&(Q.l=y),S=Q}return y=h.D,_=h.ya,y&&_&&Xt(S,y,_),Xt(S,"VER",h.la),bs(h,S),S}function nc(h,_,y){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Gt(new mr({eb:y})):new Gt(h.pa),_.Ha(h.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}s=ic.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ca(){}Ca.prototype.g=function(h,_){return new rn(h,_)};function rn(h,_){de.call(this),this.g=new Aa(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!tt(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!tt(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new oi(this)}K(rn,de),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){nl(this.g)},rn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var y={};y.__data__=h,h=y}else this.u&&(y={},y.__data__=Fn(h),h=y);_.i.push(new Gu(_.Ya++,h)),_.G==3&&wa(_)},rn.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,rn.aa.N.call(this)};function rc(h){bi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const y in _){h=y;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}K(rc,bi);function sc(){Go.call(this),this.status=1}K(sc,Go);function oi(h){this.g=h}K(oi,ic),oi.prototype.ua=function(){Ht(this.g,"a")},oi.prototype.ta=function(h){Ht(this.g,new rc(h))},oi.prototype.sa=function(h){Ht(this.g,new sc)},oi.prototype.ra=function(){Ht(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,F0=function(){return new Ca},q0=function(){return lr()},j0=Jn,eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,yh=hr,Si.COMPLETE="complete",z0=Si,Fo.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",de.prototype.listen=de.prototype.K,Zl=Fo,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,B0=Gt}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const AE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Ag("@firebase/firestore");function lo(){return Js.logLevel}function rt(s,...t){if(Js.logLevel<=Pt.DEBUG){const e=t.map(Lg);Js.debug(`Firestore (${Po}): ${s}`,...e)}}function an(s,...t){if(Js.logLevel<=Pt.ERROR){const e=t.map(Lg);Js.error(`Firestore (${Po}): ${s}`,...e)}}function Zs(s,...t){if(Js.logLevel<=Pt.WARN){const e=t.map(Lg);Js.warn(`Firestore (${Po}): ${s}`,...e)}}function Lg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(s="Unexpected state"){const t=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+s;throw an(t),new Error(t)}function _t(s,t){s||gt()}function wt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends sr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class sD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ye.UNAUTHENTICATED))}shutdown(){}}class aD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class oD{constructor(t){this.t=t,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0);let i=this.i;const a=g=>this.i!==i?(i=this.i,e(g)):Promise.resolve();let l=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ji,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ji)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string"),new G0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string"),new Ye(t)}}class lD{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uD{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new lD(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hD{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){_t(this.o===void 0);const i=l=>{l.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const a=l=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(_t(typeof e.token=="string"),this.R=e.token,new cD(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<s;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const a=fD(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%t.length))}return i}}function Rt(s,t){return s<t?-1:s>t?1:0}function bo(s,t,e){return s.length===t.length&&s.every((i,a)=>e(i,t[a]))}function K0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ft(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ft(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ft(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return he.fromMillis(Date.now())}static fromDate(t){return he.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new he(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Et(t)}static min(){return new Et(new he(0,0))}static max(){return new Et(new he(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,e,i){e===void 0?e=0:e>t.length&&gt(),i===void 0?i=t.length-e:i>t.length-e&&gt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return du.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof du?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=t.get(a),c=e.get(a);if(l<c)return-1;if(l>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yt extends du{construct(t,e,i){return new Yt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ft(et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new Yt(e)}static emptyPath(){return new Yt([])}}const dD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends du{construct(t,e,i){return new ue(t,e,i)}static isValidIdentifier(t){return dD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ue(["__name__"])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ft(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new ft(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ft(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ft(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(e)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Yt.fromString(t))}static fromName(t){return new ht(Yt.fromString(t).popFirst(5))}static empty(){return new ht(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Yt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Yt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,e,i,a){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=a}}function ng(s){return s.fields.find(t=>t.kind===2)}function js(s){return s.fields.filter(t=>t.kind!==2)}Uh.UNKNOWN_ID=-1;class vh{constructor(t,e){this.fieldPath=t,this.kind=e}}class mu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new mu(0,In.min())}}function mD(s,t){const e=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Et.fromTimestamp(i===1e9?new he(e+1,0):new he(e,i));return new In(a,ht.empty(),t)}function Q0(s){return new In(s.readTime,s.key,-1)}class In{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new In(Et.min(),ht.empty(),-1)}static max(){return new In(Et.max(),ht.empty(),-1)}}function Bg(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(s.documentKey,t.documentKey),e!==0?e:Rt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==Y0)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new F((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof F?e:F.resolve(e)}catch(e){return F.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):F.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):F.reject(e)}static resolve(t){return new F((e,i)=>{e(t)})}static reject(t){return new F((e,i)=>{i(t)})}static waitFor(t){return new F((e,i)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&e()},g=>i(g))}),c=!0,l===a&&e()})}static or(t){let e=F.resolve(!1);for(const i of t)e=e.next(a=>a?F.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,l)=>{i.push(e.call(this,a,l))}),this.waitFor(i)}static mapArray(t,e){return new F((i,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;e(t[p]).next(v=>{c[p]=v,++d,d===l&&i(c)},v=>a(v))}})}static doWhile(t,e){return new F((i,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Ji,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new ru(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const a=zg(i.target.error);this.V.reject(new ru(t,a))}}static open(t,e,i,a){try{return new rf(e,t.transaction(a,i))}catch(l){throw new ru(e,l)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(rt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new pD(e)}}class Xr{constructor(t,e,i){this.name=t,this.version=e,this.p=i,Xr.S(Ve())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return rt("SimpleDb","Removing database:",t),qs(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!JT())return!1;if(Xr.v())return!0;const t=Ve(),e=Xr.S(t),i=0<e&&e<10,a=$0(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(t){return this.db||(rt("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{i(new ru(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ft(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ft(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new ru(t,c))},a.onupgradeneeded=l=>{rt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.p.O(c,a.transaction,l.oldVersion,this.version).next(()=>{rt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(t);const d=rf.open(this.db,t,l?"readonly":"readwrite",i),g=a(d).next(p=>(d.g(),p)).catch(p=>(d.abort(p),F.reject(p))).toPromise();return g.catch(()=>{}),await d.m,g}catch(d){const g=d,p=g.name!=="FirebaseError"&&c<3;if(rt("SimpleDb","Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $0(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class gD{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return qs(this.B.delete())}}class ru extends ft{constructor(t,e){super(et.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ts(s){return s.name==="IndexedDbTransactionError"}class pD{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(rt("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),qs(i)}add(t){return rt("SimpleDb","ADD",this.store.name,t,t),qs(this.store.add(t))}get(t){return qs(this.store.get(t)).next(e=>(e===void 0&&(e=null),rt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return rt("SimpleDb","DELETE",this.store.name,t),qs(this.store.delete(t))}count(){return rt("SimpleDb","COUNT",this.store.name),qs(this.store.count())}U(t,e){const i=this.options(t,e),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new F((c,d)=>{l.onerror=g=>{d(g.target.error)},l.onsuccess=g=>{c(g.target.result)}})}{const l=this.cursor(i),c=[];return this.W(l,(d,g)=>{c.push(g)}).next(()=>c)}}G(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new F((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}j(t,e){rt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const a=this.cursor(i);return this.W(a,(l,c,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const a=this.cursor(i);return this.W(a,e)}Y(t){const e=this.cursor({});return new F((i,a)=>{e.onerror=l=>{const c=zg(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(t,e){const i=[];return new F((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const g=new gD(d),p=e(d.primaryKey,d.value,g);if(p instanceof F){const v=p.catch(T=>(g.done(),F.reject(T)));i.push(v)}g.isDone?a():g.K===null?d.continue():d.continue(g.K)}}).next(()=>F.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function qs(s){return new F((t,e)=>{s.onsuccess=i=>{const a=i.target.result;t(a)},s.onerror=i=>{const a=zg(i.target.error);e(a)}})}let IE=!1;function zg(s){const t=Xr.S(Ve());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const i=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IE||(IE=!0,setTimeout(()=>{throw i},0)),i}}return s}class _D{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){rt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{rt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){ts(e)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await oa(e)}await this.X(6e4)})}}class yD{constructor(t,e){this.localStore=t,this.persistence=e}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))}te(t,e){const i=new Set;let a=e,l=!0;return F.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(c!==null&&!i.has(c))return rt("IndexBackfiller",`Processing collection: ${c}`),this.ne(t,c,a).next(d=>{a-=d,i.add(c)});l=!1})).next(()=>e-a)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(a=>this.localStore.localDocuments.getNextDocuments(t,e,a,i).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.re(a,l)).next(d=>(rt("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}re(t,e){let i=t;return e.changes.forEach((a,l)=>{const c=Q0(l);Bg(c,i)>0&&(i=c)}),new In(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ie(i),this.se=i=>e.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}zn.oe=-1;function sf(s){return s==null}function gu(s){return s===0&&1/s==-1/0}function vD(s){return typeof s=="number"&&Number.isInteger(s)&&!gu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=wE(t)),t=ED(s.get(e),t);return wE(t)}function ED(s,t){let e=t;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":e+="";break;case"":e+="";break;default:e+=l}}return e}function wE(s){return s+""}function mi(s){const t=s.length;if(_t(t>=2),t===2)return _t(s.charAt(0)===""&&s.charAt(1)===""),Yt.emptyPath();const e=t-2,i=[];let a="";for(let l=0;l<t;){const c=s.indexOf("",l);switch((c<0||c>e)&&gt(),s.charAt(c+1)){case"":const d=s.substring(l,c);let g;a.length===0?g=d:(a+=d,g=a,a=""),i.push(g);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:gt()}l=c+2}return new Yt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(s,t){return[s,on(t)]}function W0(s,t,e){return[s,on(t),e]}const TD={},bD=["prefixPath","collectionGroup","readTime","documentId"],SD=["prefixPath","collectionGroup","documentId"],AD=["collectionGroup","readTime","prefixPath","documentId"],ID=["canonicalId","targetId"],wD=["targetId","path"],RD=["path","targetId"],CD=["collectionId","parent"],DD=["indexId","uid"],xD=["uid","sequenceNumber"],VD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ND=["indexId","uid","orderedDocumentKey"],OD=["userId","collectionPath","documentId"],MD=["userId","collectionPath","largestBatchId"],PD=["userId","collectionGroup","largestBatchId"],J0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kD=[...J0,"documentOverlays"],Z0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tb=Z0,jg=[...tb,"indexConfiguration","indexState","indexEntries"],UD=jg,LD=[...jg,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends X0{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Ne(s,t){const e=wt(s);return Xr.F(e._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function la(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function eb(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,e){this.comparator=t,this.root=e||Xe.EMPTY}insert(t,e){return new oe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new lh(this.root,t,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new lh(this.root,t,this.comparator,!0)}}class lh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xe{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??Xe.RED,this.left=a??Xe.EMPTY,this.right=l??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new Xe(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Xe.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(t,e,i,a,l){return this}insert(t,e,i){return new Xe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(t){return new DE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new te(this.comparator);return e.data=t,e}}class DE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ro(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new dn([])}unionWith(t){let e=new te(ue.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new dn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return bo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new nb("Invalid base64 string: "+l):l}}(t);return new Ie(e)}static fromUint8Array(t){const e=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new Ie(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const BD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(s){if(_t(!!s),typeof s=="string"){let t=0;const e=BD.exec(s);if(_t(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ae(s.seconds),nanos:ae(s.nanos)}}function ae(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Wr(s){return typeof s=="string"?Ie.fromBase64String(s):Ie.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Fg(s){const t=s.mapValue.fields.__previous_value__;return qg(t)?Fg(t):t}function pu(s){const t=er(s.mapValue.fields.__local_write_time__.timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t,e,i,a,l,c,d,g,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p}}class ta{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ta&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Th={nullValue:"NULL_VALUE"};function ea(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?qg(s)?4:ib(s)?9007199254740991:af(s)?10:11:gt()}function yi(s,t){if(s===t)return!0;const e=ea(s);if(e!==ea(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return pu(s).isEqual(pu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=er(a.timestampValue),d=er(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(a,l){return Wr(a.bytesValue).isEqual(Wr(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(a,l){return ae(a.geoPointValue.latitude)===ae(l.geoPointValue.latitude)&&ae(a.geoPointValue.longitude)===ae(l.geoPointValue.longitude)}(s,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ae(a.integerValue)===ae(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ae(a.doubleValue),d=ae(l.doubleValue);return c===d?gu(c)===gu(d):isNaN(c)&&isNaN(d)}return!1}(s,t);case 9:return bo(s.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(CE(c)!==CE(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!yi(c[g],d[g])))return!1;return!0}(s,t);default:return gt()}}function _u(s,t){return(s.values||[]).find(e=>yi(e,t))!==void 0}function Jr(s,t){if(s===t)return 0;const e=ea(s),i=ea(t);if(e!==i)return Rt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Rt(s.booleanValue,t.booleanValue);case 2:return function(l,c){const d=ae(l.integerValue||l.doubleValue),g=ae(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(s,t);case 3:return xE(s.timestampValue,t.timestampValue);case 4:return xE(pu(s),pu(t));case 5:return Rt(s.stringValue,t.stringValue);case 6:return function(l,c){const d=Wr(l),g=Wr(c);return d.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const v=Rt(d[p],g[p]);if(v!==0)return v}return Rt(d.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Rt(ae(l.latitude),ae(c.latitude));return d!==0?d:Rt(ae(l.longitude),ae(c.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return VE(s.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,p,v;const T=l.fields||{},I=c.fields||{},M=(d=T.value)===null||d===void 0?void 0:d.arrayValue,K=(g=I.value)===null||g===void 0?void 0:g.arrayValue,z=Rt(((p=M==null?void 0:M.values)===null||p===void 0?void 0:p.length)||0,((v=K==null?void 0:K.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:VE(M,K)}(s.mapValue,t.mapValue);case 11:return function(l,c){if(l===Gr.mapValue&&c===Gr.mapValue)return 0;if(l===Gr.mapValue)return 1;if(c===Gr.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const I=Rt(g[T],v[T]);if(I!==0)return I;const M=Jr(d[g[T]],p[v[T]]);if(M!==0)return M}return Rt(g.length,v.length)}(s.mapValue,t.mapValue);default:throw gt()}}function xE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Rt(s,t);const e=er(s),i=er(t),a=Rt(e.seconds,i.seconds);return a!==0?a:Rt(e.nanos,i.nanos)}function VE(s,t){const e=s.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=Jr(e[a],i[a]);if(l)return l}return Rt(e.length,i.length)}function So(s){return rg(s)}function rg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const i=er(e);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return Wr(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return ht.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=rg(l);return i+"]"}(s.arrayValue):"mapValue"in s?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${rg(e.fields[c])}`;return a+"}"}(s.mapValue):gt()}function Gg(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function sg(s){return!!s&&"integerValue"in s}function yu(s){return!!s&&"arrayValue"in s}function NE(s){return!!s&&"nullValue"in s}function OE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bh(s){return!!s&&"mapValue"in s}function af(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function su(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return la(s.mapValue.fields,(e,i)=>t.mapValue.fields[e]=su(i)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=su(s.arrayValue.values[e]);return t}return Object.assign({},s)}function ib(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function jD(s){return"nullValue"in s?Th:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Gg(ta.empty(),ht.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?af(s)?rb:{mapValue:{}}:gt()}function qD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Gg(ta.empty(),ht.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?rb:"mapValue"in s?af(s)?{mapValue:{}}:Gr:gt()}function ME(s,t){const e=Jr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function PE(s,t){const e=Jr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.value=t}static empty(){return new tn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!bh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=su(e)}setAll(t){let e=ue.emptyPath(),i={},a=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,i,a),i={},a=[],e=d.popLast()}c?i[d.lastSegment()]=su(c):a.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());bh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];bh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){la(e,(a,l)=>t[a]=l);for(const a of i)delete t[a]}clone(){return new tn(su(this.value))}}function sb(s){const t=[];return la(s.fields,(e,i)=>{const a=new ue([e]);if(bh(i)){const l=sb(i.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new dn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,e,i,a,l,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new pe(t,0,Et.min(),Et.min(),Et.min(),tn.empty(),0)}static newFoundDocument(t,e,i,a){return new pe(t,1,e,Et.min(),i,a,0)}static newNoDocument(t,e){return new pe(t,2,e,Et.min(),Et.min(),tn.empty(),0)}static newUnknownDocument(t,e){return new pe(t,3,e,Et.min(),Et.min(),tn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,e){this.position=t,this.inclusive=e}}function kE(s,t,e){let i=0;for(let a=0;a<s.position.length;a++){const l=t[a],c=s.position[a];if(l.field.isKeyField()?i=ht.comparator(ht.fromName(c.referenceValue),e.key):i=Jr(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function UE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!yi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,e="asc"){this.field=t,this.dir=e}}function FD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{}class kt extends ab{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new GD(t,e,i):e==="array-contains"?new QD(t,i):e==="in"?new fb(t,i):e==="not-in"?new YD(t,i):e==="array-contains-any"?new XD(t,i):new kt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new HD(t,i):new KD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Jr(e,this.value)):e!==null&&ea(this.value)===ea(e)&&this.matchesComparison(Jr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends ab{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Zt(t,e)}matches(t){return Io(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Io(s){return s.op==="and"}function ag(s){return s.op==="or"}function Hg(s){return ob(s)&&Io(s)}function ob(s){for(const t of s.filters)if(t instanceof Zt)return!1;return!0}function og(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+So(s.value);if(Hg(s))return s.filters.map(t=>og(t)).join(",");{const t=s.filters.map(e=>og(e)).join(",");return`${s.op}(${t})`}}function lb(s,t){return s instanceof kt?function(i,a){return a instanceof kt&&i.op===a.op&&i.field.isEqual(a.field)&&yi(i.value,a.value)}(s,t):s instanceof Zt?function(i,a){return a instanceof Zt&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&lb(c,a.filters[d]),!0):!1}(s,t):void gt()}function ub(s,t){const e=s.filters.concat(t);return Zt.create(e,s.op)}function cb(s){return s instanceof kt?function(e){return`${e.field.canonicalString()} ${e.op} ${So(e.value)}`}(s):s instanceof Zt?function(e){return e.op.toString()+" {"+e.getFilters().map(cb).join(" ,")+"}"}(s):"Filter"}class GD extends kt{constructor(t,e,i){super(t,e,i),this.key=ht.fromName(i.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class HD extends kt{constructor(t,e){super(t,"in",e),this.keys=hb("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class KD extends kt{constructor(t,e){super(t,"not-in",e),this.keys=hb("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hb(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>ht.fromName(i.referenceValue))}class QD extends kt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return yu(e)&&_u(e.arrayValue,this.value)}}class fb extends kt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&_u(this.value.arrayValue,e)}}class YD extends kt{constructor(t,e){super(t,"not-in",e)}matches(t){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!_u(this.value.arrayValue,e)}}class XD extends kt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!yu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>_u(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,e=null,i=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function lg(s,t=null,e=[],i=[],a=null,l=null,c=null){return new $D(s,t,e,i,a,l,c)}function na(s){const t=wt(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>og(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),sf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>So(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>So(i)).join(",")),t.ue=e}return t.ue}function Ru(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!FD(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!lb(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!UE(s.startAt,t.startAt)&&UE(s.endAt,t.endAt)}function Bh(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function zh(s,t){return s.filters.filter(e=>e instanceof kt&&e.field.isEqual(t))}function LE(s,t,e){let i=Th,a=!0;for(const l of zh(s,t)){let c=Th,d=!0;switch(l.op){case"<":case"<=":c=jD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Th}ME({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];ME({value:i,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}function BE(s,t,e){let i=Gr,a=!0;for(const l of zh(s,t)){let c=Gr,d=!0;switch(l.op){case">=":case">":c=qD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Gr}PE({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];PE({value:i,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(t,e=null,i=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WD(s,t,e,i,a,l,c,d){return new of(s,t,e,i,a,l,c,d)}function Kg(s){return new of(s)}function zE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function JD(s){return s.collectionGroup!==null}function au(s){const t=wt(s);if(t.ce===null){t.ce=[];const e=new Set;for(const l of t.explicitOrderBy)t.ce.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new te(ue.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.ce.push(new Lh(l,i))}),e.has(ue.keyField().canonicalString())||t.ce.push(new Lh(ue.keyField(),i))}return t.ce}function jn(s){const t=wt(s);return t.le||(t.le=ZD(t,au(s))),t.le}function ZD(s,t){if(s.limitType==="F")return lg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Lh(a.field,l)});const e=s.endAt?new Ao(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ao(s.startAt.position,s.startAt.inclusive):null;return lg(s.path,s.collectionGroup,t,s.filters,s.limit,e,i)}}function ug(s,t,e){return new of(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function lf(s,t){return Ru(jn(s),jn(t))&&s.limitType===t.limitType}function db(s){return`${na(jn(s))}|lt:${s.limitType}`}function uo(s){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>cb(a)).join(", ")}]`),sf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>So(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>So(a)).join(",")),`Target(${i})`}(jn(s))}; limitType=${s.limitType})`}function Cu(s,t){return t.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ht.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(s,t)&&function(i,a){for(const l of au(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,t)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(s,t)&&function(i,a){return!(i.startAt&&!function(c,d,g){const p=kE(c,d,g);return c.inclusive?p<=0:p<0}(i.startAt,au(i),a)||i.endAt&&!function(c,d,g){const p=kE(c,d,g);return c.inclusive?p>=0:p>0}(i.endAt,au(i),a))}(s,t)}function tx(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function mb(s){return(t,e)=>{let i=!1;for(const a of au(s)){const l=ex(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function ex(s,t,e){const i=s.field.isKeyField()?ht.comparator(t.key,e.key):function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?Jr(g,p):gt()}(s.field,t,e);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){la(this.inner,(e,i)=>{for(const[a,l]of i)t(a,l)})}isEmpty(){return eb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new oe(ht.comparator);function Sn(){return nx}const gb=new oe(ht.comparator);function tu(...s){let t=gb;for(const e of s)t=t.insert(e.key,e);return t}function pb(s){let t=gb;return s.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function gi(){return ou()}function _b(){return ou()}function ou(){return new es(s=>s.toString(),(s,t)=>s.isEqual(t))}const ix=new oe(ht.comparator),rx=new te(ht.comparator);function xt(...s){let t=rx;for(const e of s)t=t.add(e);return t}const sx=new te(Rt);function ax(){return sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(t)?"-0":t}}function yb(s){return{integerValue:""+s}}function ox(s,t){return vD(t)?yb(t):Qg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function lx(s,t,e){return s instanceof vu?function(a,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&qg(l)&&(l=Fg(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(e,t):s instanceof wo?Eb(s,t):s instanceof Ro?Tb(s,t):function(a,l){const c=vb(a,l),d=jE(c)+jE(a.Pe);return sg(c)&&sg(a.Pe)?yb(d):Qg(a.serializer,d)}(s,t)}function ux(s,t,e){return s instanceof wo?Eb(s,t):s instanceof Ro?Tb(s,t):e}function vb(s,t){return s instanceof Eu?function(i){return sg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class vu extends uf{}class wo extends uf{constructor(t){super(),this.elements=t}}function Eb(s,t){const e=bb(t);for(const i of s.elements)e.some(a=>yi(a,i))||e.push(i);return{arrayValue:{values:e}}}class Ro extends uf{constructor(t){super(),this.elements=t}}function Tb(s,t){let e=bb(t);for(const i of s.elements)e=e.filter(a=>!yi(a,i));return{arrayValue:{values:e}}}class Eu extends uf{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function jE(s){return ae(s.integerValue||s.doubleValue)}function bb(s){return yu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t,e){this.field=t,this.transform=e}}function hx(s,t){return s.field.isEqual(t.field)&&function(i,a){return i instanceof wo&&a instanceof wo||i instanceof Ro&&a instanceof Ro?bo(i.elements,a.elements,yi):i instanceof Eu&&a instanceof Eu?yi(i.Pe,a.Pe):i instanceof vu&&a instanceof vu}(s.transform,t.transform)}class fx{constructor(t,e){this.version=t,this.transformResults=e}}class ze{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ze}static exists(t){return new ze(void 0,t)}static updateTime(t){return new ze(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Sh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class cf{}function Sb(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new hf(s.key,ze.none()):new ko(s.key,s.data,ze.none());{const e=s.data,i=tn.empty();let a=new te(ue.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ar(s.key,i,new dn(a.toArray()),ze.none())}}function dx(s,t,e){s instanceof ko?function(a,l,c){const d=a.value.clone(),g=FE(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,t,e):s instanceof ar?function(a,l,c){if(!Sh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=FE(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(Ab(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(s,t,e):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function lu(s,t,e,i){return s instanceof ko?function(l,c,d,g){if(!Sh(l.precondition,c))return d;const p=l.value.clone(),v=GE(l.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,t,e,i):s instanceof ar?function(l,c,d,g){if(!Sh(l.precondition,c))return d;const p=GE(l.fieldTransforms,g,c),v=c.data;return v.setAll(Ab(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,t,e,i):function(l,c,d){return Sh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,t,e)}function mx(s,t){let e=null;for(const i of s.fieldTransforms){const a=t.data.field(i.field),l=vb(i.transform,a||null);l!=null&&(e===null&&(e=tn.empty()),e.set(i.field,l))}return e||null}function qE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&bo(i,a,(l,c)=>hx(l,c))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class ko extends cf{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ar extends cf{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ab(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=s.data.field(e);t.set(e,i)}}),t}function FE(s,t,e){const i=new Map;_t(s.length===e.length);for(let a=0;a<e.length;a++){const l=s[a],c=l.transform,d=t.data.field(l.field);i.set(l.field,ux(c,d,e[a]))}return i}function GE(s,t,e){const i=new Map;for(const a of s){const l=a.transform,c=e.data.field(a.field);i.set(a.field,lx(l,c,t))}return i}class hf extends cf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ib extends cf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&dx(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=lu(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=lu(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=_b();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(a.key)?null:d;const g=Sb(c,d);g!==null&&i.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Et.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),xt())}isEqual(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,(e,i)=>qE(e,i))&&bo(this.baseMutations,t.baseMutations,(e,i)=>qE(e,i))}}class Xg{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){_t(t.mutations.length===i.length);let a=function(){return ix}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Xg(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,zt;function px(s){switch(s){default:return gt();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function wb(s){if(s===void 0)return an("GRPC error has no .code"),et.UNKNOWN;switch(s){case Ae.OK:return et.OK;case Ae.CANCELLED:return et.CANCELLED;case Ae.UNKNOWN:return et.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return et.INTERNAL;case Ae.UNAVAILABLE:return et.UNAVAILABLE;case Ae.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ae.NOT_FOUND:return et.NOT_FOUND;case Ae.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ae.ABORTED:return et.ABORTED;case Ae.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ae.DATA_LOSS:return et.DATA_LOSS;default:return gt()}}(zt=Ae||(Ae={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Ys([4294967295,4294967295],0);function HE(s){const t=_x().encode(s),e=new L0;return e.update(t),new Uint8Array(e.digest())}function KE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ys([e,i],0),new Ys([a,l],0)]}class Wg{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new eu(`Invalid padding: ${e}`);if(i<0)throw new eu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new eu(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ys.fromNumber(this.Ie)}Ee(t,e,i){let a=t.add(e.multiply(Ys.fromNumber(i)));return a.compare(yx)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=HE(t),[i,a]=KE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);if(!this.de(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Wg(l,a,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(this.Ie===0)return;const e=HE(t),[i,a]=KE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);this.Ae(c)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Du.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new ff(Et.min(),a,new oe(Rt),Sn(),xt())}}class Du{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Du(i,e,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,e,i,a){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=a}}class Rb{constructor(t,e){this.targetId=t,this.me=e}}class Cb{constructor(t,e,i=Ie.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class QE{constructor(){this.fe=0,this.ge=XE(),this.pe=Ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=xt(),e=xt(),i=xt();return this.ge.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:gt()}}),new Du(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=XE()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Sn(),this.qe=YE(),this.Qe=new oe(Rt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:gt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,a)=>{this.ze(a)&&e(a)})}He(t){const e=t.targetId,i=t.me.count,a=this.Je(e);if(a){const l=a.target;if(Bh(l))if(i===0){const c=new ht(l.path);this.Ue(e,c,pe.newNoDocument(c,Et.min()))}else _t(i===1);else{const c=this.Ye(e);if(c!==i){const d=this.Ze(t),g=d?this.Xe(d,t,c):1;if(g!==0){this.je(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,p)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let c,d;try{c=Wr(i).toUint8Array()}catch(g){if(g instanceof nb)return Zs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Wg(c,a,l)}catch(g){return Zs(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ie===0?null:d}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let a=0;return i.forEach(l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.Ue(e,l,null),a++)}),a}rt(t){const e=new Map;this.Be.forEach((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Bh(d.target)){const g=new ht(d.target.path);this.ke.get(g)!==null||this.it(c,g)||this.Ue(c,g,pe.newNoDocument(g,t))}l.be&&(e.set(c,l.ve()),l.Ce())}});let i=xt();this.qe.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const p=this.Je(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(t));const a=new ff(t,e,this.Qe,this.ke,i);return this.ke=Sn(),this.qe=YE(),this.Qe=new oe(Rt),a}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const a=this.Ge(t);this.it(t,e)?a.Fe(e,1):a.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new QE,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new te(Rt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new QE),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function YE(){return new oe(ht.comparator)}function XE(){return new oe(ht.comparator)}const Ex={asc:"ASCENDING",desc:"DESCENDING"},Tx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bx={and:"AND",or:"OR"};class Sx{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function cg(s,t){return s.useProto3Json||sf(t)?t:{value:t}}function Co(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Db(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Ax(s,t){return Co(s,t.toTimestamp())}function ln(s){return _t(!!s),Et.fromTimestamp(function(e){const i=er(e);return new he(i.seconds,i.nanos)}(s))}function Jg(s,t){return hg(s,t).canonicalString()}function hg(s,t){const e=function(a){return new Yt(["projects",a.projectId,"databases",a.database])}(s).child("documents");return t===void 0?e:e.child(t)}function xb(s){const t=Yt.fromString(s);return _t(Bb(t)),t}function jh(s,t){return Jg(s.databaseId,t.path)}function Xs(s,t){const e=xb(t);if(e.get(1)!==s.databaseId.projectId)throw new ft(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new ft(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ht(Ob(e))}function Vb(s,t){return Jg(s.databaseId,t)}function Nb(s){const t=xb(s);return t.length===4?Yt.emptyPath():Ob(t)}function fg(s){return new Yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Ob(s){return _t(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function $E(s,t,e){return{name:jh(s,t),fields:e.value.mapValue.fields}}function Ix(s,t,e){const i=Xs(s,t.name),a=ln(t.updateTime),l=t.createTime?ln(t.createTime):Et.min(),c=new tn({mapValue:{fields:t.fields}}),d=pe.newFoundDocument(i,a,l,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function wx(s,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:gt()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,v){return p.useProto3Json?(_t(v===void 0||typeof v=="string"),Ie.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Ie.fromUint8Array(v||new Uint8Array))}(s,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const v=p.code===void 0?et.UNKNOWN:wb(p.code);return new ft(v,p.message||"")}(c);e=new Cb(i,a,l,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Xs(s,i.document.name),l=ln(i.document.updateTime),c=i.document.createTime?ln(i.document.createTime):Et.min(),d=new tn({mapValue:{fields:i.document.fields}}),g=pe.newFoundDocument(a,l,c,d),p=i.targetIds||[],v=i.removedTargetIds||[];e=new Ah(p,v,g.key,g)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Xs(s,i.document),l=i.readTime?ln(i.readTime):Et.min(),c=pe.newNoDocument(a,l),d=i.removedTargetIds||[];e=new Ah([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Xs(s,i.document),l=i.removedTargetIds||[];e=new Ah([],l,a,null)}else{if(!("filter"in t))return gt();{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new gx(a,l),d=i.targetId;e=new Rb(d,c)}}return e}function qh(s,t){let e;if(t instanceof ko)e={update:$E(s,t.key,t.value)};else if(t instanceof hf)e={delete:jh(s,t.key)};else if(t instanceof ar)e={update:$E(s,t.key,t.data),updateMask:Nx(t.fieldMask)};else{if(!(t instanceof Ib))return gt();e={verify:jh(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof vu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof wo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ro)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Eu)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw gt()}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Ax(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:gt()}(s,t.precondition)),e}function dg(s,t){const e=t.currentDocument?function(l){return l.updateTime!==void 0?ze.updateTime(ln(l.updateTime)):l.exists!==void 0?ze.exists(l.exists):ze.none()}(t.currentDocument):ze.none(),i=t.updateTransforms?t.updateTransforms.map(a=>function(c,d){let g=null;if("setToServerValue"in d)_t(d.setToServerValue==="REQUEST_TIME"),g=new vu;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];g=new wo(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];g=new Ro(v)}else"increment"in d?g=new Eu(c,d.increment):gt();const p=ue.fromServerFormat(d.fieldPath);return new cx(p,g)}(s,a)):[];if(t.update){t.update.name;const a=Xs(s,t.update.name),l=new tn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=function(g){const p=g.fieldPaths||[];return new dn(p.map(v=>ue.fromServerFormat(v)))}(t.updateMask);return new ar(a,l,c,e,i)}return new ko(a,l,e,i)}if(t.delete){const a=Xs(s,t.delete);return new hf(a,e)}if(t.verify){const a=Xs(s,t.verify);return new Ib(a,e)}return gt()}function Rx(s,t){return s&&s.length>0?(_t(t!==void 0),s.map(e=>function(a,l){let c=a.updateTime?ln(a.updateTime):ln(l);return c.isEqual(Et.min())&&(c=ln(l)),new fx(c,a.transformResults||[])}(e,t))):[]}function Mb(s,t){return{documents:[Vb(s,t.path)]}}function Pb(s,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Vb(s,a);const l=function(p){if(p.length!==0)return Lb(Zt.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(v=>function(I){return{field:co(I.field),direction:Dx(I.dir)}}(v))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=cg(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{_t:e,parent:a}}function kb(s){let t=Nb(s.parent);const e=s.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){_t(i===1);const v=e.from[0];v.allDescendants?a=v.collectionId:t=t.child(v.collectionId)}let l=[];e.where&&(l=function(T){const I=Ub(T);return I instanceof Zt&&Hg(I)?I.getFilters():[I]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(I=>function(K){return new Lh(ho(K.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(I))}(e.orderBy));let d=null;e.limit&&(d=function(T){let I;return I=typeof T=="object"?T.value:T,sf(I)?null:I}(e.limit));let g=null;e.startAt&&(g=function(T){const I=!!T.before,M=T.values||[];return new Ao(M,I)}(e.startAt));let p=null;return e.endAt&&(p=function(T){const I=!T.before,M=T.values||[];return new Ao(M,I)}(e.endAt)),WD(t,a,c,l,d,"F",g,p)}function Cx(s,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ub(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=ho(e.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ho(e.unaryFilter.field);return kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ho(e.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ho(e.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(s):s.fieldFilter!==void 0?function(e){return kt.create(ho(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Zt.create(e.compositeFilter.filters.map(i=>Ub(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt()}}(e.compositeFilter.op))}(s):gt()}function Dx(s){return Ex[s]}function xx(s){return Tx[s]}function Vx(s){return bx[s]}function co(s){return{fieldPath:s.canonicalString()}}function ho(s){return ue.fromServerFormat(s.fieldPath)}function Lb(s){return s instanceof kt?function(e){if(e.op==="=="){if(OE(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NAN"}};if(NE(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(OE(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NOT_NAN"}};if(NE(e.value))return{unaryFilter:{field:co(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(e.field),op:xx(e.op),value:e.value}}}(s):s instanceof Zt?function(e){const i=e.getFilters().map(a=>Lb(a));return i.length===1?i[0]:{compositeFilter:{op:Vx(e.op),filters:i}}}(s):gt()}function Nx(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,e,i,a,l=Et.min(),c=Et.min(),d=Ie.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Wi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.ct=t}}function Ox(s,t){let e;if(t.document)e=Ix(s.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ht.fromSegments(t.noDocument.path),a=ra(t.noDocument.readTime);e=pe.newNoDocument(i,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt();{const i=ht.fromSegments(t.unknownDocument.path),a=ra(t.unknownDocument.version);e=pe.newUnknownDocument(i,a)}}return t.readTime&&e.setReadTime(function(a){const l=new he(a[0],a[1]);return Et.fromTimestamp(l)}(t.readTime)),e}function WE(s,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Fh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(l,c){return{name:jh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Co(l,c.version.toTimestamp()),createTime:Co(l,c.createTime.toTimestamp())}}(s.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ia(t.version)};else{if(!t.isUnknownDocument())return gt();i.unknownDocument={path:e.path.toArray(),version:ia(t.version)}}return i}function Fh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function ia(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ra(s){const t=new he(s.seconds,s.nanoseconds);return Et.fromTimestamp(t)}function Fs(s,t){const e=(t.baseMutations||[]).map(l=>dg(s.ct,l));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const d=t.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const i=t.mutations.map(l=>dg(s.ct,l)),a=he.fromMillis(t.localWriteTimeMs);return new Yg(t.batchId,a,e,i)}function nu(s){const t=ra(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?ra(s.lastLimboFreeSnapshotVersion):Et.min();let i;return i=function(l){return l.documents!==void 0}(s.query)?function(l){return _t(l.documents.length===1),jn(Kg(Nb(l.documents[0])))}(s.query):function(l){return jn(kb(l))}(s.query),new Wi(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Ie.fromBase64String(s.resumeToken))}function jb(s,t){const e=ia(t.snapshotVersion),i=ia(t.lastLimboFreeSnapshotVersion);let a;a=Bh(t.target)?Mb(s.ct,t.target):Pb(s.ct,t.target)._t;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:na(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function qb(s){const t=kb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?ug(t,t.limit,"L"):t}function Lm(s,t){return new $g(t.largestBatchId,dg(s.ct,t.overlayMutation))}function JE(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function ZE(s,t,e,i){return{indexId:s,uid:t,sequenceNumber:e,readTime:ia(i.readTime),documentKey:on(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{getBundleMetadata(t,e){return tT(t).get(e).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:ra(l.createTime),version:l.version}}(i)})}saveBundleMetadata(t,e){return tT(t).put(function(a){return{bundleId:a.id,createTime:ia(ln(a.createTime)),version:a.version}}(e))}getNamedQuery(t,e){return eT(t).get(e).next(i=>{if(i)return function(l){return{name:l.name,query:qb(l.bundledQuery),readTime:ra(l.readTime)}}(i)})}saveNamedQuery(t,e){return eT(t).put(function(a){return{name:a.name,readTime:ia(ln(a.readTime)),bundledQuery:a.bundledQuery}}(e))}}function tT(s){return Ne(s,"bundles")}function eT(s){return Ne(s,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const i=e.uid||"";return new df(t,i)}getOverlay(t,e){return Yl(t).get(JE(this.userId,e)).next(i=>i?Lm(this.serializer,i):null)}getOverlays(t,e){const i=gi();return F.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){const a=[];return i.forEach((l,c)=>{const d=new $g(e,c);a.push(this.ht(t,d))}),F.waitFor(a)}removeOverlaysForBatchId(t,e,i){const a=new Set;e.forEach(c=>a.add(on(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Yl(t).j("collectionPathOverlayIndex",d))}),F.waitFor(l)}getOverlaysForCollection(t,e,i){const a=gi(),l=on(e),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Yl(t).U("collectionPathOverlayIndex",c).next(d=>{for(const g of d){const p=Lm(this.serializer,g);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(t,e,i,a){const l=gi();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Yl(t).J({index:"collectionGroupOverlayIndex",range:d},(g,p,v)=>{const T=Lm(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):v.done()}).next(()=>l)}ht(t,e){return Yl(t).put(function(a,l,c){const[d,g,p]=JE(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:qh(a.ct,c.mutation)}}(this.serializer,this.userId,e))}}function Yl(s){return Ne(s,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{Pt(t){return Ne(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{const i=e==null?void 0:e.value;return i?Ie.fromUint8Array(i):Ie.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ae(t.integerValue));else if("doubleValue"in t){const i=ae(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),gu(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=er(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Wr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?ib(t)?this.dt(e,Number.MAX_SAFE_INTEGER):af(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):gt()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const i=t.fields||{};this.dt(e,55);for(const a of Object.keys(i))this.Vt(a,e),this.Tt(i[a],e)}wt(t,e){var i,a;const l=t.fields||{};this.dt(e,53);const c="value",d=((a=(i=l[c].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.dt(e,15),e.At(ae(d)),this.Vt(c,e),this.Tt(l[c],e)}bt(t,e){const i=t.values||[];this.dt(e,50);for(const a of i)this.Tt(a,e)}yt(t,e){this.dt(e,37),ht.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}Gs.vt=new Gs;function kx(s){if(s===0)return 8;let t=0;return s>>4==0&&(t+=4,s<<=4),s>>6==0&&(t+=2,s<<=2),s>>7==0&&(t+=1),t}function nT(s){const t=64-function(i){let a=0;for(let l=0;l<8;++l){const c=kx(255&i[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(t/8)}class Ux{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ot(i.value),i=e.next();this.Nt()}Lt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const a=e.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const a=e.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(t){const e=this.qt(t),i=nT(e);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=255&e[a]}Kt(t){const e=this.qt(t),i=nT(e);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const e=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let a=1;a<e.length;++a)e[a]^=i?255:0;return e}Ft(t){const e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){const e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Lx{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Bx{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Xl{constructor(){this.jt=new Ux,this.Ht=new Lx(this.jt),this.Jt=new Bx(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,e,i,a){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=a}Zt(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Hs(this.indexId,this.documentKey,this.arrayValue,i)}}function Ur(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=iT(s.arrayValue,t.arrayValue),e!==0?e:(e=iT(s.directionalValue,t.directionalValue),e!==0?e:ht.comparator(s.documentKey,t.documentKey)))}function iT(s,t){for(let e=0;e<s.length&&e<t.length;++e){const i=s[e]-t[e];if(i!==0)return i}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t){this.Xt=new te((e,i)=>ue.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(_t(t.collectionGroup===this.collectionId),this.nn)return!1;const e=ng(t);if(e!==void 0&&!this.sn(e))return!1;const i=js(t);let a=new Set,l=0,c=0;for(;l<i.length&&this.sn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const g=i[l];if(!this.on(d,g)||!this._n(this.en[c++],g))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.en.length||!this._n(this.en[c++],d))return!1}return!0}an(){if(this.nn)return null;let t=new te(ue.comparator);const e=[];for(const i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new vh(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new vh(i.field,0))}for(const i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new vh(i.field,i.dir==="asc"?0:1)));return new Uh(Uh.UNKNOWN_ID,this.collectionId,e,mu.empty())}sn(t){for(const e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(s){var t,e;if(_t(s instanceof kt||s instanceof Zt),s instanceof kt){if(s instanceof fb){const a=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(l=>kt.create(s.field,"==",l)))||[];return Zt.create(a,"or")}return s}const i=s.filters.map(a=>Fb(a));return Zt.create(i,s.op)}function zx(s){if(s.getFilters().length===0)return[];const t=pg(Fb(s));return _t(Gb(t)),mg(t)||gg(t)?[t]:t.getFilters()}function mg(s){return s instanceof kt}function gg(s){return s instanceof Zt&&Hg(s)}function Gb(s){return mg(s)||gg(s)||function(e){if(e instanceof Zt&&ag(e)){for(const i of e.getFilters())if(!mg(i)&&!gg(i))return!1;return!0}return!1}(s)}function pg(s){if(_t(s instanceof kt||s instanceof Zt),s instanceof kt)return s;if(s.filters.length===1)return pg(s.filters[0]);const t=s.filters.map(i=>pg(i));let e=Zt.create(t,s.op);return e=Gh(e),Gb(e)?e:(_t(e instanceof Zt),_t(Io(e)),_t(e.filters.length>1),e.filters.reduce((i,a)=>Zg(i,a)))}function Zg(s,t){let e;return _t(s instanceof kt||s instanceof Zt),_t(t instanceof kt||t instanceof Zt),e=s instanceof kt?t instanceof kt?function(a,l){return Zt.create([a,l],"and")}(s,t):sT(s,t):t instanceof kt?sT(t,s):function(a,l){if(_t(a.filters.length>0&&l.filters.length>0),Io(a)&&Io(l))return ub(a,l.getFilters());const c=ag(a)?a:l,d=ag(a)?l:a,g=c.filters.map(p=>Zg(p,d));return Zt.create(g,"or")}(s,t),Gh(e)}function sT(s,t){if(Io(t))return ub(t,s.getFilters());{const e=t.filters.map(i=>Zg(s,i));return Zt.create(e,"or")}}function Gh(s){if(_t(s instanceof kt||s instanceof Zt),s instanceof kt)return s;const t=s.getFilters();if(t.length===1)return Gh(t[0]);if(ob(s))return s;const e=t.map(a=>Gh(a)),i=[];return e.forEach(a=>{a instanceof kt?i.push(a):a instanceof Zt&&(a.op===s.op?i.push(...a.filters):i.push(a))}),i.length===1?i[0]:Zt.create(i,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.un=new tp}addToCollectionParentIndex(t,e){return this.un.add(e),F.resolve()}getCollectionParents(t,e){return F.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return F.resolve()}deleteFieldIndex(t,e){return F.resolve()}deleteAllFieldIndexes(t){return F.resolve()}createTargetIndexes(t,e){return F.resolve()}getDocumentsMatchingTarget(t,e){return F.resolve(null)}getIndexType(t,e){return F.resolve(0)}getFieldIndexes(t,e){return F.resolve([])}getNextCollectionGroupToUpdate(t){return F.resolve(null)}getMinOffset(t,e){return F.resolve(In.min())}getMinOffsetFromCollectionGroup(t,e){return F.resolve(In.min())}updateCollectionGroup(t,e,i){return F.resolve()}updateIndexEntries(t,e){return F.resolve()}}class tp{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new te(Yt.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new te(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Uint8Array(0);class qx{constructor(t,e){this.databaseId=e,this.cn=new tp,this.ln=new es(i=>na(i),(i,a)=>Ru(i,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){const i=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});const l={collectionId:i,parent:on(a)};return aT(t).put(l)}return F.resolve()}getCollectionParents(t,e){const i=[],a=IDBKeyRange.bound([e,""],[K0(e),""],!1,!0);return aT(t).U(a).next(l=>{for(const c of l){if(c.collectionId!==e)break;i.push(mi(c.parent))}return i})}addFieldIndex(t,e){const i=$l(t),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete a.indexId;const l=i.add(a);if(e.indexState){const c=ao(t);return l.next(d=>{c.put(ZE(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const i=$l(t),a=ao(t),l=so(t);return i.delete(e.indexId).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=$l(t),i=so(t),a=ao(t);return e.j().next(()=>i.j()).next(()=>a.j())}createTargetIndexes(t,e){return F.forEach(this.hn(e),i=>this.getIndexType(t,i).next(a=>{if(a===0||a===1){const l=new rT(i).an();if(l!=null)return this.addFieldIndex(t,l)}}))}getDocumentsMatchingTarget(t,e){const i=so(t);let a=!0;const l=new Map;return F.forEach(this.hn(e),c=>this.Pn(t,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=xt();const d=[];return F.forEach(l,(g,p)=>{rt("IndexedDbIndexManager",`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`}(g)} to execute ${na(e)}`);const v=function(W,ot){const lt=ng(ot);if(lt===void 0)return null;for(const dt of zh(W,lt.fieldPath))switch(dt.op){case"array-contains-any":return dt.value.arrayValue.values||[];case"array-contains":return[dt.value]}return null}(p,g),T=function(W,ot){const lt=new Map;for(const dt of js(ot))for(const D of zh(W,dt.fieldPath))switch(D.op){case"==":case"in":lt.set(dt.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return lt.set(dt.fieldPath.canonicalString(),D.value),Array.from(lt.values())}return null}(p,g),I=function(W,ot){const lt=[];let dt=!0;for(const D of js(ot)){const A=D.kind===0?LE(W,D.fieldPath,W.startAt):BE(W,D.fieldPath,W.startAt);lt.push(A.value),dt&&(dt=A.inclusive)}return new Ao(lt,dt)}(p,g),M=function(W,ot){const lt=[];let dt=!0;for(const D of js(ot)){const A=D.kind===0?BE(W,D.fieldPath,W.endAt):LE(W,D.fieldPath,W.endAt);lt.push(A.value),dt&&(dt=A.inclusive)}return new Ao(lt,dt)}(p,g),K=this.In(g,p,I),z=this.In(g,p,M),L=this.Tn(g,p,T),nt=this.En(g.indexId,v,K,I.inclusive,z,M.inclusive,L);return F.forEach(nt,tt=>i.G(tt,e.limit).next(W=>{W.forEach(ot=>{const lt=ht.fromSegments(ot.documentKey);c.has(lt)||(c=c.add(lt),d.push(lt))})}))}).next(()=>d)}return F.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=zx(Zt.create(t.filters,"and")).map(i=>lg(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,i,a,l,c,d){const g=(e!=null?e.length:1)*Math.max(i.length,l.length),p=g/(e!=null?e.length:1),v=[];for(let T=0;T<g;++T){const I=e?this.dn(e[T/p]):uh,M=this.An(t,I,i[T%p],a),K=this.Rn(t,I,l[T%p],c),z=d.map(L=>this.An(t,I,L,!0));v.push(...this.createRange(M,K,z))}return v}An(t,e,i,a){const l=new Hs(t,ht.empty(),e,i);return a?l:l.Zt()}Rn(t,e,i,a){const l=new Hs(t,ht.empty(),e,i);return a?l.Zt():l}Pn(t,e){const i=new rT(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next(l=>{let c=null;for(const d of l)i.rn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const a=this.hn(e);return F.forEach(a,l=>this.Pn(t,l).next(c=>{c?i!==0&&c.fields.length<function(g){let p=new te(ue.comparator),v=!1;for(const T of g.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?v=!0:p=p.add(I.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(v?1:0)}(l)&&(i=1):i=0})).next(()=>function(c){return c.limit!==null}(e)&&a.length>1&&i===2?1:i)}Vn(t,e){const i=new Xl;for(const a of js(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=i.Yt(a.kind);Gs.vt.It(l,c)}return i.zt()}dn(t){const e=new Xl;return Gs.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){const i=new Xl;return Gs.vt.It(Gg(this.databaseId,e),i.Yt(function(l){const c=js(l);return c.length===0?0:c[c.length-1].kind}(t))),i.zt()}Tn(t,e,i){if(i===null)return[];let a=[];a.push(new Xl);let l=0;for(const c of js(t)){const d=i[l++];for(const g of a)if(this.fn(e,c.fieldPath)&&yu(d))a=this.gn(a,c,d);else{const p=g.Yt(c.kind);Gs.vt.It(d,p)}}return this.pn(a)}In(t,e,i){return this.Tn(t,e,i.position)}pn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].zt();return e}gn(t,e,i){const a=[...t],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const g=new Xl;g.seed(d.zt()),Gs.vt.It(c,g.Yt(e.kind)),l.push(g)}return l}fn(t,e){return!!t.filters.find(i=>i instanceof kt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){const i=$l(t),a=ao(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(l=>{const c=[];return F.forEach(l,d=>a.get([d.indexId,this.uid]).next(g=>{c.push(function(v,T){const I=T?new mu(T.sequenceNumber,new In(ra(T.readTime),new ht(mi(T.documentKey)),T.largestBatchId)):mu.empty(),M=v.fields.map(([K,z])=>new vh(ue.fromServerFormat(K),z));return new Uh(v.indexId,v.collectionGroup,M,I)}(d,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Rt(i.collectionGroup,a.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const a=$l(t),l=ao(t);return this.yn(t).next(c=>a.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>F.forEach(d,g=>l.put(ZE(g.indexId,this.uid,c,i)))))}updateIndexEntries(t,e){const i=new Map;return F.forEach(e,(a,l)=>{const c=i.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next(d=>(i.set(a.collectionGroup,d),F.forEach(d,g=>this.wn(t,a,g).next(p=>{const v=this.Sn(l,g);return p.isEqual(v)?F.resolve():this.bn(t,l,g,p,v)}))))})}Dn(t,e,i,a){return so(t).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(i,e.key),documentKey:e.key.path.toArray()})}vn(t,e,i,a){return so(t).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const a=so(t);let l=new te(Ur);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,e)])},(c,d)=>{l=l.add(new Hs(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>l)}Sn(t,e){let i=new te(Ur);const a=this.Vn(e,t);if(a==null)return i;const l=ng(e);if(l!=null){const c=t.data.field(l.fieldPath);if(yu(c))for(const d of c.arrayValue.values||[])i=i.add(new Hs(e.indexId,t.key,this.dn(d),a))}else i=i.add(new Hs(e.indexId,t.key,uh,a));return i}bn(t,e,i,a,l){rt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(g,p,v,T,I){const M=g.getIterator(),K=p.getIterator();let z=ro(M),L=ro(K);for(;z||L;){let nt=!1,tt=!1;if(z&&L){const W=v(z,L);W<0?tt=!0:W>0&&(nt=!0)}else z!=null?tt=!0:nt=!0;nt?(T(L),L=ro(K)):tt?(I(z),z=ro(M)):(z=ro(M),L=ro(K))}}(a,l,Ur,d=>{c.push(this.Dn(t,e,i,d))},d=>{c.push(this.vn(t,e,i,d))}),F.waitFor(c)}yn(t){let e=1;return ao(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),e=a.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Ur(c,d)).filter((c,d,g)=>!d||Ur(c,g[d-1])!==0);const a=[];a.push(t);for(const c of i){const d=Ur(c,t),g=Ur(c,e);if(d===0)a[0]=t.Zt();else if(d>0&&g<0)a.push(c),a.push(c.Zt());else if(g>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Cn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,uh,[]],g=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,uh,[]];l.push(IDBKeyRange.bound(d,g))}return l}Cn(t,e){return Ur(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(oT)}getMinOffset(t,e){return F.mapArray(this.hn(e),i=>this.Pn(t,i).next(a=>a||gt())).next(oT)}}function aT(s){return Ne(s,"collectionParents")}function so(s){return Ne(s,"indexEntries")}function $l(s){return Ne(s,"indexConfiguration")}function ao(s){return Ne(s,"indexState")}function oT(s){_t(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;Bg(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new In(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(s,t,e){const i=s.store("mutations"),a=s.store("documentMutations"),l=[],c=IDBKeyRange.only(e.batchId);let d=0;const g=i.J({range:c},(v,T,I)=>(d++,I.delete()));l.push(g.next(()=>{_t(d===1)}));const p=[];for(const v of e.mutations){const T=W0(t,v.key.path,e.batchId);l.push(a.delete(T)),p.push(v.key)}return F.waitFor(l).next(()=>p)}function Hh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw gt();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class mf{constructor(t,e,i,a){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=a,this.Fn={}}static lt(t,e,i,a){_t(t.uid!=="");const l=t.isAuthenticated()?t.uid:"";return new mf(l,e,i,a)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(t).J({index:"userMutationsIndex",range:i},(a,l,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,a){const l=fo(t),c=Lr(t);return c.add({}).next(d=>{_t(typeof d=="number");const g=new Yg(d,e,i,a),p=function(M,K,z){const L=z.baseMutations.map(tt=>qh(M.ct,tt)),nt=z.mutations.map(tt=>qh(M.ct,tt));return{userId:K,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:L,mutations:nt}}(this.serializer,this.userId,g),v=[];let T=new te((I,M)=>Rt(I.canonicalString(),M.canonicalString()));for(const I of a){const M=W0(this.userId,I.key.path,d);T=T.add(I.key.path.popLast()),v.push(c.put(p)),v.push(l.put(M,TD))}return T.forEach(I=>{v.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.Fn[d]=g.keys()}),F.waitFor(v).next(()=>g)})}lookupMutationBatch(t,e){return Lr(t).get(e).next(i=>i?(_t(i.userId===this.userId),Fs(this.serializer,i)):null)}Mn(t,e){return this.Fn[e]?F.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const a=i.keys();return this.Fn[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Lr(t).J({index:"userMutationsIndex",range:a},(c,d,g)=>{d.userId===this.userId&&(_t(d.batchId>=i),l=Fs(this.serializer,d)),g.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Lr(t).J({index:"userMutationsIndex",range:e,reverse:!0},(a,l,c)=>{i=l.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(t).U("userMutationsIndex",e).next(i=>i.map(a=>Fs(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Eh(this.userId,e.path),a=IDBKeyRange.lowerBound(i),l=[];return fo(t).J({range:a},(c,d,g)=>{const[p,v,T]=c,I=mi(v);if(p===this.userId&&e.path.isEqual(I))return Lr(t).get(T).next(M=>{if(!M)throw gt();_t(M.userId===this.userId),l.push(Fs(this.serializer,M))});g.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new te(Rt);const a=[];return e.forEach(l=>{const c=Eh(this.userId,l.path),d=IDBKeyRange.lowerBound(c),g=fo(t).J({range:d},(p,v,T)=>{const[I,M,K]=p,z=mi(M);I===this.userId&&l.path.isEqual(z)?i=i.add(K):T.done()});a.push(g)}),F.waitFor(a).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1,l=Eh(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new te(Rt);return fo(t).J({range:c},(g,p,v)=>{const[T,I,M]=g,K=mi(I);T===this.userId&&i.isPrefixOf(K)?K.length===a&&(d=d.add(M)):v.done()}).next(()=>this.xn(t,d))}xn(t,e){const i=[],a=[];return e.forEach(l=>{a.push(Lr(t).get(l).next(c=>{if(c===null)throw gt();_t(c.userId===this.userId),i.push(Fs(this.serializer,c))}))}),F.waitFor(a).next(()=>i)}removeMutationBatch(t,e){return Hb(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),F.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return F.resolve();const i=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return fo(t).J({range:i},(l,c,d)=>{if(l[0]===this.userId){const g=mi(l[1]);a.push(g)}else d.done()}).next(()=>{_t(a.length===0)})})}containsKey(t,e){return Kb(t,this.userId,e)}Nn(t){return Qb(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kb(s,t,e){const i=Eh(t,e.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return fo(s).J({range:l,H:!0},(d,g,p)=>{const[v,T,I]=d;v===t&&T===a&&(c=!0),p.done()}).next(()=>c)}function Lr(s){return Ne(s,"mutations")}function fo(s){return Ne(s,"documentMutations")}function Qb(s){return Ne(s,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new sa(0)}static kn(){return new sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{const i=new sa(e.highestTargetId);return e.highestTargetId=i.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>Et.fromTimestamp(new he(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.qn(t).next(a=>(a.highestListenSequenceNumber=e,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.Qn(t,a)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(e,i),this.Qn(t,i))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>oo(t).delete(e.targetId)).next(()=>this.qn(t)).next(i=>(_t(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,e,i){let a=0;const l=[];return oo(t).J((c,d)=>{const g=nu(d);g.sequenceNumber<=e&&i.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(t,g)))}).next(()=>F.waitFor(l)).next(()=>a)}forEachTarget(t,e){return oo(t).J((i,a)=>{const l=nu(a);e(l)})}qn(t){return uT(t).get("targetGlobalKey").next(e=>(_t(e!==null),e))}Qn(t,e){return uT(t).put("targetGlobalKey",e)}Kn(t,e){return oo(t).put(jb(this.serializer,e))}$n(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=na(e),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return oo(t).J({range:a,index:"queryTargetsIndex"},(c,d,g)=>{const p=nu(d);Ru(e,p.target)&&(l=p,g.done())}).next(()=>l)}addMatchingKeys(t,e,i){const a=[],l=qr(t);return e.forEach(c=>{const d=on(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(t,i,c))}),F.waitFor(a)}removeMatchingKeys(t,e,i){const a=qr(t);return F.forEach(e,l=>{const c=on(l.path);return F.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(t,i,l)])})}removeMatchingKeysForTargetId(t,e){const i=qr(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),a=qr(t);let l=xt();return a.J({range:i,H:!0},(c,d,g)=>{const p=mi(c[1]),v=new ht(p);l=l.add(v)}).next(()=>l)}containsKey(t,e){const i=on(e.path),a=IDBKeyRange.bound([i],[K0(i)],!1,!0);let l=0;return qr(t).J({index:"documentTargetsIndex",H:!0,range:a},([c,d],g,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}ot(t,e){return oo(t).get(e).next(i=>i?nu(i):null)}}function oo(s){return Ne(s,"targets")}function uT(s){return Ne(s,"targetGlobal")}function qr(s){return Ne(s,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT([s,t],[e,i]){const a=Rt(s,e);return a===0?Rt(t,i):a}class Gx{constructor(t){this.Un=t,this.buffer=new te(cT),this.Wn=0}Gn(){return++this.Wn}zn(t){const e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();cT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Hx{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){rt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ts(e)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await oa(e)}await this.Hn(3e5)})}}class Kx{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return F.resolve(zn.oe);const i=new Gx(e);return this.Jn.forEachTarget(t,a=>i.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(t,a=>i.zn(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(lT)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lT):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,a,l,c,d,g,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(t,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(t,i,e))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(p=Date.now(),lo()<=Pt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function Qx(s,t){return new Kx(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,e){this.db=t,this.garbageCollector=Qx(this,e)}Yn(t){const e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}er(t){let e=0;return this.Zn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(i,a)=>e(a))}addReference(t,e,i){return ch(t,i)}removeReference(t,e,i){return ch(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return ch(t,e)}nr(t,e){return function(a,l){let c=!1;return Qb(a).Y(d=>Kb(a,d,l).next(g=>(g&&(c=!0),F.resolve(!g)))).next(()=>c)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(t,(c,d)=>{if(d<=e){const g=this.nr(t,c).next(p=>{if(!p)return l++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Et.min()),qr(t).delete(function(T){return[0,on(T.path)]}(c))))});a.push(g)}}).next(()=>F.waitFor(a)).next(()=>i.apply(t)).next(()=>l)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return ch(t,e)}tr(t,e){const i=qr(t);let a,l=zn.oe;return i.J({index:"documentTargetsIndex"},([c,d],{path:g,sequenceNumber:p})=>{c===0?(l!==zn.oe&&e(new ht(mi(a)),l),l=p,a=g):l=zn.oe}).next(()=>{l!==zn.oe&&e(new ht(mi(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ch(s,t){return qr(s).put(function(i,a){return{targetId:0,path:on(i.path),sequenceNumber:a}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.changes=new es(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?F.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Bs(t).put(i)}removeEntry(t,e,i){return Bs(t).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Fh(c),d[d.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.rr(t,i)))}getEntry(t,e){let i=pe.newInvalidDocument(e);return Bs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wl(e))},(a,l)=>{i=this.ir(e,l)}).next(()=>i)}sr(t,e){let i={size:0,document:pe.newInvalidDocument(e)};return Bs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wl(e))},(a,l)=>{i={document:this.ir(e,l),size:Hh(l)}}).next(()=>i)}getEntries(t,e){let i=Sn();return this._r(t,e,(a,l)=>{const c=this.ir(a,l);i=i.insert(a,c)}).next(()=>i)}ar(t,e){let i=Sn(),a=new oe(ht.comparator);return this._r(t,e,(l,c)=>{const d=this.ir(l,c);i=i.insert(l,d),a=a.insert(l,Hh(c))}).next(()=>({documents:i,ur:a}))}_r(t,e,i){if(e.isEmpty())return F.resolve();let a=new te(dT);e.forEach(g=>a=a.add(g));const l=IDBKeyRange.bound(Wl(a.first()),Wl(a.last())),c=a.getIterator();let d=c.getNext();return Bs(t).J({index:"documentKeyIndex",range:l},(g,p,v)=>{const T=ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&dT(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,p),d=c.hasNext()?c.getNext():null),d?v.$(Wl(d)):v.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,a,l){const c=e.path,d=[c.popLast().toArray(),c.lastSegment(),Fh(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bs(t).U(IDBKeyRange.bound(d,g,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let v=Sn();for(const T of p){const I=this.ir(ht.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(Cu(e,I)||a.has(I.key))&&(v=v.insert(I.key,I))}return v})}getAllFromCollectionGroup(t,e,i,a){let l=Sn();const c=fT(e,i),d=fT(e,In.max());return Bs(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(g,p,v)=>{const T=this.ir(ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&v.done()}).next(()=>l)}newChangeBuffer(t){return new $x(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return hT(t).get("remoteDocumentGlobalKey").next(e=>(_t(!!e),e))}rr(t,e){return hT(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){const i=Ox(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Et.min())))return i}return pe.newInvalidDocument(t)}}function Xb(s){return new Xx(s)}class $x extends Yb{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new es(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(t){const e=[];let i=0,a=new te((l,c)=>Rt(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.lr.get(l);if(e.push(this.cr.removeEntry(t,l,d.readTime)),c.isValidDocument()){const g=WE(this.cr.serializer,c);a=a.add(l.path.popLast());const p=Hh(g);i+=p-d.size,e.push(this.cr.addEntry(t,l,g))}else if(i-=d.size,this.trackRemovals){const g=WE(this.cr.serializer,c.convertToNoDocument(Et.min()));e.push(this.cr.addEntry(t,l,g))}}),a.forEach(l=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.cr.updateMetadata(t,i)),F.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(i=>(this.lr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:i,ur:a})=>(a.forEach((l,c)=>{this.lr.set(l,{size:c,readTime:i.get(l).readTime})}),i))}}function hT(s){return Ne(s,"remoteDocumentGlobal")}function Bs(s){return Ne(s,"remoteDocumentsV14")}function Wl(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fT(s,t){const e=t.documentKey.path.toArray();return[s,Fh(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function dT(s,t){const e=s.path.toArray(),i=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<i.length-2;++l)if(a=Rt(e[l],i[l]),a)return a;return a=Rt(e.length,i.length),a||(a=Rt(e[e.length-2],i[i.length-2]),a||Rt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&lu(i.mutation,a,dn.empty(),he.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,xt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=xt()){const a=gi();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(l=>{let c=tu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=gi();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,xt()))}populateOverlays(t,e,i){const a=[];return i.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,a){let l=Sn();const c=ou(),d=function(){return ou()}();return e.forEach((g,p)=>{const v=i.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof ar)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),lu(v.mutation,p,v.mutation.getFieldMask(),he.now())):c.set(p.key,dn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((p,v)=>c.set(p,v)),e.forEach((p,v)=>{var T;return d.set(p,new Wx(v,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(t,e){const i=ou();let a=new oe((c,d)=>c-d),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(g=>{const p=e.get(g);if(p===null)return;let v=i.get(g)||dn.empty();v=d.applyToLocalView(p,v),i.set(g,v);const T=(a.get(d.batchId)||xt()).add(g);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,v=g.value,T=_b();v.forEach(I=>{if(!l.has(I)){const M=Sb(e.get(I),i.get(I));M!==null&&T.set(I,M),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return F.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return ht.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):JD(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):F.resolve(gi());let d=-1,g=l;return c.next(p=>F.forEach(p,(v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?F.resolve():this.remoteDocumentCache.getEntry(t,v).next(I=>{g=g.insert(v,I)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,g,p,xt())).next(v=>({batchId:d,changes:pb(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next(i=>{let a=tu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let c=tu();return this.indexManager.getCollectionParents(t,l).next(d=>F.forEach(d,g=>{const p=function(T,I){return new of(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,a).next(v=>{v.forEach((T,I)=>{c=c.insert(T,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a))).next(c=>{l.forEach((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,pe.newInvalidDocument(v)))});let d=tu();return c.forEach((g,p)=>{const v=l.get(g);v!==void 0&&lu(v.mutation,p,dn.empty(),he.now()),Cu(e,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return F.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:ln(a.createTime)}}(e)),F.resolve()}getNamedQuery(t,e){return F.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(a){return{name:a.name,query:qb(a.bundledQuery),readTime:ln(a.readTime)}}(e)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.overlays=new oe(ht.comparator),this.Ir=new Map}getOverlay(t,e){return F.resolve(this.overlays.get(e))}getOverlays(t,e){const i=gi();return F.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,l)=>{this.ht(t,e,l)}),F.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(t,e,i){const a=gi(),l=e.length+1,c=new ht(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return F.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new oe((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=gi(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=gi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,v)=>d.set(p,v)),!(d.size()>=a)););return F.resolve(d)}ht(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new $g(e,i));let l=this.Ir.get(e);l===void 0&&(l=xt(),this.Ir.set(e,l)),this.Ir.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(t){return F.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Tr=new te(Be.Er),this.dr=new te(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const i=new Be(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new Be(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){const e=new ht(new Yt([])),i=new Be(e,t),a=new Be(e,t+1),l=[];return this.dr.forEachInRange([i,a],c=>{this.Vr(c),l.push(c.key)}),l}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new ht(new Yt([])),i=new Be(e,t),a=new Be(e,t+1);let l=xt();return this.dr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Be(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Be{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return ht.comparator(t.key,e.key)||Rt(t.wr,e.wr)}static Ar(t,e){return Rt(t.wr,e.wr)||ht.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new te(Be.Er)}checkEmpty(t){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yg(l,e,i,a);this.mutationQueue.push(c);for(const d of a)this.br=this.br.add(new Be(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return F.resolve(c)}lookupMutationBatch(t,e){return F.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.vr(i),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Be(e,0),a=new Be(e,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,a],c=>{const d=this.Dr(c.wr);l.push(d)}),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new te(Rt);return e.forEach(a=>{const l=new Be(a,0),c=new Be(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],d=>{i=i.add(d.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;ht.isDocumentKey(l)||(l=l.child(""));const c=new Be(new ht(l),0);let d=new te(Rt);return this.br.forEachWhile(g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(g.wr)),!0)},c),F.resolve(this.Cr(d))}Cr(t){const e=[];return t.forEach(i=>{const a=this.Dr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){_t(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(e.mutations,a=>{const l=new Be(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){const i=new Be(e,0),a=this.br.firstAfterOrEqual(i);return F.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,F.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(t){this.Mr=t,this.docs=function(){return new oe(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,c=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return F.resolve(i?i.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let i=Sn();return e.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():pe.newInvalidDocument(a))}),F.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=Sn();const c=e.path,d=new ht(c.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Bg(Q0(v),i)<=0||(a.has(v.key)||Cu(e,v))&&(l=l.insert(v.key,v.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(t,e,i,a){gt()}Or(t,e){return F.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new iV(this)}getSize(t){return F.resolve(this.size)}}class iV extends Yb{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.cr.addEntry(t,a)):this.cr.removeEntry(i)}),F.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(t){this.persistence=t,this.Nr=new es(e=>na(e),Ru),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ep,this.targetCount=0,this.kr=sa.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,a)=>e(a)),F.resolve()}getLastRemoteSnapshotVersion(t){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return F.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),F.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new sa(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,F.resolve()}updateTargetData(t,e){return this.Kn(e),F.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,F.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),F.waitFor(l).next(()=>a)}getTargetCount(t){return F.resolve(this.targetCount)}getTargetData(t,e){const i=this.Nr.get(e)||null;return F.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),F.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),F.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),F.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Br.yr(e);return F.resolve(i)}containsKey(t,e){return F.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t,e){this.qr={},this.overlays={},this.Qr=new zn(0),this.Kr=!1,this.Kr=!0,this.$r=new tV,this.referenceDelegate=t(this),this.Ur=new rV(this),this.indexManager=new jx,this.remoteDocumentCache=function(a){return new nV(a)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new zb(e),this.Gr=new Jx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Zx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new eV(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){rt("MemoryPersistence","Starting transaction:",t);const a=new sV(this.Qr.next());return this.referenceDelegate.zr(),i(a).next(l=>this.referenceDelegate.jr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Hr(t,e){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}}class sV extends X0{constructor(t){super(),this.currentSequenceNumber=t}}class gf{constructor(t){this.persistence=t,this.Jr=new ep,this.Yr=null}static Zr(t){return new gf(t)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),F.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),F.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(a=>this.Xr.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const a=ht.fromPath(i);return this.ei(t,a).next(l=>{l||e.removeEntry(a,Et.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return F.or([()=>F.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(t){this.serializer=t}O(t,e,i,a){const l=new rf("createOrUpgrade",e);i<1&&a>=1&&(function(g){g.createObjectStore("owner")}(t),function(g){g.createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0}),g.createObjectStore("documentMutations")}(t),mT(t),function(g){g.createObjectStore("remoteDocuments")}(t));let c=F.resolve();return i<3&&a>=3&&(i!==0&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(t),mT(t)),c=c.next(()=>function(g){const p=g.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",v)}(l))),i<4&&a>=4&&(i!==0&&(c=c.next(()=>function(g,p){return p.store("mutations").U().next(v=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RE,{unique:!0});const T=p.store("mutations"),I=v.map(M=>T.put(M));return F.waitFor(I)})}(t,l))),c=c.next(()=>{(function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&a>=5&&(c=c.next(()=>this.ni(l))),i<6&&a>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(t),this.ri(l)))),i<7&&a>=7&&(c=c.next(()=>this.ii(l))),i<8&&a>=8&&(c=c.next(()=>this.si(t,l))),i<9&&a>=9&&(c=c.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&a>=10&&(c=c.next(()=>this.oi(l))),i<11&&a>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&a>=12&&(c=c.next(()=>{(function(g){const p=g.createObjectStore("documentOverlays",{keyPath:OD});p.createIndex("collectionPathOverlayIndex",MD,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",PD,{unique:!1})})(t)})),i<13&&a>=13&&(c=c.next(()=>function(g){const p=g.createObjectStore("remoteDocumentsV14",{keyPath:bD});p.createIndex("documentKeyIndex",SD),p.createIndex("collectionGroupIndex",AD)}(t)).next(()=>this._i(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(c=c.next(()=>this.ai(t,l))),i<15&&a>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:DD}).createIndex("sequenceNumberIndex",xD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:VD}).createIndex("documentKeyIndex",ND,{unique:!1})}(t))),i<16&&a>=16&&(c=c.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),i<17&&a>=17&&(c=c.next(()=>{(function(g){g.createObjectStore("globals",{keyPath:"name"})})(t)})),c}ri(t){let e=0;return t.store("remoteDocuments").J((i,a)=>{e+=Hh(a)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(a=>F.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",c).next(d=>F.forEach(d,g=>{_t(g.userId===l.userId);const p=Fs(this.serializer,g);return Hb(t,l.userId,p).next(()=>{})}))}))}ii(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.J((c,d)=>{const g=new Yt(c),p=function(T){return[0,on(T)]}(g);l.push(e.get(p).next(v=>v?F.resolve():(T=>e.put({targetId:0,path:on(T),sequenceNumber:a.highestListenSequenceNumber}))(g)))}).next(()=>F.waitFor(l))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:CD});const i=e.store("collectionParents"),a=new tp,l=c=>{if(a.add(c)){const d=c.lastSegment(),g=c.popLast();return i.put({collectionId:d,parent:on(g)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const g=new Yt(c);return l(g.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,g],p)=>{const v=mi(d);return l(v.popLast())}))}oi(t){const e=t.store("targets");return e.J((i,a)=>{const l=nu(a),c=jb(this.serializer,l);return e.put(c)})}_i(t,e){const i=e.store("remoteDocuments"),a=[];return i.J((l,c)=>{const d=e.store("remoteDocumentsV14"),g=function(T){return T.document?new ht(Yt.fromString(T.document.name).popFirst(5)):T.noDocument?ht.fromSegments(T.noDocument.path):T.unknownDocument?ht.fromSegments(T.unknownDocument.path):gt()}(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>F.waitFor(a))}ai(t,e){const i=e.store("mutations"),a=Xb(this.serializer),l=new Wb(gf.Zr,this.serializer.ct);return i.U().next(c=>{const d=new Map;return c.forEach(g=>{var p;let v=(p=d.get(g.userId))!==null&&p!==void 0?p:xt();Fs(this.serializer,g).keys().forEach(T=>v=v.add(T)),d.set(g.userId,v)}),F.forEach(d,(g,p)=>{const v=new Ye(p),T=df.lt(this.serializer,v),I=l.getIndexManager(v),M=mf.lt(v,this.serializer,I,l.referenceDelegate);return new $b(a,M,T,I).recalculateAndSaveOverlaysForDocumentKeys(new ig(e,zn.oe),g).next()})})}}function mT(s){s.createObjectStore("targetDocuments",{keyPath:wD}).createIndex("documentTargetsIndex",RD,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ID,{unique:!0}),s.createObjectStore("targetGlobal")}const Bm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class np{constructor(t,e,i,a,l,c,d,g,p,v,T=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ui=l,this.window=c,this.document=d,this.ci=p,this.li=v,this.hi=T,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!np.D())throw new ft(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yx(this,a),this.Ai=e+"main",this.serializer=new zb(g),this.Ri=new Xr(this.Ai,this.hi,new aV(this.serializer)),this.$r=new Px,this.Ur=new Fx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xb(this.serializer),this.Gr=new Mx,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,v===!1&&an("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(et.FAILED_PRECONDITION,Bm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new zn(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>hh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(ts(t))return rt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Jl(t).get("owner").next(e=>F.resolve(this.vi(e)))}Ci(t){return hh(t).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const i=Ne(e,"clientMetadata");return i.U().next(a=>{const l=this.xi(a,18e5),c=a.filter(d=>l.indexOf(d)===-1);return F.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Vi)for(const e of t)this.Vi.removeItem(this.Oi(e.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?F.resolve(!0):Jl(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new ft(et.FAILED_PRECONDITION,Bm);return!1}}return!(!this.networkEnabled||!this.inForeground)||hh(t).U().next(i=>this.xi(i,5e3).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&rt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const e=new ig(t,zn.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()}xi(t,e){return t.filter(i=>this.Mi(i.updateTimeMs,e)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>hh(t).U().next(e=>this.xi(e,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return mf.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new qx(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return df.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,i){rt("IndexedDbPersistence","Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=function(g){return g===17?LD:g===16?UD:g===15?jg:g===14?tb:g===13?Z0:g===12?kD:g===11?J0:void gt()}(this.hi);let c;return this.Ri.runTransaction(t,a,l,d=>(c=new ig(d,this.Qr?this.Qr.next():zn.oe),e==="readwrite-primary"?this.wi(c).next(g=>!!g||this.Si(c)).next(g=>{if(!g)throw an(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ft(et.FAILED_PRECONDITION,Y0);return i(c)}).next(g=>this.Di(c).next(()=>g)):this.Ki(c).next(()=>i(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ki(t){return Jl(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ft(et.FAILED_PRECONDITION,Bm)})}Di(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jl(t).put("owner",e)}static D(){return Xr.D()}bi(t){const e=Jl(t);return e.get("owner").next(i=>this.vi(i)?(rt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):F.resolve())}Mi(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(an(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;WT()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{const i=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return rt("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return an("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){an("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Jl(s){return Ne(s,"owner")}function hh(s){return Ne(s,"clientMetadata")}function oV(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=a}static Wi(t,e){let i=xt(),a=xt();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ip(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WT()?8:$0(Ve())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.Yi(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Zi(t,e,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new lV;return this.Xi(t,e,c).next(d=>{if(l.result=d,this.zi)return this.es(t,e,c,d.size)})}).next(()=>l.result)}es(t,e,i,a){return i.documentReadCount<this.ji?(lo()<=Pt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",uo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(lo()<=Pt.DEBUG&&rt("QueryEngine","Query:",uo(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(lo()<=Pt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",uo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jn(e))):F.resolve())}Yi(t,e){if(zE(e))return F.resolve(null);let i=jn(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=ug(e,null,"F"),i=jn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=xt(...l);return this.Ji.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(g=>{const p=this.ts(e,d);return this.ns(e,p,c,g.readTime)?this.Yi(t,ug(e,null,"F")):this.rs(t,p,e,g)}))})))}Zi(t,e,i,a){return zE(e)||a.isEqual(Et.min())?F.resolve(null):this.Ji.getDocuments(t,i).next(l=>{const c=this.ts(e,l);return this.ns(e,c,i,a)?F.resolve(null):(lo()<=Pt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),uo(e)),this.rs(t,c,e,mD(a,-1)).next(d=>d))})}ts(t,e){let i=new te(mb(t));return e.forEach((a,l)=>{Cu(t,l)&&(i=i.add(l))}),i}ns(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(t,e,i){return lo()<=Pt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",uo(e)),this.Ji.getDocumentsMatchingQuery(t,e,In.min(),i)}rs(t,e,i,a){return this.Ji.getDocumentsMatchingQuery(t,i,a).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t,e,i,a){this.persistence=t,this.ss=e,this.serializer=a,this.os=new oe(Rt),this._s=new es(l=>na(l),Ru),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $b(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function Zb(s,t,e,i){return new uV(s,t,e,i)}async function tS(s,t){const e=wt(s);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let g=xt();for(const p of a){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return e.localDocuments.getDocuments(i,g).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:d}))})})}function cV(s,t){const e=wt(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),l=e.cs.newChangeBuffer({trackRemovals:!0});return function(d,g,p,v){const T=p.batch,I=T.keys();let M=F.resolve();return I.forEach(K=>{M=M.next(()=>v.getEntry(g,K)).next(z=>{const L=p.docVersions.get(K);_t(L!==null),z.version.compareTo(L)<0&&(T.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),v.addEntry(z)))})}),M.next(()=>d.mutationQueue.removeMutationBatch(g,T))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let g=xt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function eS(s){const t=wt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function hV(s,t){const e=wt(s),i=t.snapshotVersion;let a=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.cs.newChangeBuffer({trackRemovals:!0});a=e.os;const d=[];t.targetChanges.forEach((v,T)=>{const I=a.get(T);if(!I)return;d.push(e.Ur.removeMatchingKeys(l,v.removedDocuments,T).next(()=>e.Ur.addMatchingKeys(l,v.addedDocuments,T)));let M=I.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(T)!==null?M=M.withResumeToken(Ie.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,i)),a=a.insert(T,M),function(z,L,nt){return z.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0}(I,M,v)&&d.push(e.Ur.updateTargetData(l,M))});let g=Sn(),p=xt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,v))}),d.push(fV(l,c,t.documentUpdates).next(v=>{g=v.Ps,p=v.Is})),!i.isEqual(Et.min())){const v=e.Ur.getLastRemoteSnapshotVersion(l).next(T=>e.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(v)}return F.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(e.os=a,l))}function fV(s,t,e){let i=xt(),a=xt();return e.forEach(l=>i=i.add(l)),t.getEntries(s,i).next(l=>{let c=Sn();return e.forEach((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Et.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):rt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{Ps:c,Is:a}})}function dV(s,t){const e=wt(s);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function mV(s,t){const e=wt(s);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Ur.getTargetData(i,t).next(l=>l?(a=l,F.resolve(a)):e.Ur.allocateTargetId(i).next(c=>(a=new Wi(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}async function _g(s,t,e){const i=wt(s),a=i.os.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!ts(c))throw c;rt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.os=i.os.remove(t),i._s.delete(a.target)}function gT(s,t,e){const i=wt(s);let a=Et.min(),l=xt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(g,p,v){const T=wt(g),I=T._s.get(v);return I!==void 0?F.resolve(T.os.get(I)):T.Ur.getTargetData(p,v)}(i,c,jn(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>i.ss.getDocumentsMatchingQuery(c,t,e?a:Et.min(),e?l:xt())).next(d=>(gV(i,tx(t),d),{documents:d,Ts:l})))}function gV(s,t,e){let i=s.us.get(t)||Et.min();e.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),s.us.set(t,i)}class pT{constructor(){this.activeTargetIds=ax()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nS{constructor(){this.so=new pT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new pT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function zm(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class vV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(e,i,a,l,c){const d=zm(),g=this.xo(e,i.toUriEncodedString());rt("RestConnection",`Sending RPC '${e}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,c),this.No(e,g,p,a).then(v=>(rt("RestConnection",`Received RPC '${e}' ${d}: `,v),v),v=>{throw Zs("RestConnection",`RPC '${e}' ${d} failed with error: `,v,"url: ",g,"request:",a),v})}Lo(e,i,a,l,c,d){return this.Mo(e,i,a,l,c)}Oo(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>e[c]=l),a&&a.headers.forEach((l,c)=>e[c]=l)}xo(e,i){const a=_V[e];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,a){const l=zm();return new Promise((c,d)=>{const g=new B0;g.setWithCredentials(!0),g.listenOnce(z0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case yh.NO_ERROR:const v=g.getResponseJson();rt(Ze,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(v)),c(v);break;case yh.TIMEOUT:rt(Ze,`RPC '${t}' ${l} timed out`),d(new ft(et.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const T=g.getStatus();if(rt(Ze,`RPC '${t}' ${l} failed with status:`,T,"response text:",g.getResponseText()),T>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I==null?void 0:I.error;if(M&&M.status&&M.message){const K=function(L){const nt=L.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(nt)>=0?nt:et.UNKNOWN}(M.status);d(new ft(K,M.message))}else d(new ft(et.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ft(et.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{rt(Ze,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(a);rt(Ze,`RPC '${t}' ${l} sending request:`,a),g.send(e,"POST",p,i,15)})}Bo(t,e,i){const a=zm(),l=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=F0(),d=q0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,e,i),g.encodeInitMessageHeaders=!0;const v=l.join("");rt(Ze,`Creating RPC '${t}' stream ${a}: ${v}`,g);const T=c.createWebChannel(v,g);let I=!1,M=!1;const K=new yV({Io:L=>{M?rt(Ze,`Not sending because RPC '${t}' stream ${a} is closed:`,L):(I||(rt(Ze,`Opening RPC '${t}' stream ${a} transport.`),T.open(),I=!0),rt(Ze,`RPC '${t}' stream ${a} sending:`,L),T.send(L))},To:()=>T.close()}),z=(L,nt,tt)=>{L.listen(nt,W=>{try{tt(W)}catch(ot){setTimeout(()=>{throw ot},0)}})};return z(T,Zl.EventType.OPEN,()=>{M||(rt(Ze,`RPC '${t}' stream ${a} transport opened.`),K.yo())}),z(T,Zl.EventType.CLOSE,()=>{M||(M=!0,rt(Ze,`RPC '${t}' stream ${a} transport closed`),K.So())}),z(T,Zl.EventType.ERROR,L=>{M||(M=!0,Zs(Ze,`RPC '${t}' stream ${a} transport errored:`,L),K.So(new ft(et.UNAVAILABLE,"The operation could not be completed")))}),z(T,Zl.EventType.MESSAGE,L=>{var nt;if(!M){const tt=L.data[0];_t(!!tt);const W=tt,ot=W.error||((nt=W[0])===null||nt===void 0?void 0:nt.error);if(ot){rt(Ze,`RPC '${t}' stream ${a} received error:`,ot);const lt=ot.status;let dt=function(w){const x=Ae[w];if(x!==void 0)return wb(x)}(lt),D=ot.message;dt===void 0&&(dt=et.INTERNAL,D="Unknown error status: "+lt+" with message "+ot.message),M=!0,K.So(new ft(dt,D)),T.close()}else rt(Ze,`RPC '${t}' stream ${a} received:`,tt),K.bo(tt)}}),z(d,j0.STAT_EVENT,L=>{L.stat===eg.PROXY?rt(Ze,`RPC '${t}' stream ${a} detected buffering proxy`):L.stat===eg.NOPROXY&&rt(Ze,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{K.wo()},0),K}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(){return typeof window<"u"?window:null}function Ih(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(s){return new Sx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(t,e,i=1e3,a=1.5,l=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,e-i);a>0&&rt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,e,i,a,l,c,d,g){this.ui=t,this.Ho=i,this.Jo=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iS(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(an(e.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Yo===e&&this.P_(i,a)},i=>{t(()=>{const a=new ft(et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)})})}P_(t,e){const i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{i(()=>this.I_(a))}),this.stream.onMessage(a=>{i(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return rt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TV extends rS{constructor(t,e,i,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=wx(this.serializer,t),i=function(l){if(!("targetChange"in l))return Et.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?ln(c.readTime):Et.min()}(t);return this.listener.d_(e,i)}A_(t){const e={};e.database=fg(this.serializer),e.addTarget=function(l,c){let d;const g=c.target;if(d=Bh(g)?{documents:Mb(l,g)}:{query:Pb(l,g)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Db(l,c.resumeToken);const p=cg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Et.min())>0){d.readTime=Co(l,c.snapshotVersion.toTimestamp());const p=cg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const i=Cx(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){const e={};e.database=fg(this.serializer),e.removeTarget=t,this.a_(e)}}class bV extends rS{constructor(t,e,i,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return _t(!!t.streamToken),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=Rx(t.writeResults,t.commitTime),i=ln(t.commitTime);return this.listener.g_(i,e)}p_(){const t={};t.database=fg(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>qh(this.serializer,i))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends class{}{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ft(et.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Mo(t,hg(e,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ft(et.UNKNOWN,l.toString())})}Lo(t,e,i,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(t,hg(e,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(et.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(an(e),this.D_=!1):rt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(c=>{i.enqueueAndForget(async()=>{ua(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(g){const p=wt(g);p.L_.add(4),await xu(p),p.q_.set("Unknown"),p.L_.delete(4),await _f(p)}(this))})}),this.q_=new AV(i,a)}}async function _f(s){if(ua(s))for(const t of s.B_)await t(!0)}async function xu(s){for(const t of s.B_)await t(!1)}function sS(s,t){const e=wt(s);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),op(e)?ap(e):Uo(e).r_()&&sp(e,t))}function rp(s,t){const e=wt(s),i=Uo(e);e.N_.delete(t),i.r_()&&aS(e,t),e.N_.size===0&&(i.r_()?i.o_():ua(e)&&e.q_.set("Unknown"))}function sp(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Uo(s).A_(t)}function aS(s,t){s.Q_.xe(t),Uo(s).R_(t)}function ap(s){s.Q_=new vx({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),Uo(s).start(),s.q_.v_()}function op(s){return ua(s)&&!Uo(s).n_()&&s.N_.size>0}function ua(s){return wt(s).L_.size===0}function oS(s){s.Q_=void 0}async function wV(s){s.q_.set("Online")}async function RV(s){s.N_.forEach((t,e)=>{sp(s,t)})}async function CV(s,t){oS(s),op(s)?(s.q_.M_(t),ap(s)):s.q_.set("Unknown")}async function DV(s,t,e){if(s.q_.set("Online"),t instanceof Cb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.N_.delete(d),a.Q_.removeTarget(d))}(s,t)}catch(i){rt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Kh(s,i)}else if(t instanceof Ah?s.Q_.Ke(t):t instanceof Rb?s.Q_.He(t):s.Q_.We(t),!e.isEqual(Et.min()))try{const i=await eS(s.localStore);e.compareTo(i)>=0&&await function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.N_.get(p);v&&l.N_.set(p,v.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,p)=>{const v=l.N_.get(g);if(!v)return;l.N_.set(g,v.withResumeToken(Ie.EMPTY_BYTE_STRING,v.snapshotVersion)),aS(l,g);const T=new Wi(v.target,g,p,v.sequenceNumber);sp(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,e)}catch(i){rt("RemoteStore","Failed to raise snapshot:",i),await Kh(s,i)}}async function Kh(s,t,e){if(!ts(t))throw t;s.L_.add(1),await xu(s),s.q_.set("Offline"),e||(e=()=>eS(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await e(),s.L_.delete(1),await _f(s)})}function lS(s,t){return t().catch(e=>Kh(s,e,t))}async function Vu(s){const t=wt(s),e=Zr(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;xV(t);)try{const a=await dV(t.localStore,i);if(a===null){t.O_.length===0&&e.o_();break}i=a.batchId,VV(t,a)}catch(a){await Kh(t,a)}uS(t)&&cS(t)}function xV(s){return ua(s)&&s.O_.length<10}function VV(s,t){s.O_.push(t);const e=Zr(s);e.r_()&&e.V_&&e.m_(t.mutations)}function uS(s){return ua(s)&&!Zr(s).n_()&&s.O_.length>0}function cS(s){Zr(s).start()}async function NV(s){Zr(s).p_()}async function OV(s){const t=Zr(s);for(const e of s.O_)t.m_(e.mutations)}async function MV(s,t,e){const i=s.O_.shift(),a=Xg.from(i,t,e);await lS(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Vu(s)}async function PV(s,t){t&&Zr(s).V_&&await async function(i,a){if(function(c){return px(c)&&c!==et.ABORTED}(a.code)){const l=i.O_.shift();Zr(i).s_(),await lS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Vu(i)}}(s,t),uS(s)&&cS(s)}async function yT(s,t){const e=wt(s);e.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const i=ua(e);e.L_.add(3),await xu(e),i&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await _f(e)}async function kV(s,t){const e=wt(s);t?(e.L_.delete(2),await _f(e)):t||(e.L_.add(2),await xu(e),e.q_.set("Unknown"))}function Uo(s){return s.K_||(s.K_=function(e,i,a){const l=wt(e);return l.w_(),new TV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:wV.bind(null,s),Ro:RV.bind(null,s),mo:CV.bind(null,s),d_:DV.bind(null,s)}),s.B_.push(async t=>{t?(s.K_.s_(),op(s)?ap(s):s.q_.set("Unknown")):(await s.K_.stop(),oS(s))})),s.K_}function Zr(s){return s.U_||(s.U_=function(e,i,a){const l=wt(e);return l.w_(),new bV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NV.bind(null,s),mo:PV.bind(null,s),f_:OV.bind(null,s),g_:MV.bind(null,s)}),s.B_.push(async t=>{t?(s.U_.s_(),await Vu(s)):(await s.U_.stop(),s.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const c=Date.now()+i,d=new lp(t,e,c,a,l);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(s,t){if(an("AsyncQueue",`${t}: ${s}`),ts(s))return new ft(et.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ht.comparator(e.key,i.key):(e,i)=>ht.comparator(e.key,i.key),this.keyedMap=tu(),this.sortedSet=new oe(this.comparator)}static emptySet(t){return new yo(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof yo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new yo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.W_=new oe(ht.comparator)}track(t){const e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):gt():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}}class Do{constructor(t,e,i,a,l,c,d,g,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,a,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new Do(t,e,yo.emptySet(e),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class LV{constructor(){this.queries=ET(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){const a=wt(e),l=a.queries;a.queries=ET(),l.forEach((c,d)=>{for(const g of d.j_)g.onError(i)})})(this,new ft(et.ABORTED,"Firestore shutting down"))}}function ET(){return new es(s=>db(s),lf)}async function BV(s,t){const e=wt(s);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.H_()&&t.J_()&&(i=2):(l=new UV,i=t.J_()?0:1);try{switch(i){case 0:l.z_=await e.onListen(a,!0);break;case 1:l.z_=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const d=up(c,`Initialization of query '${uo(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,l),l.j_.push(t),t.Z_(e.onlineState),l.z_&&t.X_(l.z_)&&cp(e)}async function zV(s,t){const e=wt(s),i=t.query;let a=3;const l=e.queries.get(i);if(l){const c=l.j_.indexOf(t);c>=0&&(l.j_.splice(c,1),l.j_.length===0?a=t.J_()?0:1:!l.H_()&&t.J_()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function jV(s,t){const e=wt(s);let i=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const d of c.j_)d.X_(a)&&(i=!0);c.z_=a}}i&&cp(e)}function qV(s,t,e){const i=wt(s),a=i.queries.get(t);if(a)for(const l of a.j_)l.onError(e);i.queries.delete(t)}function cp(s){s.Y_.forEach(t=>{t.next()})}var yg,TT;(TT=yg||(yg={})).ea="default",TT.Cache="cache";class FV{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Do(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Do.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t){this.key=t}}class fS{constructor(t){this.key=t}}class GV{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xt(),this.mutatedKeys=xt(),this.Aa=mb(t),this.Ra=new yo(this.Aa)}get Va(){return this.Ta}ma(t,e){const i=e?e.fa:new vT,a=e?e.Ra:this.Ra;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((v,T)=>{const I=a.get(v),M=Cu(this.query,T)?T:null,K=!!I&&this.mutatedKeys.has(I.key),z=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let L=!1;I&&M?I.data.isEqual(M.data)?K!==z&&(i.track({type:3,doc:M}),L=!0):this.ga(I,M)||(i.track({type:2,doc:M}),L=!0,(g&&this.Aa(M,g)>0||p&&this.Aa(M,p)<0)&&(d=!0)):!I&&M?(i.track({type:0,doc:M}),L=!0):I&&!M&&(i.track({type:1,doc:I}),L=!0,(g||p)&&(d=!0)),L&&(M?(c=c.add(M),l=z?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ra:c,fa:i,ns:d,mutatedKeys:l}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const c=t.fa.G_();c.sort((v,T)=>function(M,K){const z=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return z(M)-z(K)}(v.type,T.type)||this.Aa(v.doc,T.doc)),this.pa(i),a=a!=null&&a;const d=e&&!a?this.ya():[],g=this.da.size===0&&this.current&&!a?1:0,p=g!==this.Ea;return this.Ea=g,c.length!==0||p?{snapshot:new Do(this.query,t.Ra,l,c,t.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=xt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const e=[];return t.forEach(i=>{this.da.has(i)||e.push(new fS(i))}),this.da.forEach(i=>{t.has(i)||e.push(new hS(i))}),e}ba(t){this.Ta=t.Ts,this.da=xt();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Do.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class KV{constructor(t){this.key=t,this.va=!1}}class QV{constructor(t,e,i,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new es(d=>db(d),lf),this.Ma=new Map,this.xa=new Set,this.Oa=new oe(ht.comparator),this.Na=new Map,this.La=new ep,this.Ba={},this.ka=new Map,this.qa=sa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YV(s,t,e=!0){const i=yS(s);let a;const l=i.Fa.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await dS(i,t,e,!0),a}async function XV(s,t){const e=yS(s);await dS(e,t,!0,!1)}async function dS(s,t,e,i){const a=await mV(s.localStore,jn(t)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,e);let d;return i&&(d=await $V(s,t,l,c==="current",a.resumeToken)),s.isPrimaryClient&&e&&sS(s.remoteStore,a),d}async function $V(s,t,e,i,a){s.Ka=(T,I,M)=>async function(z,L,nt,tt){let W=L.view.ma(nt);W.ns&&(W=await gT(z.localStore,L.query,!1).then(({documents:D})=>L.view.ma(D,W)));const ot=tt&&tt.targetChanges.get(L.targetId),lt=tt&&tt.targetMismatches.get(L.targetId)!=null,dt=L.view.applyChanges(W,z.isPrimaryClient,ot,lt);return ST(z,L.targetId,dt.wa),dt.snapshot}(s,T,I,M);const l=await gT(s.localStore,t,!0),c=new GV(t,l.Ts),d=c.ma(l.documents),g=Du.createSynthesizedTargetChangeForCurrentChange(e,i&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,g);ST(s,e,p.wa);const v=new HV(t,e,c);return s.Fa.set(t,v),s.Ma.has(e)?s.Ma.get(e).push(t):s.Ma.set(e,[t]),p.snapshot}async function WV(s,t,e){const i=wt(s),a=i.Fa.get(t),l=i.Ma.get(a.targetId);if(l.length>1)return i.Ma.set(a.targetId,l.filter(c=>!lf(c,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await _g(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&rp(i.remoteStore,a.targetId),vg(i,a.targetId)}).catch(oa)):(vg(i,a.targetId),await _g(i.localStore,a.targetId,!0))}async function JV(s,t){const e=wt(s),i=e.Fa.get(t),a=e.Ma.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),rp(e.remoteStore,i.targetId))}async function ZV(s,t,e){const i=vS(s);try{const a=await function(c,d){const g=wt(c),p=he.now(),v=d.reduce((M,K)=>M.add(K.key),xt());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",M=>{let K=Sn(),z=xt();return g.cs.getEntries(M,v).next(L=>{K=L,K.forEach((nt,tt)=>{tt.isValidDocument()||(z=z.add(nt))})}).next(()=>g.localDocuments.getOverlayedDocuments(M,K)).next(L=>{T=L;const nt=[];for(const tt of d){const W=mx(tt,T.get(tt.key).overlayedDocument);W!=null&&nt.push(new ar(tt.key,W,sb(W.value.mapValue),ze.exists(!0)))}return g.mutationQueue.addMutationBatch(M,p,nt,d)}).next(L=>{I=L;const nt=L.applyToLocalDocumentSet(T,z);return g.documentOverlayCache.saveOverlays(M,L.batchId,nt)})}).then(()=>({batchId:I.batchId,changes:pb(T)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let p=c.Ba[c.currentUser.toKey()];p||(p=new oe(Rt)),p=p.insert(d,g),c.Ba[c.currentUser.toKey()]=p}(i,a.batchId,e),await Nu(i,a.changes),await Vu(i.remoteStore)}catch(a){const l=up(a,"Failed to persist write");e.reject(l)}}async function mS(s,t){const e=wt(s);try{const i=await hV(e.localStore,t);t.targetChanges.forEach((a,l)=>{const c=e.Na.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.va=!0:a.modifiedDocuments.size>0?_t(c.va):a.removedDocuments.size>0&&(_t(c.va),c.va=!1))}),await Nu(e,i,t)}catch(i){await oa(i)}}function bT(s,t,e){const i=wt(s);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Fa.forEach((l,c)=>{const d=c.view.Z_(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=wt(c);g.onlineState=d;let p=!1;g.queries.forEach((v,T)=>{for(const I of T.j_)I.Z_(d)&&(p=!0)}),p&&cp(g)}(i.eventManager,t),a.length&&i.Ca.d_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function tN(s,t,e){const i=wt(s);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Na.get(t),l=a&&a.key;if(l){let c=new oe(ht.comparator);c=c.insert(l,pe.newNoDocument(l,Et.min()));const d=xt().add(l),g=new ff(Et.min(),new Map,new oe(Rt),c,d);await mS(i,g),i.Oa=i.Oa.remove(l),i.Na.delete(t),hp(i)}else await _g(i.localStore,t,!1).then(()=>vg(i,t,e)).catch(oa)}async function eN(s,t){const e=wt(s),i=t.batch.batchId;try{const a=await cV(e.localStore,t);pS(e,i,null),gS(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Nu(e,a)}catch(a){await oa(a)}}async function nN(s,t,e){const i=wt(s);try{const a=await function(c,d){const g=wt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return g.mutationQueue.lookupMutationBatch(p,d).next(T=>(_t(T!==null),v=T.keys(),g.mutationQueue.removeMutationBatch(p,T))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>g.localDocuments.getDocuments(p,v))})}(i.localStore,t);pS(i,t,e),gS(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Nu(i,a)}catch(a){await oa(a)}}function gS(s,t){(s.ka.get(t)||[]).forEach(e=>{e.resolve()}),s.ka.delete(t)}function pS(s,t,e){const i=wt(s);let a=i.Ba[i.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),i.Ba[i.currentUser.toKey()]=a}}function vg(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const i of s.Ma.get(t))s.Fa.delete(i),e&&s.Ca.$a(i,e);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach(i=>{s.La.containsKey(i)||_S(s,i)})}function _S(s,t){s.xa.delete(t.path.canonicalString());const e=s.Oa.get(t);e!==null&&(rp(s.remoteStore,e),s.Oa=s.Oa.remove(t),s.Na.delete(e),hp(s))}function ST(s,t,e){for(const i of e)i instanceof hS?(s.La.addReference(i.key,t),iN(s,i)):i instanceof fS?(rt("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,t),s.La.containsKey(i.key)||_S(s,i.key)):gt()}function iN(s,t){const e=t.key,i=e.path.canonicalString();s.Oa.get(e)||s.xa.has(i)||(rt("SyncEngine","New document in limbo: "+e),s.xa.add(i),hp(s))}function hp(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const e=new ht(Yt.fromString(t)),i=s.qa.next();s.Na.set(i,new KV(e)),s.Oa=s.Oa.insert(e,i),sS(s.remoteStore,new Wi(jn(Kg(e.path)),i,"TargetPurposeLimboResolution",zn.oe))}}async function Nu(s,t,e){const i=wt(s),a=[],l=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((d,g)=>{c.push(i.Ka(g,t,e).then(p=>{var v;if((p||e)&&i.isPrimaryClient){const T=p?!p.fromCache:(v=e==null?void 0:e.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){a.push(p);const T=ip.Wi(g.targetId,p);l.push(T)}}))}),await Promise.all(c),i.Ca.d_(a),await async function(g,p){const v=wt(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>F.forEach(p,I=>F.forEach(I.$i,M=>v.persistence.referenceDelegate.addReference(T,I.targetId,M)).next(()=>F.forEach(I.Ui,M=>v.persistence.referenceDelegate.removeReference(T,I.targetId,M)))))}catch(T){if(!ts(T))throw T;rt("LocalStore","Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const M=v.os.get(I),K=M.snapshotVersion,z=M.withLastLimboFreeSnapshotVersion(K);v.os=v.os.insert(I,z)}}}(i.localStore,l))}async function rN(s,t){const e=wt(s);if(!e.currentUser.isEqual(t)){rt("SyncEngine","User change. New user:",t.toKey());const i=await tS(e.localStore,t);e.currentUser=t,function(l,c){l.ka.forEach(d=>{d.forEach(g=>{g.reject(new ft(et.CANCELLED,c))})}),l.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Nu(e,i.hs)}}function sN(s,t){const e=wt(s),i=e.Na.get(t);if(i&&i.va)return xt().add(i.key);{let a=xt();const l=e.Ma.get(t);if(!l)return a;for(const c of l){const d=e.Fa.get(c);a=a.unionWith(d.view.Va)}return a}}function yS(s){const t=wt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=mS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tN.bind(null,t),t.Ca.d_=jV.bind(null,t.eventManager),t.Ca.$a=qV.bind(null,t.eventManager),t}function vS(s){const t=wt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,t),t}class Tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=pf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return Zb(this.persistence,new Jb,t.initialUser,this.serializer)}Ga(t){return new Wb(gf.Zr,this.serializer)}Wa(t){return new nS}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tu.provider={build:()=>new Tu};class aN extends Tu{constructor(t,e,i){super(),this.Ja=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ja.initialize(this,t),await vS(this.Ja.syncEngine),await Vu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(t){return Zb(this.persistence,new Jb,t.initialUser,this.serializer)}ja(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new Hx(i,t.asyncQueue,e)}Ha(t,e){const i=new yD(e,this.persistence);return new _D(t.asyncQueue,i)}Ga(t){const e=oV(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new np(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,EV(),Ih(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new nS}}class Qh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rN.bind(null,this.syncEngine),await kV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LV}()}createDatastore(t){const e=pf(t.databaseInfo.databaseId),i=function(l){return new vV(l)}(t.databaseInfo);return function(l,c,d,g){return new SV(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,l,c,d){return new IV(i,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>bT(this.syncEngine,e,0),function(){return _T.D()?new _T:new pV}())}createSyncEngine(t,e){return function(a,l,c,d,g,p,v){const T=new QV(a,l,c,d,g,p);return v&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=wt(a);rt("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await xu(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Qh.provider={build:()=>new Qh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):an("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=Ye.UNAUTHENTICATED,this.clientId=H0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{rt("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(rt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=up(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function jm(s,t){s.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let i=e.initialUser;s.setCredentialChangeListener(async a=>{i.isEqual(a)||(await tS(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function AT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await uN(s);rt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(i=>yT(t.remoteStore,i)),s.setAppCheckTokenChangeListener((i,a)=>yT(t.remoteStore,a)),s._onlineComponents=t}async function uN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await jm(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===et.FAILED_PRECONDITION||a.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Zs("Error using user provided cache. Falling back to memory cache: "+e),await jm(s,new Tu)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await jm(s,new Tu);return s._offlineComponents}async function ES(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await AT(s,s._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await AT(s,new Qh))),s._onlineComponents}function cN(s){return ES(s).then(t=>t.syncEngine)}async function hN(s){const t=await ES(s),e=t.eventManager;return e.onListen=YV.bind(null,t.syncEngine),e.onUnlisten=WV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=XV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=JV.bind(null,t.syncEngine),e}function fN(s,t,e={}){const i=new Ji;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,p){const v=new oN({next:I=>{v.Za(),c.enqueueAndForget(()=>zV(l,T)),I.fromCache&&g.source==="server"?p.reject(new ft(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new FV(d,v,{includeMetadataChanges:!0,_a:!0});return BV(l,T)}(await hN(s),s.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(s,t,e){if(!e)throw new ft(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function dN(s,t,e,i){if(t===!0&&i===!0)throw new ft(et.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function wT(s){if(!ht.isDocumentKey(s))throw new ft(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function RT(s){if(ht.isDocumentKey(s))throw new ft(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function fp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":gt()}function vi(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ft(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=fp(s);throw new ft(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ft(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ft(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TS((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ft(et.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yf{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CT(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new sD;switch(i.type){case"firstParty":return new uD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ft(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=IT.get(e);i&&(rt("ComponentProvider","Removing Datastore"),IT.delete(e),i.terminate())}(this),Promise.resolve()}}function mN(s,t,e,i={}){var a;const l=(s=vi(s,yf))._getSettings(),c=`${t}:${e}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Ye.MOCK_USER;else{d=Vw(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ft(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ye(p)}s._authCredentials=new aD(new G0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new vf(this.firestore,t,this._query)}}class An{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new An(this.firestore,t,this._key)}}class $r extends vf{constructor(t,e,i){super(t,e,Kg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new An(this.firestore,null,new ht(t))}withConverter(t){return new $r(this.firestore,t,this._path)}}function aa(s,t,...e){if(s=je(s),bS("collection","path",t),s instanceof yf){const i=Yt.fromString(t,...e);return RT(i),new $r(s,null,i)}{if(!(s instanceof An||s instanceof $r))throw new ft(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Yt.fromString(t,...e));return RT(i),new $r(s.firestore,null,i)}}function Ou(s,t,...e){if(s=je(s),arguments.length===1&&(t=H0.newId()),bS("doc","path",t),s instanceof yf){const i=Yt.fromString(t,...e);return wT(i),new An(s,null,new ht(i))}{if(!(s instanceof An||s instanceof $r))throw new ft(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Yt.fromString(t,...e));return wT(i),new An(s.firestore,s instanceof $r?s.converter:null,new ht(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iS(this,"async_queue_retry"),this.Vu=()=>{const i=Ih();i&&rt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const e=Ih();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=Ih();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new Ji;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!ts(t))throw t;rt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw an("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const a=lp.createAndSchedule(this,t,e,i,l=>this.yu(l));return this.Tu.push(a),a}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class ca extends yf{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new DT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new DT(t),this._firestoreClient=void 0,await t}}}function gN(s,t){const e=typeof s=="object"?s:n0(),i=typeof s=="string"?s:"(default)",a=wg(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Dw("firestore");l&&mN(a,...l)}return a}function dp(s){if(s._terminated)throw new ft(et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||SS(s),s._firestoreClient}function SS(s){var t,e,i;const a=s._freezeSettings(),l=function(d,g,p,v){return new zD(d,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,TS(v.experimentalLongPollingOptions),v.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new lN(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(s._componentsProvider))}function pN(s,t){Zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return _N(s,Qh.provider,{build:i=>new aN(i,e.cacheSizeBytes,void 0)}),Promise.resolve()}function _N(s,t,e){if((s=vi(s,ca))._firestoreClient||s._terminated)throw new ft(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ft(et.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},SS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xo(Ie.fromBase64String(t))}catch(e){throw new ft(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new xo(Ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ft(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ft(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ft(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class vN{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ar(t,this.data,this.fieldMask,e,this.fieldTransforms):new ko(t,this.data,e,this.fieldTransforms)}}class AS{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ar(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function IS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class _p{constructor(t,e,i,a,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new _p(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:i,xu:!1});return a.Ou(t),a}Nu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Yh(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(IS(this.Cu)&&yN.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class EN{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||pf(t)}Qu(t,e,i,a=!1){return new _p({Cu:t,methodName:e,qu:i,path:ue.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(s){const t=s._freezeSettings(),e=pf(s._databaseId);return new EN(s._databaseId,!!t.ignoreUndefinedProperties,e)}function yp(s,t,e,i,a,l={}){const c=s.Qu(l.merge||l.mergeFields?2:0,t,e,a);vp("Data must be an object, but it was:",c,i);const d=CS(i,c);let g,p;if(l.merge)g=new dn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const I=Eg(t,T,e);if(!c.contains(I))throw new ft(et.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);xS(v,I)||v.push(I)}g=new dn(v),p=c.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,p=c.fieldTransforms;return new vN(new tn(d),g,p)}class Tf extends mp{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Tf}}function wS(s,t,e,i){const a=s.Qu(1,t,e);vp("Data must be an object, but it was:",a,i);const l=[],c=tn.empty();la(i,(g,p)=>{const v=Ep(t,g,e);p=je(p);const T=a.Nu(v);if(p instanceof Tf)l.push(v);else{const I=bf(p,T);I!=null&&(l.push(v),c.set(v,I))}});const d=new dn(l);return new AS(c,d,a.fieldTransforms)}function RS(s,t,e,i,a,l){const c=s.Qu(1,t,e),d=[Eg(t,i,e)],g=[a];if(l.length%2!=0)throw new ft(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(Eg(t,l[I])),g.push(l[I+1]);const p=[],v=tn.empty();for(let I=d.length-1;I>=0;--I)if(!xS(p,d[I])){const M=d[I];let K=g[I];K=je(K);const z=c.Nu(M);if(K instanceof Tf)p.push(M);else{const L=bf(K,z);L!=null&&(p.push(M),v.set(M,L))}}const T=new dn(p);return new AS(v,T,c.fieldTransforms)}function bf(s,t){if(DS(s=je(s)))return vp("Unsupported field value:",t,s),CS(s,t);if(s instanceof mp)return function(i,a){if(!IS(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let g=bf(d,a.Lu(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(s,t)}return function(i,a){if((i=je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ox(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=he.fromDate(i);return{timestampValue:Co(a.serializer,l)}}if(i instanceof he){const l=new he(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Co(a.serializer,l)}}if(i instanceof gp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xo)return{bytesValue:Db(a.serializer,i._byteString)};if(i instanceof An){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof pp)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Bu("VectorValues must only contain numeric values.");return Qg(d.serializer,g)})}}}}}}(i,a);throw a.Bu(`Unsupported field value: ${fp(i)}`)}(s,t)}function CS(s,t){const e={};return eb(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):la(s,(i,a)=>{const l=bf(a,t.Mu(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function DS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof he||s instanceof gp||s instanceof xo||s instanceof An||s instanceof mp||s instanceof pp)}function vp(s,t,e){if(!DS(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const i=fp(e);throw i==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+i)}}function Eg(s,t,e){if((t=je(t))instanceof Mu)return t._internalPath;if(typeof t=="string")return Ep(s,t);throw Yh("Field path arguments must be of type string or ",s,!1,void 0,e)}const TN=new RegExp("[~\\*/\\[\\]]");function Ep(s,t,e){if(t.search(TN)>=0)throw Yh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Mu(...t.split("."))._internalPath}catch{throw Yh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Yh(s,t,e,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${i}`),c&&(g+=` in document ${a}`),g+=")"),new ft(et.INVALID_ARGUMENT,d+s+g)}function xS(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(NS("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class bN extends VS{data(){return super.data()}}function NS(s,t){return typeof t=="string"?Ep(s,t):t instanceof Mu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ft(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AN{convertValue(t,e="none"){switch(ea(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw gt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return la(t,(a,l)=>{i[a]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,a;const l=(a=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>ae(c.doubleValue));return new pp(l)}convertGeoPoint(t){return new gp(ae(t.latitude),ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Fg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(pu(t));default:return null}}convertTimestamp(t){const e=er(t);return new he(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Yt.fromString(t);_t(Bb(i));const a=new ta(i.get(1),i.get(3)),l=new ht(i.popFirst(5));return a.isEqual(e)||an(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(s,t,e){let i;return i=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class IN extends VS{constructor(t,e,i,a,l,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(NS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class wh extends IN{data(t={}){return super.data(t)}}class wN{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new dh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new wh(this._firestore,this._userDataWriter,i.key,i,new dh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ft(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new wh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new wh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:RN(d.type),doc:g,oldIndex:p,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function RN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}class CN extends AN{constructor(t){super(),this.firestore=t}convertBytes(t){return new xo(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new An(this.firestore,null,e)}}function Pu(s){s=vi(s,vf);const t=vi(s.firestore,ca),e=dp(t),i=new CN(t);return SN(s._query),fN(e,s._query).then(a=>new wN(t,i,s,a))}function DN(s,t,e){s=vi(s,An);const i=vi(s.firestore,ca),a=Tp(s.converter,t,e);return Sf(i,[yp(Ef(i),"setDoc",s._key,a,s.converter!==null,e).toMutation(s._key,ze.none())])}function OS(s,t,e,...i){s=vi(s,An);const a=vi(s.firestore,ca),l=Ef(a);let c;return c=typeof(t=je(t))=="string"||t instanceof Mu?RS(l,"updateDoc",s._key,t,e,i):wS(l,"updateDoc",s._key,t),Sf(a,[c.toMutation(s._key,ze.exists(!0))])}function xN(s,t){const e=vi(s.firestore,ca),i=Ou(s),a=Tp(s.converter,t);return Sf(e,[yp(Ef(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,ze.exists(!1))]).then(()=>i)}function Sf(s,t){return function(i,a){const l=new Ji;return i.asyncQueue.enqueueAndForget(async()=>ZV(await cN(i),a,l)),l.promise}(dp(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ef(t)}set(t,e,i){this._verifyNotCommitted();const a=qm(t,this._firestore),l=Tp(a.converter,e,i),c=yp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ze.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const l=qm(t,this._firestore);let c;return c=typeof(e=je(e))=="string"||e instanceof Mu?RS(this._dataReader,"WriteBatch.update",l._key,e,i,a):wS(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,ze.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=qm(t,this._firestore);return this._mutations=this._mutations.concat(new hf(e._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(s,t){if((s=je(s)).firestore!==t)throw new ft(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(s){return dp(s=vi(s,ca)),new VN(s,t=>Sf(s,t))}(function(t,e=!0){(function(a){Po=a})(Oo),Eo(new $s("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new ca(new oD(i.getProvider("auth-internal")),new hD(i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ft(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(p.options.projectId,v)}(c,a),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Yr(AE,"4.7.3",t),Yr(AE,"4.7.3","esm2017")})();const ON={apiKey:"AIzaSyCOa_tTly-MBkraG1MtlQcUx1yb5k2piBU",authDomain:"fluencyapp-37ad5.firebaseapp.com",projectId:"fluencyapp-37ad5",storageBucket:"fluencyapp-37ad5.firebasestorage.app",messagingSenderId:"135947529307",appId:"1:135947529307:web:4886c941d78d2fbd96e37e",measurementId:"G-1LKRZJZLXH"},MS=e0(ON),wn=$C(MS),MN=new Ki,qn=gN(MS);pN(qn).catch(console.warn);const PN=({user:s})=>s?U.jsx("button",{onClick:()=>I0(wn),children:"Sign out"}):U.jsx("button",{onClick:()=>sC(wn,MN),children:"Sign in with Google"}),kN=({user:s,onToggleSidebar:t})=>{const[e,i]=$.useState(!1),a=$.useRef(null),l=()=>i(!e),c=()=>i(!1);return $.useEffect(()=>{const d=g=>{a.current&&!a.current.contains(g.target)&&c()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),U.jsxs("nav",{className:"navbar",children:[U.jsxs("div",{className:"navbar-left",children:[U.jsx("button",{className:"hamburger",onClick:()=>{window.innerWidth<=768?document.body.classList.toggle("menu-open"):t()},children:""}),U.jsx("span",{className:"navbar-title",children:"Fluency App"})]}),U.jsxs("div",{className:"profile-container",ref:a,children:[U.jsx("img",{src:s.photoURL||"/default-avatar.png",alt:"Profile",className:"profile-pic",onClick:l}),e&&U.jsxs("div",{className:"dropdown",children:[U.jsx("div",{className:"dropdown-item",children:s.displayName}),U.jsx("div",{className:"dropdown-item",children:s.email}),U.jsx("hr",{}),U.jsx(GT,{to:"/profile",className:"dropdown-item",children:"My Profile"}),U.jsx("button",{className:"dropdown-item logout",onClick:()=>I0(wn),children:"Log out"})]})]})]})},UN=()=>{const s=rr(),[t,e]=$.useState(!1);return $.useEffect(()=>{s.pathname.startsWith("/stats")&&e(!0)},[s.pathname]),U.jsx("aside",{className:"sidebar",children:U.jsxs("nav",{children:[U.jsx(io,{to:"/home",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Home"}),U.jsx(io,{to:"/practice",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Practice"}),U.jsx(io,{to:"/vocabulary",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Vocabulary"}),U.jsxs("div",{className:"nav-group",children:[U.jsx("div",{className:`nav-item nav-collapsible ${t?"expanded":""}`,onClick:()=>e(!t),children:"Stats "}),t&&U.jsx("div",{className:"nav-submenu",children:U.jsx(io,{to:"/stats/progress",className:({isActive:i})=>i?"nav-item sub-item active":"nav-item sub-item",children:"Your Progress"})})]}),U.jsx(io,{to:"/profile",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Profile"}),U.jsx(io,{to:"/maintenance",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Maintenance"})]})})};function LN(){return U.jsx("h2",{children:"Welcome to Fluency App!"})}const BN=({onStart:s})=>{const[t,e]=$.useState("word-count"),[i,a]=$.useState(10),[l,c]=$.useState("random"),d=g=>{g.preventDefault(),s({mode:t,count:i,direction:l})};return U.jsxs("div",{children:[U.jsx("h2",{children:"Start Practice"}),U.jsxs("form",{onSubmit:d,children:[U.jsx("div",{children:U.jsxs("label",{children:["Mode:",U.jsxs("select",{value:t,onChange:g=>e(g.target.value),children:[U.jsx("option",{value:"word-count",children:"Fixed Number of Words"}),U.jsx("option",{value:"timed",children:"Timed (Minutes)"})]})]})}),U.jsx("div",{children:U.jsxs("label",{children:[t==="word-count"?"Number of Words:":"Session Time (minutes):",U.jsx("input",{type:"number",min:1,max:999,value:i,onChange:g=>a(Number(g.target.value))})]})}),U.jsx("div",{children:U.jsxs("label",{children:["Direction:",U.jsxs("select",{value:l,onChange:g=>c(g.target.value),children:[U.jsx("option",{value:"es-en",children:"Spanish  English"}),U.jsx("option",{value:"en-es",children:"English  Spanish"}),U.jsx("option",{value:"random",children:"Random"})]})]})}),U.jsx("button",{type:"submit",children:"Start"})]})]})},zN=({words:s,options:t,onComplete:e})=>{const i=$.useMemo(()=>{const A=Math.min(t.count,s.length);return(t.mode==="word-count"?s.slice(0,A):s).map(x=>{let O;return t.direction==="random"?O=Math.random()>.5?"es-en":"en-es":O=t.direction,{...x,direction:O}})},[s,t]),[a,l]=$.useState(0),[c,d]=$.useState(""),[g,p]=$.useState(0),[v,T]=$.useState([]),[I,M]=$.useState(!1),[K,z]=$.useState(null),[L,nt]=$.useState(t.mode==="timed"?t.count*60:0),tt=$.useRef(null),W=i[a];$.useEffect(()=>{!I&&tt.current&&tt.current.focus()},[a,I]),$.useEffect(()=>{if(t.mode==="timed"){const A=setInterval(()=>{nt(w=>w<=1?(clearInterval(A),e(g,i,v),0):w-1)},1e3);return()=>clearInterval(A)}},[t,g,v,e]);const ot=()=>W.direction==="es-en"?W.spanish:W.english,lt=()=>W.direction==="es-en"?W.english:W.spanish,dt=()=>{const A=lt().toLowerCase().split("|").map(O=>O.trim()),w=c.trim().toLowerCase(),x=A.includes(w);if(z(x),x){const O=W.id;if(!O)return;p(k=>k+1),T(k=>[...k,O])}M(!0)},D=()=>{d(""),M(!1),z(null);const A=a+1;A>=i.length?e(g,i,v):l(A)};return i.length?W?U.jsxs("div",{children:[t.mode==="timed"&&U.jsxs("div",{children:[" Time Left: ",Math.floor(L/60),":",String(L%60).padStart(2,"0")]}),U.jsx("h3",{children:"Translate:"}),U.jsx("div",{style:{fontSize:"1.5rem",margin:"1rem 0"},children:U.jsx("strong",{children:ot()})}),U.jsx("input",{ref:tt,autoFocus:!0,value:c,onChange:A=>d(A.target.value),onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),I?D():dt())},placeholder:"Your answer"}),I?U.jsxs(U.Fragment,{children:[U.jsx("h4",{style:{color:K?"green":"red"},children:K?" Correct!":" Incorrect"}),U.jsxs("p",{children:[U.jsx("strong",{children:"Your answer:"})," ",c||"(blank)"]}),U.jsxs("p",{children:[U.jsx("strong",{children:"Correct answer:"})," ",lt()]}),U.jsx("button",{onClick:D,children:"Next"})]}):U.jsx("button",{onClick:dt,children:"Check"})]}):null:U.jsx("div",{children:"No words available for practice."})};function jN(){const[s,t]=$.useState(null),[e,i]=$.useState([]),[a,l]=$.useState(!1),[c,d]=$.useState(0);$.useEffect(()=>{if(!s)return;(async()=>{const v=wn.currentUser;if(!v)return;const I=(await Pu(aa(qn,"users",v.uid,"words"))).docs.map(nt=>({id:nt.id,...nt.data()})),M=Date.now(),z=I.map(nt=>{const tt=nt.lastSeen||0,W=nt.correctCount||0,ot=(M-tt)/(1+W);return{...nt,srScore:ot}}).sort((nt,tt)=>tt.srScore-nt.srScore),L=s.mode==="word-count"?z.slice(0,s.count):z;i(L)})()},[s]);const g=async(p,v,T)=>{d(p),l(!0);const I=wn.currentUser;if(!I)return;const M=NN(qn),K=Date.now();v.forEach(z=>{if(!z.id){console.warn("Skipping update for word with missing ID",z);return}const L=Ou(qn,"users",I.uid,"words",z.id),nt=T.includes(z.id),tt={lastSeen:K,seenCount:(z.seenCount||0)+1,correctCount:nt?(z.correctCount||0)+1:z.correctCount||0,history:[...z.history??[],nt].slice(-5)};M.update(L,tt)}),await M.commit()};return s?a?U.jsxs("div",{children:[U.jsx("h2",{children:" Practice Complete!"}),U.jsxs("p",{children:["You scored ",U.jsx("strong",{children:c})," out of"," ",U.jsx("strong",{children:e.length})]}),U.jsx("button",{onClick:()=>{t(null),i([]),d(0),l(!1)},children:"Start New Session"})]}):U.jsx("div",{children:U.jsx(zN,{words:e,options:s,onComplete:(p,v,T)=>g(p,v,T)})}):U.jsx(BN,{onStart:t})}function qN(){return U.jsx("h2",{children:"Coming soon: Your profile details!"})}function FN({onWordAdded:s}){const[t,e]=$.useState(""),[i,a]=$.useState(""),l=async c=>{c.preventDefault();const d=wn.currentUser;if(!d||!t||!i)return;const g=aa(qn,"users",d.uid,"words");await xN(g,{english:t.trim(),spanish:i.trim(),correctCount:0,lastSeen:0}),e(""),a(""),s&&s()};return U.jsxs("form",{onSubmit:l,children:[U.jsx("input",{type:"text",placeholder:"English",value:t,onChange:c=>e(c.target.value),required:!0}),U.jsx("input",{type:"text",placeholder:"Spanish",value:i,onChange:c=>a(c.target.value),required:!0}),U.jsx("button",{type:"submit",children:"Add Word"})]})}function GN(){const[s,t]=$.useState([]),[e,i]=$.useState(null),[a,l]=$.useState(""),[c,d]=$.useState(""),[g,p]=$.useState(""),v=Wh(),T=rr(),I=async()=>{const z=wn.currentUser;if(!z)return;const L=await Pu(aa(qn,"users",z.uid,"words")),nt=Date.now(),tt=L.docs.map(W=>{const ot=W.data(),lt=ot.lastSeen||0,dt=ot.correctCount||0,D=(nt-lt)/(1+dt);return{...ot,id:W.id,seenCount:ot.seenCount??dt,correctCount:dt,srScore:D}});t(tt)};$.useEffect(()=>{I()},[]),$.useEffect(()=>{var z;(z=T.state)!=null&&z.importSuccess&&(p(" Vocabulary imported successfully!"),window.history.replaceState({},document.title))},[T.state]);const M=async z=>{const L=wn.currentUser;if(!L)return;const nt=Ou(qn,"users",L.uid,"words",z);await OS(nt,{english:a,spanish:c}),t(tt=>tt.map(W=>W.id===z?{...W,english:a,spanish:c}:W)),i(null),l(""),d("")},K=async z=>{var dt;const L=(dt=z.target.files)==null?void 0:dt[0];if(!L)return;const tt=(await L.text()).split(`
`).map(D=>D.trim()).filter(Boolean);let W=tt;tt.length>0&&tt[0].toLowerCase().includes("english")&&tt[0].toLowerCase().includes("spanish")&&(W=tt.slice(1));const ot=[],lt=[];for(const D of W){const A=D.includes(";")?";":",",w=D.split(A).map(x=>x.trim());w.length!==2||w.some(x=>!x||/[^a-zA-Z\s]/.test(x))?lt.push(D):ot.push({english:w[0],spanish:w[1]})}if(lt.length>0){alert("Invalid CSV format. Please ensure the file has exactly 2 columns and only contains valid Spanish/English characters.");return}v("/vocabulary/import-preview",{state:{parsedEntries:ot}})};return U.jsxs("div",{children:[U.jsx("h2",{children:"Add / Edit Vocabulary"}),g&&U.jsx("div",{style:{background:"#d4edda",color:"#155724",padding:"1rem",borderRadius:"4px",marginBottom:"1rem"},children:g}),U.jsx(FN,{onWordAdded:I}),U.jsx("h3",{style:{marginTop:"2rem"},children:"Import Vocab"}),U.jsx("input",{type:"file",accept:".csv",style:{display:"none"},id:"csvInput",onChange:K}),U.jsx("button",{onClick:()=>{var z;return(z=document.getElementById("csvInput"))==null?void 0:z.click()},children:"Import Vocabulary from CSV"}),U.jsx("h3",{style:{marginTop:"2rem"},children:"Your Words"}),U.jsxs("table",{children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsx("th",{children:"Spanish"}),U.jsx("th",{children:"English"}),U.jsx("th",{children:"SR Score"}),U.jsx("th",{children:"Accuracy"}),U.jsx("th",{children:"History"}),U.jsx("th",{children:"Actions"})]})}),U.jsx("tbody",{children:s.map(z=>{const L=Math.max(z.seenCount??0,z.correctCount??0),nt=L>0?Math.min(100,Math.round((z.correctCount??0)/L*100)):"";return U.jsxs("tr",{children:[U.jsx("td",{children:e===z.id?U.jsx("input",{value:c,onChange:tt=>d(tt.target.value)}):z.spanish}),U.jsx("td",{children:e===z.id?U.jsx("input",{value:a,onChange:tt=>l(tt.target.value)}):z.english}),U.jsx("td",{children:Math.round(z.srScore)}),U.jsx("td",{children:typeof nt=="number"?`${nt}%`:""}),U.jsx("td",{children:(z.history??[]).map((tt,W)=>U.jsx("span",{children:tt?"":""},W))}),U.jsx("td",{children:e===z.id?U.jsx("button",{onClick:()=>M(z.id),children:"Save"}):U.jsx("button",{onClick:()=>{i(z.id),l(z.english),d(z.spanish)},children:"Edit"})})]},z.id)})})]})]})}function HN(){var c;const s=rr(),t=Wh(),[e,i]=$.useState([]),a=((c=s.state)==null?void 0:c.parsedEntries)??[];$.useEffect(()=>{(async()=>{const g=wn.currentUser;if(!g)return;const v=(await Pu(aa(qn,"users",g.uid,"words"))).docs.map(I=>{const M=I.data();return{english:(M.english??"").toLowerCase().replace(/\s+/g,""),spanish:(M.spanish??"").toLowerCase().replace(/\s+/g,"")}}),T=a.map(I=>{const M=I.english.toLowerCase().replace(/\s+/g,""),K=I.spanish.toLowerCase().replace(/\s+/g,""),z=v.some(L=>L.english===M&&L.spanish===K);return{...I,import:!z}});i(T)})()},[a]);const l=async()=>{const d=wn.currentUser;if(!d)return;const g=e.filter(p=>p.import);for(const p of g){const v=Ou(aa(qn,"users",d.uid,"words"));await DN(v,{english:p.english,spanish:p.spanish,correctCount:0,seenCount:0,history:[],lastSeen:0})}t("/vocabulary",{state:{importSuccess:!0}})};return U.jsxs("div",{children:[U.jsx("h2",{children:"Import Preview"}),U.jsxs("table",{children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsx("th",{children:"English"}),U.jsx("th",{children:"Spanish"}),U.jsx("th",{children:"Status"})]})}),U.jsx("tbody",{children:e.map((d,g)=>U.jsxs("tr",{children:[U.jsx("td",{children:d.english}),U.jsx("td",{children:d.spanish}),U.jsx("td",{children:d.import?" Will Import":" Already Exists"})]},g))})]}),U.jsxs("div",{style:{marginTop:"1rem"},children:[U.jsx("button",{onClick:l,children:" Confirm Import"}),U.jsx("button",{onClick:()=>t("/vocabulary"),children:" Cancel"})]})]})}function KN(){return U.jsxs("div",{children:[U.jsx("h2",{children:" Stats"}),U.jsx(aw,{})]})}const QN=()=>{const[s,t]=$.useState({total:0,totalCorrect:0,accuracy:0,practicedToday:0,practicedWeek:0,practicedMonth:0});return $.useEffect(()=>{(async()=>{const i=wn.currentUser;if(!i)return;const a=Date.now(),l=1e3*60*60*24,c=l*7,d=l*30,p=(await Pu(aa(qn,"users",i.uid,"words"))).docs.map(L=>({id:L.id,...L.data()})),v=p.length,T=p.reduce((L,nt)=>L+(nt.correctCount||0),0),I=v>0?Math.round(T/v*100):0,M=p.filter(L=>a-(L.lastSeen||0)<l).length,K=p.filter(L=>a-(L.lastSeen||0)<c).length,z=p.filter(L=>a-(L.lastSeen||0)<d).length;t({total:v,totalCorrect:T,accuracy:I,practicedToday:M,practicedWeek:K,practicedMonth:z})})()},[]),U.jsxs("div",{children:[U.jsx("h2",{children:" Your Progress"}),U.jsxs("ul",{children:[U.jsxs("li",{children:[U.jsx("strong",{children:"Total words:"})," ",s.total]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Total correct answers:"})," ",s.totalCorrect]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Accuracy:"})," ",s.accuracy,"%"]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Practiced today:"})," ",s.practicedToday]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Practiced this week:"})," ",s.practicedWeek]}),U.jsxs("li",{children:[U.jsx("strong",{children:"Practiced this month:"})," ",s.practicedMonth]})]})]})};function YN(){return U.jsxs("div",{children:[U.jsx("h3",{children:"Your Progress"}),U.jsx(QN,{})]})}async function XN(){const s=wn.currentUser;if(!s){console.warn("User not authenticated");return}const t=await Pu(aa(qn,"users",s.uid,"words")),e=[];for(const i of t.docs){const a=i.data(),l=a.correctCount??0;if((a.seenCount??0)<l){const d=Ou(qn,"users",s.uid,"words",i.id);console.log(`Fixing word "${a.spanish}" / "${a.english}"`),e.push(OS(d,{seenCount:l}))}}e.length>0?(await Promise.all(e),console.log(` Updated ${e.length} entries.`)):console.log(" No updates needed.")}function $N(){const[s,t]=$.useState(""),e=async()=>{t("Running...");try{await XN(),t(" Fix complete! You can now refresh your vocabulary.")}catch(i){console.error(i),t(" Failed to run fix. See console for details.")}};return U.jsxs("div",{style:{padding:"1rem"},children:[U.jsx("h2",{children:" Maintenance"}),U.jsx("p",{children:"This tool fixes old vocabulary entries with invalid accuracy values."}),U.jsx("button",{onClick:e,children:"Run Fix"}),U.jsx("p",{children:s})]})}const WN=({user:s})=>{const[t,e]=$.useState(!1);return U.jsxs("div",{className:`app-layout ${t?"collapsed":""}`,children:[U.jsx(kN,{user:s,onToggleSidebar:()=>e(i=>!i)}),U.jsxs("div",{className:"app-body",children:[U.jsx(UN,{}),U.jsx("main",{className:"app-content",children:U.jsxs(lw,{children:[U.jsx(Xn,{path:"/",element:U.jsx(Qv,{to:"/home"})}),U.jsx(Xn,{path:"/home",element:U.jsx(LN,{})}),U.jsx(Xn,{path:"/practice",element:U.jsx(jN,{})}),U.jsx(Xn,{path:"/vocabulary",element:U.jsx(GN,{})}),U.jsx(Xn,{path:"/vocabulary/import-preview",element:U.jsx(HN,{})}),U.jsx(Xn,{path:"/profile",element:U.jsx(qN,{})}),U.jsx(Xn,{path:"/maintenance",element:U.jsx($N,{})}),U.jsxs(Xn,{path:"/stats",element:U.jsx(KN,{}),children:[U.jsx(Xn,{index:!0,element:U.jsx(Qv,{to:"progress"})}),U.jsx(Xn,{path:"progress",element:U.jsx(YN,{})})]})]})})]})]})};function JN(){const[s]=nD(wn);return s?U.jsx(WN,{user:s}):U.jsx(PN,{user:s})}pI.createRoot(document.getElementById("root")).render(U.jsx(VT.StrictMode,{children:U.jsx(pw,{children:U.jsx(JN,{})})}));
