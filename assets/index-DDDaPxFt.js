(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function jT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Wd={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function sS(){if(Jy)return Nl;Jy=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Nl.Fragment=t,Nl.jsx=e,Nl.jsxs=e,Nl}var Wy;function aS(){return Wy||(Wy=1,Wd.exports=sS()),Wd.exports}var pt=aS(),tm={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function oS(){if(tv)return Rt;tv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.iterator;function D(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function Q(C,Z,it){this.props=C,this.context=Z,this.refs=W,this.updater=it||q}Q.prototype.isReactComponent={},Q.prototype.setState=function(C,Z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,Z,"setState")},Q.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Tt(){}Tt.prototype=Q.prototype;function ft(C,Z,it){this.props=C,this.context=Z,this.refs=W,this.updater=it||q}var st=ft.prototype=new Tt;st.constructor=ft,$(st,Q.prototype),st.isPureReactComponent=!0;var At=Array.isArray,lt={H:null,A:null,T:null,S:null,V:null},_t=Object.prototype.hasOwnProperty;function O(C,Z,it,tt,mt,Vt){return it=Vt.ref,{$$typeof:s,type:C,key:Z,ref:it!==void 0?it:null,props:Vt}}function S(C,Z){return O(C.type,Z,void 0,void 0,void 0,C.props)}function w(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function N(C){var Z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(it){return Z[it]})}var x=/\/+/g;function P(C,Z){return typeof C=="object"&&C!==null&&C.key!=null?N(""+C.key):Z.toString(36)}function R(){}function ze(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function(Z){C.status==="pending"&&(C.status="fulfilled",C.value=Z)},function(Z){C.status==="pending"&&(C.status="rejected",C.reason=Z)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ce(C,Z,it,tt,mt){var Vt=typeof C;(Vt==="undefined"||Vt==="boolean")&&(C=null);var bt=!1;if(C===null)bt=!0;else switch(Vt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(C.$$typeof){case s:case t:bt=!0;break;case T:return bt=C._init,ce(bt(C._payload),Z,it,tt,mt)}}if(bt)return mt=mt(C),bt=tt===""?"."+P(C,0):tt,At(mt)?(it="",bt!=null&&(it=bt.replace(x,"$&/")+"/"),ce(mt,Z,it,"",function(Qn){return Qn})):mt!=null&&(w(mt)&&(mt=S(mt,it+(mt.key==null||C&&C.key===mt.key?"":(""+mt.key).replace(x,"$&/")+"/")+bt)),Z.push(mt)),1;bt=0;var Ne=tt===""?".":tt+":";if(At(C))for(var ee=0;ee<C.length;ee++)tt=C[ee],Vt=Ne+P(tt,ee),bt+=ce(tt,Z,it,Vt,mt);else if(ee=D(C),typeof ee=="function")for(C=ee.call(C),ee=0;!(tt=C.next()).done;)tt=tt.value,Vt=Ne+P(tt,ee++),bt+=ce(tt,Z,it,Vt,mt);else if(Vt==="object"){if(typeof C.then=="function")return ce(ze(C),Z,it,tt,mt);throw Z=String(C),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return bt}function G(C,Z,it){if(C==null)return C;var tt=[],mt=0;return ce(C,tt,"","",function(Vt){return Z.call(it,Vt,mt++)}),tt}function nt(C){if(C._status===-1){var Z=C._result;Z=Z(),Z.then(function(it){(C._status===0||C._status===-1)&&(C._status=1,C._result=it)},function(it){(C._status===0||C._status===-1)&&(C._status=2,C._result=it)}),C._status===-1&&(C._status=0,C._result=Z)}if(C._status===1)return C._result.default;throw C._result}var dt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function qt(){}return Rt.Children={map:G,forEach:function(C,Z,it){G(C,function(){Z.apply(this,arguments)},it)},count:function(C){var Z=0;return G(C,function(){Z++}),Z},toArray:function(C){return G(C,function(Z){return Z})||[]},only:function(C){if(!w(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Rt.Component=Q,Rt.Fragment=e,Rt.Profiler=o,Rt.PureComponent=ft,Rt.StrictMode=r,Rt.Suspense=g,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return lt.H.useMemoCache(C)}},Rt.cache=function(C){return function(){return C.apply(null,arguments)}},Rt.cloneElement=function(C,Z,it){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var tt=$({},C.props),mt=C.key,Vt=void 0;if(Z!=null)for(bt in Z.ref!==void 0&&(Vt=void 0),Z.key!==void 0&&(mt=""+Z.key),Z)!_t.call(Z,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&Z.ref===void 0||(tt[bt]=Z[bt]);var bt=arguments.length-2;if(bt===1)tt.children=it;else if(1<bt){for(var Ne=Array(bt),ee=0;ee<bt;ee++)Ne[ee]=arguments[ee+2];tt.children=Ne}return O(C.type,mt,void 0,void 0,Vt,tt)},Rt.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Rt.createElement=function(C,Z,it){var tt,mt={},Vt=null;if(Z!=null)for(tt in Z.key!==void 0&&(Vt=""+Z.key),Z)_t.call(Z,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(mt[tt]=Z[tt]);var bt=arguments.length-2;if(bt===1)mt.children=it;else if(1<bt){for(var Ne=Array(bt),ee=0;ee<bt;ee++)Ne[ee]=arguments[ee+2];mt.children=Ne}if(C&&C.defaultProps)for(tt in bt=C.defaultProps,bt)mt[tt]===void 0&&(mt[tt]=bt[tt]);return O(C,Vt,void 0,void 0,null,mt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(C){return{$$typeof:m,render:C}},Rt.isValidElement=w,Rt.lazy=function(C){return{$$typeof:T,_payload:{_status:-1,_result:C},_init:nt}},Rt.memo=function(C,Z){return{$$typeof:_,type:C,compare:Z===void 0?null:Z}},Rt.startTransition=function(C){var Z=lt.T,it={};lt.T=it;try{var tt=C(),mt=lt.S;mt!==null&&mt(it,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(qt,dt)}catch(Vt){dt(Vt)}finally{lt.T=Z}},Rt.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Rt.use=function(C){return lt.H.use(C)},Rt.useActionState=function(C,Z,it){return lt.H.useActionState(C,Z,it)},Rt.useCallback=function(C,Z){return lt.H.useCallback(C,Z)},Rt.useContext=function(C){return lt.H.useContext(C)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(C,Z){return lt.H.useDeferredValue(C,Z)},Rt.useEffect=function(C,Z,it){var tt=lt.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(C,Z)},Rt.useId=function(){return lt.H.useId()},Rt.useImperativeHandle=function(C,Z,it){return lt.H.useImperativeHandle(C,Z,it)},Rt.useInsertionEffect=function(C,Z){return lt.H.useInsertionEffect(C,Z)},Rt.useLayoutEffect=function(C,Z){return lt.H.useLayoutEffect(C,Z)},Rt.useMemo=function(C,Z){return lt.H.useMemo(C,Z)},Rt.useOptimistic=function(C,Z){return lt.H.useOptimistic(C,Z)},Rt.useReducer=function(C,Z,it){return lt.H.useReducer(C,Z,it)},Rt.useRef=function(C){return lt.H.useRef(C)},Rt.useState=function(C){return lt.H.useState(C)},Rt.useSyncExternalStore=function(C,Z,it){return lt.H.useSyncExternalStore(C,Z,it)},Rt.useTransition=function(){return lt.H.useTransition()},Rt.version="19.1.0",Rt}var ev;function Gm(){return ev||(ev=1,tm.exports=oS()),tm.exports}var Ce=Gm();const lS=jT(Ce);var em={exports:{}},xl={},nm={exports:{}},im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function uS(){return nv||(nv=1,function(s){function t(G,nt){var dt=G.length;G.push(nt);t:for(;0<dt;){var qt=dt-1>>>1,C=G[qt];if(0<o(C,nt))G[qt]=nt,G[dt]=C,dt=qt;else break t}}function e(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var nt=G[0],dt=G.pop();if(dt!==nt){G[0]=dt;t:for(var qt=0,C=G.length,Z=C>>>1;qt<Z;){var it=2*(qt+1)-1,tt=G[it],mt=it+1,Vt=G[mt];if(0>o(tt,dt))mt<C&&0>o(Vt,tt)?(G[qt]=Vt,G[mt]=dt,qt=mt):(G[qt]=tt,G[it]=dt,qt=it);else if(mt<C&&0>o(Vt,dt))G[qt]=Vt,G[mt]=dt,qt=mt;else break t}}return nt}function o(G,nt){var dt=G.sortIndex-nt.sortIndex;return dt!==0?dt:G.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],T=1,b=null,D=3,q=!1,$=!1,W=!1,Q=!1,Tt=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,st=typeof setImmediate<"u"?setImmediate:null;function At(G){for(var nt=e(_);nt!==null;){if(nt.callback===null)r(_);else if(nt.startTime<=G)r(_),nt.sortIndex=nt.expirationTime,t(g,nt);else break;nt=e(_)}}function lt(G){if(W=!1,At(G),!$)if(e(g)!==null)$=!0,_t||(_t=!0,P());else{var nt=e(_);nt!==null&&ce(lt,nt.startTime-G)}}var _t=!1,O=-1,S=5,w=-1;function N(){return Q?!0:!(s.unstable_now()-w<S)}function x(){if(Q=!1,_t){var G=s.unstable_now();w=G;var nt=!0;try{t:{$=!1,W&&(W=!1,ft(O),O=-1),q=!0;var dt=D;try{e:{for(At(G),b=e(g);b!==null&&!(b.expirationTime>G&&N());){var qt=b.callback;if(typeof qt=="function"){b.callback=null,D=b.priorityLevel;var C=qt(b.expirationTime<=G);if(G=s.unstable_now(),typeof C=="function"){b.callback=C,At(G),nt=!0;break e}b===e(g)&&r(g),At(G)}else r(g);b=e(g)}if(b!==null)nt=!0;else{var Z=e(_);Z!==null&&ce(lt,Z.startTime-G),nt=!1}}break t}finally{b=null,D=dt,q=!1}nt=void 0}}finally{nt?P():_t=!1}}}var P;if(typeof st=="function")P=function(){st(x)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ze=R.port2;R.port1.onmessage=x,P=function(){ze.postMessage(null)}}else P=function(){Tt(x,0)};function ce(G,nt){O=Tt(function(){G(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(G){switch(D){case 1:case 2:case 3:var nt=3;break;default:nt=D}var dt=D;D=nt;try{return G()}finally{D=dt}},s.unstable_requestPaint=function(){Q=!0},s.unstable_runWithPriority=function(G,nt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var dt=D;D=G;try{return nt()}finally{D=dt}},s.unstable_scheduleCallback=function(G,nt,dt){var qt=s.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?qt+dt:qt):dt=qt,G){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=dt+C,G={id:T++,callback:nt,priorityLevel:G,startTime:dt,expirationTime:C,sortIndex:-1},dt>qt?(G.sortIndex=dt,t(_,G),e(g)===null&&G===e(_)&&(W?(ft(O),O=-1):W=!0,ce(lt,dt-qt))):(G.sortIndex=C,t(g,G),$||q||($=!0,_t||(_t=!0,P()))),G},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(G){var nt=D;return function(){var dt=D;D=nt;try{return G.apply(this,arguments)}finally{D=dt}}}}(im)),im}var iv;function cS(){return iv||(iv=1,nm.exports=uS()),nm.exports}var rm={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function hS(){if(rv)return Xe;rv=1;var s=Gm();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,T){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:T}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xe.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,T)},Xe.flushSync=function(g){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=T,r.d.f()}},Xe.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},Xe.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Xe.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,b=m(T,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,q=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:D,fetchPriority:q}):T==="script"&&r.d.X(g,{crossOrigin:b,integrity:D,fetchPriority:q,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Xe.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},Xe.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,b=m(T,_.crossOrigin);r.d.L(g,T,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Xe.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},Xe.requestFormReset=function(g){r.d.r(g)},Xe.unstable_batchedUpdates=function(g,_){return g(_)},Xe.useFormState=function(g,_,T){return h.H.useFormState(g,_,T)},Xe.useFormStatus=function(){return h.H.useHostTransitionStatus()},Xe.version="19.1.0",Xe}var sv;function fS(){if(sv)return rm.exports;sv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),rm.exports=hS(),rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function dS(){if(av)return xl;av=1;var s=cS(),t=Gm(),e=fS();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,E=f.child;E;){if(E===a){v=!0,a=f,l=d;break}if(E===l){v=!0,l=f,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=f;break}if(E===l){v=!0,l=d,a=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function _(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=_(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),ft=Symbol.for("react.consumer"),st=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case Q:return"Profiler";case W:return"StrictMode";case lt:return"Suspense";case _t:return"SuspenseList";case w:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case q:return"Portal";case st:return(n.displayName||"Context")+".Provider";case ft:return(n._context.displayName||"Context")+".Consumer";case At:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return i=n.displayName||null,i!==null?i:ze(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return ze(n(i))}catch{}}return null}var ce=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},qt=[],C=-1;function Z(n){return{current:n}}function it(n){0>C||(n.current=qt[C],qt[C]=null,C--)}function tt(n,i){C++,qt[C]=n.current,n.current=i}var mt=Z(null),Vt=Z(null),bt=Z(null),Ne=Z(null);function ee(n,i){switch(tt(bt,i),tt(Vt,n),tt(mt,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?wy(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=wy(i),n=Ry(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}it(mt),tt(mt,n)}function Qn(){it(mt),it(Vt),it(bt)}function Wi(n){n.memoizedState!==null&&tt(Ne,n);var i=mt.current,a=Ry(i,n.type);i!==a&&(tt(Vt,n),tt(mt,a))}function gi(n){Vt.current===n&&(it(mt),it(Vt)),Ne.current===n&&(it(Ne),Rl._currentValue=dt)}var Qr=Object.prototype.hasOwnProperty,Yr=s.unstable_scheduleCallback,Xr=s.unstable_cancelCallback,So=s.unstable_shouldYield,vu=s.unstable_requestPaint,Sn=s.unstable_now,Jh=s.unstable_getCurrentPriorityLevel,Io=s.unstable_ImmediatePriority,ea=s.unstable_UserBlockingPriority,$r=s.unstable_NormalPriority,Wh=s.unstable_LowPriority,na=s.unstable_IdlePriority,wo=s.log,Tu=s.unstable_setDisableYieldValue,he=null,Gt=null;function dn(n){if(typeof wo=="function"&&Tu(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(he,n)}catch{}}var Qe=Math.clz32?Math.clz32:Zr,Eu=Math.log,tf=Math.LN2;function Zr(n){return n>>>=0,n===0?32:31-(Eu(n)/tf|0)|0}var Jr=256,Wr=4194304;function Bn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ia(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=Bn(l):(v&=E,v!==0?f=Bn(v):a||(a=E&~n,a!==0&&(f=Bn(a))))):(E=l&~d,E!==0?f=Bn(E):v!==0?f=Bn(v):a||(a=l&~n,a!==0&&(f=Bn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ts(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ro(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Do(){var n=Jr;return Jr<<=1,(Jr&4194048)===0&&(Jr=256),n}function Co(){var n=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),n}function pi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function _i(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vo(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,I=n.expirationTimes,L=n.hiddenUpdates;for(a=v&~a;0<a;){var H=31-Qe(a),Y=1<<H;E[H]=0,I[H]=-1;var B=L[H];if(B!==null)for(L[H]=null,H=0;H<B.length;H++){var j=B[H];j!==null&&(j.lane&=-536870913)}a&=~Y}l!==0&&Yn(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function Yn(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-Qe(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Oo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-Qe(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function tr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ra(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function er(){var n=nt.p;return n!==0?n:(n=window.event,n===void 0?32:Ky(n.type))}function Au(n,i){var a=nt.p;try{return nt.p=n,i()}finally{nt.p=a}}var ie=Math.random().toString(36).slice(2),Se="__reactFiber$"+ie,ye="__reactProps$"+ie,In="__reactContainer$"+ie,No="__reactEvents$"+ie,ef="__reactListeners$"+ie,nr="__reactHandles$"+ie,bu="__reactResources$"+ie,es="__reactMarker$"+ie;function ir(n){delete n[Se],delete n[ye],delete n[No],delete n[ef],delete n[nr]}function yi(n){var i=n[Se];if(i)return i;for(var a=n.parentNode;a;){if(i=a[In]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Oy(n);n!==null;){if(a=n[Se])return a;n=Oy(n)}return i}n=a,a=n.parentNode}return null}function Xn(n){if(n=n[Se]||n[In]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function $n(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function We(n){var i=n[bu];return i||(i=n[bu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(n){n[es]=!0}var xo=new Set,sa={};function qn(n,i){vi(n,i),vi(n+"Capture",i)}function vi(n,i){for(sa[n]=i,n=0;n<i.length;n++)xo.add(i[n])}var Su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Iu={},ns={};function wu(n){return Qr.call(ns,n)?!0:Qr.call(Iu,n)?!1:Su.test(n)?ns[n]=!0:(Iu[n]=!0,!1)}function rr(n,i,a){if(wu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Zn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Be(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var is,Ru;function Ti(n){if(is===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);is=i&&i[1]||"",Ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+is+n+Ru}var aa=!1;function oa(n,i){if(!n||aa)return"";aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var B=j}Reflect.construct(n,[],Y)}else{try{Y.call()}catch(j){B=j}n.call(Y.prototype)}}else{try{throw Error()}catch(j){B=j}(Y=n())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&B&&typeof j.stack=="string")return[j.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var I=v.split(`
`),L=E.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===L.length)for(l=I.length-1,f=L.length-1;1<=l&&0<=f&&I[l]!==L[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==L[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==L[f]){var H=`
`+I[l].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=l&&0<=f);break}}}finally{aa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ti(a):""}function Mo(n){switch(n.tag){case 26:case 27:case 5:return Ti(n.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return oa(n.type,!1);case 11:return oa(n.type.render,!1);case 1:return oa(n.type,!0);case 31:return Ti("Activity");default:return""}}function la(n){try{var i="";do i+=Mo(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Po(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function nf(n){var i=Po(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ua(n){n._valueTracker||(n._valueTracker=nf(n))}function ko(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Po(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function rs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var rf=/[\n"\\]/g;function ve(n){return n.replace(rf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(n,i,a,l,f,d,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+tn(i)):n.value!==""+tn(i)&&(n.value=""+tn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?sr(n,v,tn(i)):a!=null?sr(n,v,tn(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+tn(E):n.removeAttribute("name")}function ss(n,i,a,l,f,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,E||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=E?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function sr(n,i,a){i==="number"&&rs(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ei(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Yt(n,i,a){if(i!=null&&(i=""+tn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+tn(a):""}function as(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ce(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=tn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function wn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var os=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Du(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||os.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Uo(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Du(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Du(n,d,i[d])}function Lo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(n){return af.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ai=null;function Rn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bi=null,Si=null;function zo(n){var i=Xn(n);if(i&&(n=i.stateNode)){var a=n[ye]||null;t:switch(n=i.stateNode,i.type){case"input":if(mn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ve(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[ye]||null;if(!f)throw Error(r(90));mn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&ko(l)}break t;case"textarea":Yt(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ei(n,!!a.multiple,i,!1)}}}var Jn=!1;function Cu(n,i,a){if(Jn)return n(i,a);Jn=!0;try{var l=n(i);return l}finally{if(Jn=!1,(bi!==null||Si!==null)&&(Ac(),bi&&(i=bi,n=Si,Si=bi=null,zo(i),n)))for(i=0;i<n.length;i++)zo(n[i])}}function ls(n,i){var a=n.stateNode;if(a===null)return null;var l=a[ye]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=!1;if(jn)try{var us={};Object.defineProperty(us,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Dn=!1}var Wn=null,ar=null,Ii=null;function Bo(){if(Ii)return Ii;var n,i=ar,a=i.length,l,f="value"in Wn?Wn.value:Wn.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Ii=f.slice(n,1<l?1-l:void 0)}function ti(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ei(){return!0}function qo(){return!1}function xe(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ei:qo,this.isPropagationStopped=qo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),i}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=xe(Ft),cs=T({},Ft,{view:0,detail:0}),Vu=xe(cs),fa,da,ni,hs=T({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ni&&(ni&&n.type==="mousemove"?(fa=n.screenX-ni.screenX,da=n.screenY-ni.screenY):da=fa=0,ni=n),fa)},movementY:function(n){return"movementY"in n?n.movementY:da}}),Cn=xe(hs),Ou=T({},hs,{dataTransfer:0}),of=xe(Ou),fs=T({},cs,{relatedTarget:0}),ma=xe(fs),jo=T({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),ga=xe(jo),Nu=T({},Ft,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pa=xe(Nu),lf=T({},Ft,{data:0}),Fo=xe(lf),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Go(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Mu[n])?!!i[n]:!1}function ms(){return Go}var Pu=T({},cs,{key:function(n){if(n.key){var i=ds[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(n){return n.type==="keypress"?ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_a=xe(Pu),ku=T({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=xe(ku),wi=T({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),Uu=xe(wi),Lu=T({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=xe(Lu),Bu=T({},hs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=xe(Bu),en=T({},Ft,{newState:0,oldState:0}),qu=xe(en),ju=[9,13,27,32],ii=jn&&"CompositionEvent"in window,c=null;jn&&"documentMode"in document&&(c=document.documentMode);var p=jn&&"TextEvent"in window&&!c,y=jn&&(!ii||c&&8<c&&11>=c),A=" ",k=!1;function F(n,i){switch(n){case"keyup":return ju.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var kt=!1;function Ie(n,i){switch(n){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return n=i.data,n===A&&k?null:n;default:return null}}function Ut(n,i){if(kt)return n==="compositionend"||!ii&&F(n,i)?(n=Bo(),Ii=ar=Wn=null,kt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Me={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function we(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Me[n.type]:i==="textarea"}function Ri(n,i,a,l){bi?Si?Si.push(l):Si=[l]:bi=l,i=Dc(i,"onChange"),0<i.length&&(a=new ha("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var qe=null,ri=null;function Ko(n){Ey(n,0)}function Fu(n){var i=$n(n);if(ko(i))return n}function jg(n,i){if(n==="change")return i}var Fg=!1;if(jn){var uf;if(jn){var cf="oninput"in document;if(!cf){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),cf=typeof Gg.oninput=="function"}uf=cf}else uf=!1;Fg=uf&&(!document.documentMode||9<document.documentMode)}function Hg(){qe&&(qe.detachEvent("onpropertychange",Kg),ri=qe=null)}function Kg(n){if(n.propertyName==="value"&&Fu(ri)){var i=[];Ri(i,ri,n,Rn(n)),Cu(Ko,i)}}function PA(n,i,a){n==="focusin"?(Hg(),qe=i,ri=a,qe.attachEvent("onpropertychange",Kg)):n==="focusout"&&Hg()}function kA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fu(ri)}function UA(n,i){if(n==="click")return Fu(i)}function LA(n,i){if(n==="input"||n==="change")return Fu(i)}function zA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var gn=typeof Object.is=="function"?Object.is:zA;function Qo(n,i){if(gn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Qr.call(i,f)||!gn(n[f],i[f]))return!1}return!0}function Qg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yg(n,i){var a=Qg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qg(a)}}function Xg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Xg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function $g(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=rs(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=rs(n.document)}return i}function hf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var BA=jn&&"documentMode"in document&&11>=document.documentMode,va=null,ff=null,Yo=null,df=!1;function Zg(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;df||va==null||va!==rs(l)||(l=va,"selectionStart"in l&&hf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yo&&Qo(Yo,l)||(Yo=l,l=Dc(ff,"onSelect"),0<l.length&&(i=new ha("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=va)))}function gs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ta={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},mf={},Jg={};jn&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function ps(n){if(mf[n])return mf[n];if(!Ta[n])return n;var i=Ta[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Jg)return mf[n]=i[a];return n}var Wg=ps("animationend"),tp=ps("animationiteration"),ep=ps("animationstart"),qA=ps("transitionrun"),jA=ps("transitionstart"),FA=ps("transitioncancel"),np=ps("transitionend"),ip=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function Fn(n,i){ip.set(n,i),qn(i,[n])}var rp=new WeakMap;function Vn(n,i){if(typeof n=="object"&&n!==null){var a=rp.get(n);return a!==void 0?a:(i={value:n,source:i,stack:la(i)},rp.set(n,i),i)}return{value:n,source:i,stack:la(i)}}var On=[],Ea=0,pf=0;function Gu(){for(var n=Ea,i=pf=Ea=0;i<n;){var a=On[i];On[i++]=null;var l=On[i];On[i++]=null;var f=On[i];On[i++]=null;var d=On[i];if(On[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&sp(a,f,d)}}function Hu(n,i,a,l){On[Ea++]=n,On[Ea++]=i,On[Ea++]=a,On[Ea++]=l,pf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function _f(n,i,a,l){return Hu(n,i,a,l),Ku(n)}function Aa(n,i){return Hu(n,null,null,i),Ku(n)}function sp(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-Qe(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Ku(n){if(50<vl)throw vl=0,bd=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ba={};function GA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,i,a,l){return new GA(n,i,a,l)}function yf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Di(n,i){var a=n.alternate;return a===null?(a=pn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function ap(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Qu(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")yf(n)&&(v=1);else if(typeof n=="string")v=Kb(n,a,mt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case w:return n=pn(31,a,i,f),n.elementType=w,n.lanes=d,n;case $:return _s(a.children,f,d,i);case W:v=8,f|=24;break;case Q:return n=pn(12,a,i,f|2),n.elementType=Q,n.lanes=d,n;case lt:return n=pn(13,a,i,f),n.elementType=lt,n.lanes=d,n;case _t:return n=pn(19,a,i,f),n.elementType=_t,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Tt:case st:v=10;break t;case ft:v=9;break t;case At:v=11;break t;case O:v=14;break t;case S:v=16,l=null;break t}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=pn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function _s(n,i,a,l){return n=pn(7,n,l,i),n.lanes=a,n}function vf(n,i,a){return n=pn(6,n,null,i),n.lanes=a,n}function Tf(n,i,a){return i=pn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Sa=[],Ia=0,Yu=null,Xu=0,Nn=[],xn=0,ys=null,Ci=1,Vi="";function vs(n,i){Sa[Ia++]=Xu,Sa[Ia++]=Yu,Yu=n,Xu=i}function op(n,i,a){Nn[xn++]=Ci,Nn[xn++]=Vi,Nn[xn++]=ys,ys=n;var l=Ci;n=Vi;var f=32-Qe(l)-1;l&=~(1<<f),a+=1;var d=32-Qe(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Ci=1<<32-Qe(i)+f|a<<f|l,Vi=d+n}else Ci=1<<d|a<<f|l,Vi=n}function Ef(n){n.return!==null&&(vs(n,1),op(n,1,0))}function Af(n){for(;n===Yu;)Yu=Sa[--Ia],Sa[Ia]=null,Xu=Sa[--Ia],Sa[Ia]=null;for(;n===ys;)ys=Nn[--xn],Nn[xn]=null,Vi=Nn[--xn],Nn[xn]=null,Ci=Nn[--xn],Nn[xn]=null}var nn=null,fe=null,jt=!1,Ts=null,si=!1,bf=Error(r(519));function Es(n){var i=Error(r(418,""));throw Zo(Vn(i,n)),bf}function lp(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Se]=n,i[ye]=l,a){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(a=0;a<El.length;a++)xt(El[a],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":xt("invalid",i),ss(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ua(i);break;case"select":xt("invalid",i);break;case"textarea":xt("invalid",i),as(i,l.value,l.defaultValue,l.children),ua(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Iy(i.textContent,a)?(l.popover!=null&&(xt("beforetoggle",i),xt("toggle",i)),l.onScroll!=null&&xt("scroll",i),l.onScrollEnd!=null&&xt("scrollend",i),l.onClick!=null&&(i.onclick=Cc),i=!0):i=!1,i||Es(n)}function up(n){for(nn=n.return;nn;)switch(nn.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:nn=nn.return}}function Xo(n){if(n!==nn)return!1;if(!jt)return up(n),jt=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||zd(n.type,n.memoizedProps)),a=!a),a&&fe&&Es(n),up(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){fe=Hn(n.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}fe=null}}else i===27?(i=fe,Ar(n.type)?(n=Fd,Fd=null,fe=n):fe=i):fe=nn?Hn(n.stateNode.nextSibling):null;return!0}function $o(){fe=nn=null,jt=!1}function cp(){var n=Ts;return n!==null&&(un===null?un=n:un.push.apply(un,n),Ts=null),n}function Zo(n){Ts===null?Ts=[n]:Ts.push(n)}var Sf=Z(null),As=null,Oi=null;function or(n,i,a){tt(Sf,i._currentValue),i._currentValue=a}function Ni(n){n._currentValue=Sf.current,it(Sf)}function If(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function wf(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=f;for(var I=0;I<i.length;I++)if(E.context===i[I]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),If(d.return,a,n),l||(v=null);break t}d=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),If(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Jo(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=f.type;gn(f.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(f===Ne.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Rl):n=[Rl])}f=f.return}n!==null&&wf(i,n,a,l),i.flags|=262144}function $u(n){for(n=n.firstContext;n!==null;){if(!gn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function bs(n){As=n,Oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ye(n){return hp(As,n)}function Zu(n,i){return As===null&&bs(n),hp(n,i)}function hp(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(n===null)throw Error(r(308));Oi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Oi=Oi.next=i;return a}var HA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},KA=s.unstable_scheduleCallback,QA=s.unstable_NormalPriority,Re={$$typeof:st,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new HA,data:new Map,refCount:0}}function Wo(n){n.refCount--,n.refCount===0&&KA(QA,function(){n.controller.abort()})}var tl=null,Df=0,wa=0,Ra=null;function YA(n,i){if(tl===null){var a=tl=[];Df=0,wa=Vd(),Ra={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Df++,i.then(fp,fp),i}function fp(){if(--Df===0&&tl!==null){Ra!==null&&(Ra.status="fulfilled");var n=tl;tl=null,wa=0,Ra=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function XA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var dp=G.S;G.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&YA(n,i),dp!==null&&dp(n,i)};var Ss=Z(null);function Cf(){var n=Ss.current;return n!==null?n:ne.pooledCache}function Ju(n,i){i===null?tt(Ss,Ss.current):tt(Ss,i.pool)}function mp(){var n=Cf();return n===null?null:{parent:Re._currentValue,pool:n}}var el=Error(r(460)),gp=Error(r(474)),Wu=Error(r(542)),Vf={then:function(){}};function pp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function tc(){}function _p(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(tc,tc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,vp(n),n;default:if(typeof i.status=="string")i.then(tc,tc);else{if(n=ne,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,vp(n),n}throw nl=i,el}}var nl=null;function yp(){if(nl===null)throw Error(r(459));var n=nl;return nl=null,n}function vp(n){if(n===el||n===Wu)throw Error(r(483))}var lr=!1;function Of(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function cr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ht&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Ku(n),sp(n,null,a),i}return Hu(n,l,i,a),Ku(n)}function il(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Oo(n,a)}}function xf(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Mf=!1;function rl(){if(Mf){var n=Ra;if(n!==null)throw n}}function sl(n,i,a,l){Mf=!1;var f=n.updateQueue;lr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var I=E,L=I.next;I.next=null,v===null?d=L:v.next=L,v=I;var H=n.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==v&&(E===null?H.firstBaseUpdate=L:E.next=L,H.lastBaseUpdate=I))}if(d!==null){var Y=f.baseState;v=0,H=L=I=null,E=d;do{var B=E.lane&-536870913,j=B!==E.lane;if(j?(Lt&B)===B:(l&B)===B){B!==0&&B===wa&&(Mf=!0),H!==null&&(H=H.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=n,yt=E;B=i;var Zt=a;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){Y=Et.call(Zt,Y,B);break t}Y=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,B=typeof Et=="function"?Et.call(Zt,Y,B):Et,B==null)break t;Y=T({},Y,B);break t;case 2:lr=!0}}B=E.callback,B!==null&&(n.flags|=64,j&&(n.flags|=8192),j=f.callbacks,j===null?f.callbacks=[B]:j.push(B))}else j={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(L=H=j,I=Y):H=H.next=j,v|=B;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;j=E,E=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);H===null&&(I=Y),f.baseState=I,f.firstBaseUpdate=L,f.lastBaseUpdate=H,d===null&&(f.shared.lanes=0),yr|=v,n.lanes=v,n.memoizedState=Y}}function Tp(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Ep(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Tp(a[n],i)}var Da=Z(null),ec=Z(0);function Ap(n,i){n=zi,tt(ec,n),tt(Da,i),zi=n|i.baseLanes}function Pf(){tt(ec,zi),tt(Da,Da.current)}function kf(){zi=ec.current,it(Da),it(ec)}var hr=0,Dt=null,Xt=null,Te=null,nc=!1,Ca=!1,Is=!1,ic=0,al=0,Va=null,$A=0;function pe(){throw Error(r(321))}function Uf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!gn(n[a],i[a]))return!1;return!0}function Lf(n,i,a,l,f,d){return hr=d,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=n===null||n.memoizedState===null?s_:a_,Is=!1,d=a(l,f),Is=!1,Ca&&(d=Sp(i,a,l,f)),bp(n),d}function bp(n){G.H=uc;var i=Xt!==null&&Xt.next!==null;if(hr=0,Te=Xt=Dt=null,nc=!1,al=0,Va=null,i)throw Error(r(300));n===null||Pe||(n=n.dependencies,n!==null&&$u(n)&&(Pe=!0))}function Sp(n,i,a,l){Dt=n;var f=0;do{if(Ca&&(Va=null),al=0,Ca=!1,25<=f)throw Error(r(301));if(f+=1,Te=Xt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=ib,d=i(a,l)}while(Ca);return d}function ZA(){var n=G.H,i=n.useState()[0];return i=typeof i.then=="function"?ol(i):i,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(Dt.flags|=1024),i}function zf(){var n=ic!==0;return ic=0,n}function Bf(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function qf(n){if(nc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}nc=!1}hr=0,Te=Xt=Dt=null,Ca=!1,al=ic=0,Va=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Dt.memoizedState=Te=n:Te=Te.next=n,Te}function Ee(){if(Xt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var i=Te===null?Dt.memoizedState:Te.next;if(i!==null)Te=i,Xt=n;else{if(n===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Te===null?Dt.memoizedState=Te=n:Te=Te.next=n}return Te}function jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(n){var i=al;return al+=1,Va===null&&(Va=[]),n=_p(Va,n,i),i=Dt,(Te===null?i.memoizedState:Te.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?s_:a_),n}function rc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ol(n);if(n.$$typeof===st)return Ye(n)}throw Error(r(438,String(n)))}function Ff(n){var i=null,a=Dt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=jf(),Dt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=N;return i.index++,a}function xi(n,i){return typeof i=="function"?i(n):i}function sc(n){var i=Ee();return Gf(i,Xt,n)}function Gf(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var E=v=null,I=null,L=i,H=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(Lt&Y)===Y:(hr&Y)===Y){var B=L.revertLane;if(B===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===wa&&(H=!0);else if((hr&B)===B){L=L.next,B===wa&&(H=!0);continue}else Y={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(E=I=Y,v=d):I=I.next=Y,Dt.lanes|=B,yr|=B;Y=L.action,Is&&a(d,Y),d=L.hasEagerState?L.eagerState:a(d,Y)}else B={lane:Y,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(E=I=B,v=d):I=I.next=B,Dt.lanes|=Y,yr|=Y;L=L.next}while(L!==null&&L!==i);if(I===null?v=d:I.next=E,!gn(d,n.memoizedState)&&(Pe=!0,H&&(a=Ra,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Hf(n){var i=Ee(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);gn(d,i.memoizedState)||(Pe=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Ip(n,i,a){var l=Dt,f=Ee(),d=jt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!gn((Xt||f).memoizedState,a);v&&(f.memoizedState=a,Pe=!0),f=f.queue;var E=Dp.bind(null,l,f,n);if(ll(2048,8,E,[n]),f.getSnapshot!==i||v||Te!==null&&Te.memoizedState.tag&1){if(l.flags|=2048,Oa(9,ac(),Rp.bind(null,l,f,a,i),null),ne===null)throw Error(r(349));d||(hr&124)!==0||wp(l,i,a)}return a}function wp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Dt.updateQueue,i===null?(i=jf(),Dt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Rp(n,i,a,l){i.value=a,i.getSnapshot=l,Cp(i)&&Vp(n)}function Dp(n,i,a){return a(function(){Cp(i)&&Vp(n)})}function Cp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!gn(n,a)}catch{return!0}}function Vp(n){var i=Aa(n,2);i!==null&&En(i,n,2)}function Kf(n){var i=on();if(typeof n=="function"){var a=n;if(n=a(),Is){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:n},i}function Op(n,i,a,l){return n.baseState=a,Gf(n,Xt,typeof l=="function"?l:xi)}function JA(n,i,a,l,f){if(lc(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Np(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Np(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var E=a(f,l),I=G.S;I!==null&&I(v,E),xp(n,i,E)}catch(L){Qf(n,i,L)}finally{G.T=d}}else try{d=a(f,l),xp(n,i,d)}catch(L){Qf(n,i,L)}}function xp(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Mp(n,i,l)},function(l){return Qf(n,i,l)}):Mp(n,i,a)}function Mp(n,i,a){i.status="fulfilled",i.value=a,Pp(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,Np(n,a)))}function Qf(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Pp(i),i=i.next;while(i!==l)}n.action=null}function Pp(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function kp(n,i){return i}function Up(n,i){if(jt){var a=ne.formState;if(a!==null){t:{var l=Dt;if(jt){if(fe){e:{for(var f=fe,d=si;f.nodeType!==8;){if(!d){f=null;break e}if(f=Hn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){fe=Hn(f.nextSibling),l=f.data==="F!";break t}}Es(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:i},a.queue=l,a=n_.bind(null,Dt,l),l.dispatch=a,l=Kf(!1),d=Jf.bind(null,Dt,!1,l.queue),l=on(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=JA.bind(null,Dt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function Lp(n){var i=Ee();return zp(i,Xt,n)}function zp(n,i,a){if(i=Gf(n,i,kp)[0],n=sc(xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ol(i)}catch(v){throw v===el?Wu:v}else l=i;i=Ee();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Dt.flags|=2048,Oa(9,ac(),WA.bind(null,f,a),null)),[l,d,n]}function WA(n,i){n.action=i}function Bp(n){var i=Ee(),a=Xt;if(a!==null)return zp(i,a,n);Ee(),i=i.memoizedState,a=Ee();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Oa(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=jf(),Dt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function ac(){return{destroy:void 0,resource:void 0}}function qp(){return Ee().memoizedState}function oc(n,i,a,l){var f=on();l=l===void 0?null:l,Dt.flags|=n,f.memoizedState=Oa(1|i,ac(),a,l)}function ll(n,i,a,l){var f=Ee();l=l===void 0?null:l;var d=f.memoizedState.inst;Xt!==null&&l!==null&&Uf(l,Xt.memoizedState.deps)?f.memoizedState=Oa(i,d,a,l):(Dt.flags|=n,f.memoizedState=Oa(1|i,d,a,l))}function jp(n,i){oc(8390656,8,n,i)}function Fp(n,i){ll(2048,8,n,i)}function Gp(n,i){return ll(4,2,n,i)}function Hp(n,i){return ll(4,4,n,i)}function Kp(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qp(n,i,a){a=a!=null?a.concat([n]):null,ll(4,4,Kp.bind(null,i,n),a)}function Yf(){}function Yp(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Uf(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function Xp(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Uf(i,l[1]))return l[0];if(l=n(),Is){dn(!0);try{n()}finally{dn(!1)}}return a.memoizedState=[l,i],l}function Xf(n,i,a){return a===void 0||(hr&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=J_(),Dt.lanes|=n,yr|=n,a)}function $p(n,i,a,l){return gn(a,i)?a:Da.current!==null?(n=Xf(n,a,l),gn(n,i)||(Pe=!0),n):(hr&42)===0?(Pe=!0,n.memoizedState=a):(n=J_(),Dt.lanes|=n,yr|=n,i)}function Zp(n,i,a,l,f){var d=nt.p;nt.p=d!==0&&8>d?d:8;var v=G.T,E={};G.T=E,Jf(n,!1,i,a);try{var I=f(),L=G.S;if(L!==null&&L(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var H=XA(I,l);ul(n,i,H,Tn(n))}else ul(n,i,l,Tn(n))}catch(Y){ul(n,i,{then:function(){},status:"rejected",reason:Y},Tn())}finally{nt.p=d,G.T=v}}function tb(){}function $f(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Jp(n).queue;Zp(n,f,i,dt,a===null?tb:function(){return Wp(n),a(l)})}function Jp(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Wp(n){var i=Jp(n).next.queue;ul(n,i,{},Tn())}function Zf(){return Ye(Rl)}function t_(){return Ee().memoizedState}function e_(){return Ee().memoizedState}function eb(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Tn();n=ur(a);var l=cr(i,n,a);l!==null&&(En(l,i,a),il(l,i,a)),i={cache:Rf()},n.payload=i;return}i=i.return}}function nb(n,i,a){var l=Tn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lc(n)?i_(i,a):(a=_f(n,i,a,l),a!==null&&(En(a,n,l),r_(a,i,l)))}function n_(n,i,a){var l=Tn();ul(n,i,a,l)}function ul(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(n))i_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(f.hasEagerState=!0,f.eagerState=E,gn(E,v))return Hu(n,i,f,0),ne===null&&Gu(),!1}catch{}finally{}if(a=_f(n,i,f,l),a!==null)return En(a,n,l),r_(a,i,l),!0}return!1}function Jf(n,i,a,l){if(l={lane:2,revertLane:Vd(),action:l,hasEagerState:!1,eagerState:null,next:null},lc(n)){if(i)throw Error(r(479))}else i=_f(n,a,l,2),i!==null&&En(i,n,2)}function lc(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function i_(n,i){Ca=nc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function r_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Oo(n,a)}}var uc={readContext:Ye,use:rc,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe},s_={readContext:Ye,use:rc,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Ye,useEffect:jp,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,oc(4194308,4,Kp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return oc(4194308,4,n,i)},useInsertionEffect:function(n,i){oc(4,2,n,i)},useMemo:function(n,i){var a=on();i=i===void 0?null:i;var l=n();if(Is){dn(!0);try{n()}finally{dn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=on();if(a!==void 0){var f=a(i);if(Is){dn(!0);try{a(i)}finally{dn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=nb.bind(null,Dt,n),[l.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=Kf(n);var i=n.queue,a=n_.bind(null,Dt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Yf,useDeferredValue:function(n,i){var a=on();return Xf(a,n,i)},useTransition:function(){var n=Kf(!1);return n=Zp.bind(null,Dt,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Dt,f=on();if(jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ne===null)throw Error(r(349));(Lt&124)!==0||wp(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,jp(Dp.bind(null,l,d,n),[n]),l.flags|=2048,Oa(9,ac(),Rp.bind(null,l,d,a,i),null),a},useId:function(){var n=on(),i=ne.identifierPrefix;if(jt){var a=Vi,l=Ci;a=(l&~(1<<32-Qe(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=ic++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=$A++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Zf,useFormState:Up,useActionState:Up,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Jf.bind(null,Dt,!0,a),a.dispatch=i,[n,i]},useMemoCache:Ff,useCacheRefresh:function(){return on().memoizedState=eb.bind(null,Dt)}},a_={readContext:Ye,use:rc,useCallback:Yp,useContext:Ye,useEffect:Fp,useImperativeHandle:Qp,useInsertionEffect:Gp,useLayoutEffect:Hp,useMemo:Xp,useReducer:sc,useRef:qp,useState:function(){return sc(xi)},useDebugValue:Yf,useDeferredValue:function(n,i){var a=Ee();return $p(a,Xt.memoizedState,n,i)},useTransition:function(){var n=sc(xi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:Ip,useId:t_,useHostTransitionStatus:Zf,useFormState:Lp,useActionState:Lp,useOptimistic:function(n,i){var a=Ee();return Op(a,Xt,n,i)},useMemoCache:Ff,useCacheRefresh:e_},ib={readContext:Ye,use:rc,useCallback:Yp,useContext:Ye,useEffect:Fp,useImperativeHandle:Qp,useInsertionEffect:Gp,useLayoutEffect:Hp,useMemo:Xp,useReducer:Hf,useRef:qp,useState:function(){return Hf(xi)},useDebugValue:Yf,useDeferredValue:function(n,i){var a=Ee();return Xt===null?Xf(a,n,i):$p(a,Xt.memoizedState,n,i)},useTransition:function(){var n=Hf(xi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:ol(n),i]},useSyncExternalStore:Ip,useId:t_,useHostTransitionStatus:Zf,useFormState:Bp,useActionState:Bp,useOptimistic:function(n,i){var a=Ee();return Xt!==null?Op(a,Xt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:e_},Na=null,cl=0;function cc(n){var i=cl;return cl+=1,Na===null&&(Na=[]),_p(Na,n,i)}function hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function hc(n,i){throw i.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function o_(n){var i=n._init;return i(n._payload)}function l_(n){function i(M,V){if(n){var U=M.deletions;U===null?(M.deletions=[V],M.flags|=16):U.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function l(M){for(var V=new Map;M!==null;)M.key!==null?V.set(M.key,M):V.set(M.index,M),M=M.sibling;return V}function f(M,V){return M=Di(M,V),M.index=0,M.sibling=null,M}function d(M,V,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<V?(M.flags|=67108866,V):U):(M.flags|=67108866,V)):(M.flags|=1048576,V)}function v(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function E(M,V,U,K){return V===null||V.tag!==6?(V=vf(U,M.mode,K),V.return=M,V):(V=f(V,U),V.return=M,V)}function I(M,V,U,K){var ot=U.type;return ot===$?H(M,V,U.props.children,K,U.key):V!==null&&(V.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&o_(ot)===V.type)?(V=f(V,U.props),hl(V,U),V.return=M,V):(V=Qu(U.type,U.key,U.props,null,M.mode,K),hl(V,U),V.return=M,V)}function L(M,V,U,K){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=Tf(U,M.mode,K),V.return=M,V):(V=f(V,U.children||[]),V.return=M,V)}function H(M,V,U,K,ot){return V===null||V.tag!==7?(V=_s(U,M.mode,K,ot),V.return=M,V):(V=f(V,U),V.return=M,V)}function Y(M,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=vf(""+V,M.mode,U),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case D:return U=Qu(V.type,V.key,V.props,null,M.mode,U),hl(U,V),U.return=M,U;case q:return V=Tf(V,M.mode,U),V.return=M,V;case S:var K=V._init;return V=K(V._payload),Y(M,V,U)}if(ce(V)||P(V))return V=_s(V,M.mode,U,null),V.return=M,V;if(typeof V.then=="function")return Y(M,cc(V),U);if(V.$$typeof===st)return Y(M,Zu(M,V),U);hc(M,V)}return null}function B(M,V,U,K){var ot=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ot!==null?null:E(M,V,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===ot?I(M,V,U,K):null;case q:return U.key===ot?L(M,V,U,K):null;case S:return ot=U._init,U=ot(U._payload),B(M,V,U,K)}if(ce(U)||P(U))return ot!==null?null:H(M,V,U,K,null);if(typeof U.then=="function")return B(M,V,cc(U),K);if(U.$$typeof===st)return B(M,V,Zu(M,U),K);hc(M,U)}return null}function j(M,V,U,K,ot){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return M=M.get(U)||null,E(V,M,""+K,ot);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return M=M.get(K.key===null?U:K.key)||null,I(V,M,K,ot);case q:return M=M.get(K.key===null?U:K.key)||null,L(V,M,K,ot);case S:var Ot=K._init;return K=Ot(K._payload),j(M,V,U,K,ot)}if(ce(K)||P(K))return M=M.get(U)||null,H(V,M,K,ot,null);if(typeof K.then=="function")return j(M,V,U,cc(K),ot);if(K.$$typeof===st)return j(M,V,U,Zu(V,K),ot);hc(V,K)}return null}function Et(M,V,U,K){for(var ot=null,Ot=null,ct=V,vt=V=0,Ue=null;ct!==null&&vt<U.length;vt++){ct.index>vt?(Ue=ct,ct=null):Ue=ct.sibling;var Bt=B(M,ct,U[vt],K);if(Bt===null){ct===null&&(ct=Ue);break}n&&ct&&Bt.alternate===null&&i(M,ct),V=d(Bt,V,vt),Ot===null?ot=Bt:Ot.sibling=Bt,Ot=Bt,ct=Ue}if(vt===U.length)return a(M,ct),jt&&vs(M,vt),ot;if(ct===null){for(;vt<U.length;vt++)ct=Y(M,U[vt],K),ct!==null&&(V=d(ct,V,vt),Ot===null?ot=ct:Ot.sibling=ct,Ot=ct);return jt&&vs(M,vt),ot}for(ct=l(ct);vt<U.length;vt++)Ue=j(ct,M,vt,U[vt],K),Ue!==null&&(n&&Ue.alternate!==null&&ct.delete(Ue.key===null?vt:Ue.key),V=d(Ue,V,vt),Ot===null?ot=Ue:Ot.sibling=Ue,Ot=Ue);return n&&ct.forEach(function(Rr){return i(M,Rr)}),jt&&vs(M,vt),ot}function yt(M,V,U,K){if(U==null)throw Error(r(151));for(var ot=null,Ot=null,ct=V,vt=V=0,Ue=null,Bt=U.next();ct!==null&&!Bt.done;vt++,Bt=U.next()){ct.index>vt?(Ue=ct,ct=null):Ue=ct.sibling;var Rr=B(M,ct,Bt.value,K);if(Rr===null){ct===null&&(ct=Ue);break}n&&ct&&Rr.alternate===null&&i(M,ct),V=d(Rr,V,vt),Ot===null?ot=Rr:Ot.sibling=Rr,Ot=Rr,ct=Ue}if(Bt.done)return a(M,ct),jt&&vs(M,vt),ot;if(ct===null){for(;!Bt.done;vt++,Bt=U.next())Bt=Y(M,Bt.value,K),Bt!==null&&(V=d(Bt,V,vt),Ot===null?ot=Bt:Ot.sibling=Bt,Ot=Bt);return jt&&vs(M,vt),ot}for(ct=l(ct);!Bt.done;vt++,Bt=U.next())Bt=j(ct,M,vt,Bt.value,K),Bt!==null&&(n&&Bt.alternate!==null&&ct.delete(Bt.key===null?vt:Bt.key),V=d(Bt,V,vt),Ot===null?ot=Bt:Ot.sibling=Bt,Ot=Bt);return n&&ct.forEach(function(rS){return i(M,rS)}),jt&&vs(M,vt),ot}function Zt(M,V,U,K){if(typeof U=="object"&&U!==null&&U.type===$&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var ot=U.key;V!==null;){if(V.key===ot){if(ot=U.type,ot===$){if(V.tag===7){a(M,V.sibling),K=f(V,U.props.children),K.return=M,M=K;break t}}else if(V.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&o_(ot)===V.type){a(M,V.sibling),K=f(V,U.props),hl(K,U),K.return=M,M=K;break t}a(M,V);break}else i(M,V);V=V.sibling}U.type===$?(K=_s(U.props.children,M.mode,K,U.key),K.return=M,M=K):(K=Qu(U.type,U.key,U.props,null,M.mode,K),hl(K,U),K.return=M,M=K)}return v(M);case q:t:{for(ot=U.key;V!==null;){if(V.key===ot)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(M,V.sibling),K=f(V,U.children||[]),K.return=M,M=K;break t}else{a(M,V);break}else i(M,V);V=V.sibling}K=Tf(U,M.mode,K),K.return=M,M=K}return v(M);case S:return ot=U._init,U=ot(U._payload),Zt(M,V,U,K)}if(ce(U))return Et(M,V,U,K);if(P(U)){if(ot=P(U),typeof ot!="function")throw Error(r(150));return U=ot.call(U),yt(M,V,U,K)}if(typeof U.then=="function")return Zt(M,V,cc(U),K);if(U.$$typeof===st)return Zt(M,V,Zu(M,U),K);hc(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(M,V.sibling),K=f(V,U),K.return=M,M=K):(a(M,V),K=vf(U,M.mode,K),K.return=M,M=K),v(M)):a(M,V)}return function(M,V,U,K){try{cl=0;var ot=Zt(M,V,U,K);return Na=null,ot}catch(ct){if(ct===el||ct===Wu)throw ct;var Ot=pn(29,ct,null,M.mode);return Ot.lanes=K,Ot.return=M,Ot}finally{}}}var xa=l_(!0),u_=l_(!1),Mn=Z(null),ai=null;function fr(n){var i=n.alternate;tt(De,De.current&1),tt(Mn,n),ai===null&&(i===null||Da.current!==null||i.memoizedState!==null)&&(ai=n)}function c_(n){if(n.tag===22){if(tt(De,De.current),tt(Mn,n),ai===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ai=n)}}else dr()}function dr(){tt(De,De.current),tt(Mn,Mn.current)}function Mi(n){it(Mn),ai===n&&(ai=null),it(De)}var De=Z(0);function fc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||jd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Wf(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var td={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Tn(),f=ur(l);f.payload=i,a!=null&&(f.callback=a),i=cr(n,f,l),i!==null&&(En(i,n,l),il(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Tn(),f=ur(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=cr(n,f,l),i!==null&&(En(i,n,l),il(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Tn(),l=ur(a);l.tag=2,i!=null&&(l.callback=i),i=cr(n,l,a),i!==null&&(En(i,n,a),il(i,n,a))}};function h_(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Qo(a,l)||!Qo(f,d):!0}function f_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&td.enqueueReplaceState(i,i.state,null)}function ws(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var dc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function d_(n){dc(n)}function m_(n){console.error(n)}function g_(n){dc(n)}function mc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function p_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ed(n,i,a){return a=ur(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(n,i)},a}function __(n){return n=ur(n),n.tag=3,n}function y_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){p_(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){p_(i,a,l),typeof f!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function rb(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Jo(i,a,f,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return ai===null?Id():a.alternate===null&&de===0&&(de=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Vf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Rd(n,l,f)),!1;case 22:return a.flags|=65536,l===Vf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Rd(n,l,f)),!1}throw Error(r(435,a.tag))}return Rd(n,l,f),Id(),!1}if(jt)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==bf&&(n=Error(r(422),{cause:l}),Zo(Vn(n,a)))):(l!==bf&&(i=Error(r(423),{cause:l}),Zo(Vn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Vn(l,a),f=ed(n.stateNode,l,f),xf(n,f),de!==4&&(de=2)),!1;var d=Error(r(520),{cause:l});if(d=Vn(d,a),yl===null?yl=[d]:yl.push(d),de!==4&&(de=2),i===null)return!0;l=Vn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=ed(a.stateNode,l,n),xf(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(vr===null||!vr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=__(f),y_(f,n,a,l),xf(a,f),!1}a=a.return}while(a!==null);return!1}var v_=Error(r(461)),Pe=!1;function je(n,i,a,l){i.child=n===null?u_(i,null,a,l):xa(i,n.child,a,l)}function T_(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return bs(i),l=Lf(n,i,a,v,d,f),E=zf(),n!==null&&!Pe?(Bf(n,i,f),Pi(n,i,f)):(jt&&E&&Ef(i),i.flags|=1,je(n,i,l,f),i.child)}function E_(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!yf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,A_(n,i,d,l,f)):(n=Qu(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!ud(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(v,l)&&n.ref===i.ref)return Pi(n,i,f)}return i.flags|=1,n=Di(d,l),n.ref=i.ref,n.return=i,i.child=n}function A_(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Qo(d,l)&&n.ref===i.ref)if(Pe=!1,i.pendingProps=l=d,ud(n,f))(n.flags&131072)!==0&&(Pe=!0);else return i.lanes=n.lanes,Pi(n,i,f)}return nd(n,i,a,l,f)}function b_(n,i,a){var l=i.pendingProps,f=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(f=i.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return S_(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ju(i,d!==null?d.cachePool:null),d!==null?Ap(i,d):Pf(),c_(i);else return i.lanes=i.childLanes=536870912,S_(n,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ju(i,d.cachePool),Ap(i,d),dr(),i.memoizedState=null):(n!==null&&Ju(i,null),Pf(),dr());return je(n,i,f,a),i.child}function S_(n,i,a,l){var f=Cf();return f=f===null?null:{parent:Re._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Ju(i,null),Pf(),c_(i),n!==null&&Jo(n,i,l,!0),null}function gc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function nd(n,i,a,l,f){return bs(i),a=Lf(n,i,a,l,void 0,f),l=zf(),n!==null&&!Pe?(Bf(n,i,f),Pi(n,i,f)):(jt&&l&&Ef(i),i.flags|=1,je(n,i,a,f),i.child)}function I_(n,i,a,l,f,d){return bs(i),i.updateQueue=null,a=Sp(i,l,a,f),bp(n),l=zf(),n!==null&&!Pe?(Bf(n,i,d),Pi(n,i,d)):(jt&&l&&Ef(i),i.flags|=1,je(n,i,a,d),i.child)}function w_(n,i,a,l,f){if(bs(i),i.stateNode===null){var d=ba,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ye(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=td,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Of(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ye(v):ba,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Wf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&td.enqueueReplaceState(d,d.state,null),sl(i,l,d,f),rl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var E=i.memoizedProps,I=ws(a,E);d.props=I;var L=d.context,H=a.contextType;v=ba,typeof H=="object"&&H!==null&&(v=Ye(H));var Y=a.getDerivedStateFromProps;H=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,H||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||L!==v)&&f_(i,d,l,v),lr=!1;var B=i.memoizedState;d.state=B,sl(i,l,d,f),rl(),L=i.memoizedState,E||B!==L||lr?(typeof Y=="function"&&(Wf(i,a,Y,l),L=i.memoizedState),(I=lr||h_(i,a,I,l,B,L,v))?(H||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=L),d.props=l,d.state=L,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Nf(n,i),v=i.memoizedProps,H=ws(a,v),d.props=H,Y=i.pendingProps,B=d.context,L=a.contextType,I=ba,typeof L=="object"&&L!==null&&(I=Ye(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Y||B!==I)&&f_(i,d,l,I),lr=!1,B=i.memoizedState,d.state=B,sl(i,l,d,f),rl();var j=i.memoizedState;v!==Y||B!==j||lr||n!==null&&n.dependencies!==null&&$u(n.dependencies)?(typeof E=="function"&&(Wf(i,a,E,l),j=i.memoizedState),(H=lr||h_(i,a,H,l,B,j,I)||n!==null&&n.dependencies!==null&&$u(n.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,j,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,j,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&B===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&B===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=I,l=H):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&B===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&B===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,gc(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=xa(i,n.child,null,f),i.child=xa(i,null,a,f)):je(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Pi(n,i,f),n}function R_(n,i,a,l){return $o(),i.flags|=256,je(n,i,a,l),i.child}var id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rd(n){return{baseLanes:n,cachePool:mp()}}function sd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Pn),n}function D_(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(De.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(jt){if(f?fr(i):dr(),jt){var E=fe,I;if(I=E){t:{for(I=E,E=si;I.nodeType!==8;){if(!E){E=null;break t}if(I=Hn(I.nextSibling),I===null){E=null;break t}}E=I}E!==null?(i.memoizedState={dehydrated:E,treeContext:ys!==null?{id:Ci,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},I=pn(18,null,null,0),I.stateNode=E,I.return=i,i.child=I,nn=i,fe=null,I=!0):I=!1}I||Es(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return jd(E)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return E=l.children,l=l.fallback,f?(dr(),f=i.mode,E=pc({mode:"hidden",children:E},f),l=_s(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,f=i.child,f.memoizedState=rd(a),f.childLanes=sd(n,v,a),i.memoizedState=id,l):(fr(i),ad(i,E))}if(I=n.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(d)i.flags&256?(fr(i),i.flags&=-257,i=od(n,i,a)):i.memoizedState!==null?(dr(),i.child=n.child,i.flags|=128,i=null):(dr(),f=l.fallback,E=i.mode,l=pc({mode:"visible",children:l.children},E),f=_s(f,E,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,xa(i,n.child,null,a),l=i.child,l.memoizedState=rd(a),l.childLanes=sd(n,v,a),i.memoizedState=id,i=f);else if(fr(i),jd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,l=Error(r(419)),l.stack="",l.digest=v,Zo({value:l,source:null,stack:null}),i=od(n,i,a)}else if(Pe||Jo(n,i,a,!1),v=(a&n.childLanes)!==0,Pe||v){if(v=ne,v!==null&&(l=a&-a,l=(l&42)!==0?1:tr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Aa(n,l),En(v,n,l),v_;E.data==="$?"||Id(),i=od(n,i,a)}else E.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=I.treeContext,fe=Hn(E.nextSibling),nn=i,jt=!0,Ts=null,si=!1,n!==null&&(Nn[xn++]=Ci,Nn[xn++]=Vi,Nn[xn++]=ys,Ci=n.id,Vi=n.overflow,ys=i),i=ad(i,l.children),i.flags|=4096);return i}return f?(dr(),f=l.fallback,E=i.mode,I=n.child,L=I.sibling,l=Di(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,L!==null?f=Di(L,f):(f=_s(f,E,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,E=n.child.memoizedState,E===null?E=rd(a):(I=E.cachePool,I!==null?(L=Re._currentValue,I=I.parent!==L?{parent:L,pool:L}:I):I=mp(),E={baseLanes:E.baseLanes|a,cachePool:I}),f.memoizedState=E,f.childLanes=sd(n,v,a),i.memoizedState=id,l):(fr(i),a=n.child,n=a.sibling,a=Di(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function ad(n,i){return i=pc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function pc(n,i){return n=pn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function od(n,i,a){return xa(i,n.child,null,a),n=ad(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function C_(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),If(n.return,i,a)}function ld(n,i,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function V_(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(je(n,i,l.children,a),l=De.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&C_(n,a,i);else if(n.tag===19)C_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(tt(De,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&fc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),ld(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&fc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ld(i,!0,a,null,d);break;case"together":ld(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),yr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Jo(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Di(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Di(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function ud(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&$u(n)))}function sb(n,i,a){switch(i.tag){case 3:ee(i,i.stateNode.containerInfo),or(i,Re,n.memoizedState.cache),$o();break;case 27:case 5:Wi(i);break;case 4:ee(i,i.stateNode.containerInfo);break;case 10:or(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(fr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?D_(n,i,a):(fr(i),n=Pi(n,i,a),n!==null?n.sibling:null);fr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Jo(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return V_(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(De,De.current),l)break;return null;case 22:case 23:return i.lanes=0,b_(n,i,a);case 24:or(i,Re,n.memoizedState.cache)}return Pi(n,i,a)}function O_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Pe=!0;else{if(!ud(n,a)&&(i.flags&128)===0)return Pe=!1,sb(n,i,a);Pe=(n.flags&131072)!==0}else Pe=!1,jt&&(i.flags&1048576)!==0&&op(i,Xu,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")yf(l)?(n=ws(l,n),i.tag=1,i=w_(null,i,l,n,a)):(i.tag=0,i=nd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===At){i.tag=11,i=T_(null,i,l,n,a);break t}else if(f===O){i.tag=14,i=E_(null,i,l,n,a);break t}}throw i=ze(l)||l,Error(r(306,i,""))}}return i;case 0:return nd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ws(l,i.pendingProps),w_(n,i,l,f,a);case 3:t:{if(ee(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Nf(n,i),sl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,or(i,Re,l),l!==d.cache&&wf(i,[Re],a,!0),rl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=R_(n,i,l,a);break t}else if(l!==f){f=Vn(Error(r(424)),i),Zo(f),i=R_(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(fe=Hn(n.firstChild),nn=i,jt=!0,Ts=null,si=!0,a=u_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($o(),l===f){i=Pi(n,i,a);break t}je(n,i,l,a)}i=i.child}return i;case 26:return gc(n,i),n===null?(a=Py(i.type,null,i.pendingProps,null))?i.memoizedState=a:jt||(a=i.type,n=i.pendingProps,l=Vc(bt.current).createElement(a),l[Se]=i,l[ye]=n,Ge(l,a,n),ge(l),i.stateNode=l):i.memoizedState=Py(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Wi(i),n===null&&jt&&(l=i.stateNode=Ny(i.type,i.pendingProps,bt.current),nn=i,si=!0,f=fe,Ar(i.type)?(Fd=f,fe=Hn(l.firstChild)):fe=f),je(n,i,i.pendingProps.children,a),gc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&jt&&((f=l=fe)&&(l=xb(l,i.type,i.pendingProps,si),l!==null?(i.stateNode=l,nn=i,fe=Hn(l.firstChild),si=!1,f=!0):f=!1),f||Es(i)),Wi(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,zd(f,d)?l=null:v!==null&&zd(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Lf(n,i,ZA,null,null,a),Rl._currentValue=f),gc(n,i),je(n,i,l,a),i.child;case 6:return n===null&&jt&&((n=a=fe)&&(a=Mb(a,i.pendingProps,si),a!==null?(i.stateNode=a,nn=i,fe=null,n=!0):n=!1),n||Es(i)),null;case 13:return D_(n,i,a);case 4:return ee(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=xa(i,null,l,a):je(n,i,l,a),i.child;case 11:return T_(n,i,i.type,i.pendingProps,a);case 7:return je(n,i,i.pendingProps,a),i.child;case 8:return je(n,i,i.pendingProps.children,a),i.child;case 12:return je(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,or(i,i.type,l.value),je(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,bs(i),f=Ye(f),l=l(f),i.flags|=1,je(n,i,l,a),i.child;case 14:return E_(n,i,i.type,i.pendingProps,a);case 15:return A_(n,i,i.type,i.pendingProps,a);case 19:return V_(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=pc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Di(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return b_(n,i,a);case 24:return bs(i),l=Ye(Re),n===null?(f=Cf(),f===null&&(f=ne,d=Rf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Of(i),or(i,Re,f)):((n.lanes&a)!==0&&(Nf(n,i),sl(i,null,null,a),rl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),or(i,Re,l)):(l=d.cache,or(i,Re,l),l!==f.cache&&wf(i,[Re],a,!0))),je(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ki(n){n.flags|=4}function N_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!By(i)){if(i=Mn.current,i!==null&&((Lt&4194048)===Lt?ai!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==ai))throw nl=Vf,gp;n.flags|=8192}}function _c(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Co():536870912,n.lanes|=i,Ua|=i)}function fl(n,i){if(!jt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function oe(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function ab(n,i,a){var l=i.pendingProps;switch(Af(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ni(Re),Qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Xo(i)?ki(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cp())),oe(i),null;case 26:return a=i.memoizedState,n===null?(ki(i),a!==null?(oe(i),N_(i,a)):(oe(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ki(i),oe(i),N_(i,a)):(oe(i),i.flags&=-16777217):(n.memoizedProps!==l&&ki(i),oe(i),i.flags&=-16777217),null;case 27:gi(i),a=bt.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}n=mt.current,Xo(i)?lp(i):(n=Ny(f,l,a),i.stateNode=n,ki(i))}return oe(i),null;case 5:if(gi(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}if(n=mt.current,Xo(i))lp(i);else{switch(f=Vc(bt.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Se]=i,n[ye]=l;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Ge(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&ki(i)}}return oe(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=bt.current,Xo(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=nn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Se]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Iy(n.nodeValue,a)),n||Es(i)}else n=Vc(n).createTextNode(l),n[Se]=i,i.stateNode=n}return oe(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Xo(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Se]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),f=!1}else f=cp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),oe(i),null;case 4:return Qn(),n===null&&Md(i.stateNode.containerInfo),oe(i),null;case 10:return Ni(i.type),oe(i),null;case 19:if(it(De),f=i.memoizedState,f===null)return oe(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)fl(f,!1);else{if(de!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=fc(n),d!==null){for(i.flags|=128,fl(f,!1),n=d.updateQueue,i.updateQueue=n,_c(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)ap(a,n),a=a.sibling;return tt(De,De.current&1|2),i.child}n=n.sibling}f.tail!==null&&Sn()>Tc&&(i.flags|=128,l=!0,fl(f,!1),i.lanes=4194304)}else{if(!l)if(n=fc(d),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,_c(i,n),fl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!jt)return oe(i),null}else 2*Sn()-f.renderingStartTime>Tc&&a!==536870912&&(i.flags|=128,l=!0,fl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(n=f.last,n!==null?n.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Sn(),i.sibling=null,n=De.current,tt(De,l?n&1|2:n&1),i):(oe(i),null);case 22:case 23:return Mi(i),kf(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&it(Ss),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ni(Re),oe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function ob(n,i){switch(Af(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ni(Re),Qn(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 13:if(Mi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$o()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return it(De),null;case 4:return Qn(),null;case 10:return Ni(i.type),null;case 22:case 23:return Mi(i),kf(),n!==null&&it(Ss),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ni(Re),null;case 25:return null;default:return null}}function x_(n,i){switch(Af(i),i.tag){case 3:Ni(Re),Qn();break;case 26:case 27:case 5:gi(i);break;case 4:Qn();break;case 13:Mi(i);break;case 19:it(De);break;case 10:Ni(i.type);break;case 22:case 23:Mi(i),kf(),n!==null&&it(Ss);break;case 24:Ni(Re)}}function dl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(E){te(i,i.return,E)}}function mr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=i;var I=a,L=E;try{L()}catch(H){te(f,I,H)}}}l=l.next}while(l!==d)}}catch(H){te(i,i.return,H)}}function M_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Ep(i,a)}catch(l){te(n,n.return,l)}}}function P_(n,i,a){a.props=ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){te(n,i,l)}}function ml(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){te(n,i,f)}}function oi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){te(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){te(n,i,f)}else a.current=null}function k_(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){te(n,n.return,f)}}function cd(n,i,a){try{var l=n.stateNode;Db(l,n.type,a,i),l[ye]=i}catch(f){te(n,n.return,f)}}function U_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ar(n.type)||n.tag===4}function hd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||U_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ar(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fd(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Cc));else if(l!==4&&(l===27&&Ar(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(fd(n,i,a),n=n.sibling;n!==null;)fd(n,i,a),n=n.sibling}function yc(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Ar(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(yc(n,i,a),n=n.sibling;n!==null;)yc(n,i,a),n=n.sibling}function L_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ge(i,l,a),i[Se]=n,i[ye]=a}catch(d){te(n,n.return,d)}}var Ui=!1,_e=!1,dd=!1,z_=typeof WeakSet=="function"?WeakSet:Set,ke=null;function lb(n,i){if(n=n.containerInfo,Ud=kc,n=$g(n),hf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,I=-1,L=0,H=0,Y=n,B=null;e:for(;;){for(var j;Y!==a||f!==0&&Y.nodeType!==3||(E=v+f),Y!==d||l!==0&&Y.nodeType!==3||(I=v+l),Y.nodeType===3&&(v+=Y.nodeValue.length),(j=Y.firstChild)!==null;)B=Y,Y=j;for(;;){if(Y===n)break e;if(B===a&&++L===f&&(E=v),B===d&&++H===l&&(I=v),(j=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=j}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ld={focusedElem:n,selectionRange:a},kc=!1,ke=i;ke!==null;)if(i=ke,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,ke=n;else for(;ke!==null;){switch(i=ke,d=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Et=ws(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Et,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(yt){te(a,a.return,yt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)qd(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":qd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,ke=n;break}ke=i.return}}function B_(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:gr(n,a),l&4&&dl(5,a);break;case 1:if(gr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(v){te(a,a.return,v)}else{var f=ws(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){te(a,a.return,v)}}l&64&&M_(a),l&512&&ml(a,a.return);break;case 3:if(gr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ep(n,i)}catch(v){te(a,a.return,v)}}break;case 27:i===null&&l&4&&L_(a);case 26:case 5:gr(n,a),i===null&&l&4&&k_(a),l&512&&ml(a,a.return);break;case 12:gr(n,a);break;case 13:gr(n,a),l&4&&F_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=_b.bind(null,a),Pb(n,a))));break;case 22:if(l=a.memoizedState!==null||Ui,!l){i=i!==null&&i.memoizedState!==null||_e,f=Ui;var d=_e;Ui=l,(_e=i)&&!d?pr(n,a,(a.subtreeFlags&8772)!==0):gr(n,a),Ui=f,_e=d}break;case 30:break;default:gr(n,a)}}function q_(n){var i=n.alternate;i!==null&&(n.alternate=null,q_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ir(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var re=null,ln=!1;function Li(n,i,a){for(a=a.child;a!==null;)j_(n,i,a),a=a.sibling}function j_(n,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(he,a)}catch{}switch(a.tag){case 26:_e||oi(a,i),Li(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||oi(a,i);var l=re,f=ln;Ar(a.type)&&(re=a.stateNode,ln=!1),Li(n,i,a),bl(a.stateNode),re=l,ln=f;break;case 5:_e||oi(a,i);case 6:if(l=re,f=ln,re=null,Li(n,i,a),re=l,ln=f,re!==null)if(ln)try{(re.nodeType===9?re.body:re.nodeName==="HTML"?re.ownerDocument.body:re).removeChild(a.stateNode)}catch(d){te(a,i,d)}else try{re.removeChild(a.stateNode)}catch(d){te(a,i,d)}break;case 18:re!==null&&(ln?(n=re,Vy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ol(n)):Vy(re,a.stateNode));break;case 4:l=re,f=ln,re=a.stateNode.containerInfo,ln=!0,Li(n,i,a),re=l,ln=f;break;case 0:case 11:case 14:case 15:_e||mr(2,a,i),_e||mr(4,a,i),Li(n,i,a);break;case 1:_e||(oi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P_(a,i,l)),Li(n,i,a);break;case 21:Li(n,i,a);break;case 22:_e=(l=_e)||a.memoizedState!==null,Li(n,i,a),_e=l;break;default:Li(n,i,a)}}function F_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ol(n)}catch(a){te(i,i.return,a)}}function ub(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new z_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new z_),i;default:throw Error(r(435,n.tag))}}function md(n,i){var a=ub(n);i.forEach(function(l){var f=yb.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function _n(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ar(E.type)){re=E.stateNode,ln=!1;break t}break;case 5:re=E.stateNode,ln=!1;break t;case 3:case 4:re=E.stateNode.containerInfo,ln=!0;break t}E=E.return}if(re===null)throw Error(r(160));j_(d,v,f),re=null,ln=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)G_(i,n),i=i.sibling}var Gn=null;function G_(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:_n(i,n),yn(n),l&4&&(mr(3,n,n.return),dl(3,n),mr(5,n,n.return));break;case 1:_n(i,n),yn(n),l&512&&(_e||a===null||oi(a,a.return)),l&64&&Ui&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Gn;if(_n(i,n),yn(n),l&512&&(_e||a===null||oi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[es]||d[Se]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Ge(d,l,a),d[Se]=n,ge(d),l=d;break t;case"link":var v=Ly("link","href",f).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=f.createElement(l),Ge(d,l,a),f.head.appendChild(d);break;case"meta":if(v=Ly("meta","content",f).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=f.createElement(l),Ge(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Se]=n,ge(d),l=d}n.stateNode=l}else zy(f,n.type,n.stateNode);else n.stateNode=Uy(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?zy(f,n.type,n.stateNode):Uy(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&cd(n,n.memoizedProps,a.memoizedProps)}break;case 27:_n(i,n),yn(n),l&512&&(_e||a===null||oi(a,a.return)),a!==null&&l&4&&cd(n,n.memoizedProps,a.memoizedProps);break;case 5:if(_n(i,n),yn(n),l&512&&(_e||a===null||oi(a,a.return)),n.flags&32){f=n.stateNode;try{wn(f,"")}catch(j){te(n,n.return,j)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,cd(n,f,a!==null?a.memoizedProps:f)),l&1024&&(dd=!0);break;case 6:if(_n(i,n),yn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(j){te(n,n.return,j)}}break;case 3:if(xc=null,f=Gn,Gn=Oc(i.containerInfo),_n(i,n),Gn=f,yn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ol(i.containerInfo)}catch(j){te(n,n.return,j)}dd&&(dd=!1,H_(n));break;case 4:l=Gn,Gn=Oc(n.stateNode.containerInfo),_n(i,n),yn(n),Gn=l;break;case 12:_n(i,n),yn(n);break;case 13:_n(i,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Td=Sn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,md(n,l)));break;case 22:f=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,L=Ui,H=_e;if(Ui=L||f,_e=H||I,_n(i,n),_e=H,Ui=L,yn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||Ui||_e||Rs(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=I.stateNode;var Y=I.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(j){te(I,I.return,j)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(j){te(I,I.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,md(n,a))));break;case 19:_n(i,n),yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,md(n,l)));break;case 30:break;case 21:break;default:_n(i,n),yn(n)}}function yn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(U_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=hd(n);yc(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(wn(v,""),a.flags&=-33);var E=hd(n);yc(n,E,v);break;case 3:case 4:var I=a.stateNode.containerInfo,L=hd(n);fd(n,L,I);break;default:throw Error(r(161))}}catch(H){te(n,n.return,H)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function H_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;H_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function gr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)B_(n,i.alternate,i),i=i.sibling}function Rs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:mr(4,i,i.return),Rs(i);break;case 1:oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&P_(i,i.return,a),Rs(i);break;case 27:bl(i.stateNode);case 26:case 5:oi(i,i.return),Rs(i);break;case 22:i.memoizedState===null&&Rs(i);break;case 30:Rs(i);break;default:Rs(i)}n=n.sibling}}function pr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:pr(f,d,a),dl(4,d);break;case 1:if(pr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(L){te(l,l.return,L)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)Tp(I[f],E)}catch(L){te(l,l.return,L)}}a&&v&64&&M_(d),ml(d,d.return);break;case 27:L_(d);case 26:case 5:pr(f,d,a),a&&l===null&&v&4&&k_(d),ml(d,d.return);break;case 12:pr(f,d,a);break;case 13:pr(f,d,a),a&&v&4&&F_(f,d);break;case 22:d.memoizedState===null&&pr(f,d,a),ml(d,d.return);break;case 30:break;default:pr(f,d,a)}i=i.sibling}}function gd(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Wo(a))}function pd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Wo(n))}function li(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)K_(n,i,a,l),i=i.sibling}function K_(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:li(n,i,a,l),f&2048&&dl(9,i);break;case 1:li(n,i,a,l);break;case 3:li(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Wo(n)));break;case 12:if(f&2048){li(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){te(i,i.return,I)}}else li(n,i,a,l);break;case 13:li(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?li(n,i,a,l):gl(n,i):d._visibility&2?li(n,i,a,l):(d._visibility|=2,Ma(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&gd(v,i);break;case 24:li(n,i,a,l),f&2048&&pd(i.alternate,i);break;default:li(n,i,a,l)}}function Ma(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=n,v=i,E=a,I=l,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ma(d,v,E,I,f),dl(8,v);break;case 23:break;case 22:var H=v.stateNode;v.memoizedState!==null?H._visibility&2?Ma(d,v,E,I,f):gl(d,v):(H._visibility|=2,Ma(d,v,E,I,f)),f&&L&2048&&gd(v.alternate,v);break;case 24:Ma(d,v,E,I,f),f&&L&2048&&pd(v.alternate,v);break;default:Ma(d,v,E,I,f)}i=i.sibling}}function gl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:gl(a,l),f&2048&&gd(l.alternate,l);break;case 24:gl(a,l),f&2048&&pd(l.alternate,l);break;default:gl(a,l)}i=i.sibling}}var pl=8192;function Pa(n){if(n.subtreeFlags&pl)for(n=n.child;n!==null;)Q_(n),n=n.sibling}function Q_(n){switch(n.tag){case 26:Pa(n),n.flags&pl&&n.memoizedState!==null&&Yb(Gn,n.memoizedState,n.memoizedProps);break;case 5:Pa(n);break;case 3:case 4:var i=Gn;Gn=Oc(n.stateNode.containerInfo),Pa(n),Gn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=pl,pl=16777216,Pa(n),pl=i):Pa(n));break;default:Pa(n)}}function Y_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function _l(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ke=l,$_(l,n)}Y_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X_(n),n=n.sibling}function X_(n){switch(n.tag){case 0:case 11:case 15:_l(n),n.flags&2048&&mr(9,n,n.return);break;case 3:_l(n);break;case 12:_l(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,vc(n)):_l(n);break;default:_l(n)}}function vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ke=l,$_(l,n)}Y_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:mr(8,i,i.return),vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,vc(i));break;default:vc(i)}n=n.sibling}}function $_(n,i){for(;ke!==null;){var a=ke;switch(a.tag){case 0:case 11:case 15:mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Wo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ke=l;else t:for(a=n;ke!==null;){l=ke;var f=l.sibling,d=l.return;if(q_(l),l===a){ke=null;break t}if(f!==null){f.return=d,ke=f;break t}ke=d}}}var cb={getCacheForType:function(n){var i=Ye(Re),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},hb=typeof WeakMap=="function"?WeakMap:Map,Ht=0,ne=null,Nt=null,Lt=0,Kt=0,vn=null,_r=!1,ka=!1,_d=!1,zi=0,de=0,yr=0,Ds=0,yd=0,Pn=0,Ua=0,yl=null,un=null,vd=!1,Td=0,Tc=1/0,Ec=null,vr=null,Fe=0,Tr=null,La=null,za=0,Ed=0,Ad=null,Z_=null,vl=0,bd=null;function Tn(){if((Ht&2)!==0&&Lt!==0)return Lt&-Lt;if(G.T!==null){var n=wa;return n!==0?n:Vd()}return er()}function J_(){Pn===0&&(Pn=(Lt&536870912)===0||jt?Do():536870912);var n=Mn.current;return n!==null&&(n.flags|=32),Pn}function En(n,i,a){(n===ne&&(Kt===2||Kt===9)||n.cancelPendingCommit!==null)&&(Ba(n,0),Er(n,Lt,Pn,!1)),_i(n,a),((Ht&2)===0||n!==ne)&&(n===ne&&((Ht&2)===0&&(Ds|=a),de===4&&Er(n,Lt,Pn,!1)),ui(n))}function W_(n,i,a){if((Ht&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||ts(n,i),f=l?mb(n,i):wd(n,i,!0),d=l;do{if(f===0){ka&&!l&&Er(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!fb(a)){f=wd(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=n;f=yl;var I=E.current.memoizedState.isDehydrated;if(I&&(Ba(E,v).flags|=256),v=wd(E,v,!1),v!==2){if(_d&&!I){E.errorRecoveryDisabledLanes|=d,Ds|=d,f=4;break t}d=un,un=f,d!==null&&(un===null?un=d:un.push.apply(un,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Ba(n,0),Er(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Er(l,i,Pn,!_r);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Td+300-Sn(),10<f)){if(Er(l,i,Pn,!_r),ia(l,0,!0)!==0)break t;l.timeoutHandle=Dy(ty.bind(null,l,a,un,Ec,vd,i,Pn,Ds,Ua,_r,d,2,-0,0),f);break t}ty(l,a,un,Ec,vd,i,Pn,Ds,Ua,_r,d,0,-0,0)}}break}while(!0);ui(n)}function ty(n,i,a,l,f,d,v,E,I,L,H,Y,B,j){if(n.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(wl={stylesheets:null,count:0,unsuspend:Qb},Q_(i),Y=Xb(),Y!==null)){n.cancelPendingCommit=Y(oy.bind(null,n,i,d,a,l,f,v,E,I,H,1,B,j)),Er(n,d,v,!L);return}oy(n,i,d,a,l,f,v,E,I)}function fb(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!gn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(n,i,a,l){i&=~yd,i&=~Ds,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-Qe(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&Yn(n,a,i)}function Ac(){return(Ht&6)===0?(Tl(0),!1):!0}function Sd(){if(Nt!==null){if(Kt===0)var n=Nt.return;else n=Nt,Oi=As=null,qf(n),Na=null,cl=0,n=Nt;for(;n!==null;)x_(n.alternate,n),n=n.return;Nt=null}}function Ba(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Vb(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Sd(),ne=n,Nt=a=Di(n.current,null),Lt=i,Kt=0,vn=null,_r=!1,ka=ts(n,i),_d=!1,Ua=Pn=yd=Ds=yr=de=0,un=yl=null,vd=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-Qe(l),d=1<<f;i|=n[f],l&=~d}return zi=i,Gu(),a}function ey(n,i){Dt=null,G.H=uc,i===el||i===Wu?(i=yp(),Kt=3):i===gp?(i=yp(),Kt=4):Kt=i===v_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Nt===null&&(de=1,mc(n,Vn(i,n.current)))}function ny(){var n=G.H;return G.H=uc,n===null?uc:n}function iy(){var n=G.A;return G.A=cb,n}function Id(){de=4,_r||(Lt&4194048)!==Lt&&Mn.current!==null||(ka=!0),(yr&134217727)===0&&(Ds&134217727)===0||ne===null||Er(ne,Lt,Pn,!1)}function wd(n,i,a){var l=Ht;Ht|=2;var f=ny(),d=iy();(ne!==n||Lt!==i)&&(Ec=null,Ba(n,i)),i=!1;var v=de;t:do try{if(Kt!==0&&Nt!==null){var E=Nt,I=vn;switch(Kt){case 8:Sd(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var L=Kt;if(Kt=0,vn=null,qa(n,E,I,L),a&&ka){v=0;break t}break;default:L=Kt,Kt=0,vn=null,qa(n,E,I,L)}}db(),v=de;break}catch(H){ey(n,H)}while(!0);return i&&n.shellSuspendCounter++,Oi=As=null,Ht=l,G.H=f,G.A=d,Nt===null&&(ne=null,Lt=0,Gu()),v}function db(){for(;Nt!==null;)ry(Nt)}function mb(n,i){var a=Ht;Ht|=2;var l=ny(),f=iy();ne!==n||Lt!==i?(Ec=null,Tc=Sn()+500,Ba(n,i)):ka=ts(n,i);t:do try{if(Kt!==0&&Nt!==null){i=Nt;var d=vn;e:switch(Kt){case 1:Kt=0,vn=null,qa(n,i,d,1);break;case 2:case 9:if(pp(d)){Kt=0,vn=null,sy(i);break}i=function(){Kt!==2&&Kt!==9||ne!==n||(Kt=7),ui(n)},d.then(i,i);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:pp(d)?(Kt=0,vn=null,sy(i)):(Kt=0,vn=null,qa(n,i,d,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var E=Nt;if(!v||By(v)){Kt=0,vn=null;var I=E.sibling;if(I!==null)Nt=I;else{var L=E.return;L!==null?(Nt=L,bc(L)):Nt=null}break e}}Kt=0,vn=null,qa(n,i,d,5);break;case 6:Kt=0,vn=null,qa(n,i,d,6);break;case 8:Sd(),de=6;break t;default:throw Error(r(462))}}gb();break}catch(H){ey(n,H)}while(!0);return Oi=As=null,G.H=l,G.A=f,Ht=a,Nt!==null?0:(ne=null,Lt=0,Gu(),de)}function gb(){for(;Nt!==null&&!So();)ry(Nt)}function ry(n){var i=O_(n.alternate,n,zi);n.memoizedProps=n.pendingProps,i===null?bc(n):Nt=i}function sy(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=I_(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=I_(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:qf(i);default:x_(a,i),i=Nt=ap(i,zi),i=O_(a,i,zi)}n.memoizedProps=n.pendingProps,i===null?bc(n):Nt=i}function qa(n,i,a,l){Oi=As=null,qf(i),Na=null,cl=0;var f=i.return;try{if(rb(n,f,i,a,Lt)){de=1,mc(n,Vn(a,n.current)),Nt=null;return}}catch(d){if(f!==null)throw Nt=f,d;de=1,mc(n,Vn(a,n.current)),Nt=null;return}i.flags&32768?(jt||l===1?n=!0:ka||(Lt&536870912)!==0?n=!1:(_r=n=!0,(l===2||l===9||l===3||l===6)&&(l=Mn.current,l!==null&&l.tag===13&&(l.flags|=16384))),ay(i,n)):bc(i)}function bc(n){var i=n;do{if((i.flags&32768)!==0){ay(i,_r);return}n=i.return;var a=ab(i.alternate,i,zi);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);de===0&&(de=5)}function ay(n,i){do{var a=ob(n.alternate,n);if(a!==null){a.flags&=32767,Nt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=a}while(n!==null);de=6,Nt=null}function oy(n,i,a,l,f,d,v,E,I){n.cancelPendingCommit=null;do Sc();while(Fe!==0);if((Ht&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=pf,Vo(n,a,d,v,E,I),n===ne&&(Nt=ne=null,Lt=0),La=i,Tr=n,za=a,Ed=d,Ad=f,Z_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,vb($r,function(){return fy(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,f=nt.p,nt.p=2,v=Ht,Ht|=4;try{lb(n,i,a)}finally{Ht=v,nt.p=f,G.T=l}}Fe=1,ly(),uy(),cy()}}function ly(){if(Fe===1){Fe=0;var n=Tr,i=La,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=nt.p;nt.p=2;var f=Ht;Ht|=4;try{G_(i,n);var d=Ld,v=$g(n.containerInfo),E=d.focusedElem,I=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Xg(E.ownerDocument.documentElement,E)){if(I!==null&&hf(E)){var L=I.start,H=I.end;if(H===void 0&&(H=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(H,E.value.length);else{var Y=E.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var j=B.getSelection(),Et=E.textContent.length,yt=Math.min(I.start,Et),Zt=I.end===void 0?yt:Math.min(I.end,Et);!j.extend&&yt>Zt&&(v=Zt,Zt=yt,yt=v);var M=Yg(E,yt),V=Yg(E,Zt);if(M&&V&&(j.rangeCount!==1||j.anchorNode!==M.node||j.anchorOffset!==M.offset||j.focusNode!==V.node||j.focusOffset!==V.offset)){var U=Y.createRange();U.setStart(M.node,M.offset),j.removeAllRanges(),yt>Zt?(j.addRange(U),j.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),j.addRange(U))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var K=Y[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}kc=!!Ud,Ld=Ud=null}finally{Ht=f,nt.p=l,G.T=a}}n.current=i,Fe=2}}function uy(){if(Fe===2){Fe=0;var n=Tr,i=La,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=nt.p;nt.p=2;var f=Ht;Ht|=4;try{B_(n,i.alternate,i)}finally{Ht=f,nt.p=l,G.T=a}}Fe=3}}function cy(){if(Fe===4||Fe===3){Fe=0,vu();var n=Tr,i=La,a=za,l=Z_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fe=5:(Fe=0,La=Tr=null,hy(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(vr=null),ra(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(he,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,f=nt.p,nt.p=2,G.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{G.T=i,nt.p=f}}(za&3)!==0&&Sc(),ui(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===bd?vl++:(vl=0,bd=n):vl=0,Tl(0)}}function hy(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Wo(i)))}function Sc(n){return ly(),uy(),cy(),fy()}function fy(){if(Fe!==5)return!1;var n=Tr,i=Ed;Ed=0;var a=ra(za),l=G.T,f=nt.p;try{nt.p=32>a?32:a,G.T=null,a=Ad,Ad=null;var d=Tr,v=za;if(Fe=0,La=Tr=null,za=0,(Ht&6)!==0)throw Error(r(331));var E=Ht;if(Ht|=4,X_(d.current),K_(d,d.current,v,a),Ht=E,Tl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(he,d)}catch{}return!0}finally{nt.p=f,G.T=l,hy(n,i)}}function dy(n,i,a){i=Vn(a,i),i=ed(n.stateNode,i,2),n=cr(n,i,2),n!==null&&(_i(n,2),ui(n))}function te(n,i,a){if(n.tag===3)dy(n,n,a);else for(;i!==null;){if(i.tag===3){dy(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vr===null||!vr.has(l))){n=Vn(a,n),a=__(2),l=cr(i,a,2),l!==null&&(y_(a,l,i,n),_i(l,2),ui(l));break}}i=i.return}}function Rd(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new hb;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(_d=!0,f.add(a),n=pb.bind(null,n,i,a),i.then(n,n))}function pb(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ne===n&&(Lt&a)===a&&(de===4||de===3&&(Lt&62914560)===Lt&&300>Sn()-Td?(Ht&2)===0&&Ba(n,0):yd|=a,Ua===Lt&&(Ua=0)),ui(n)}function my(n,i){i===0&&(i=Co()),n=Aa(n,i),n!==null&&(_i(n,i),ui(n))}function _b(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),my(n,a)}function yb(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),my(n,a)}function vb(n,i){return Yr(n,i)}var Ic=null,ja=null,Dd=!1,wc=!1,Cd=!1,Cs=0;function ui(n){n!==ja&&n.next===null&&(ja===null?Ic=ja=n:ja=ja.next=n),wc=!0,Dd||(Dd=!0,Eb())}function Tl(n,i){if(!Cd&&wc){Cd=!0;do for(var a=!1,l=Ic;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Qe(42|n)+1)-1,d&=f&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,yy(l,d))}else d=Lt,d=ia(l,l===ne?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ts(l,d)||(a=!0,yy(l,d));l=l.next}while(a);Cd=!1}}function Tb(){gy()}function gy(){wc=Dd=!1;var n=0;Cs!==0&&(Cb()&&(n=Cs),Cs=0);for(var i=Sn(),a=null,l=Ic;l!==null;){var f=l.next,d=py(l,i);d===0?(l.next=null,a===null?Ic=f:a.next=f,f===null&&(ja=a)):(a=l,(n!==0||(d&3)!==0)&&(wc=!0)),l=f}Tl(n)}function py(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-Qe(d),E=1<<v,I=f[v];I===-1?((E&a)===0||(E&l)!==0)&&(f[v]=Ro(E,i)):I<=i&&(n.expiredLanes|=E),d&=~E}if(i=ne,a=Lt,a=ia(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Kt===2||Kt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Xr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ts(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Xr(l),ra(a)){case 2:case 8:a=ea;break;case 32:a=$r;break;case 268435456:a=na;break;default:a=$r}return l=_y.bind(null,n),a=Yr(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Xr(l),n.callbackPriority=2,n.callbackNode=null,2}function _y(n,i){if(Fe!==0&&Fe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Sc()&&n.callbackNode!==a)return null;var l=Lt;return l=ia(n,n===ne?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(W_(n,l,i),py(n,Sn()),n.callbackNode!=null&&n.callbackNode===a?_y.bind(null,n):null)}function yy(n,i){if(Sc())return null;W_(n,i,!0)}function Eb(){Ob(function(){(Ht&6)!==0?Yr(Io,Tb):gy()})}function Vd(){return Cs===0&&(Cs=Do()),Cs}function vy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ca(""+n)}function Ty(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Ab(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=vy((f[ye]||null).action),v=l.submitter;v&&(i=(i=v[ye]||null)?vy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new ha("action","action",null,l,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Cs!==0){var I=v?Ty(f,v):new FormData(f);$f(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=v?Ty(f,v):new FormData(f),$f(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var Od=0;Od<gf.length;Od++){var Nd=gf[Od],bb=Nd.toLowerCase(),Sb=Nd[0].toUpperCase()+Nd.slice(1);Fn(bb,"on"+Sb)}Fn(Wg,"onAnimationEnd"),Fn(tp,"onAnimationIteration"),Fn(ep,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(qA,"onTransitionRun"),Fn(jA,"onTransitionStart"),Fn(FA,"onTransitionCancel"),Fn(np,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ib=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function Ey(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],I=E.instance,L=E.currentTarget;if(E=E.listener,I!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=L;try{d(f)}catch(H){dc(H)}f.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(E=l[v],I=E.instance,L=E.currentTarget,E=E.listener,I!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=L;try{d(f)}catch(H){dc(H)}f.currentTarget=null,d=I}}}}function xt(n,i){var a=i[No];a===void 0&&(a=i[No]=new Set);var l=n+"__bubble";a.has(l)||(Ay(i,n,2,!1),a.add(l))}function xd(n,i,a){var l=0;i&&(l|=4),Ay(a,n,l,i)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Md(n){if(!n[Rc]){n[Rc]=!0,xo.forEach(function(a){a!=="selectionchange"&&(Ib.has(a)||xd(a,!1,n),xd(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rc]||(i[Rc]=!0,xd("selectionchange",!1,i))}}function Ay(n,i,a,l){switch(Ky(i)){case 2:var f=Jb;break;case 8:f=Wb;break;default:f=Yd}a=f.bind(null,i,a,n),f=void 0,!Dn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Pd(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=yi(E),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue t}E=E.parentNode}}l=l.return}Cu(function(){var L=d,H=Rn(a),Y=[];t:{var B=ip.get(n);if(B!==void 0){var j=ha,Et=n;switch(n){case"keypress":if(ti(a)===0)break t;case"keydown":case"keyup":j=_a;break;case"focusin":Et="focus",j=ma;break;case"focusout":Et="blur",j=ma;break;case"beforeblur":case"afterblur":j=ma;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=of;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Uu;break;case Wg:case tp:case ep:j=ga;break;case np:j=zu;break;case"scroll":case"scrollend":j=Vu;break;case"wheel":j=ya;break;case"copy":case"cut":case"paste":j=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Ho;break;case"toggle":case"beforetoggle":j=qu}var yt=(i&4)!==0,Zt=!yt&&(n==="scroll"||n==="scrollend"),M=yt?B!==null?B+"Capture":null:B;yt=[];for(var V=L,U;V!==null;){var K=V;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||M===null||(K=ls(V,M),K!=null&&yt.push(Al(V,K,U))),Zt)break;V=V.return}0<yt.length&&(B=new j(B,Et,null,a,H),Y.push({event:B,listeners:yt}))}}if((i&7)===0){t:{if(B=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",B&&a!==Ai&&(Et=a.relatedTarget||a.fromElement)&&(yi(Et)||Et[In]))break t;if((j||B)&&(B=H.window===H?H:(B=H.ownerDocument)?B.defaultView||B.parentWindow:window,j?(Et=a.relatedTarget||a.toElement,j=L,Et=Et?yi(Et):null,Et!==null&&(Zt=u(Et),yt=Et.tag,Et!==Zt||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(j=null,Et=L),j!==Et)){if(yt=Cn,K="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(yt=Ho,K="onPointerLeave",M="onPointerEnter",V="pointer"),Zt=j==null?B:$n(j),U=Et==null?B:$n(Et),B=new yt(K,V+"leave",j,a,H),B.target=Zt,B.relatedTarget=U,K=null,yi(H)===L&&(yt=new yt(M,V+"enter",Et,a,H),yt.target=U,yt.relatedTarget=Zt,K=yt),Zt=K,j&&Et)e:{for(yt=j,M=Et,V=0,U=yt;U;U=Fa(U))V++;for(U=0,K=M;K;K=Fa(K))U++;for(;0<V-U;)yt=Fa(yt),V--;for(;0<U-V;)M=Fa(M),U--;for(;V--;){if(yt===M||M!==null&&yt===M.alternate)break e;yt=Fa(yt),M=Fa(M)}yt=null}else yt=null;j!==null&&by(Y,B,j,yt,!1),Et!==null&&Zt!==null&&by(Y,Zt,Et,yt,!0)}}t:{if(B=L?$n(L):window,j=B.nodeName&&B.nodeName.toLowerCase(),j==="select"||j==="input"&&B.type==="file")var ot=jg;else if(we(B))if(Fg)ot=LA;else{ot=kA;var Ot=PA}else j=B.nodeName,!j||j.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&Lo(L.elementType)&&(ot=jg):ot=UA;if(ot&&(ot=ot(n,L))){Ri(Y,ot,a,H);break t}Ot&&Ot(n,B,L),n==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&sr(B,"number",B.value)}switch(Ot=L?$n(L):window,n){case"focusin":(we(Ot)||Ot.contentEditable==="true")&&(va=Ot,ff=L,Yo=null);break;case"focusout":Yo=ff=va=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,Zg(Y,a,H);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Zg(Y,a,H)}var ct;if(ii)t:{switch(n){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else kt?F(n,a)&&(vt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(y&&a.locale!=="ko"&&(kt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&kt&&(ct=Bo()):(Wn=H,ar="value"in Wn?Wn.value:Wn.textContent,kt=!0)),Ot=Dc(L,vt),0<Ot.length&&(vt=new Fo(vt,n,null,a,H),Y.push({event:vt,listeners:Ot}),ct?vt.data=ct:(ct=et(a),ct!==null&&(vt.data=ct)))),(ct=p?Ie(n,a):Ut(n,a))&&(vt=Dc(L,"onBeforeInput"),0<vt.length&&(Ot=new Fo("onBeforeInput","beforeinput",null,a,H),Y.push({event:Ot,listeners:vt}),Ot.data=ct)),Ab(Y,n,L,a,H)}Ey(Y,i)})}function Al(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Dc(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ls(n,a),f!=null&&l.unshift(Al(n,f,d)),f=ls(n,i),f!=null&&l.push(Al(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Fa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function by(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,I=E.alternate,L=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||L===null||(I=L,f?(L=ls(a,d),L!=null&&v.unshift(Al(a,L,I))):f||(L=ls(a,d),L!=null&&v.push(Al(a,L,I)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var wb=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function Sy(n){return(typeof n=="string"?n:""+n).replace(wb,`
`).replace(Rb,"")}function Iy(n,i){return i=Sy(i),Sy(n)===i}function Cc(){}function $t(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||wn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&wn(n,""+l);break;case"className":Zn(n,"class",l);break;case"tabIndex":Zn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(n,a,l);break;case"style":Uo(n,l,d);break;case"data":if(i!=="object"){Zn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ca(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$t(n,i,"name",f.name,f,null),$t(n,i,"formEncType",f.formEncType,f,null),$t(n,i,"formMethod",f.formMethod,f,null),$t(n,i,"formTarget",f.formTarget,f,null)):($t(n,i,"encType",f.encType,f,null),$t(n,i,"method",f.method,f,null),$t(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ca(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Cc);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ca(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":xt("beforetoggle",n),xt("toggle",n),rr(n,"popover",l);break;case"xlinkActuate":Be(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Be(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Be(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Be(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Be(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Be(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Be(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Be(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Be(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":rr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sf.get(a)||a,rr(n,a,l))}}function kd(n,i,a,l,f,d){switch(a){case"style":Uo(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?wn(n,l):(typeof l=="number"||typeof l=="bigint")&&wn(n,""+l);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[ye]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):rr(n,a,l)}}}function Ge(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",n),xt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$t(n,i,d,v,a,null)}}f&&$t(n,i,"srcSet",a.srcSet,a,null),l&&$t(n,i,"src",a.src,a,null);return;case"input":xt("invalid",n);var E=d=v=f=null,I=null,L=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":f=H;break;case"type":v=H;break;case"checked":I=H;break;case"defaultChecked":L=H;break;case"value":d=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:$t(n,i,l,H,a,null)}}ss(n,d,E,I,L,v,f,!1),ua(n);return;case"select":xt("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:$t(n,i,f,E,a,null)}i=d,a=v,n.multiple=!!l,i!=null?Ei(n,!!l,i,!1):a!=null&&Ei(n,!!l,a,!0);return;case"textarea":xt("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:$t(n,i,v,E,a,null)}as(n,l,f,d),ua(n);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$t(n,i,I,l,a,null)}return;case"dialog":xt("beforetoggle",n),xt("toggle",n),xt("cancel",n),xt("close",n);break;case"iframe":case"object":xt("load",n);break;case"video":case"audio":for(l=0;l<El.length;l++)xt(El[l],n);break;case"image":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"embed":case"source":case"link":xt("error",n),xt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$t(n,i,L,l,a,null)}return;default:if(Lo(i)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&kd(n,i,H,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&$t(n,i,E,l,a,null))}function Db(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,E=null,I=null,L=null,H=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":I=Y;default:l.hasOwnProperty(j)||$t(n,i,j,null,l,Y)}}for(var B in l){var j=l[B];if(Y=a[B],l.hasOwnProperty(B)&&(j!=null||Y!=null))switch(B){case"type":d=j;break;case"name":f=j;break;case"checked":L=j;break;case"defaultChecked":H=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:j!==Y&&$t(n,i,B,j,l,Y)}}mn(n,v,E,I,L,H,d,f);return;case"select":j=v=E=B=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":j=I;default:l.hasOwnProperty(d)||$t(n,i,d,null,l,I)}for(f in l)if(d=l[f],I=a[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":B=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==I&&$t(n,i,f,d,l,I)}i=E,a=v,l=j,B!=null?Ei(n,!!a,B,!1):!!l!=!!a&&(i!=null?Ei(n,!!a,i,!0):Ei(n,!!a,a?[]:"",!1));return;case"textarea":j=B=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$t(n,i,E,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":B=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&$t(n,i,v,f,l,d)}Yt(n,B,j);return;case"option":for(var Et in a)if(B=a[Et],a.hasOwnProperty(Et)&&B!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":n.selected=!1;break;default:$t(n,i,Et,null,l,B)}for(I in l)if(B=l[I],j=a[I],l.hasOwnProperty(I)&&B!==j&&(B!=null||j!=null))switch(I){case"selected":n.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:$t(n,i,I,B,l,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)B=a[yt],a.hasOwnProperty(yt)&&B!=null&&!l.hasOwnProperty(yt)&&$t(n,i,yt,null,l,B);for(L in l)if(B=l[L],j=a[L],l.hasOwnProperty(L)&&B!==j&&(B!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:$t(n,i,L,B,l,j)}return;default:if(Lo(i)){for(var Zt in a)B=a[Zt],a.hasOwnProperty(Zt)&&B!==void 0&&!l.hasOwnProperty(Zt)&&kd(n,i,Zt,void 0,l,B);for(H in l)B=l[H],j=a[H],!l.hasOwnProperty(H)||B===j||B===void 0&&j===void 0||kd(n,i,H,B,l,j);return}}for(var M in a)B=a[M],a.hasOwnProperty(M)&&B!=null&&!l.hasOwnProperty(M)&&$t(n,i,M,null,l,B);for(Y in l)B=l[Y],j=a[Y],!l.hasOwnProperty(Y)||B===j||B==null&&j==null||$t(n,i,Y,B,l,j)}var Ud=null,Ld=null;function Vc(n){return n.nodeType===9?n:n.ownerDocument}function wy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ry(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function zd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bd=null;function Cb(){var n=window.event;return n&&n.type==="popstate"?n===Bd?!1:(Bd=n,!0):(Bd=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,Ob=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(n){return Cy.resolve(null).then(n).catch(Nb)}:Dy;function Nb(n){setTimeout(function(){throw n})}function Ar(n){return n==="head"}function Vy(n,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=n.ownerDocument;if(a&1&&bl(v.documentElement),a&2&&bl(v.body),a&4)for(a=v.head,bl(a),v=a.firstChild;v;){var E=v.nextSibling,I=v.nodeName;v[es]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(f===0){n.removeChild(d),Ol(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ol(i)}function qd(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qd(a),ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function xb(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[es])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Hn(n.nextSibling),n===null)break}return null}function Mb(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Hn(n.nextSibling),n===null))return null;return n}function jd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Pb(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Fd=null;function Oy(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function Ny(n,i,a){switch(i=Vc(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function bl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ir(n)}var kn=new Map,xy=new Set;function Oc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bi=nt.d;nt.d={f:kb,r:Ub,D:Lb,C:zb,L:Bb,m:qb,X:Fb,S:jb,M:Gb};function kb(){var n=Bi.f(),i=Ac();return n||i}function Ub(n){var i=Xn(n);i!==null&&i.tag===5&&i.type==="form"?Wp(i):Bi.r(n)}var Ga=typeof document>"u"?null:document;function My(n,i,a){var l=Ga;if(l&&typeof i=="string"&&i){var f=ve(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),xy.has(f)||(xy.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Ge(i,"link",n),ge(i),l.head.appendChild(i)))}}function Lb(n){Bi.D(n),My("dns-prefetch",n,null)}function zb(n,i){Bi.C(n,i),My("preconnect",n,i)}function Bb(n,i,a){Bi.L(n,i,a);var l=Ga;if(l&&n&&i){var f='link[rel="preload"][as="'+ve(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ve(a.imageSizes)+'"]')):f+='[href="'+ve(n)+'"]';var d=f;switch(i){case"style":d=Ha(n);break;case"script":d=Ka(n)}kn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),kn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(Sl(d))||i==="script"&&l.querySelector(Il(d))||(i=l.createElement("link"),Ge(i,"link",n),ge(i),l.head.appendChild(i)))}}function qb(n,i){Bi.m(n,i);var a=Ga;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ve(l)+'"][href="'+ve(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ka(n)}if(!kn.has(d)&&(n=T({rel:"modulepreload",href:n},i),kn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(d)))return}l=a.createElement("link"),Ge(l,"link",n),ge(l),a.head.appendChild(l)}}}function jb(n,i,a){Bi.S(n,i,a);var l=Ga;if(l&&n){var f=We(l).hoistableStyles,d=Ha(n);i=i||"default";var v=f.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Sl(d)))E.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=kn.get(d))&&Gd(n,a);var I=v=l.createElement("link");ge(I),Ge(I,"link",n),I._p=new Promise(function(L,H){I.onload=L,I.onerror=H}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Nc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(d,v)}}}function Fb(n,i){Bi.X(n,i);var a=Ga;if(a&&n){var l=We(a).hoistableScripts,f=Ka(n),d=l.get(f);d||(d=a.querySelector(Il(f)),d||(n=T({src:n,async:!0},i),(i=kn.get(f))&&Hd(n,i),d=a.createElement("script"),ge(d),Ge(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Gb(n,i){Bi.M(n,i);var a=Ga;if(a&&n){var l=We(a).hoistableScripts,f=Ka(n),d=l.get(f);d||(d=a.querySelector(Il(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=kn.get(f))&&Hd(n,i),d=a.createElement("script"),ge(d),Ge(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Py(n,i,a,l){var f=(f=bt.current)?Oc(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ha(a.href),a=We(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ha(a.href);var d=We(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(Sl(n)))&&!d._p&&(v.instance=d,v.state.loading=5),kn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(n,a),d||Hb(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ka(a),a=We(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ha(n){return'href="'+ve(n)+'"'}function Sl(n){return'link[rel="stylesheet"]['+n+"]"}function ky(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function Hb(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ge(i,"link",a),ge(i),n.head.appendChild(i))}function Ka(n){return'[src="'+ve(n)+'"]'}function Il(n){return"script[async]"+n}function Uy(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+ve(a.href)+'"]');if(l)return i.instance=l,ge(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),ge(l),Ge(l,"style",f),Nc(l,a.precedence,n),i.instance=l;case"stylesheet":f=Ha(a.href);var d=n.querySelector(Sl(f));if(d)return i.state.loading|=4,i.instance=d,ge(d),d;l=ky(a),(f=kn.get(f))&&Gd(l,f),d=(n.ownerDocument||n).createElement("link"),ge(d);var v=d;return v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Ge(d,"link",l),i.state.loading|=4,Nc(d,a.precedence,n),i.instance=d;case"script":return d=Ka(a.src),(f=n.querySelector(Il(d)))?(i.instance=f,ge(f),f):(l=a,(f=kn.get(d))&&(l=T({},a),Hd(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),ge(f),Ge(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Nc(l,a.precedence,n));return i.instance}function Nc(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Gd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Hd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var xc=null;function Ly(n,i,a){if(xc===null){var l=new Map,f=xc=new Map;f.set(a,l)}else f=xc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[es]||d[Se]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function zy(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Kb(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function By(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var wl=null;function Qb(){}function Yb(n,i,a){if(wl===null)throw Error(r(475));var l=wl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ha(a.href),d=n.querySelector(Sl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Mc.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=d,ge(d);return}d=n.ownerDocument||n,a=ky(a),(f=kn.get(f))&&Gd(a,f),d=d.createElement("link"),ge(d);var v=d;v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Ge(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Mc.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function Xb(){if(wl===null)throw Error(r(475));var n=wl;return n.stylesheets&&n.count===0&&Kd(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Kd(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Mc(){if(this.count--,this.count===0){if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Pc=null;function Kd(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Pc=new Map,i.forEach($b,n),Pc=null,Mc.call(n))}function $b(n,i){if(!(i.state.loading&4)){var a=Pc.get(n);if(a)var l=a.get(null);else{a=new Map,Pc.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Mc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Rl={$$typeof:st,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function Zb(n,i,a,l,f,d,v,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function qy(n,i,a,l,f,d,v,E,I,L,H,Y){return n=new Zb(n,i,a,v,E,I,L,Y),i=1,d===!0&&(i|=24),d=pn(3,null,null,i),n.current=d,d.stateNode=n,i=Rf(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Of(d),n}function jy(n){return n?(n=ba,n):ba}function Fy(n,i,a,l,f,d){f=jy(f),l.context===null?l.context=f:l.pendingContext=f,l=ur(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=cr(n,l,i),a!==null&&(En(a,n,i),il(a,n,i))}function Gy(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Qd(n,i){Gy(n,i),(n=n.alternate)&&Gy(n,i)}function Hy(n){if(n.tag===13){var i=Aa(n,67108864);i!==null&&En(i,n,67108864),Qd(n,67108864)}}var kc=!0;function Jb(n,i,a,l){var f=G.T;G.T=null;var d=nt.p;try{nt.p=2,Yd(n,i,a,l)}finally{nt.p=d,G.T=f}}function Wb(n,i,a,l){var f=G.T;G.T=null;var d=nt.p;try{nt.p=8,Yd(n,i,a,l)}finally{nt.p=d,G.T=f}}function Yd(n,i,a,l){if(kc){var f=Xd(l);if(f===null)Pd(n,i,l,Uc,a),Qy(n,l);else if(eS(f,n,i,a,l))l.stopPropagation();else if(Qy(n,l),i&4&&-1<tS.indexOf(n)){for(;f!==null;){var d=Xn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Bn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var I=1<<31-Qe(v);E.entanglements[1]|=I,v&=~I}ui(d),(Ht&6)===0&&(Tc=Sn()+500,Tl(0))}}break;case 13:E=Aa(d,2),E!==null&&En(E,d,2),Ac(),Qd(d,2)}if(d=Xd(l),d===null&&Pd(n,i,l,Uc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Pd(n,i,l,null,a)}}function Xd(n){return n=Rn(n),$d(n)}var Uc=null;function $d(n){if(Uc=null,n=yi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Uc=n,null}function Ky(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jh()){case Io:return 2;case ea:return 8;case $r:case Wh:return 32;case na:return 268435456;default:return 32}default:return 32}}var Zd=!1,br=null,Sr=null,Ir=null,Dl=new Map,Cl=new Map,wr=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qy(n,i){switch(n){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(i.pointerId)}}function Vl(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Xn(i),i!==null&&Hy(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function eS(n,i,a,l,f){switch(i){case"focusin":return br=Vl(br,n,i,a,l,f),!0;case"dragenter":return Sr=Vl(Sr,n,i,a,l,f),!0;case"mouseover":return Ir=Vl(Ir,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Dl.set(d,Vl(Dl.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Cl.set(d,Vl(Cl.get(d)||null,n,i,a,l,f)),!0}return!1}function Yy(n){var i=yi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,Au(n.priority,function(){if(a.tag===13){var l=Tn();l=tr(l);var f=Aa(a,l);f!==null&&En(f,a,l),Qd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Xd(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ai=l,a.target.dispatchEvent(l),Ai=null}else return i=Xn(a),i!==null&&Hy(i),n.blockedOn=a,!1;i.shift()}return!0}function Xy(n,i,a){Lc(n)&&a.delete(i)}function nS(){Zd=!1,br!==null&&Lc(br)&&(br=null),Sr!==null&&Lc(Sr)&&(Sr=null),Ir!==null&&Lc(Ir)&&(Ir=null),Dl.forEach(Xy),Cl.forEach(Xy)}function zc(n,i){n.blockedOn===i&&(n.blockedOn=null,Zd||(Zd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nS)))}var Bc=null;function $y(n){Bc!==n&&(Bc=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bc===n&&(Bc=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if($d(l||a)===null)continue;break}var d=Xn(a);d!==null&&(n.splice(i,3),i-=3,$f(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ol(n){function i(I){return zc(I,n)}br!==null&&zc(br,n),Sr!==null&&zc(Sr,n),Ir!==null&&zc(Ir,n),Dl.forEach(i),Cl.forEach(i);for(var a=0;a<wr.length;a++){var l=wr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<wr.length&&(a=wr[0],a.blockedOn===null);)Yy(a),a.blockedOn===null&&wr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[ye]||null;if(typeof d=="function")v||$y(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[ye]||null)E=v.formAction;else if($d(f)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),$y(a)}}}function Jd(n){this._internalRoot=n}qc.prototype.render=Jd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Tn();Fy(a,l,n,i,null,null)},qc.prototype.unmount=Jd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Fy(n.current,2,null,n,null,null),Ac(),i[In]=null}};function qc(n){this._internalRoot=n}qc.prototype.unstable_scheduleHydration=function(n){if(n){var i=er();n={blockedOn:null,target:n,priority:i};for(var a=0;a<wr.length&&i!==0&&i<wr[a].priority;a++);wr.splice(a,0,n),a===0&&Yy(n)}};var Zy=t.version;if(Zy!=="19.1.0")throw Error(r(527,Zy,"19.1.0"));nt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var iS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{he=jc.inject(iS),Gt=jc}catch{}}return xl.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=d_,d=m_,v=g_,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=qy(n,1,!1,null,null,a,l,f,d,v,E,null),n[In]=i.current,Md(n),new Jd(i)},xl.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=d_,v=m_,E=g_,I=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=qy(n,1,!0,i,a??null,l,f,d,v,E,I,L),i.context=jy(null),a=i.current,l=Tn(),l=tr(l),f=ur(l),f.callback=null,cr(a,f,l),a=l,i.current.lanes=a,_i(i,a),ui(i),n[In]=i.current,Md(n),new qc(i)},xl.version="19.1.0",xl}var ov;function mS(){if(ov)return em.exports;ov=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),em.exports=dS(),em.exports}var gS=mS();const pS=jT(gS);var lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},_S=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],h=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],h=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,T=u>>2,b=(u&3)<<4|m>>4;let D=(m&15)<<2|_>>6,q=_&63;g||(q=64,h||(D=64)),r.push(e[T],e[b],e[D],e[q])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(FT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):_S(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const _=o<s.length?e[s.charAt(o)]:64;++o;const b=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||b==null)throw new yS;const D=u<<2|m>>4;if(r.push(D),_!==64){const q=m<<4&240|_>>2;if(r.push(q),b!==64){const $=_<<6&192|b;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class yS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vS=function(s){const t=FT(s);return GT.encodeByteArray(t,!0)},ch=function(s){return vS(s).replace(/\./g,"")},HT=function(s){try{return GT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=()=>TS().__FIREBASE_DEFAULTS__,AS=()=>{if(typeof process>"u"||typeof lv>"u")return;const s=lv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&HT(s[1]);return t&&JSON.parse(t)},Vh=()=>{try{return ES()||AS()||bS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},KT=s=>{var t,e;return(e=(t=Vh())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},SS=s=>{const t=KT(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},QT=()=>{var s;return(s=Vh())===null||s===void 0?void 0:s.config},YT=s=>{var t;return(t=Vh())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[ch(JSON.stringify(e)),ch(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function DS(){var s;const t=(s=Vh())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NS(){const s=Ve();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function XT(){return!DS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function xS(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="FirebaseError";class Zi extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=MS,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?PS(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Zi(o,m,r)}}function PS(s,t){return s.replace(kS,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const kS=/\{\$([^}]+)}/g;function US(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function hh(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(uv(u)&&uv(h)){if(!hh(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function uv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function LS(s,t){const e=new zS(s,t);return e.subscribe.bind(e)}class zS{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");BS(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=sm),o.error===void 0&&(o.error=sm),o.complete===void 0&&(o.complete=sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BS(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(s){return s&&s._delegate?s._delegate:s}class qs{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new IS;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FS(t))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Os){return this.instances.has(t)}getOptions(t=Os){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,e){var r;const o=this.normalizeInstanceIdentifier(e),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jS(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Os){return this.component?this.component.multipleInstances?t:Os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jS(s){return s===Os?void 0:s}function FS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new qS(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Mt||(Mt={}));const HS={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},KS=Mt.INFO,QS={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},YS=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=QS[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hm{constructor(t){this.name=t,this._logLevel=KS,this._logHandler=YS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?HS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const XS=(s,t)=>t.some(e=>s instanceof e);let cv,hv;function $S(){return cv||(cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZS(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZT=new WeakMap,pm=new WeakMap,JT=new WeakMap,am=new WeakMap,Km=new WeakMap;function JS(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{e(kr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&ZT.set(e,s)}).catch(()=>{}),Km.set(t,s),t}function WS(s){if(pm.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{e(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});pm.set(s,t)}let _m={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return pm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||JT.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return kr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function tI(s){_m=s(_m)}function eI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(om(this),t,...e);return JT.set(r,t.sort?t.sort():[t]),kr(r)}:ZS().includes(s)?function(...t){return s.apply(om(this),t),kr(ZT.get(this))}:function(...t){return kr(s.apply(om(this),t))}}function nI(s){return typeof s=="function"?eI(s):(s instanceof IDBTransaction&&WS(s),XS(s,$S())?new Proxy(s,_m):s)}function kr(s){if(s instanceof IDBRequest)return JS(s);if(am.has(s))return am.get(s);const t=nI(s);return t!==s&&(am.set(s,t),Km.set(t,s)),t}const om=s=>Km.get(s);function iI(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=kr(h);return r&&h.addEventListener("upgradeneeded",g=>{r(kr(h.result),g.oldVersion,g.newVersion,kr(h.transaction),g)}),e&&h.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const rI=["get","getKey","getAll","getAllKeys","count"],sI=["put","add","delete","clear"],lm=new Map;function fv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(lm.get(t))return lm.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=sI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||rI.includes(e)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[e](...m),o&&g.done]))[0]};return lm.set(t,u),u}tI(s=>({...s,get:(t,e,r)=>fv(t,e)||s.get(t,e,r),has:(t,e)=>!!fv(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(oI(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function oI(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ym="@firebase/app",dv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Hm("@firebase/app"),lI="@firebase/app-compat",uI="@firebase/analytics-compat",cI="@firebase/analytics",hI="@firebase/app-check-compat",fI="@firebase/app-check",dI="@firebase/auth",mI="@firebase/auth-compat",gI="@firebase/database",pI="@firebase/data-connect",_I="@firebase/database-compat",yI="@firebase/functions",vI="@firebase/functions-compat",TI="@firebase/installations",EI="@firebase/installations-compat",AI="@firebase/messaging",bI="@firebase/messaging-compat",SI="@firebase/performance",II="@firebase/performance-compat",wI="@firebase/remote-config",RI="@firebase/remote-config-compat",DI="@firebase/storage",CI="@firebase/storage-compat",VI="@firebase/firestore",OI="@firebase/vertexai-preview",NI="@firebase/firestore-compat",xI="firebase",MI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]",PI={[ym]:"fire-core",[lI]:"fire-core-compat",[cI]:"fire-analytics",[uI]:"fire-analytics-compat",[fI]:"fire-app-check",[hI]:"fire-app-check-compat",[dI]:"fire-auth",[mI]:"fire-auth-compat",[gI]:"fire-rtdb",[pI]:"fire-data-connect",[_I]:"fire-rtdb-compat",[yI]:"fire-fn",[vI]:"fire-fn-compat",[TI]:"fire-iid",[EI]:"fire-iid-compat",[AI]:"fire-fcm",[bI]:"fire-fcm-compat",[SI]:"fire-perf",[II]:"fire-perf-compat",[wI]:"fire-rc",[RI]:"fire-rc-compat",[DI]:"fire-gcs",[CI]:"fire-gcs-compat",[VI]:"fire-fst",[NI]:"fire-fst-compat",[OI]:"fire-vertex","fire-js":"fire-js",[xI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,kI=new Map,Tm=new Map;function mv(s,t){try{s.container.addComponent(t)}catch(e){Yi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function oo(s){const t=s.name;if(Tm.has(t))return Yi.debug(`There were multiple attempts to register component ${t}.`),!1;Tm.set(t,s);for(const e of fh.values())mv(e,s);for(const e of kI.values())mv(e,s);return!0}function Qm(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function ji(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new ou("app","Firebase",UI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=MI;function WT(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:vm,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Ur.create("bad-app-name",{appName:String(o)});if(e||(e=QT()),!e)throw Ur.create("no-options");const u=fh.get(o);if(u){if(hh(e,u.options)&&hh(r,u.config))return u;throw Ur.create("duplicate-app",{appName:o})}const h=new GS(o);for(const g of Tm.values())h.addComponent(g);const m=new LI(e,r,h);return fh.set(o,m),m}function tE(s=vm){const t=fh.get(s);if(!t&&s===vm&&QT())return WT();if(!t)throw Ur.create("no-app",{appName:s});return t}function Lr(s,t,e){var r;let o=(r=PI[s])!==null&&r!==void 0?r:s;e&&(o+=`-${e}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yi.warn(m.join(" "));return}oo(new qs(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firebase-heartbeat-database",BI=1,Xl="firebase-heartbeat-store";let um=null;function eE(){return um||(um=iI(zI,BI,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Xl)}catch(e){console.warn(e)}}}}).catch(s=>{throw Ur.create("idb-open",{originalErrorMessage:s.message})})),um}async function qI(s){try{const e=(await eE()).transaction(Xl),r=await e.objectStore(Xl).get(nE(s));return await e.done,r}catch(t){if(t instanceof Zi)Yi.warn(t.message);else{const e=Ur.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Yi.warn(e.message)}}}async function gv(s,t){try{const r=(await eE()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(t,nE(s)),await r.done}catch(e){if(e instanceof Zi)Yi.warn(e.message);else{const r=Ur.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(r.message)}}}function nE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=1024,FI=30*24*60*60*1e3;class GI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new KI(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=pv();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=FI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pv(),{heartbeatsToSend:r,unsentEntries:o}=HI(this._heartbeatsCache.heartbeats),u=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return Yi.warn(e),""}}}function pv(){return new Date().toISOString().substring(0,10)}function HI(s,t=jI){const e=[];let r=s.slice();for(const o of s){const u=e.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),_v(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),_v(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class KI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?xS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await qI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return gv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return gv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function _v(s){return ch(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(s){oo(new qs("platform-logger",t=>new aI(t),"PRIVATE")),oo(new qs("heartbeat",t=>new GI(t),"PRIVATE")),Lr(ym,dv,s),Lr(ym,dv,"esm2017"),Lr("fire-js","")}QI("");function Ym(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(e[r[o]]=s[r[o]]);return e}function iE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YI=iE,rE=new ou("auth","Firebase",iE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Hm("@firebase/auth");function XI(s,...t){dh.logLevel<=Mt.WARN&&dh.warn(`Auth (${vo}): ${s}`,...t)}function Zc(s,...t){dh.logLevel<=Mt.ERROR&&dh.error(`Auth (${vo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(s,...t){throw $m(s,...t)}function Kn(s,...t){return $m(s,...t)}function Xm(s,t,e){const r=Object.assign(Object.assign({},YI()),{[t]:e});return new ou("auth","Firebase",r).create(t,{appName:s.name})}function Ls(s){return Xm(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $I(s,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&di(s,"argument-error"),Xm(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $m(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return rE.create(s,...t)}function St(s,t,...e){if(!s)throw $m(t,...e)}function Fi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Zc(t),new Error(t)}function Xi(s,t){s||Fi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function ZI(){return yv()==="http:"||yv()==="https:"}function yv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZI()||VS()||"connection"in navigator)?navigator.onLine:!0}function WI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Xi(e>t,"Short delay should be less than long delay!"),this.isMobile=RS()||OS()}get(){return JI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(s,t){Xi(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new uu(3e4,6e4);function Jm(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function To(s,t,e,r,o={}){return aE(s,o,async()=>{let u={},h={};r&&(t==="GET"?h=r:u={body:JSON.stringify(r)});const m=lu(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:t,headers:g},u);return CS()||(_.referrerPolicy="no-referrer"),sE.fetch()(oE(s,s.config.apiHost,e,m),_)})}async function aE(s,t,e){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},tw),t);try{const o=new iw(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Fc(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Fc(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Fc(s,"user-disabled",h);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Xm(s,T,_);di(s,T)}}catch(o){if(o instanceof Zi)throw o;di(s,"network-request-failed",{message:String(o)})}}async function nw(s,t,e,r,o={}){const u=await To(s,t,e,r,o);return"mfaPendingCredential"in u&&di(s,"multi-factor-auth-required",{_serverResponse:u}),u}function oE(s,t,e,r){const o=`${t}${e}?${r}`;return s.config.emulator?Zm(s.config,o):`${s.config.apiScheme}://${o}`}class iw{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),ew.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fc(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=Kn(s,t,r);return o.customData._tokenResponse=e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(s,t){return To(s,"POST","/v1/accounts:delete",t)}async function lE(s,t){return To(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sw(s,t=!1){const e=Je(s),r=await e.getIdToken(t),o=Wm(r);St(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Fl(cm(o.auth_time)),issuedAtTime:Fl(cm(o.iat)),expirationTime:Fl(cm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function cm(s){return Number(s)*1e3}function Wm(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const o=HT(e);return o?JSON.parse(o):(Zc("Failed to decode base64 JWT payload"),null)}catch(o){return Zc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function vv(s){const t=Wm(s);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Zi&&aw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function aw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(s){var t;const e=s.auth,r=await s.getIdToken(),o=await $l(s,lE(e,{idToken:r}));St(o==null?void 0:o.users.length,e,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?uE(u.providerUserInfo):[],m=uw(s.providerData,h),g=s.isAnonymous,_=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),T=g?_:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Am(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(s,b)}async function lw(s){const t=Je(s);await mh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function uw(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function uE(s){return s.map(t=>{var{providerId:e}=t,r=Ym(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(s,t){const e=await aE(s,{},async()=>{const r=lu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=oE(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",sE.fetch()(h,{method:"POST",headers:m,body:r})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function hw(s,t){return To(s,"POST","/v2/accounts:revokeToken",Jm(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){St(t.length!==0,"internal-error");const e=vv(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await cw(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,h=new io;return r&&(St(typeof r=="string","internal-error",{appName:t}),h.refreshToken=r),o&&(St(typeof o=="string","internal-error",{appName:t}),h.accessToken=o),u&&(St(typeof u=="number","internal-error",{appName:t}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(s,t){St(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Gi{constructor(t){var{uid:e,auth:r,stsTokenManager:o}=t,u=Ym(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ow(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Am(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const e=await $l(this,this.stsTokenManager.getToken(this.auth,t));return St(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return sw(this,t)}reload(){return lw(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Gi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ji(this.auth.app))return Promise.reject(Ls(this.auth));const t=await this.getIdToken();return await $l(this,rw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,o,u,h,m,g,_,T;const b=(r=e.displayName)!==null&&r!==void 0?r:void 0,D=(o=e.email)!==null&&o!==void 0?o:void 0,q=(u=e.phoneNumber)!==null&&u!==void 0?u:void 0,$=(h=e.photoURL)!==null&&h!==void 0?h:void 0,W=(m=e.tenantId)!==null&&m!==void 0?m:void 0,Q=(g=e._redirectEventId)!==null&&g!==void 0?g:void 0,Tt=(_=e.createdAt)!==null&&_!==void 0?_:void 0,ft=(T=e.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:st,emailVerified:At,isAnonymous:lt,providerData:_t,stsTokenManager:O}=e;St(st&&O,t,"internal-error");const S=io.fromJSON(this.name,O);St(typeof st=="string",t,"internal-error"),Dr(b,t.name),Dr(D,t.name),St(typeof At=="boolean",t,"internal-error"),St(typeof lt=="boolean",t,"internal-error"),Dr(q,t.name),Dr($,t.name),Dr(W,t.name),Dr(Q,t.name),Dr(Tt,t.name),Dr(ft,t.name);const w=new Gi({uid:st,auth:t,email:D,emailVerified:At,displayName:b,isAnonymous:lt,photoURL:$,phoneNumber:q,tenantId:W,stsTokenManager:S,createdAt:Tt,lastLoginAt:ft});return _t&&Array.isArray(_t)&&(w.providerData=_t.map(N=>Object.assign({},N))),Q&&(w._redirectEventId=Q),w}static async _fromIdTokenResponse(t,e,r=!1){const o=new io;o.updateFromServerResponse(e);const u=new Gi({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await mh(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];St(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?uE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new io;m.updateFromIdToken(r);const g=new Gi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Hi(s){Xi(s instanceof Function,"Expected a class definition");let t=Tv.get(s);return t?(Xi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Tv.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}cE.type="NONE";const Ev=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(s,t,e){return`firebase:${s}:${t}:${e}`}class ro{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jc("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Gi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new ro(Hi(Ev),t,r);const o=(await Promise.all(e.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Hi(Ev);const h=Jc(r,t.config.apiKey,t.name);let m=null;for(const _ of e)try{const T=await _._get(h);if(T){const b=Gi._fromJSON(t,T);_!==u&&(m=b),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ro(u,t,r):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(e.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new ro(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pE(t))return"Blackberry";if(_E(t))return"Webos";if(fE(t))return"Safari";if((t.includes("chrome/")||dE(t))&&!t.includes("edge/"))return"Chrome";if(gE(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hE(s=Ve()){return/firefox\//i.test(s)}function fE(s=Ve()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function dE(s=Ve()){return/crios\//i.test(s)}function mE(s=Ve()){return/iemobile/i.test(s)}function gE(s=Ve()){return/android/i.test(s)}function pE(s=Ve()){return/blackberry/i.test(s)}function _E(s=Ve()){return/webos/i.test(s)}function tg(s=Ve()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function fw(s=Ve()){var t;return tg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function dw(){return NS()&&document.documentMode===10}function yE(s=Ve()){return tg(s)||gE(s)||_E(s)||pE(s)||/windows phone/i.test(s)||mE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(s,t=[]){let e;switch(s){case"Browser":e=Av(Ve());break;case"Worker":e=`${Av(Ve())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((h,m)=>{try{const g=t(u);h(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(s,t={}){return To(s,"GET","/v2/passwordPolicy",Jm(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=6;class _w{constructor(t){var e,r,o,u;const h=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=h.minPasswordLength)!==null&&e!==void 0?e:pw,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(e=g.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bv(this),this.idTokenSubscription=new bv(this),this.beforeStateQueue=new mw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Hi(e)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ro.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await lE(this,{idToken:t}),r=await Gi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(ji(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await mh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=WI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ji(this.app))return Promise.reject(Ls(this));const e=t?Je(t):null;return e&&St(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ji(this.app)?Promise.reject(Ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ji(this.app)?Promise.reject(Ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gw(this),e=new _w(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new ou("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await hw(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Hi(t)||this._popupRedirectResolver;St(e,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[Hi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{h=!0,g()}}else{const g=t.addObserver(e);return()=>{h=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&XI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oh(s){return Je(s)}class bv{constructor(t){this.auth=t,this.observer=null,this.addObserver=LS(e=>this.observer=e)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vw(s){eg=s}function Tw(s){return eg.loadJS(s)}function Ew(){return eg.gapiScript}function Aw(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(s,t){const e=Qm(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(hh(u,t??{}))return o;di(o,"already-initialized")}return e.initialize({options:t})}function Sw(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Hi);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Iw(s,t,e){const r=Oh(s);St(r._canInitEmulator,r,"emulator-config-failed"),St(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=TE(t),{host:h,port:m}=ww(t),g=m===null?"":`:${m}`;r.config.emulator={url:`${u}//${h}${g}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),Rw()}function TE(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function ww(s){const t=TE(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Sv(r.substr(u.length+1))}}else{const[u,h]=r.split(":");return{host:u,port:Sv(h)}}}function Sv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function Rw(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Fi("not implemented")}_getIdTokenResponse(t){return Fi("not implemented")}_linkToIdToken(t,e){return Fi("not implemented")}_getReauthenticationResolver(t){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(s,t){return nw(s,"POST","/v1/accounts:signInWithIdp",Jm(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="http://localhost";class js extends EE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new js(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):di("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o}=e,u=Ym(e,["providerId","signInMethod"]);if(!r||!o)return null;const h=new js(r,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(t){const e=this.buildRequest();return so(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,so(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,so(t,e)}buildRequest(){const t={requestUri:Dw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=lu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends cu{constructor(){super("facebook.com")}static credential(t){return js._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Or.credential(t.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return js._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return qi.credential(e,r)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends cu{constructor(){super("github.com")}static credential(t){return js._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nr.credential(t.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends cu{constructor(){super("twitter.com")}static credential(t,e){return js._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return xr.credential(e,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await Gi._fromIdTokenResponse(t,r,o),h=Iv(r);return new lo({user:u,providerId:h,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=Iv(r);return new lo({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function Iv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Zi{constructor(t,e,r,o){var u;super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new gh(t,e,r,o)}}function AE(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(s,u,t,r):u})}async function Cw(s,t,e=!1){const r=await $l(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return lo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(s,t,e=!1){const{auth:r}=s;if(ji(r.app))return Promise.reject(Ls(r));const o="reauthenticate";try{const u=await $l(s,AE(r,o,t,s),e);St(u.idToken,r,"internal-error");const h=Wm(u.idToken);St(h,r,"internal-error");const{sub:m}=h;return St(s.uid===m,r,"user-mismatch"),lo._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&di(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(s,t,e=!1){if(ji(s.app))return Promise.reject(Ls(s));const r="signIn",o=await AE(s,r,t),u=await lo._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function Nw(s,t,e,r){return Je(s).onIdTokenChanged(t,e,r)}function xw(s,t,e){return Je(s).beforeAuthStateChanged(t,e)}function Mw(s,t,e,r){return Je(s).onAuthStateChanged(t,e,r)}function bE(s){return Je(s).signOut()}const ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=1e3,kw=10;class IE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!e&&this.localCache[r]===h||this.notifyListeners(r,h)},u=this.storage.getItem(r);dw()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,kw):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},Pw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}IE.type="LOCAL";const Uw=IE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}wE.type="SESSION";const RE=wE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new Nh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(h).map(async _=>_(e.origin,u)),g=await Lw(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const _=ig("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(b){const D=b;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:_,data:e},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function Bw(s){fi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function qw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jw(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function Fw(){return DE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",Gw=1,_h="firebaseLocalStorage",VE="fbase_key";class hu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function xh(s,t){return s.transaction([_h],t?"readwrite":"readonly").objectStore(_h)}function Hw(){const s=indexedDB.deleteDatabase(CE);return new hu(s).toPromise()}function bm(){const s=indexedDB.open(CE,Gw);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(_h,{keyPath:VE})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(_h)?t(r):(r.close(),await Hw(),t(await bm()))})})}async function wv(s,t,e){const r=xh(s,!0).put({[VE]:t,value:e});return new hu(r).toPromise()}async function Kw(s,t){const e=xh(s,!1).get(t),r=await new hu(e).toPromise();return r===void 0?null:r.value}function Rv(s,t){const e=xh(s,!0).delete(t);return new hu(e).toPromise()}const Qw=800,Yw=3;class OE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>Yw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(Fw()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await qw(),!this.activeServiceWorker)return;this.sender=new zw(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||jw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bm();return await wv(t,ph,"1"),await Rv(t,ph),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>Kw(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Rv(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=xh(o,!1).getAll();return new hu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OE.type="LOCAL";const Xw=OE;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(s,t){return t?Hi(t):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends EE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return so(t,this._buildIdpRequest())}_linkToIdToken(t,e){return so(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return so(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function $w(s){return Ow(s.auth,new rg(s),s.bypassAuthState)}function Zw(s){const{auth:t,user:e}=s;return St(e,t,"internal-error"),Vw(e,new rg(s),s.bypassAuthState)}async function Jw(s){const{auth:t,user:e}=s;return St(e,t,"internal-error"),Cw(e,new rg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:h,type:m}=t;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $w;case"linkViaPopup":case"linkViaRedirect":return Jw;case"reauthViaPopup":case"reauthViaRedirect":return Zw;default:di(this.auth,"internal-error")}}resolve(t){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new uu(2e3,1e4);async function tR(s,t,e){if(ji(s.app))return Promise.reject(Kn(s,"operation-not-supported-in-this-environment"));const r=Oh(s);$I(s,t,ng);const o=NE(r,e);return new Us(r,"signInViaPopup",t,o).executeNotNull()}class Us extends xE{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const t=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ww.get())};t()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="pendingRedirect",Wc=new Map;class nR extends xE{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Wc.get(this.auth._key());if(!t){try{const r=await iR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Wc.set(this.auth._key(),t)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iR(s,t){const e=aR(t),r=sR(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function rR(s,t){Wc.set(s._key(),t)}function sR(s){return Hi(s._redirectPersistence)}function aR(s){return Jc(eR,s.config.apiKey,s.name)}async function oR(s,t,e=!1){if(ji(s.app))return Promise.reject(Ls(s));const r=Oh(s),o=NE(r,t),h=await new nR(r,o,e).execute();return h&&!e&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,t)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=10*60*1e3;class uR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!cR(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!ME(t)){const o=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(Kn(this.auth,o))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=lR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(t))}saveEventToCache(t){this.cachedEventUids.add(Dv(t)),this.lastProcessedEventTime=Date.now()}}function Dv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function ME({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function cR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(s,t={}){return To(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function mR(s){if(s.config.emulator)return;const{authorizedDomains:t}=await hR(s);for(const e of t)try{if(gR(e))return}catch{}di(s,"unauthorized-domain")}function gR(s){const t=Em(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&h.hostname===r}if(!dR.test(e))return!1;if(fR.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new uu(3e4,6e4);function Cv(){const s=fi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function _R(s){return new Promise((t,e)=>{var r,o,u;function h(){Cv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cv(),e(Kn(s,"network-request-failed"))},timeout:pR.get()})}if(!((o=(r=fi().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=fi().gapi)===null||u===void 0)&&u.load)h();else{const m=Aw("iframefcb");return fi()[m]=()=>{gapi.load?h():e(Kn(s,"network-request-failed"))},Tw(`${Ew()}?onload=${m}`).catch(g=>e(g))}}).catch(t=>{throw th=null,t})}let th=null;function yR(s){return th=th||_R(s),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new uu(5e3,15e3),TR="__/auth/iframe",ER="emulator/auth/iframe",AR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SR(s){const t=s.config;St(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Zm(t,ER):`https://${s.config.authDomain}/${TR}`,r={apiKey:t.apiKey,appName:s.name,v:vo},o=bR.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${lu(r).slice(1)}`}async function IR(s){const t=await yR(s),e=fi().gapi;return St(e,s,"internal-error"),t.open({where:document.body,url:SR(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AR,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const h=Kn(s,"network-request-failed"),m=fi().setTimeout(()=>{u(h)},vR.get());function g(){fi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RR=500,DR=600,CR="_blank",VR="http://localhost";class Vv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OR(s,t,e,r=RR,o=DR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},wR),{width:r.toString(),height:o.toString(),top:u,left:h}),_=Ve().toLowerCase();e&&(m=dE(_)?CR:e),hE(_)&&(t=t||VR,g.scrollbars="yes");const T=Object.entries(g).reduce((D,[q,$])=>`${D}${q}=${$},`,"");if(fw(_)&&m!=="_self")return NR(t||"",m),new Vv(null);const b=window.open(t||"",m,T);St(b,s,"popup-blocked");try{b.focus()}catch{}return new Vv(b)}function NR(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="__/auth/handler",MR="emulator/auth/handler",PR=encodeURIComponent("fac");async function Ov(s,t,e,r,o,u){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:vo,eventId:o};if(t instanceof ng){t.setDefaultLanguage(s.languageCode),h.providerId=t.providerId||"",US(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,b]of Object.entries({}))h[T]=b}if(t instanceof cu){const T=t.getScopes().filter(b=>b!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),_=g?`#${PR}=${encodeURIComponent(g)}`:"";return`${kR(s)}?${lu(m).slice(1)}${_}`}function kR({config:s}){return s.emulator?Zm(s,MR):`https://${s.authDomain}/${xR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="webStorageSupport";class UR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=oR,this._overrideRedirectResult=rR}async _openPopup(t,e,r,o){var u;Xi((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await Ov(t,e,r,Em(),o);return OR(t,h,ig())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await Ov(t,e,r,Em(),o);return Bw(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(Xi(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await IR(t),r=new uR(t);return e.register("authEvent",o=>(St(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(hm,{type:hm},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[hm];h!==void 0&&e(!!h),di(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=mR(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return yE()||fE()||tg()}}const LR=UR;var Nv="@firebase/auth",xv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qR(s){oo(new qs("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=r.options;St(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vE(s)},_=new yw(r,o,u,g);return Sw(_,e),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),oo(new qs("auth-internal",t=>{const e=Oh(t.getProvider("auth").getImmediate());return(r=>new zR(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(Nv,xv,BR(s)),Lr(Nv,xv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=5*60,FR=YT("authIdTokenMaxAge")||jR;let Mv=null;const GR=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>FR)return;const o=e==null?void 0:e.token;Mv!==o&&(Mv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function HR(s=tE()){const t=Qm(s,"auth");if(t.isInitialized())return t.getImmediate();const e=bw(s,{popupRedirectResolver:LR,persistence:[Xw,Uw,RE]}),r=YT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const h=GR(u.toString());xw(e,h,()=>h(e.currentUser)),Nw(e,m=>h(m))}}const o=KT("auth");return o&&Iw(e,`http://${o}`),e}function KR(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}vw({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Kn("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",KR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qR("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function QR(s,t,e,r){function o(u){return u instanceof e?u:new e(function(h){h(u)})}return new(e||(e=Promise))(function(u,h){function m(T){try{_(r.next(T))}catch(b){h(b)}}function g(T){try{_(r.throw(T))}catch(b){h(b)}}function _(T){T.done?u(T.value):o(T.value).then(m,g)}_((r=r.apply(s,[])).next())})}function YR(s,t){var e={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,o,u,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(_){return function(T){return g([_,T])}}function g(_){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(u=_[0]&2?o.return:_[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,_[1])).done)return u;switch(o=0,u&&(_=[_[0]&2,u.value]),_[0]){case 0:case 1:u=_;break;case 4:return e.label++,{value:_[1],done:!1};case 5:e.label++,o=_[1],_=[0];continue;case 7:_=e.ops.pop(),e.trys.pop();continue;default:if(u=e.trys,!(u=u.length>0&&u[u.length-1])&&(_[0]===6||_[0]===2)){e=0;continue}if(_[0]===3&&(!u||_[1]>u[0]&&_[1]<u[3])){e.label=_[1];break}if(_[0]===6&&e.label<u[1]){e.label=u[1],u=_;break}if(u&&e.label<u[2]){e.label=u[2],e.ops.push(_);break}u[2]&&e.ops.pop(),e.trys.pop();continue}_=t.call(s,e)}catch(T){_=[6,T],o=0}finally{r=u=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var no=function(){return no=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u])}return t},no.apply(this,arguments)},PE=function(s){return{loading:s==null,value:s}},XR=function(){return function(s,t){switch(t.type){case"error":return no(no({},s),{error:t.error,loading:!1,value:void 0});case"reset":return PE(t.defaultValue);case"value":return no(no({},s),{error:void 0,loading:!1,value:t.value});default:return s}}},$R=function(s){var t=s?s():void 0,e=Ce.useReducer(XR(),PE(t)),r=e[0],o=e[1],u=Ce.useCallback(function(){var g=s?s():void 0;o({type:"reset",defaultValue:g})},[s]),h=Ce.useCallback(function(g){o({type:"error",error:g})},[]),m=Ce.useCallback(function(g){o({type:"value",value:g})},[]);return Ce.useMemo(function(){return{error:r.error,loading:r.loading,reset:u,setError:h,setValue:m,value:r.value}},[r.error,r.loading,u,h,m,r.value])},ZR=function(s,t){var e=$R(function(){return s.currentUser}),r=e.error,o=e.loading,u=e.setError,h=e.setValue,m=e.value;return Ce.useEffect(function(){var g=Mw(s,function(_){return QR(void 0,void 0,void 0,function(){var T;return YR(this,function(b){switch(b.label){case 0:return[3,4];case 1:return b.trys.push([1,3,,4]),[4,t.onUserChanged(_)];case 2:return b.sent(),[3,4];case 3:return T=b.sent(),u(T),[3,4];case 4:return h(_),[2]}})})},u);return function(){g()}},[s]),[m,o,r]},JR="firebase",WR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(JR,WR,"app");var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,kE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,S){function w(){}w.prototype=S.prototype,O.D=S.prototype,O.prototype=new w,O.prototype.constructor=O,O.C=function(N,x,P){for(var R=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)R[ze-2]=arguments[ze];return S.prototype[x].apply(N,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,S,w){w||(w=0);var N=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)N[x]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(x=0;16>x;++x)N[x]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=O.g[0],w=O.g[1],x=O.g[2];var P=O.g[3],R=S+(P^w&(x^P))+N[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=P+(x^S&(w^x))+N[1]+3905402710&4294967295,P=S+(R<<12&4294967295|R>>>20),R=x+(w^P&(S^w))+N[2]+606105819&4294967295,x=P+(R<<17&4294967295|R>>>15),R=w+(S^x&(P^S))+N[3]+3250441966&4294967295,w=x+(R<<22&4294967295|R>>>10),R=S+(P^w&(x^P))+N[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(x^S&(w^x))+N[5]+1200080426&4294967295,P=S+(R<<12&4294967295|R>>>20),R=x+(w^P&(S^w))+N[6]+2821735955&4294967295,x=P+(R<<17&4294967295|R>>>15),R=w+(S^x&(P^S))+N[7]+4249261313&4294967295,w=x+(R<<22&4294967295|R>>>10),R=S+(P^w&(x^P))+N[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(x^S&(w^x))+N[9]+2336552879&4294967295,P=S+(R<<12&4294967295|R>>>20),R=x+(w^P&(S^w))+N[10]+4294925233&4294967295,x=P+(R<<17&4294967295|R>>>15),R=w+(S^x&(P^S))+N[11]+2304563134&4294967295,w=x+(R<<22&4294967295|R>>>10),R=S+(P^w&(x^P))+N[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(x^S&(w^x))+N[13]+4254626195&4294967295,P=S+(R<<12&4294967295|R>>>20),R=x+(w^P&(S^w))+N[14]+2792965006&4294967295,x=P+(R<<17&4294967295|R>>>15),R=w+(S^x&(P^S))+N[15]+1236535329&4294967295,w=x+(R<<22&4294967295|R>>>10),R=S+(x^P&(w^x))+N[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^x&(S^w))+N[6]+3225465664&4294967295,P=S+(R<<9&4294967295|R>>>23),R=x+(S^w&(P^S))+N[11]+643717713&4294967295,x=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(x^P))+N[0]+3921069994&4294967295,w=x+(R<<20&4294967295|R>>>12),R=S+(x^P&(w^x))+N[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^x&(S^w))+N[10]+38016083&4294967295,P=S+(R<<9&4294967295|R>>>23),R=x+(S^w&(P^S))+N[15]+3634488961&4294967295,x=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(x^P))+N[4]+3889429448&4294967295,w=x+(R<<20&4294967295|R>>>12),R=S+(x^P&(w^x))+N[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^x&(S^w))+N[14]+3275163606&4294967295,P=S+(R<<9&4294967295|R>>>23),R=x+(S^w&(P^S))+N[3]+4107603335&4294967295,x=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(x^P))+N[8]+1163531501&4294967295,w=x+(R<<20&4294967295|R>>>12),R=S+(x^P&(w^x))+N[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^x&(S^w))+N[2]+4243563512&4294967295,P=S+(R<<9&4294967295|R>>>23),R=x+(S^w&(P^S))+N[7]+1735328473&4294967295,x=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(x^P))+N[12]+2368359562&4294967295,w=x+(R<<20&4294967295|R>>>12),R=S+(w^x^P)+N[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^x)+N[8]+2272392833&4294967295,P=S+(R<<11&4294967295|R>>>21),R=x+(P^S^w)+N[11]+1839030562&4294967295,x=P+(R<<16&4294967295|R>>>16),R=w+(x^P^S)+N[14]+4259657740&4294967295,w=x+(R<<23&4294967295|R>>>9),R=S+(w^x^P)+N[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^x)+N[4]+1272893353&4294967295,P=S+(R<<11&4294967295|R>>>21),R=x+(P^S^w)+N[7]+4139469664&4294967295,x=P+(R<<16&4294967295|R>>>16),R=w+(x^P^S)+N[10]+3200236656&4294967295,w=x+(R<<23&4294967295|R>>>9),R=S+(w^x^P)+N[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^x)+N[0]+3936430074&4294967295,P=S+(R<<11&4294967295|R>>>21),R=x+(P^S^w)+N[3]+3572445317&4294967295,x=P+(R<<16&4294967295|R>>>16),R=w+(x^P^S)+N[6]+76029189&4294967295,w=x+(R<<23&4294967295|R>>>9),R=S+(w^x^P)+N[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^x)+N[12]+3873151461&4294967295,P=S+(R<<11&4294967295|R>>>21),R=x+(P^S^w)+N[15]+530742520&4294967295,x=P+(R<<16&4294967295|R>>>16),R=w+(x^P^S)+N[2]+3299628645&4294967295,w=x+(R<<23&4294967295|R>>>9),R=S+(x^(w|~P))+N[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~x))+N[7]+1126891415&4294967295,P=S+(R<<10&4294967295|R>>>22),R=x+(S^(P|~w))+N[14]+2878612391&4294967295,x=P+(R<<15&4294967295|R>>>17),R=w+(P^(x|~S))+N[5]+4237533241&4294967295,w=x+(R<<21&4294967295|R>>>11),R=S+(x^(w|~P))+N[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~x))+N[3]+2399980690&4294967295,P=S+(R<<10&4294967295|R>>>22),R=x+(S^(P|~w))+N[10]+4293915773&4294967295,x=P+(R<<15&4294967295|R>>>17),R=w+(P^(x|~S))+N[1]+2240044497&4294967295,w=x+(R<<21&4294967295|R>>>11),R=S+(x^(w|~P))+N[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~x))+N[15]+4264355552&4294967295,P=S+(R<<10&4294967295|R>>>22),R=x+(S^(P|~w))+N[6]+2734768916&4294967295,x=P+(R<<15&4294967295|R>>>17),R=w+(P^(x|~S))+N[13]+1309151649&4294967295,w=x+(R<<21&4294967295|R>>>11),R=S+(x^(w|~P))+N[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~x))+N[11]+3174756917&4294967295,P=S+(R<<10&4294967295|R>>>22),R=x+(S^(P|~w))+N[2]+718787259&4294967295,x=P+(R<<15&4294967295|R>>>17),R=w+(P^(x|~S))+N[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,O.g[2]=O.g[2]+x&4294967295,O.g[3]=O.g[3]+P&4294967295}r.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var w=S-this.blockSize,N=this.B,x=this.h,P=0;P<S;){if(x==0)for(;P<=w;)o(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<S;)if(N[x++]=O.charCodeAt(P++),x==this.blockSize){o(this,N),x=0;break}}else for(;P<S;)if(N[x++]=O[P++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var w=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=w&255,w/=256;for(this.u(O),O=Array(16),S=w=0;4>S;++S)for(var N=0;32>N;N+=8)O[w++]=this.g[S]>>>N&255;return O};function u(O,S){var w=m;return Object.prototype.hasOwnProperty.call(w,O)?w[O]:w[O]=S(O)}function h(O,S){this.h=S;for(var w=[],N=!0,x=O.length-1;0<=x;x--){var P=O[x]|0;N&&P==S||(w[x]=P,N=!1)}this.g=w}var m={};function g(O){return-128<=O&&128>O?u(O,function(S){return new h([S|0],0>S?-1:0)}):new h([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return Q(_(-O));for(var S=[],w=1,N=0;O>=w;N++)S[N]=O/w|0,w*=4294967296;return new h(S,0)}function T(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return Q(T(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(S,8)),N=b,x=0;x<O.length;x+=8){var P=Math.min(8,O.length-x),R=parseInt(O.substring(x,x+P),S);8>P?(P=_(Math.pow(S,P)),N=N.j(P).add(_(R))):(N=N.j(w),N=N.add(_(R)))}return N}var b=g(0),D=g(1),q=g(16777216);s=h.prototype,s.m=function(){if(W(this))return-Q(this).m();for(var O=0,S=1,w=0;w<this.g.length;w++){var N=this.i(w);O+=(0<=N?N:4294967296+N)*S,S*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if($(this))return"0";if(W(this))return"-"+Q(this).toString(O);for(var S=_(Math.pow(O,6)),w=this,N="";;){var x=At(w,S).g;w=Tt(w,x.j(S));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(O);if(w=x,$(w))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function $(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function W(O){return O.h==-1}s.l=function(O){return O=Tt(this,O),W(O)?-1:$(O)?0:1};function Q(O){for(var S=O.g.length,w=[],N=0;N<S;N++)w[N]=~O.g[N];return new h(w,~O.h).add(D)}s.abs=function(){return W(this)?Q(this):this},s.add=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],N=0,x=0;x<=S;x++){var P=N+(this.i(x)&65535)+(O.i(x)&65535),R=(P>>>16)+(this.i(x)>>>16)+(O.i(x)>>>16);N=R>>>16,P&=65535,R&=65535,w[x]=R<<16|P}return new h(w,w[w.length-1]&-2147483648?-1:0)};function Tt(O,S){return O.add(Q(S))}s.j=function(O){if($(this)||$(O))return b;if(W(this))return W(O)?Q(this).j(Q(O)):Q(Q(this).j(O));if(W(O))return Q(this.j(Q(O)));if(0>this.l(q)&&0>O.l(q))return _(this.m()*O.m());for(var S=this.g.length+O.g.length,w=[],N=0;N<2*S;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<O.g.length;x++){var P=this.i(N)>>>16,R=this.i(N)&65535,ze=O.i(x)>>>16,ce=O.i(x)&65535;w[2*N+2*x]+=R*ce,ft(w,2*N+2*x),w[2*N+2*x+1]+=P*ce,ft(w,2*N+2*x+1),w[2*N+2*x+1]+=R*ze,ft(w,2*N+2*x+1),w[2*N+2*x+2]+=P*ze,ft(w,2*N+2*x+2)}for(N=0;N<S;N++)w[N]=w[2*N+1]<<16|w[2*N];for(N=S;N<2*S;N++)w[N]=0;return new h(w,0)};function ft(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function st(O,S){this.g=O,this.h=S}function At(O,S){if($(S))throw Error("division by zero");if($(O))return new st(b,b);if(W(O))return S=At(Q(O),S),new st(Q(S.g),Q(S.h));if(W(S))return S=At(O,Q(S)),new st(Q(S.g),S.h);if(30<O.g.length){if(W(O)||W(S))throw Error("slowDivide_ only works with positive integers.");for(var w=D,N=S;0>=N.l(O);)w=lt(w),N=lt(N);var x=_t(w,1),P=_t(N,1);for(N=_t(N,2),w=_t(w,2);!$(N);){var R=P.add(N);0>=R.l(O)&&(x=x.add(w),P=R),N=_t(N,1),w=_t(w,1)}return S=Tt(O,x.j(S)),new st(x,S)}for(x=b;0<=O.l(S);){for(w=Math.max(1,Math.floor(O.m()/S.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=_(w),R=P.j(S);W(R)||0<R.l(O);)w-=N,P=_(w),R=P.j(S);$(P)&&(P=D),x=x.add(P),O=Tt(O,R)}return new st(x,O)}s.A=function(O){return At(this,O).h},s.and=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)&O.i(N);return new h(w,this.h&O.h)},s.or=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)|O.i(N);return new h(w,this.h|O.h)},s.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),w=[],N=0;N<S;N++)w[N]=this.i(N)^O.i(N);return new h(w,this.h^O.h)};function lt(O){for(var S=O.g.length+1,w=[],N=0;N<S;N++)w[N]=O.i(N)<<1|O.i(N-1)>>>31;return new h(w,O.h)}function _t(O,S){var w=S>>5;S%=32;for(var N=O.g.length-w,x=[],P=0;P<N;P++)x[P]=0<S?O.i(P+w)>>>S|O.i(P+w+1)<<32-S:O.i(P+w);return new h(x,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kE=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,zs=h}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,zl,LE,eh,Sm,zE,BE,qE;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function o(c,p){if(p)t:{var y=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var k=c[A];if(!(k in y))break t;y=y[k]}c=c[c.length-1],A=y[c],p=p(A),p!=A&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,A=!1,k={next:function(){if(!A&&y<c.length){var F=y++;return{value:p(F,c[F]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,y){return c.call.apply(c.bind,arguments)}function b(c,p,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),c.apply(p,k)}}return function(){return c.apply(p,arguments)}}function D(c,p,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:b,D.apply(null,arguments)}function q(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function $(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,k,F){for(var et=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)et[kt-2]=arguments[kt];return p.prototype[k].apply(A,et)}}function W(c){const p=c.length;if(0<p){const y=Array(p);for(let A=0;A<p;A++)y[A]=c[A];return y}return[]}function Q(c,p){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(g(A)){const k=c.length||0,F=A.length||0;c.length=k+F;for(let et=0;et<F;et++)c[k+et]=A[et]}else c.push(A)}}class Tt{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ft(c){return/^[\s\xa0]*$/.test(c)}function st(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function At(c){return At[" "](c),c}At[" "]=function(){};var lt=st().indexOf("Gecko")!=-1&&!(st().toLowerCase().indexOf("webkit")!=-1&&st().indexOf("Edge")==-1)&&!(st().indexOf("Trident")!=-1||st().indexOf("MSIE")!=-1)&&st().indexOf("Edge")==-1;function _t(c,p,y){for(const A in c)p.call(y,c[A],A,c)}function O(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function S(c){const p={};for(const y in c)p[y]=c[y];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,p){let y,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(y in A)c[y]=A[y];for(let F=0;F<w.length;F++)y=w[F],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function x(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function P(c){m.setTimeout(()=>{throw c},0)}function R(){var c=qt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ze{constructor(){this.h=this.g=null}add(p,y){const A=ce.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var ce=new Tt(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,dt=!1,qt=new ze,C=()=>{const c=m.Promise.resolve(void 0);nt=()=>{c.then(Z)}};var Z=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(y){P(y)}var p=ce;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}dt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function Vt(c,p){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(lt){t:{try{At(p.nodeName);var k=!0;break t}catch{}k=!1}k||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Vt.aa.h.call(this)}}$(Vt,tt);var bt={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),ee=0;function Qn(c,p,y,A,k){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=k,this.key=++ee,this.da=this.fa=!1}function Wi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gi(c){this.src=c,this.g={},this.h=0}gi.prototype.add=function(c,p,y,A,k){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var et=Yr(c,p,A,k);return-1<et?(p=c[et],y||(p.fa=!1)):(p=new Qn(p,this.src,F,!!A,k),p.fa=y,c.push(p)),p};function Qr(c,p){var y=p.type;if(y in c.g){var A=c.g[y],k=Array.prototype.indexOf.call(A,p,void 0),F;(F=0<=k)&&Array.prototype.splice.call(A,k,1),F&&(Wi(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Yr(c,p,y,A){for(var k=0;k<c.length;++k){var F=c[k];if(!F.da&&F.listener==p&&F.capture==!!y&&F.ha==A)return k}return-1}var Xr="closure_lm_"+(1e6*Math.random()|0),So={};function vu(c,p,y,A,k){if(Array.isArray(p)){for(var F=0;F<p.length;F++)vu(c,p[F],y,A,k);return null}return y=Tu(y),c&&c[Ne]?c.K(p,y,_(A)?!!A.capture:!1,k):Sn(c,p,y,!1,A,k)}function Sn(c,p,y,A,k,F){if(!p)throw Error("Invalid event type");var et=_(k)?!!k.capture:!!k,kt=na(c);if(kt||(c[Xr]=kt=new gi(c)),y=kt.add(p,y,A,et,F),y.proxy)return y;if(A=Jh(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)mt||(k=et),k===void 0&&(k=!1),c.addEventListener(p.toString(),A,k);else if(c.attachEvent)c.attachEvent($r(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Jh(){function c(y){return p.call(c.src,c.listener,y)}const p=Wh;return c}function Io(c,p,y,A,k){if(Array.isArray(p))for(var F=0;F<p.length;F++)Io(c,p[F],y,A,k);else A=_(A)?!!A.capture:!!A,y=Tu(y),c&&c[Ne]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],y=Yr(F,y,A,k),-1<y&&(Wi(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=na(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Yr(p,y,A,k)),(y=-1<c?p[c]:null)&&ea(y))}function ea(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ne])Qr(p.i,c);else{var y=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(y,A,c.capture):p.detachEvent?p.detachEvent($r(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=na(p))?(Qr(y,c),y.h==0&&(y.src=null,p[Xr]=null)):Wi(c)}}}function $r(c){return c in So?So[c]:So[c]="on"+c}function Wh(c,p){if(c.da)c=!0;else{p=new Vt(p,this);var y=c.listener,A=c.ha||c.src;c.fa&&ea(c),c=y.call(A,p)}return c}function na(c){return c=c[Xr],c instanceof gi?c:null}var wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tu(c){return typeof c=="function"?c:(c[wo]||(c[wo]=function(p){return c.handleEvent(p)}),c[wo])}function he(){it.call(this),this.i=new gi(this),this.M=this,this.F=null}$(he,it),he.prototype[Ne]=!0,he.prototype.removeEventListener=function(c,p,y,A){Io(this,c,p,y,A)};function Gt(c,p){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new tt(p,c);else if(p instanceof tt)p.target=p.target||c;else{var k=p;p=new tt(A,c),N(p,k)}if(k=!0,y)for(var F=y.length-1;0<=F;F--){var et=p.g=y[F];k=dn(et,A,!0,p)&&k}if(et=p.g=c,k=dn(et,A,!0,p)&&k,k=dn(et,A,!1,p)&&k,y)for(F=0;F<y.length;F++)et=p.g=y[F],k=dn(et,A,!1,p)&&k}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],A=0;A<y.length;A++)Wi(y[A]);delete c.g[p],c.h--}}this.F=null},he.prototype.K=function(c,p,y,A){return this.i.add(String(c),p,!1,y,A)},he.prototype.L=function(c,p,y,A){return this.i.add(String(c),p,!0,y,A)};function dn(c,p,y,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var k=!0,F=0;F<p.length;++F){var et=p[F];if(et&&!et.da&&et.capture==y){var kt=et.listener,Ie=et.ha||et.src;et.fa&&Qr(c.i,et),k=kt.call(Ie,A)!==!1&&k}}return k&&!A.defaultPrevented}function Qe(c,p,y){if(typeof c=="function")y&&(c=D(c,y));else if(c&&typeof c.handleEvent=="function")c=D(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Eu(c){c.g=Qe(()=>{c.g=null,c.i&&(c.i=!1,Eu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class tf extends it{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Eu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(c){it.call(this),this.h=c,this.g={}}$(Zr,it);var Jr=[];function Wr(c){_t(c.g,function(p,y){this.g.hasOwnProperty(y)&&ea(p)},c),c.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),Wr(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=m.JSON.stringify,ia=m.JSON.parse,ts=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ro(){}Ro.prototype.h=null;function Do(c){return c.h||(c.h=c.i())}function Co(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){tt.call(this,"d")}$(_i,tt);function Vo(){tt.call(this,"c")}$(Vo,tt);var Yn={},Oo=null;function tr(){return Oo=Oo||new he}Yn.La="serverreachability";function ra(c){tt.call(this,Yn.La,c)}$(ra,tt);function er(c){const p=tr();Gt(p,new ra(p))}Yn.STAT_EVENT="statevent";function Au(c,p){tt.call(this,Yn.STAT_EVENT,c),this.stat=p}$(Au,tt);function ie(c){const p=tr();Gt(p,new Au(p,c))}Yn.Ma="timingevent";function Se(c,p){tt.call(this,Yn.Ma,c),this.size=p}$(Se,tt);function ye(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function No(c,p,y,A,k,F){c.info(function(){if(c.g)if(F)for(var et="",kt=F.split("&"),Ie=0;Ie<kt.length;Ie++){var Ut=kt[Ie].split("=");if(1<Ut.length){var Me=Ut[0];Ut=Ut[1];var we=Me.split("_");et=2<=we.length&&we[1]=="type"?et+(Me+"="+Ut+"&"):et+(Me+"=redacted&")}}else et=null;else et=F;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+p+`
`+y+`
`+et})}function ef(c,p,y,A,k,F,et){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+p+`
`+y+`
`+F+" "+et})}function nr(c,p,y,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+es(c,y)+(A?" "+A:"")})}function bu(c,p){c.info(function(){return"TIMEOUT: "+p})}In.prototype.info=function(){};function es(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var F=k[0];if(F!="noop"&&F!="stop"&&F!="close")for(var et=1;et<k.length;et++)k[et]=""}}}}return Bn(y)}catch{return p}}var ir={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function $n(){}$($n,Ro),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Xn=new $n;function We(c,p,y,A){this.j=c,this.i=p,this.l=y,this.R=A||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}var xo={},sa={};function qn(c,p,y){c.L=1,c.v=as(mn(p)),c.m=y,c.P=!0,vi(c,null)}function vi(c,p){c.F=Date.now(),ns(c),c.A=mn(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),zo(y.i,"t",A),c.C=0,y=c.j.J,c.h=new ge,c.g=zu(c.j,y?p:null,!c.m),0<c.O&&(c.M=new tf(D(c.Y,c,c.g),c.O)),p=c.U,y=c.g,A=c.ca;var k="readystatechange";Array.isArray(k)||(k&&(Jr[0]=k.toString()),k=Jr);for(var F=0;F<k.length;F++){var et=vu(y,k[F],A||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),er(),No(c.i,c.u,c.A,c.l,c.R,c.m)}We.prototype.ca=function(c){c=c.target;const p=this.M;p&&Cn(c)==3?p.j():this.Y(c)},We.prototype.Y=function(c){try{if(c==this.g)t:{const we=Cn(this.g);var p=this.g.Ba();const Ri=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||we!=4||p==7||(p==8||0>=Ri?er(3):er(2)),rr(this);var y=this.g.Z();this.X=y;e:if(Su(this)){var A=Ou(this.g);c="";var k=A.length,F=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),Zn(this);var et="";break e}this.h.i=new m.TextDecoder}for(p=0;p<k;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(F&&p==k-1)});A.length=0,this.h.g+=c,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=y==200,ef(this.i,this.u,this.A,this.l,this.R,we,y),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Ie=this.g;if((kt=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(kt)){var Ut=kt;break e}}Ut=null}if(y=Ut)nr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,y);else{this.o=!1,this.s=3,ie(12),Be(this),Zn(this);break t}}if(this.P){y=!0;let qe;for(;!this.J&&this.C<et.length;)if(qe=Iu(this,et),qe==sa){we==4&&(this.s=4,ie(14),y=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==xo){this.s=4,ie(15),nr(this.i,this.l,et,"[Invalid Chunk]"),y=!1;break}else nr(this.i,this.l,qe,null),is(this,qe);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||et.length!=0||this.h.h||(this.s=1,ie(16),y=!1),this.o=this.o&&y,!y)nr(this.i,this.l,et,"[Invalid Chunked Response]"),Be(this),Zn(this);else if(0<et.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),ms(Me),Me.M=!0,ie(11))}}else nr(this.i,this.l,et,null),is(this,et);we==4&&Be(this),this.o&&!this.J&&(we==4?ku(this.j,this):(this.o=!1,ns(this)))}else of(this.g),y==400&&0<et.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Be(this),Zn(this)}}}catch{}finally{}};function Su(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Iu(c,p){var y=c.C,A=p.indexOf(`
`,y);return A==-1?sa:(y=Number(p.substring(y,A)),isNaN(y)?xo:(A+=1,A+y>p.length?sa:(p=p.slice(A,A+y),c.C=A+y,p)))}We.prototype.cancel=function(){this.J=!0,Be(this)};function ns(c){c.S=Date.now()+c.I,wu(c,c.I)}function wu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ye(D(c.ba,c),p)}function rr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}We.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(bu(this.i,this.A),this.L!=2&&(er(),ie(17)),Be(this),this.s=2,Zn(this)):wu(this,this.S-c)};function Zn(c){c.j.G==0||c.J||ku(c.j,c)}function Be(c){rr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Wr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function is(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||Mo(y.h,c))){if(!c.K&&Mo(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)_a(y),ga(y);else break t;Go(y),ie(18)}}else y.za=k[1],0<y.za-y.T&&37500>k[2]&&y.F&&y.v==0&&!y.C&&(y.C=ye(D(y.Za,y),6e3));if(1>=oa(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else wi(y,11)}else if((c.K||y.g==c)&&_a(y),!ft(p))for(k=y.Da.g.parse(p),p=0;p<k.length;p++){let Ut=k[p];if(y.T=Ut[0],Ut=Ut[1],y.G==2)if(Ut[0]=="c"){y.K=Ut[1],y.ia=Ut[2];const Me=Ut[3];Me!=null&&(y.la=Me,y.j.info("VER="+y.la));const we=Ut[4];we!=null&&(y.Aa=we,y.j.info("SVER="+y.Aa));const Ri=Ut[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(A=1.5*Ri,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const qe=c.g;if(qe){const ri=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ri){var F=A.h;F.g||ri.indexOf("spdy")==-1&&ri.indexOf("quic")==-1&&ri.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(la(F,F.h),F.h=null))}if(A.D){const Ko=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(A.ya=Ko,Yt(A.I,A.D,Ko))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var et=c;if(A.qa=Lu(A,A.J?A.ia:null,A.W),et.K){tn(A.h,et);var kt=et,Ie=A.L;Ie&&(kt.I=Ie),kt.B&&(rr(kt),ns(kt)),A.g=et}else Mu(A);0<y.i.length&&pa(y)}else Ut[0]!="stop"&&Ut[0]!="close"||wi(y,7);else y.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?wi(y,7):jo(y):Ut[0]!="noop"&&y.l&&y.l.ta(Ut),y.v=0)}}er(4)}catch{}}var Ru=class{constructor(c,p){this.g=c,this.map=p}};function Ti(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function oa(c){return c.h?1:c.g?c.g.size:0}function Mo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function la(c,p){c.g?c.g.add(p):c.h=p}function tn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Ti.prototype.cancel=function(){if(this.i=Po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Po(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return W(c.i)}function nf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,A=0;A<y;A++)p.push(c[A]);return p}p=[],y=0;for(A in c)p[y++]=c[A];return p}function ua(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const A in c)p[y++]=A;return p}}}function ko(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=ua(c),A=nf(c),k=A.length,F=0;F<k;F++)p.call(void 0,A[F],y&&y[F],c)}var rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rf(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),k=null;if(0<=A){var F=c[y].substring(0,A);k=c[y].substring(A+1)}else F=c[y];p(F,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ve(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ve){this.h=c.h,ss(this,c.j),this.o=c.o,this.g=c.g,sr(this,c.s),this.l=c.l;var p=c.i,y=new Ai;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Ei(this,y),this.m=c.m}else c&&(p=String(c).match(rs))?(this.h=!1,ss(this,p[1]||"",!0),this.o=wn(p[2]||""),this.g=wn(p[3]||"",!0),sr(this,p[4]),this.l=wn(p[5]||"",!0),Ei(this,p[6]||"",!0),this.m=wn(p[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}ve.prototype.toString=function(){var c=[],p=this.j;p&&c.push(os(p,Uo,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(os(p,Uo,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(os(y,y.charAt(0)=="/"?sf:Lo,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",os(y,ca)),c.join("")};function mn(c){return new ve(c)}function ss(c,p,y){c.j=y?wn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function sr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Ei(c,p,y){p instanceof Ai?(c.i=p,Cu(c.i,c.h)):(y||(p=os(p,af)),c.i=new Ai(p,c.h))}function Yt(c,p,y){c.i.set(p,y)}function as(c){return Yt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function wn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function os(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Du),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uo=/[#\/\?@]/g,Lo=/[#\?:]/g,sf=/[#\?]/g,af=/[#\?@]/g,ca=/#/g;function Ai(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Rn(c){c.g||(c.g=new Map,c.h=0,c.i&&rf(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=Ai.prototype,s.add=function(c,p){Rn(this),this.i=null,c=Jn(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function bi(c,p){Rn(c),p=Jn(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Si(c,p){return Rn(c),p=Jn(c,p),c.g.has(p)}s.forEach=function(c,p){Rn(this),this.g.forEach(function(y,A){y.forEach(function(k){c.call(p,k,A,this)},this)},this)},s.na=function(){Rn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let A=0;A<p.length;A++){const k=c[A];for(let F=0;F<k.length;F++)y.push(p[A])}return y},s.V=function(c){Rn(this);let p=[];if(typeof c=="string")Si(this,c)&&(p=p.concat(this.g.get(Jn(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},s.set=function(c,p){return Rn(this),this.i=null,c=Jn(this,c),Si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function zo(c,p,y){bi(c,p),0<y.length&&(c.i=null,c.g.set(Jn(c,p),W(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var A=p[y];const F=encodeURIComponent(String(A)),et=this.V(A);for(A=0;A<et.length;A++){var k=F;et[A]!==""&&(k+="="+encodeURIComponent(String(et[A]))),c.push(k)}}return this.i=c.join("&")};function Jn(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Cu(c,p){p&&!c.j&&(Rn(c),c.i=null,c.g.forEach(function(y,A){var k=A.toLowerCase();A!=k&&(bi(this,A),zo(this,k,y))},c)),c.j=p}function ls(c,p){const y=new In;if(m.Image){const A=new Image;A.onload=q(Dn,y,"TestLoadImage: loaded",!0,p,A),A.onerror=q(Dn,y,"TestLoadImage: error",!1,p,A),A.onabort=q(Dn,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=q(Dn,y,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function jn(c,p){const y=new In,A=new AbortController,k=setTimeout(()=>{A.abort(),Dn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(F=>{clearTimeout(k),F.ok?Dn(y,"TestPingServer: ok",!0,p):Dn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(k),Dn(y,"TestPingServer: error",!1,p)})}function Dn(c,p,y,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(y)}catch{}}function us(){this.g=new ts}function Wn(c,p,y){const A=y||"";try{ko(c,function(k,F){let et=k;_(k)&&(et=Bn(k)),p.push(A+F+"="+encodeURIComponent(et))})}catch(k){throw p.push(A+"type="+encodeURIComponent("_badmap")),k}}function ar(c){this.l=c.Ub||null,this.j=c.eb||!1}$(ar,Ro),ar.prototype.g=function(){return new Ii(this.l,this.j)},ar.prototype.i=function(c){return function(){return c}}({});function Ii(c,p){he.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ii,he),s=Ii.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ei(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ti(this):ei(this),this.readyState==3&&Bo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ti(this))},s.Qa=function(c){this.g&&(this.response=c,ti(this))},s.ga=function(){this.g&&ti(this)};function ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ei(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qo(c){let p="";return _t(c,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function xe(c,p,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=qo(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Yt(c,p,y))}function Ft(c){he.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Ft,he);var ha=/^https?$/i,cs=["POST","PUT"];s=Ft.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?Do(this.o):Do(Xn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){Vu(this,F);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)y.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())y.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),k=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(cs,p,void 0))||A||k||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,et]of y)this.g.setRequestHeader(F,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hs(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Vu(this,F)}};function Vu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,fa(c),ni(c)}function fa(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),ni(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),Ft.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},s.bb=function(){da(this)};function da(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Cn(c)!=4||c.Z()!=2)){if(c.u&&Cn(c)==4)Qe(c.Ea,0,c);else if(Gt(c,"readystatechange"),Cn(c)==4){c.h=!1;try{const et=c.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var A;if(A=et===0){var k=String(c.D).match(rs)[1]||null;!k&&m.self&&m.self.location&&(k=m.self.location.protocol.slice(0,-1)),A=!ha.test(k?k.toLowerCase():"")}y=A}if(y)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var F=2<Cn(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",fa(c)}}finally{ni(c)}}}}function ni(c,p){if(c.g){hs(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Gt(c,"ready");try{y.onreadystatechange=A}catch{}}}function hs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Cn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ia(p)}};function Ou(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function of(c){const p={};c=(c.g&&2<=Cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ft(c[A]))continue;var y=x(c[A]);const k=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=p[k]||[];p[k]=F,F.push(y)}O(p,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function ma(c){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fs("baseRetryDelayMs",5e3,c),this.cb=fs("retryDelaySeedMs",1e4,c),this.Wa=fs("forwardChannelMaxRetries",2,c),this.wa=fs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(c&&c.concurrentRequestLimit),this.Da=new us,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ma.prototype,s.la=8,s.G=1,s.connect=function(c,p,y,A){ie(0),this.W=c,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Lu(this,null,this.W),pa(this)};function jo(c){if(Nu(c),c.G==3){var p=c.U++,y=mn(c.I);if(Yt(y,"SID",c.K),Yt(y,"RID",p),Yt(y,"TYPE","terminate"),ds(c,y),p=new We(c,c.j,p),p.L=2,p.v=as(mn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=zu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ns(p)}Uu(c)}function ga(c){c.g&&(ms(c),c.g.cancel(),c.g=null)}function Nu(c){ga(c),c.u&&(m.clearTimeout(c.u),c.u=null),_a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function pa(c){if(!aa(c.h)&&!c.s){c.s=!0;var p=c.Ga;nt||C(),dt||(nt(),dt=!0),qt.add(p,c),c.B=0}}function lf(c,p){return oa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ye(D(c.Ga,c,p),Ho(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const k=new We(this,this.j,c);let F=this.o;if(this.S&&(F?(F=S(F),N(F,this.S)):F=this.S),this.m!==null||this.O||(k.H=F,F=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=xu(this,k,p),y=mn(this.I),Yt(y,"RID",c),Yt(y,"CVER",22),this.D&&Yt(y,"X-HTTP-Session-Id",this.D),ds(this,y),F&&(this.O?p="headers="+encodeURIComponent(String(qo(F)))+"&"+p:this.m&&xe(y,this.m,F)),la(this.h,k),this.Ua&&Yt(y,"TYPE","init"),this.P?(Yt(y,"$req",p),Yt(y,"SID","null"),k.T=!0,qn(k,y,null)):qn(k,y,p),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||aa(this.h)||Fo(this))};function Fo(c,p){var y;p?y=p.l:y=c.U++;const A=mn(c.I);Yt(A,"SID",c.K),Yt(A,"RID",y),Yt(A,"AID",c.T),ds(c,A),c.m&&c.o&&xe(A,c.m,c.o),y=new We(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=xu(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),la(c.h,y),qn(y,A,p)}function ds(c,p){c.H&&_t(c.H,function(y,A){Yt(p,A,y)}),c.l&&ko({},function(y,A){Yt(p,A,y)})}function xu(c,p,y){y=Math.min(c.i.length,y);var A=c.l?D(c.l.Na,c.l,c):null;t:{var k=c.i;let F=-1;for(;;){const et=["count="+y];F==-1?0<y?(F=k[0].g,et.push("ofs="+F)):F=0:et.push("ofs="+F);let kt=!0;for(let Ie=0;Ie<y;Ie++){let Ut=k[Ie].g;const Me=k[Ie].map;if(Ut-=F,0>Ut)F=Math.max(0,k[Ie].g-100),kt=!1;else try{Wn(Me,et,"req"+Ut+"_")}catch{A&&A(Me)}}if(kt){A=et.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,A}function Mu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;nt||C(),dt||(nt(),dt=!0),qt.add(p,c),c.v=0}}function Go(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ye(D(c.Fa,c),Ho(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ye(D(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),ga(this),Pu(this))};function ms(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Pu(c){c.g=new We(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=mn(c.qa);Yt(p,"RID","rpc"),Yt(p,"SID",c.K),Yt(p,"AID",c.T),Yt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Yt(p,"TO",c.ja),Yt(p,"TYPE","xmlhttp"),ds(c,p),c.m&&c.o&&xe(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=as(mn(p)),y.m=null,y.P=!0,vi(y,c)}s.Za=function(){this.C!=null&&(this.C=null,ga(this),Go(this),ie(19))};function _a(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ku(c,p){var y=null;if(c.g==p){_a(c),ms(c),c.g=null;var A=2}else if(Mo(c.h,p))y=p.D,tn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var k=c.B;A=tr(),Gt(A,new Se(A,y)),pa(c)}else Mu(c);else if(k=p.s,k==3||k==0&&0<p.X||!(A==1&&lf(c,p)||A==2&&Go(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),k){case 1:wi(c,5);break;case 4:wi(c,10);break;case 3:wi(c,6);break;default:wi(c,2)}}}function Ho(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function wi(c,p){if(c.j.info("Error code "+p),p==2){var y=D(c.fb,c),A=c.Xa;const k=!A;A=new ve(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ss(A,"https"),as(A),k?ls(A.toString(),y):jn(A.toString(),y)}else ie(2);c.G=0,c.l&&c.l.sa(p),Uu(c),Nu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function Uu(c){if(c.G=0,c.ka=[],c.l){const p=Po(c.h);(p.length!=0||c.i.length!=0)&&(Q(c.ka,p),Q(c.ka,c.i),c.h.i.length=0,W(c.i),c.i.length=0),c.l.ra()}}function Lu(c,p,y){var A=y instanceof ve?mn(y):new ve(y);if(A.g!="")p&&(A.g=p+"."+A.g),sr(A,A.s);else{var k=m.location;A=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;var F=new ve(null);A&&ss(F,A),p&&(F.g=p),k&&sr(F,k),y&&(F.l=y),A=F}return y=c.D,p=c.ya,y&&p&&Yt(A,y,p),Yt(A,"VER",c.la),ds(c,A),A}function zu(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ft(new ar({eb:y})):new Ft(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}s=Bu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ya(){}ya.prototype.g=function(c,p){return new en(c,p)};function en(c,p){he.call(this),this.g=new ma(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!ft(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ft(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ii(this)}$(en,he),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){jo(this.g)},en.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Bn(c),c=y);p.i.push(new Ru(p.Ya++,c)),p.G==3&&pa(p)},en.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,en.aa.N.call(this)};function qu(c){_i.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}$(qu,_i);function ju(){Vo.call(this),this.status=1}$(ju,Vo);function ii(c){this.g=c}$(ii,Bu),ii.prototype.ua=function(){Gt(this.g,"a")},ii.prototype.ta=function(c){Gt(this.g,new qu(c))},ii.prototype.sa=function(c){Gt(this.g,new ju)},ii.prototype.ra=function(){Gt(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,qE=function(){return new ya},BE=function(){return tr()},zE=Yn,Sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,eh=ir,yi.COMPLETE="complete",LE=yi,Co.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",he.prototype.listen=he.prototype.K,zl=Co,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,UE=Ft}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const kv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Hm("@firebase/firestore");function Za(){return Fs.logLevel}function J(s,...t){if(Fs.logLevel<=Mt.DEBUG){const e=t.map(sg);Fs.debug(`Firestore (${Eo}): ${s}`,...e)}}function rn(s,...t){if(Fs.logLevel<=Mt.ERROR){const e=t.map(sg);Fs.error(`Firestore (${Eo}): ${s}`,...e)}}function Gs(s,...t){if(Fs.logLevel<=Mt.WARN){const e=t.map(sg);Fs.warn(`Firestore (${Eo}): ${s}`,...e)}}function sg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(s="Unexpected state"){const t=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+s;throw rn(t),new Error(t)}function ht(s,t){s||ut()}function It(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Zi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class t1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(He.UNAUTHENTICATED))}shutdown(){}}class e1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class n1{constructor(t){this.t=t,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ht(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qi,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qi)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string"),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string"),new He(t)}}class i1{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r1{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new i1(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){ht(this.o===void 0);const r=u=>{u.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,J("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ht(typeof e.token=="string"),this.R=e.token,new s1(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const o=o1(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%t.length))}return r}}function wt(s,t){return s<t?-1:s>t?1:0}function uo(s,t,e){return s.length===t.length&&s.every((r,o)=>e(r,t[o]))}function GE(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new at(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new at(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new at(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ue.fromMillis(Date.now())}static fromDate(t){return ue.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new ue(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new gt(t)}static min(){return new gt(new ue(0,0))}static max(){return new gt(new ue(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,e,r){e===void 0?e=0:e>t.length&&ut(),r===void 0?r=t.length-e:r>t.length-e&&ut(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Zl.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Zl?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=t.get(o),h=e.get(o);if(u<h)return-1;if(u>h)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Qt extends Zl{construct(t,e,r){return new Qt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new at(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new Qt(e)}static emptyPath(){return new Qt([])}}const l1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends Zl{construct(t,e,r){return new le(t,e,r)}static isValidIdentifier(t){return l1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new le(["__name__"])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new at(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new at(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new at(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new at(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new le(e)}static emptyPath(){return new le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Qt.fromString(t))}static fromName(t){return new rt(Qt.fromString(t).popFirst(5))}static empty(){return new rt(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Qt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Im(s){return s.fields.find(t=>t.kind===2)}function Ns(s){return s.fields.filter(t=>t.kind!==2)}yh.UNKNOWN_ID=-1;class nh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Jl{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Jl(0,bn.min())}}function u1(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=gt.fromTimestamp(r===1e9?new ue(e+1,0):new ue(e,r));return new bn(o,rt.empty(),t)}function HE(s){return new bn(s.readTime,s.key,-1)}class bn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new bn(gt.min(),rt.empty(),-1)}static max(){return new bn(gt.max(),rt.empty(),-1)}}function ag(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(s.documentKey,t.documentKey),e!==0?e:wt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==KE)throw s;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new z((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof z?e:z.resolve(e)}catch(e){return z.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):z.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):z.reject(e)}static resolve(t){return new z((e,r)=>{e(t)})}static reject(t){return new z((e,r)=>{r(t)})}static waitFor(t){return new z((e,r)=>{let o=0,u=0,h=!1;t.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&e()},g=>r(g))}),h=!0,u===o&&e()})}static or(t){let e=z.resolve(!1);for(const r of t)e=e.next(o=>o?z.resolve(o):r());return e}static forEach(t,e){const r=[];return t.forEach((o,u)=>{r.push(e.call(this,o,u))}),this.waitFor(r)}static mapArray(t,e){return new z((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;e(t[_]).next(T=>{h[_]=T,++m,m===u&&r(h)},T=>o(T))}})}static doWhile(t,e){return new z((r,o)=>{const u=()=>{t()===!0?e().next(()=>{u()},o):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Qi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Gl(t,e.error)):this.V.resolve()},this.transaction.onerror=r=>{const o=og(r.target.error);this.V.reject(new Gl(t,o))}}static open(t,e,r,o){try{return new Mh(e,t.transaction(o,r))}catch(u){throw new Gl(e,u)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(J("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new h1(e)}}class zr{constructor(t,e,r){this.name=t,this.version=e,this.p=r,zr.S(Ve())===12.2&&rn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return J("SimpleDb","Removing database:",t),xs(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!$T())return!1;if(zr.v())return!0;const t=Ve(),e=zr.S(t),r=0<e&&e<10,o=YE(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(t){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;e(h)},o.onblocked=()=>{r(new Gl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new at(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new at(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new Gl(t,h))},o.onupgradeneeded=u=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.p.O(h,o.transaction,u.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.M(t);const m=Mh.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next(_=>(m.g(),_)).catch(_=>(m.abort(_),z.reject(_))).toPromise();return g.catch(()=>{}),await m.m,g}catch(m){const g=m,_=g.name!=="FirebaseError"&&h<3;if(J("SimpleDb","Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YE(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class c1{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return xs(this.B.delete())}}class Gl extends at{constructor(t,e){super(X.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Hr(s){return s.name==="IndexedDbTransactionError"}class h1{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(J("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),xs(r)}add(t){return J("SimpleDb","ADD",this.store.name,t,t),xs(this.store.add(t))}get(t){return xs(this.store.get(t)).next(e=>(e===void 0&&(e=null),J("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return J("SimpleDb","DELETE",this.store.name,t),xs(this.store.delete(t))}count(){return J("SimpleDb","COUNT",this.store.name),xs(this.store.count())}U(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new z((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}})}{const u=this.cursor(r),h=[];return this.W(u,(m,g)=>{h.push(g)}).next(()=>h)}}G(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new z((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}j(t,e){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.H=!1;const o=this.cursor(r);return this.W(o,(u,h,m)=>m.delete())}J(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.W(o,e)}Y(t){const e=this.cursor({});return new z((r,o)=>{e.onerror=u=>{const h=og(u.target.error);o(h)},e.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}W(t,e){const r=[];return new z((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new c1(m),_=e(m.primaryKey,m.value,g);if(_ instanceof z){const T=_.catch(b=>(g.done(),z.reject(b)));r.push(T)}g.isDone?o():g.K===null?m.continue():m.continue(g.K)}}).next(()=>z.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.H?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function xs(s){return new z((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=og(r.target.error);e(o)}})}let Uv=!1;function og(s){const t=zr.S(Ve());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Uv||(Uv=!0,setTimeout(()=>{throw r},0)),r}}return s}class f1{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){J("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Hr(e)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Js(e)}await this.X(6e4)})}}class d1{constructor(t,e){this.localStore=t,this.persistence=e}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))}te(t,e){const r=new Set;let o=e,u=!0;return z.doWhile(()=>u===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(h=>{if(h!==null&&!r.has(h))return J("IndexBackfiller",`Processing collection: ${h}`),this.ne(t,h,o).next(m=>{o-=m,r.add(h)});u=!1})).next(()=>e-o)}ne(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next(()=>this.re(o,u)).next(m=>(J("IndexBackfiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m))).next(()=>h.size)}))}re(t,e){let r=t;return e.changes.forEach((o,u)=>{const h=HE(u);ag(h,r)>0&&(r=h)}),new bn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ie(r),this.se=r=>e.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Un.oe=-1;function Ph(s){return s==null}function Wl(s){return s===0&&1/s==-1/0}function m1(s){return typeof s=="number"&&Number.isInteger(s)&&!Wl(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=Lv(t)),t=g1(s.get(e),t);return Lv(t)}function g1(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case"":e+="";break;default:e+=u}}return e}function Lv(s){return s+""}function ci(s){const t=s.length;if(ht(t>=2),t===2)return ht(s.charAt(0)===""&&s.charAt(1)===""),Qt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf("",u);switch((h<0||h>e)&&ut(),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:ut()}u=h+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(s,t){return[s,sn(t)]}function XE(s,t,e){return[s,sn(t),e]}const p1={},_1=["prefixPath","collectionGroup","readTime","documentId"],y1=["prefixPath","collectionGroup","documentId"],v1=["collectionGroup","readTime","prefixPath","documentId"],T1=["canonicalId","targetId"],E1=["targetId","path"],A1=["path","targetId"],b1=["collectionId","parent"],S1=["indexId","uid"],I1=["uid","sequenceNumber"],w1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R1=["indexId","uid","orderedDocumentKey"],D1=["userId","collectionPath","documentId"],C1=["userId","collectionPath","largestBatchId"],V1=["userId","collectionGroup","largestBatchId"],$E=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O1=[...$E,"documentOverlays"],ZE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JE=ZE,lg=[...JE,"indexConfiguration","indexState","indexEntries"],N1=lg,x1=[...lg,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends QE{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Oe(s,t){const e=It(s);return zr.F(e._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Ws(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function WE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,e){this.comparator=t,this.root=e||Ke.EMPTY}insert(t,e){return new ae(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hc(this.root,t,this.comparator,!0)}}class Hc{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ke.RED,this.left=o??Ke.EMPTY,this.right=u??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ke(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ke.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ke(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(t){return new qv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Wt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Wt(this.comparator);return e.data=t,e}}class qv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qa(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.fields=t,t.sort(le.comparator)}static empty(){return new hn([])}unionWith(t){let e=new Wt(le.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new hn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return uo(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new t0("Invalid base64 string: "+u):u}}(t);return new be(e)}static fromUint8Array(t){const e=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new be(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}be.EMPTY_BYTE_STRING=new be("");const M1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(s){if(ht(!!s),typeof s=="string"){let t=0;const e=M1.exec(s);if(ht(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:se(s.seconds),nanos:se(s.nanos)}}function se(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function qr(s){return typeof s=="string"?be.fromBase64String(s):be.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function cg(s){const t=s.mapValue.fields.__previous_value__;return ug(t)?cg(t):t}function tu(s){const t=$i(s.mapValue.fields.__local_write_time__.timestampValue);return new ue(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t,e,r,o,u,h,m,g,_){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}class Hs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Hs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Hs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rh={nullValue:"NULL_VALUE"};function Ks(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ug(s)?4:e0(s)?9007199254740991:kh(s)?10:11:ut()}function mi(s,t){if(s===t)return!0;const e=Ks(s);if(e!==Ks(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return tu(s).isEqual(tu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=$i(o.timestampValue),m=$i(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(o,u){return qr(o.bytesValue).isEqual(qr(u.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(o,u){return se(o.geoPointValue.latitude)===se(u.geoPointValue.latitude)&&se(o.geoPointValue.longitude)===se(u.geoPointValue.longitude)}(s,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return se(o.integerValue)===se(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=se(o.doubleValue),m=se(u.doubleValue);return h===m?Wl(h)===Wl(m):isNaN(h)&&isNaN(m)}return!1}(s,t);case 9:return uo(s.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Bv(h)!==Bv(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!mi(h[g],m[g])))return!1;return!0}(s,t);default:return ut()}}function eu(s,t){return(s.values||[]).find(e=>mi(e,t))!==void 0}function jr(s,t){if(s===t)return 0;const e=Ks(s),r=Ks(t);if(e!==r)return wt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(s.booleanValue,t.booleanValue);case 2:return function(u,h){const m=se(u.integerValue||u.doubleValue),g=se(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,t);case 3:return jv(s.timestampValue,t.timestampValue);case 4:return jv(tu(s),tu(t));case 5:return wt(s.stringValue,t.stringValue);case 6:return function(u,h){const m=qr(u),g=qr(h);return m.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const T=wt(m[_],g[_]);if(T!==0)return T}return wt(m.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(u,h){const m=wt(se(u.latitude),se(h.latitude));return m!==0?m:wt(se(u.longitude),se(h.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return Fv(s.arrayValue,t.arrayValue);case 10:return function(u,h){var m,g,_,T;const b=u.fields||{},D=h.fields||{},q=(m=b.value)===null||m===void 0?void 0:m.arrayValue,$=(g=D.value)===null||g===void 0?void 0:g.arrayValue,W=wt(((_=q==null?void 0:q.values)===null||_===void 0?void 0:_.length)||0,((T=$==null?void 0:$.values)===null||T===void 0?void 0:T.length)||0);return W!==0?W:Fv(q,$)}(s.mapValue,t.mapValue);case 11:return function(u,h){if(u===Pr.mapValue&&h===Pr.mapValue)return 0;if(u===Pr.mapValue)return 1;if(h===Pr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let b=0;b<g.length&&b<T.length;++b){const D=wt(g[b],T[b]);if(D!==0)return D;const q=jr(m[g[b]],_[T[b]]);if(q!==0)return q}return wt(g.length,T.length)}(s.mapValue,t.mapValue);default:throw ut()}}function jv(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return wt(s,t);const e=$i(s),r=$i(t),o=wt(e.seconds,r.seconds);return o!==0?o:wt(e.nanos,r.nanos)}function Fv(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=jr(e[o],r[o]);if(u)return u}return wt(e.length,r.length)}function co(s){return Rm(s)}function Rm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=$i(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return qr(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return rt.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Rm(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Rm(e.fields[h])}`;return o+"}"}(s.mapValue):ut()}function hg(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Dm(s){return!!s&&"integerValue"in s}function nu(s){return!!s&&"arrayValue"in s}function Gv(s){return!!s&&"nullValue"in s}function Hv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sh(s){return!!s&&"mapValue"in s}function kh(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Hl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Ws(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Hl(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Hl(s.arrayValue.values[e]);return t}return Object.assign({},s)}function e0(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const n0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function k1(s){return"nullValue"in s?rh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?hg(Hs.empty(),rt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?kh(s)?n0:{mapValue:{}}:ut()}function U1(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?hg(Hs.empty(),rt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?n0:"mapValue"in s?kh(s)?{mapValue:{}}:Pr:ut()}function Kv(s,t){const e=jr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function Qv(s,t){const e=jr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.value=t}static empty(){return new Ze({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!sh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hl(e)}setAll(t){let e=le.emptyPath(),r={},o=[];t.forEach((h,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}h?r[m.lastSegment()]=Hl(h):o.push(m.lastSegment())});const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());sh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return mi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Ws(e,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new Ze(Hl(this.value))}}function i0(s){const t=[];return Ws(s.fields,(e,r)=>{const o=new le([e]);if(sh(r)){const u=i0(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new hn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,e,r,o,u,h,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new me(t,0,gt.min(),gt.min(),gt.min(),Ze.empty(),0)}static newFoundDocument(t,e,r,o){return new me(t,1,e,gt.min(),r,o,0)}static newNoDocument(t,e){return new me(t,2,e,gt.min(),gt.min(),Ze.empty(),0)}static newUnknownDocument(t,e){return new me(t,3,e,gt.min(),gt.min(),Ze.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ze.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof me&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,e){this.position=t,this.inclusive=e}}function Yv(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=rt.comparator(rt.fromName(h.referenceValue),e.key):r=jr(h,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!mi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,e="asc"){this.field=t,this.dir=e}}function L1(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{}class Pt extends r0{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new z1(t,e,r):e==="array-contains"?new j1(t,r):e==="in"?new c0(t,r):e==="not-in"?new F1(t,r):e==="array-contains-any"?new G1(t,r):new Pt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new B1(t,r):new q1(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(jr(e,this.value)):e!==null&&Ks(this.value)===Ks(e)&&this.matchesComparison(jr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends r0{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Jt(t,e)}matches(t){return fo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fo(s){return s.op==="and"}function Cm(s){return s.op==="or"}function fg(s){return s0(s)&&fo(s)}function s0(s){for(const t of s.filters)if(t instanceof Jt)return!1;return!0}function Vm(s){if(s instanceof Pt)return s.field.canonicalString()+s.op.toString()+co(s.value);if(fg(s))return s.filters.map(t=>Vm(t)).join(",");{const t=s.filters.map(e=>Vm(e)).join(",");return`${s.op}(${t})`}}function a0(s,t){return s instanceof Pt?function(r,o){return o instanceof Pt&&r.op===o.op&&r.field.isEqual(o.field)&&mi(r.value,o.value)}(s,t):s instanceof Jt?function(r,o){return o instanceof Jt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,m)=>u&&a0(h,o.filters[m]),!0):!1}(s,t):void ut()}function o0(s,t){const e=s.filters.concat(t);return Jt.create(e,s.op)}function l0(s){return s instanceof Pt?function(e){return`${e.field.canonicalString()} ${e.op} ${co(e.value)}`}(s):s instanceof Jt?function(e){return e.op.toString()+" {"+e.getFilters().map(l0).join(" ,")+"}"}(s):"Filter"}class z1 extends Pt{constructor(t,e,r){super(t,e,r),this.key=rt.fromName(r.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class B1 extends Pt{constructor(t,e){super(t,"in",e),this.keys=u0("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class q1 extends Pt{constructor(t,e){super(t,"not-in",e),this.keys=u0("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function u0(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>rt.fromName(r.referenceValue))}class j1 extends Pt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return nu(e)&&eu(e.arrayValue,this.value)}}class c0 extends Pt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&eu(this.value.arrayValue,e)}}class F1 extends Pt{constructor(t,e){super(t,"not-in",e)}matches(t){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!eu(this.value.arrayValue,e)}}class G1 extends Pt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!nu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>eu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t,e=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function Om(s,t=null,e=[],r=[],o=null,u=null,h=null){return new H1(s,t,e,r,o,u,h)}function Qs(s){const t=It(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Vm(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Ph(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>co(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>co(r)).join(",")),t.ue=e}return t.ue}function fu(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!L1(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!a0(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Xv(s.startAt,t.startAt)&&Xv(s.endAt,t.endAt)}function Th(s){return rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Eh(s,t){return s.filters.filter(e=>e instanceof Pt&&e.field.isEqual(t))}function $v(s,t,e){let r=rh,o=!0;for(const u of Eh(s,t)){let h=rh,m=!0;switch(u.op){case"<":case"<=":h=k1(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=rh}Kv({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];Kv({value:r,inclusive:o},{value:h,inclusive:e.inclusive})<0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}function Zv(s,t,e){let r=Pr,o=!0;for(const u of Eh(s,t)){let h=Pr,m=!0;switch(u.op){case">=":case">":h=U1(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Pr}Qv({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];Qv({value:r,inclusive:o},{value:h,inclusive:e.inclusive})>0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,e=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function K1(s,t,e,r,o,u,h,m){return new Uh(s,t,e,r,o,u,h,m)}function dg(s){return new Uh(s)}function Jv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Q1(s){return s.collectionGroup!==null}function Kl(s){const t=It(s);if(t.ce===null){t.ce=[];const e=new Set;for(const u of t.explicitOrderBy)t.ce.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Wt(le.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{e.has(u.canonicalString())||u.isKeyField()||t.ce.push(new vh(u,r))}),e.has(le.keyField().canonicalString())||t.ce.push(new vh(le.keyField(),r))}return t.ce}function Ln(s){const t=It(s);return t.le||(t.le=Y1(t,Kl(s))),t.le}function Y1(s,t){if(s.limitType==="F")return Om(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new vh(o.field,u)});const e=s.endAt?new ho(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ho(s.startAt.position,s.startAt.inclusive):null;return Om(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function Nm(s,t,e){return new Uh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function Lh(s,t){return fu(Ln(s),Ln(t))&&s.limitType===t.limitType}function h0(s){return`${Qs(Ln(s))}|lt:${s.limitType}`}function Ja(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(o=>l0(o)).join(", ")}]`),Ph(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>co(o)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>co(o)).join(",")),`Target(${r})`}(Ln(s))}; limitType=${s.limitType})`}function du(s,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):rt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,t)&&function(r,o){for(const u of Kl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,t)&&function(r,o){return!(r.startAt&&!function(h,m,g){const _=Yv(h,m,g);return h.inclusive?_<=0:_<0}(r.startAt,Kl(r),o)||r.endAt&&!function(h,m,g){const _=Yv(h,m,g);return h.inclusive?_>=0:_>0}(r.endAt,Kl(r),o))}(s,t)}function X1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function f0(s){return(t,e)=>{let r=!1;for(const o of Kl(s)){const u=$1(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function $1(s,t,e){const r=s.field.isKeyField()?rt.comparator(t.key,e.key):function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?jr(g,_):ut()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ws(this.inner,(e,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new ae(rt.comparator);function An(){return Z1}const d0=new ae(rt.comparator);function Bl(...s){let t=d0;for(const e of s)t=t.insert(e.key,e);return t}function m0(s){let t=d0;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function hi(){return Ql()}function g0(){return Ql()}function Ql(){return new Kr(s=>s.toString(),(s,t)=>s.isEqual(t))}const J1=new ae(rt.comparator),W1=new Wt(rt.comparator);function Ct(...s){let t=W1;for(const e of s)t=t.add(e);return t}const tD=new Wt(wt);function eD(){return tD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(t)?"-0":t}}function p0(s){return{integerValue:""+s}}function nD(s,t){return m1(t)?p0(t):mg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function iD(s,t,e){return s instanceof iu?function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ug(u)&&(u=cg(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(e,t):s instanceof mo?y0(s,t):s instanceof go?v0(s,t):function(o,u){const h=_0(o,u),m=Wv(h)+Wv(o.Pe);return Dm(h)&&Dm(o.Pe)?p0(m):mg(o.serializer,m)}(s,t)}function rD(s,t,e){return s instanceof mo?y0(s,t):s instanceof go?v0(s,t):e}function _0(s,t){return s instanceof ru?function(r){return Dm(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class iu extends zh{}class mo extends zh{constructor(t){super(),this.elements=t}}function y0(s,t){const e=T0(t);for(const r of s.elements)e.some(o=>mi(o,r))||e.push(r);return{arrayValue:{values:e}}}class go extends zh{constructor(t){super(),this.elements=t}}function v0(s,t){let e=T0(t);for(const r of s.elements)e=e.filter(o=>!mi(o,r));return{arrayValue:{values:e}}}class ru extends zh{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Wv(s){return se(s.integerValue||s.doubleValue)}function T0(s){return nu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t,e){this.field=t,this.transform=e}}function aD(s,t){return s.field.isEqual(t.field)&&function(r,o){return r instanceof mo&&o instanceof mo||r instanceof go&&o instanceof go?uo(r.elements,o.elements,mi):r instanceof ru&&o instanceof ru?mi(r.Pe,o.Pe):r instanceof iu&&o instanceof iu}(s.transform,t.transform)}class oD{constructor(t,e){this.version=t,this.transformResults=e}}class fn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new fn}static exists(t){return new fn(void 0,t)}static updateTime(t){return new fn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ah(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Bh{}function E0(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new gg(s.key,fn.none()):new Ao(s.key,s.data,fn.none());{const e=s.data,r=Ze.empty();let o=new Wt(le.comparator);for(let u of t.fields)if(!o.has(u)){let h=e.field(u);h===null&&u.length>1&&(u=u.popLast(),h=e.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new Ji(s.key,r,new hn(o.toArray()),fn.none())}}function lD(s,t,e){s instanceof Ao?function(o,u,h){const m=o.value.clone(),g=eT(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,t,e):s instanceof Ji?function(o,u,h){if(!ah(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=eT(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(A0(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,t,e):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function Yl(s,t,e,r){return s instanceof Ao?function(u,h,m,g){if(!ah(u.precondition,h))return m;const _=u.value.clone(),T=nT(u.fieldTransforms,g,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,t,e,r):s instanceof Ji?function(u,h,m,g){if(!ah(u.precondition,h))return m;const _=nT(u.fieldTransforms,g,h),T=h.data;return T.setAll(A0(u)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(s,t,e,r):function(u,h,m){return ah(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,t,e)}function uD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=_0(r.transform,o||null);u!=null&&(e===null&&(e=Ze.empty()),e.set(r.field,u))}return e||null}function tT(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&uo(r,o,(u,h)=>aD(u,h))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Ao extends Bh{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ji extends Bh{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function A0(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function eT(s,t,e){const r=new Map;ht(s.length===e.length);for(let o=0;o<e.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,rD(h,m,e[o]))}return r}function nT(s,t,e){const r=new Map;for(const o of s){const u=o.transform,h=e.data.field(o.field);r.set(o.field,iD(u,h,t))}return r}class gg extends Bh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b0 extends Bh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&lD(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Yl(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Yl(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=g0();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=e.has(o.key)?null:m;const g=E0(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ct())}isEqual(t){return this.batchId===t.batchId&&uo(this.mutations,t.mutations,(e,r)=>tT(e,r))&&uo(this.baseMutations,t.baseMutations,(e,r)=>tT(e,r))}}class _g{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ht(t.mutations.length===r.length);let o=function(){return J1}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new _g(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,zt;function hD(s){switch(s){default:return ut();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function S0(s){if(s===void 0)return rn("GRPC error has no .code"),X.UNKNOWN;switch(s){case Ae.OK:return X.OK;case Ae.CANCELLED:return X.CANCELLED;case Ae.UNKNOWN:return X.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return X.INTERNAL;case Ae.UNAVAILABLE:return X.UNAVAILABLE;case Ae.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ae.NOT_FOUND:return X.NOT_FOUND;case Ae.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ae.ABORTED:return X.ABORTED;case Ae.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ae.DATA_LOSS:return X.DATA_LOSS;default:return ut()}}(zt=Ae||(Ae={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new zs([4294967295,4294967295],0);function iT(s){const t=fD().encode(s),e=new kE;return e.update(t),new Uint8Array(e.digest())}function rT(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new zs([e,r],0),new zs([o,u],0)]}class vg{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new ql(`Invalid padding: ${e}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new ql(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=zs.fromNumber(this.Ie)}Ee(t,e,r){let o=t.add(e.multiply(zs.fromNumber(r)));return o.compare(dD)===1&&(o=new zs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=iT(t),[r,o]=rT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ee(r,o,u);if(!this.de(h))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new vg(u,o,e);return r.forEach(m=>h.insert(m)),h}insert(t){if(this.Ie===0)return;const e=iT(t),[r,o]=rT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ee(r,o,u);this.Ae(h)}}Ae(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,mu.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new qh(gt.min(),o,new ae(wt),An(),Ct())}}class mu{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new mu(r,e,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,e,r,o){this.Re=t,this.removedTargetIds=e,this.key=r,this.Ve=o}}class I0{constructor(t,e){this.targetId=t,this.me=e}}class w0{constructor(t,e,r=be.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class sT{constructor(){this.fe=0,this.ge=oT(),this.pe=be.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ct(),e=Ct(),r=Ct();return this.ge.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ut()}}),new mu(this.pe,this.ye,t,e,r)}Ce(){this.we=!1,this.ge=oT()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mD{constructor(t){this.Le=t,this.Be=new Map,this.ke=An(),this.qe=aT(),this.Qe=new ae(wt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const r=this.Ge(e);switch(t.state){case 0:this.ze(e)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),r.De(t.resumeToken));break;default:ut()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((r,o)=>{this.ze(o)&&e(o)})}He(t){const e=t.targetId,r=t.me.count,o=this.Je(e);if(o){const u=o.target;if(Th(u))if(r===0){const h=new rt(u.path);this.Ue(e,h,me.newNoDocument(h,gt.min()))}else ht(r===1);else{const h=this.Ye(e);if(h!==r){const m=this.Ze(t),g=m?this.Xe(m,t,h):1;if(g!==0){this.je(e);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,_)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let h,m;try{h=qr(r).toUint8Array()}catch(g){if(g instanceof t0)return Gs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new vg(h,o,u)}catch(g){return Gs(g instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(t,e,r){return e.me.count===r-this.nt(t,e.targetId)?0:2}nt(t,e){const r=this.Le.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.Ue(e,u,null),o++)}),o}rt(t){const e=new Map;this.Be.forEach((u,h)=>{const m=this.Je(h);if(m){if(u.current&&Th(m.target)){const g=new rt(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,me.newNoDocument(g,t))}u.be&&(e.set(h,u.ve()),u.Ce())}});let r=Ct();this.qe.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(t));const o=new qh(t,e,this.Qe,this.ke,r);return this.ke=An(),this.qe=aT(),this.Qe=new ae(wt),o}$e(t,e){if(!this.ze(t))return;const r=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,r),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,r){if(!this.ze(t))return;const o=this.Ge(t);this.it(t,e)?o.Fe(e,1):o.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),r&&(this.ke=this.ke.insert(e,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new sT,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Wt(wt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||J("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new sT),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function aT(){return new ae(rt.comparator)}function oT(){return new ae(rt.comparator)}const gD={asc:"ASCENDING",desc:"DESCENDING"},pD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"};class yD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function xm(s,t){return s.useProto3Json||Ph(t)?t:{value:t}}function po(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function R0(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function vD(s,t){return po(s,t.toTimestamp())}function an(s){return ht(!!s),gt.fromTimestamp(function(e){const r=$i(e);return new ue(r.seconds,r.nanos)}(s))}function Tg(s,t){return Mm(s,t).canonicalString()}function Mm(s,t){const e=function(o){return new Qt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return t===void 0?e:e.child(t)}function D0(s){const t=Qt.fromString(s);return ht(U0(t)),t}function Ah(s,t){return Tg(s.databaseId,t.path)}function Bs(s,t){const e=D0(t);if(e.get(1)!==s.databaseId.projectId)throw new at(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new at(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new rt(O0(e))}function C0(s,t){return Tg(s.databaseId,t)}function V0(s){const t=D0(s);return t.length===4?Qt.emptyPath():O0(t)}function Pm(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function O0(s){return ht(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function lT(s,t,e){return{name:Ah(s,t),fields:e.value.mapValue.fields}}function TD(s,t,e){const r=Bs(s,t.name),o=an(t.updateTime),u=t.createTime?an(t.createTime):gt.min(),h=new Ze({mapValue:{fields:t.fields}}),m=me.newFoundDocument(r,o,u,h);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function ED(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ut()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,T){return _.useProto3Json?(ht(T===void 0||typeof T=="string"),be.fromBase64String(T||"")):(ht(T===void 0||T instanceof Buffer||T instanceof Uint8Array),be.fromUint8Array(T||new Uint8Array))}(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(_){const T=_.code===void 0?X.UNKNOWN:S0(_.code);return new at(T,_.message||"")}(h);e=new w0(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Bs(s,r.document.name),u=an(r.document.updateTime),h=r.document.createTime?an(r.document.createTime):gt.min(),m=new Ze({mapValue:{fields:r.document.fields}}),g=me.newFoundDocument(o,u,h,m),_=r.targetIds||[],T=r.removedTargetIds||[];e=new oh(_,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Bs(s,r.document),u=r.readTime?an(r.readTime):gt.min(),h=me.newNoDocument(o,u),m=r.removedTargetIds||[];e=new oh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Bs(s,r.document),u=r.removedTargetIds||[];e=new oh([],u,o,null)}else{if(!("filter"in t))return ut();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new cD(o,u),m=r.targetId;e=new I0(m,h)}}return e}function bh(s,t){let e;if(t instanceof Ao)e={update:lT(s,t.key,t.value)};else if(t instanceof gg)e={delete:Ah(s,t.key)};else if(t instanceof Ji)e={update:lT(s,t.key,t.data),updateMask:RD(t.fieldMask)};else{if(!(t instanceof b0))return ut();e={verify:Ah(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const m=h.transform;if(m instanceof iu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof go)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ru)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw ut()}(0,r))),t.precondition.isNone||(e.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:vD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ut()}(s,t.precondition)),e}function km(s,t){const e=t.currentDocument?function(u){return u.updateTime!==void 0?fn.updateTime(an(u.updateTime)):u.exists!==void 0?fn.exists(u.exists):fn.none()}(t.currentDocument):fn.none(),r=t.updateTransforms?t.updateTransforms.map(o=>function(h,m){let g=null;if("setToServerValue"in m)ht(m.setToServerValue==="REQUEST_TIME"),g=new iu;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new mo(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new go(T)}else"increment"in m?g=new ru(h,m.increment):ut();const _=le.fromServerFormat(m.fieldPath);return new sD(_,g)}(s,o)):[];if(t.update){t.update.name;const o=Bs(s,t.update.name),u=new Ze({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=function(g){const _=g.fieldPaths||[];return new hn(_.map(T=>le.fromServerFormat(T)))}(t.updateMask);return new Ji(o,u,h,e,r)}return new Ao(o,u,e,r)}if(t.delete){const o=Bs(s,t.delete);return new gg(o,e)}if(t.verify){const o=Bs(s,t.verify);return new b0(o,e)}return ut()}function AD(s,t){return s&&s.length>0?(ht(t!==void 0),s.map(e=>function(o,u){let h=o.updateTime?an(o.updateTime):an(u);return h.isEqual(gt.min())&&(h=an(u)),new oD(h,o.transformResults||[])}(e,t))):[]}function N0(s,t){return{documents:[C0(s,t.path)]}}function x0(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=C0(s,o);const u=function(_){if(_.length!==0)return k0(Jt.create(_,"and"))}(t.filters);u&&(e.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(T=>function(D){return{field:Wa(D.field),direction:SD(D.dir)}}(T))}(t.orderBy);h&&(e.structuredQuery.orderBy=h);const m=xm(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{_t:e,parent:o}}function M0(s){let t=V0(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ht(r===1);const T=e.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];e.where&&(u=function(b){const D=P0(b);return D instanceof Jt&&fg(D)?D.getFilters():[D]}(e.where));let h=[];e.orderBy&&(h=function(b){return b.map(D=>function($){return new vh(to($.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(D))}(e.orderBy));let m=null;e.limit&&(m=function(b){let D;return D=typeof b=="object"?b.value:b,Ph(D)?null:D}(e.limit));let g=null;e.startAt&&(g=function(b){const D=!!b.before,q=b.values||[];return new ho(q,D)}(e.startAt));let _=null;return e.endAt&&(_=function(b){const D=!b.before,q=b.values||[];return new ho(q,D)}(e.endAt)),K1(t,o,h,u,m,"F",g,_)}function bD(s,t){const e=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function P0(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=to(e.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=to(e.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(e.unaryFilter.field);return Pt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=to(e.unaryFilter.field);return Pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(s):s.fieldFilter!==void 0?function(e){return Pt.create(to(e.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Jt.create(e.compositeFilter.filters.map(r=>P0(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(s):ut()}function SD(s){return gD[s]}function ID(s){return pD[s]}function wD(s){return _D[s]}function Wa(s){return{fieldPath:s.canonicalString()}}function to(s){return le.fromServerFormat(s.fieldPath)}function k0(s){return s instanceof Pt?function(e){if(e.op==="=="){if(Hv(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NAN"}};if(Gv(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Hv(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NAN"}};if(Gv(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(e.field),op:ID(e.op),value:e.value}}}(s):s instanceof Jt?function(e){const r=e.getFilters().map(o=>k0(o));return r.length===1?r[0]:{compositeFilter:{op:wD(e.op),filters:r}}}(s):ut()}function RD(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function U0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,e,r,o,u=gt.min(),h=gt.min(),m=be.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Ki(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t){this.ct=t}}function DD(s,t){let e;if(t.document)e=TD(s.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=rt.fromSegments(t.noDocument.path),o=Xs(t.noDocument.readTime);e=me.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut();{const r=rt.fromSegments(t.unknownDocument.path),o=Xs(t.unknownDocument.version);e=me.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime(function(o){const u=new ue(o[0],o[1]);return gt.fromTimestamp(u)}(t.readTime)),e}function uT(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Sh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(u,h){return{name:Ah(u,h.key),fields:h.data.value.mapValue.fields,updateTime:po(u,h.version.toTimestamp()),createTime:po(u,h.createTime.toTimestamp())}}(s.ct,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Ys(t.version)};else{if(!t.isUnknownDocument())return ut();r.unknownDocument={path:e.path.toArray(),version:Ys(t.version)}}return r}function Sh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Ys(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xs(s){const t=new ue(s.seconds,s.nanoseconds);return gt.fromTimestamp(t)}function Ms(s,t){const e=(t.baseMutations||[]).map(u=>km(s.ct,u));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map(u=>km(s.ct,u)),o=ue.fromMillis(t.localWriteTimeMs);return new pg(t.batchId,o,e,r)}function jl(s){const t=Xs(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Xs(s.lastLimboFreeSnapshotVersion):gt.min();let r;return r=function(u){return u.documents!==void 0}(s.query)?function(u){return ht(u.documents.length===1),Ln(dg(V0(u.documents[0])))}(s.query):function(u){return Ln(M0(u))}(s.query),new Ki(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,be.fromBase64String(s.resumeToken))}function z0(s,t){const e=Ys(t.snapshotVersion),r=Ys(t.lastLimboFreeSnapshotVersion);let o;o=Th(t.target)?N0(s.ct,t.target):x0(s.ct,t.target)._t;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qs(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function B0(s){const t=M0({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Nm(t,t.limit,"L"):t}function fm(s,t){return new yg(t.largestBatchId,km(s.ct,t.overlayMutation))}function cT(s,t){const e=t.path.lastSegment();return[s,sn(t.path.popLast()),e]}function hT(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Ys(r.readTime),documentKey:sn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{getBundleMetadata(t,e){return fT(t).get(e).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:Xs(u.createTime),version:u.version}}(r)})}saveBundleMetadata(t,e){return fT(t).put(function(o){return{bundleId:o.id,createTime:Ys(an(o.createTime)),version:o.version}}(e))}getNamedQuery(t,e){return dT(t).get(e).next(r=>{if(r)return function(u){return{name:u.name,query:B0(u.bundledQuery),readTime:Xs(u.readTime)}}(r)})}saveNamedQuery(t,e){return dT(t).put(function(o){return{name:o.name,readTime:Ys(an(o.readTime)),bundledQuery:o.bundledQuery}}(e))}}function fT(s){return Oe(s,"bundles")}function dT(s){return Oe(s,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const r=e.uid||"";return new jh(t,r)}getOverlay(t,e){return Ml(t).get(cT(this.userId,e)).next(r=>r?fm(this.serializer,r):null)}getOverlays(t,e){const r=hi();return z.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){const o=[];return r.forEach((u,h)=>{const m=new yg(e,h);o.push(this.ht(t,m))}),z.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach(h=>o.add(sn(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Ml(t).j("collectionPathOverlayIndex",m))}),z.waitFor(u)}getOverlaysForCollection(t,e,r){const o=hi(),u=sn(e),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ml(t).U("collectionPathOverlayIndex",h).next(m=>{for(const g of m){const _=fm(this.serializer,g);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(t,e,r,o){const u=hi();let h;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Ml(t).J({index:"collectionGroupOverlayIndex",range:m},(g,_,T)=>{const b=fm(this.serializer,_);u.size()<o||b.largestBatchId===h?(u.set(b.getKey(),b),h=b.largestBatchId):T.done()}).next(()=>u)}ht(t,e){return Ml(t).put(function(o,u,h){const[m,g,_]=cT(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:bh(o.ct,h.mutation)}}(this.serializer,this.userId,e))}}function Ml(s){return Oe(s,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{Pt(t){return Oe(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?be.fromUint8Array(r):be.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(se(t.integerValue));else if("doubleValue"in t){const r=se(t.doubleValue);isNaN(r)?this.dt(e,13):(this.dt(e,15),Wl(r)?e.At(0):e.At(r))}else if("timestampValue"in t){let r=t.timestampValue;this.dt(e,20),typeof r=="string"&&(r=$i(r)),e.Rt(`${r.seconds||""}`),e.At(r.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(qr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.dt(e,45),e.At(r.latitude||0),e.At(r.longitude||0)}else"mapValue"in t?e0(t)?this.dt(e,Number.MAX_SAFE_INTEGER):kh(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):ut()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const r=t.fields||{};this.dt(e,55);for(const o of Object.keys(r))this.Vt(o,e),this.Tt(r[o],e)}wt(t,e){var r,o;const u=t.fields||{};this.dt(e,53);const h="value",m=((o=(r=u[h].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.dt(e,15),e.At(se(m)),this.Vt(h,e),this.Tt(u[h],e)}bt(t,e){const r=t.values||[];this.dt(e,50);for(const o of r)this.Tt(o,e)}yt(t,e){this.dt(e,37),rt.fromName(t).path.forEach(r=>{this.dt(e,60),this.Dt(r,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}Ps.vt=new Ps;function OD(s){if(s===0)return 8;let t=0;return s>>4==0&&(t+=4,s<<=4),s>>6==0&&(t+=2,s<<=2),s>>7==0&&(t+=1),t}function mT(s){const t=64-function(r){let o=0;for(let u=0;u<8;++u){const h=OD(255&r[u]);if(o+=h,h!==8)break}return o}(s);return Math.ceil(t/8)}class ND{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ft(r.value),r=e.next();this.Mt()}xt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ot(r.value),r=e.next();this.Nt()}Lt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const o=e.codePointAt(0);this.Ft(240|o>>>18),this.Ft(128|63&o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o)}}this.Mt()}Bt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const o=e.codePointAt(0);this.Ot(240|o>>>18),this.Ot(128|63&o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o)}}this.Nt()}kt(t){const e=this.qt(t),r=mT(e);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Kt(t){const e=this.qt(t),r=mT(e);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const e=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(t),r=(128&e[0])!=0;e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Ft(t){const e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){const e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xD{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class MD{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Pl{constructor(){this.jt=new ND,this.Ht=new xD(this.jt),this.Jt=new MD(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,e,r,o){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}Zt(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new ks(this.indexId,this.documentKey,this.arrayValue,r)}}function Cr(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=gT(s.arrayValue,t.arrayValue),e!==0?e:(e=gT(s.directionalValue,t.directionalValue),e!==0?e:rt.comparator(s.documentKey,t.documentKey)))}function gT(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t){this.Xt=new Wt((e,r)=>le.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const e of t.filters){const r=e;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(t){if(ht(t.collectionGroup===this.collectionId),this.nn)return!1;const e=Im(t);if(e!==void 0&&!this.sn(e))return!1;const r=Ns(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.sn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Xt.size>0){const m=this.Xt.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.on(m,g)||!this._n(this.en[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.en.length||!this._n(this.en[h++],m))return!1}return!0}an(){if(this.nn)return null;let t=new Wt(le.comparator);const e=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new nh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new nh(r.field,0))}for(const r of this.en)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new nh(r.field,r.dir==="asc"?0:1)));return new yh(yh.UNKNOWN_ID,this.collectionId,e,Jl.empty())}sn(t){for(const e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(s){var t,e;if(ht(s instanceof Pt||s instanceof Jt),s instanceof Pt){if(s instanceof c0){const o=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(u=>Pt.create(s.field,"==",u)))||[];return Jt.create(o,"or")}return s}const r=s.filters.map(o=>q0(o));return Jt.create(r,s.op)}function PD(s){if(s.getFilters().length===0)return[];const t=zm(q0(s));return ht(j0(t)),Um(t)||Lm(t)?[t]:t.getFilters()}function Um(s){return s instanceof Pt}function Lm(s){return s instanceof Jt&&fg(s)}function j0(s){return Um(s)||Lm(s)||function(e){if(e instanceof Jt&&Cm(e)){for(const r of e.getFilters())if(!Um(r)&&!Lm(r))return!1;return!0}return!1}(s)}function zm(s){if(ht(s instanceof Pt||s instanceof Jt),s instanceof Pt)return s;if(s.filters.length===1)return zm(s.filters[0]);const t=s.filters.map(r=>zm(r));let e=Jt.create(t,s.op);return e=Ih(e),j0(e)?e:(ht(e instanceof Jt),ht(fo(e)),ht(e.filters.length>1),e.filters.reduce((r,o)=>Eg(r,o)))}function Eg(s,t){let e;return ht(s instanceof Pt||s instanceof Jt),ht(t instanceof Pt||t instanceof Jt),e=s instanceof Pt?t instanceof Pt?function(o,u){return Jt.create([o,u],"and")}(s,t):_T(s,t):t instanceof Pt?_T(t,s):function(o,u){if(ht(o.filters.length>0&&u.filters.length>0),fo(o)&&fo(u))return o0(o,u.getFilters());const h=Cm(o)?o:u,m=Cm(o)?u:o,g=h.filters.map(_=>Eg(_,m));return Jt.create(g,"or")}(s,t),Ih(e)}function _T(s,t){if(fo(t))return o0(t,s.getFilters());{const e=t.filters.map(r=>Eg(s,r));return Jt.create(e,"or")}}function Ih(s){if(ht(s instanceof Pt||s instanceof Jt),s instanceof Pt)return s;const t=s.getFilters();if(t.length===1)return Ih(t[0]);if(s0(s))return s;const e=t.map(o=>Ih(o)),r=[];return e.forEach(o=>{o instanceof Pt?r.push(o):o instanceof Jt&&(o.op===s.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:Jt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.un=new Ag}addToCollectionParentIndex(t,e){return this.un.add(e),z.resolve()}getCollectionParents(t,e){return z.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return z.resolve()}deleteFieldIndex(t,e){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,e){return z.resolve()}getDocumentsMatchingTarget(t,e){return z.resolve(null)}getIndexType(t,e){return z.resolve(0)}getFieldIndexes(t,e){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,e){return z.resolve(bn.min())}getMinOffsetFromCollectionGroup(t,e){return z.resolve(bn.min())}updateCollectionGroup(t,e,r){return z.resolve()}updateIndexEntries(t,e){return z.resolve()}}class Ag{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Wt(Qt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Wt(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Uint8Array(0);class UD{constructor(t,e){this.databaseId=e,this.cn=new Ag,this.ln=new Kr(r=>Qs(r),(r,o)=>fu(r,o)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});const u={collectionId:r,parent:sn(o)};return yT(t).put(u)}return z.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[GE(e),""],!1,!0);return yT(t).U(o).next(u=>{for(const h of u){if(h.collectionId!==e)break;r.push(ci(h.parent))}return r})}addFieldIndex(t,e){const r=kl(t),o=function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete o.indexId;const u=r.add(o);if(e.indexState){const h=Xa(t);return u.next(m=>{h.put(hT(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return u.next()}deleteFieldIndex(t,e){const r=kl(t),o=Xa(t),u=Ya(t);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=kl(t),r=Ya(t),o=Xa(t);return e.j().next(()=>r.j()).next(()=>o.j())}createTargetIndexes(t,e){return z.forEach(this.hn(e),r=>this.getIndexType(t,r).next(o=>{if(o===0||o===1){const u=new pT(r).an();if(u!=null)return this.addFieldIndex(t,u)}}))}getDocumentsMatchingTarget(t,e){const r=Ya(t);let o=!0;const u=new Map;return z.forEach(this.hn(e),h=>this.Pn(t,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=Ct();const m=[];return z.forEach(u,(g,_)=>{J("IndexedDbIndexManager",`Using index ${function(st){return`id=${st.indexId}|cg=${st.collectionGroup}|f=${st.fields.map(At=>`${At.fieldPath}:${At.kind}`).join(",")}`}(g)} to execute ${Qs(e)}`);const T=function(st,At){const lt=Im(At);if(lt===void 0)return null;for(const _t of Eh(st,lt.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(_,g),b=function(st,At){const lt=new Map;for(const _t of Ns(At))for(const O of Eh(st,_t.fieldPath))switch(O.op){case"==":case"in":lt.set(_t.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return lt.set(_t.fieldPath.canonicalString(),O.value),Array.from(lt.values())}return null}(_,g),D=function(st,At){const lt=[];let _t=!0;for(const O of Ns(At)){const S=O.kind===0?$v(st,O.fieldPath,st.startAt):Zv(st,O.fieldPath,st.startAt);lt.push(S.value),_t&&(_t=S.inclusive)}return new ho(lt,_t)}(_,g),q=function(st,At){const lt=[];let _t=!0;for(const O of Ns(At)){const S=O.kind===0?Zv(st,O.fieldPath,st.endAt):$v(st,O.fieldPath,st.endAt);lt.push(S.value),_t&&(_t=S.inclusive)}return new ho(lt,_t)}(_,g),$=this.In(g,_,D),W=this.In(g,_,q),Q=this.Tn(g,_,b),Tt=this.En(g.indexId,T,$,D.inclusive,W,q.inclusive,Q);return z.forEach(Tt,ft=>r.G(ft,e.limit).next(st=>{st.forEach(At=>{const lt=rt.fromSegments(At.documentKey);h.has(lt)||(h=h.add(lt),m.push(lt))})}))}).next(()=>m)}return z.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=PD(Jt.create(t.filters,"and")).map(r=>Om(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,r,o,u,h,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),_=g/(e!=null?e.length:1),T=[];for(let b=0;b<g;++b){const D=e?this.dn(e[b/_]):Kc,q=this.An(t,D,r[b%_],o),$=this.Rn(t,D,u[b%_],h),W=m.map(Q=>this.An(t,D,Q,!0));T.push(...this.createRange(q,$,W))}return T}An(t,e,r,o){const u=new ks(t,rt.empty(),e,r);return o?u:u.Zt()}Rn(t,e,r,o){const u=new ks(t,rt.empty(),e,r);return o?u.Zt():u}Pn(t,e){const r=new pT(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next(u=>{let h=null;for(const m of u)r.rn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(t,e){let r=2;const o=this.hn(e);return z.forEach(o,u=>this.Pn(t,u).next(h=>{h?r!==0&&h.fields.length<function(g){let _=new Wt(le.comparator),T=!1;for(const b of g.filters)for(const D of b.getFlattenedFilters())D.field.isKeyField()||(D.op==="array-contains"||D.op==="array-contains-any"?T=!0:_=_.add(D.field));for(const b of g.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(T?1:0)}(u)&&(r=1):r=0})).next(()=>function(h){return h.limit!==null}(e)&&o.length>1&&r===2?1:r)}Vn(t,e){const r=new Pl;for(const o of Ns(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const h=r.Yt(o.kind);Ps.vt.It(u,h)}return r.zt()}dn(t){const e=new Pl;return Ps.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){const r=new Pl;return Ps.vt.It(hg(this.databaseId,e),r.Yt(function(u){const h=Ns(u);return h.length===0?0:h[h.length-1].kind}(t))),r.zt()}Tn(t,e,r){if(r===null)return[];let o=[];o.push(new Pl);let u=0;for(const h of Ns(t)){const m=r[u++];for(const g of o)if(this.fn(e,h.fieldPath)&&nu(m))o=this.gn(o,h,m);else{const _=g.Yt(h.kind);Ps.vt.It(m,_)}}return this.pn(o)}In(t,e,r){return this.Tn(t,e,r.position)}pn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].zt();return e}gn(t,e,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new Pl;g.seed(m.zt()),Ps.vt.It(h,g.Yt(e.kind)),u.push(g)}return u}fn(t,e){return!!t.filters.find(r=>r instanceof Pt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=kl(t),o=Xa(t);return(e?r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.U()).next(u=>{const h=[];return z.forEach(u,m=>o.get([m.indexId,this.uid]).next(g=>{h.push(function(T,b){const D=b?new Jl(b.sequenceNumber,new bn(Xs(b.readTime),new rt(ci(b.documentKey)),b.largestBatchId)):Jl.empty(),q=T.fields.map(([$,W])=>new nh(le.fromServerFormat($),W));return new yh(T.indexId,T.collectionGroup,q,D)}(m,g))})).next(()=>h)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:wt(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const o=kl(t),u=Xa(t);return this.yn(t).next(h=>o.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(m=>z.forEach(m,g=>u.put(hT(g.indexId,this.uid,h,r)))))}updateIndexEntries(t,e){const r=new Map;return z.forEach(e,(o,u)=>{const h=r.get(o.collectionGroup);return(h?z.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),z.forEach(m,g=>this.wn(t,o,g).next(_=>{const T=this.Sn(u,g);return _.isEqual(T)?z.resolve():this.bn(t,u,g,_,T)}))))})}Dn(t,e,r,o){return Ya(t).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.mn(r,e.key),documentKey:e.key.path.toArray()})}vn(t,e,r,o){return Ya(t).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.mn(r,e.key),e.key.path.toArray()])}wn(t,e,r){const o=Ya(t);let u=new Wt(Cr);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,e)])},(h,m)=>{u=u.add(new ks(r.indexId,e,m.arrayValue,m.directionalValue))}).next(()=>u)}Sn(t,e){let r=new Wt(Cr);const o=this.Vn(e,t);if(o==null)return r;const u=Im(e);if(u!=null){const h=t.data.field(u.fieldPath);if(nu(h))for(const m of h.arrayValue.values||[])r=r.add(new ks(e.indexId,t.key,this.dn(m),o))}else r=r.add(new ks(e.indexId,t.key,Kc,o));return r}bn(t,e,r,o,u){J("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const h=[];return function(g,_,T,b,D){const q=g.getIterator(),$=_.getIterator();let W=Qa(q),Q=Qa($);for(;W||Q;){let Tt=!1,ft=!1;if(W&&Q){const st=T(W,Q);st<0?ft=!0:st>0&&(Tt=!0)}else W!=null?ft=!0:Tt=!0;Tt?(b(Q),Q=Qa($)):ft?(D(W),W=Qa(q)):(W=Qa(q),Q=Qa($))}}(o,u,Cr,m=>{h.push(this.Dn(t,e,r,m))},m=>{h.push(this.vn(t,e,r,m))}),z.waitFor(h)}yn(t){let e=1;return Xa(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((h,m)=>Cr(h,m)).filter((h,m,g)=>!m||Cr(h,g[m-1])!==0);const o=[];o.push(t);for(const h of r){const m=Cr(h,t),g=Cr(h,e);if(m===0)o[0]=t.Zt();else if(m>0&&g<0)o.push(h),o.push(h.Zt());else if(g>0)break}o.push(e);const u=[];for(let h=0;h<o.length;h+=2){if(this.Cn(o[h],o[h+1]))return[];const m=[o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,Kc,[]],g=[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,Kc,[]];u.push(IDBKeyRange.bound(m,g))}return u}Cn(t,e){return Cr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(vT)}getMinOffset(t,e){return z.mapArray(this.hn(e),r=>this.Pn(t,r).next(o=>o||ut())).next(vT)}}function yT(s){return Oe(s,"collectionParents")}function Ya(s){return Oe(s,"indexEntries")}function kl(s){return Oe(s,"indexConfiguration")}function Xa(s){return Oe(s,"indexState")}function vT(s){ht(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;ag(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new bn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cn{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(s,t,e){const r=s.store("mutations"),o=s.store("documentMutations"),u=[],h=IDBKeyRange.only(e.batchId);let m=0;const g=r.J({range:h},(T,b,D)=>(m++,D.delete()));u.push(g.next(()=>{ht(m===1)}));const _=[];for(const T of e.mutations){const b=XE(t,T.key.path,e.batchId);u.push(o.delete(b)),_.push(T.key)}return z.waitFor(u).next(()=>_)}function wh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ut();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class Fh{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Fn={}}static lt(t,e,r,o){ht(t.uid!=="");const u=t.isAuthenticated()?t.uid:"";return new Fh(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).J({index:"userMutationsIndex",range:r},(o,u,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,r,o){const u=eo(t),h=Vr(t);return h.add({}).next(m=>{ht(typeof m=="number");const g=new pg(m,e,r,o),_=function(q,$,W){const Q=W.baseMutations.map(ft=>bh(q.ct,ft)),Tt=W.mutations.map(ft=>bh(q.ct,ft));return{userId:$,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:Q,mutations:Tt}}(this.serializer,this.userId,g),T=[];let b=new Wt((D,q)=>wt(D.canonicalString(),q.canonicalString()));for(const D of o){const q=XE(this.userId,D.key.path,m);b=b.add(D.key.path.popLast()),T.push(h.put(_)),T.push(u.put(q,p1))}return b.forEach(D=>{T.push(this.indexManager.addToCollectionParentIndex(t,D))}),t.addOnCommittedListener(()=>{this.Fn[m]=g.keys()}),z.waitFor(T).next(()=>g)})}lookupMutationBatch(t,e){return Vr(t).get(e).next(r=>r?(ht(r.userId===this.userId),Ms(this.serializer,r)):null)}Mn(t,e){return this.Fn[e]?z.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const o=r.keys();return this.Fn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vr(t).J({index:"userMutationsIndex",range:o},(h,m,g)=>{m.userId===this.userId&&(ht(m.batchId>=r),u=Ms(this.serializer,m)),g.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vr(t).J({index:"userMutationsIndex",range:e,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).U("userMutationsIndex",e).next(r=>r.map(o=>Ms(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=ih(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return eo(t).J({range:o},(h,m,g)=>{const[_,T,b]=h,D=ci(T);if(_===this.userId&&e.path.isEqual(D))return Vr(t).get(b).next(q=>{if(!q)throw ut();ht(q.userId===this.userId),u.push(Ms(this.serializer,q))});g.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Wt(wt);const o=[];return e.forEach(u=>{const h=ih(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=eo(t).J({range:m},(_,T,b)=>{const[D,q,$]=_,W=ci(q);D===this.userId&&u.path.isEqual(W)?r=r.add($):b.done()});o.push(g)}),z.waitFor(o).next(()=>this.xn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=ih(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Wt(wt);return eo(t).J({range:h},(g,_,T)=>{const[b,D,q]=g,$=ci(D);b===this.userId&&r.isPrefixOf($)?$.length===o&&(m=m.add(q)):T.done()}).next(()=>this.xn(t,m))}xn(t,e){const r=[],o=[];return e.forEach(u=>{o.push(Vr(t).get(u).next(h=>{if(h===null)throw ut();ht(h.userId===this.userId),r.push(Ms(this.serializer,h))}))}),z.waitFor(o).next(()=>r)}removeMutationBatch(t,e){return F0(t._e,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),z.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return z.resolve();const r=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),o=[];return eo(t).J({range:r},(u,h,m)=>{if(u[0]===this.userId){const g=ci(u[1]);o.push(g)}else m.done()}).next(()=>{ht(o.length===0)})})}containsKey(t,e){return G0(t,this.userId,e)}Nn(t){return H0(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function G0(s,t,e){const r=ih(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return eo(s).J({range:u,H:!0},(m,g,_)=>{const[T,b,D]=m;T===t&&b===o&&(h=!0),_.done()}).next(()=>h)}function Vr(s){return Oe(s,"mutations")}function eo(s){return Oe(s,"documentMutations")}function H0(s){return Oe(s,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new $s(0)}static kn(){return new $s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{const r=new $s(e.highestTargetId);return e.highestTargetId=r.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>gt.fromTimestamp(new ue(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.qn(t).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.Qn(t,o)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(r=>(r.targetCount+=1,this.$n(e,r),this.Qn(t,r))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>$a(t).delete(e.targetId)).next(()=>this.qn(t)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Qn(t,r)))}removeTargets(t,e,r){let o=0;const u=[];return $a(t).J((h,m)=>{const g=jl(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))}).next(()=>z.waitFor(u)).next(()=>o)}forEachTarget(t,e){return $a(t).J((r,o)=>{const u=jl(o);e(u)})}qn(t){return ET(t).get("targetGlobalKey").next(e=>(ht(e!==null),e))}Qn(t,e){return ET(t).put("targetGlobalKey",e)}Kn(t,e){return $a(t).put(z0(this.serializer,e))}$n(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Qs(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $a(t).J({range:o,index:"queryTargetsIndex"},(h,m,g)=>{const _=jl(m);fu(e,_.target)&&(u=_,g.done())}).next(()=>u)}addMatchingKeys(t,e,r){const o=[],u=Mr(t);return e.forEach(h=>{const m=sn(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))}),z.waitFor(o)}removeMatchingKeys(t,e,r){const o=Mr(t);return z.forEach(e,u=>{const h=sn(u.path);return z.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])})}removeMatchingKeysForTargetId(t,e){const r=Mr(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Mr(t);let u=Ct();return o.J({range:r,H:!0},(h,m,g)=>{const _=ci(h[1]),T=new rt(_);u=u.add(T)}).next(()=>u)}containsKey(t,e){const r=sn(e.path),o=IDBKeyRange.bound([r],[GE(r)],!1,!0);let u=0;return Mr(t).J({index:"documentTargetsIndex",H:!0,range:o},([h,m],g,_)=>{h!==0&&(u++,_.done())}).next(()=>u>0)}ot(t,e){return $a(t).get(e).next(r=>r?jl(r):null)}}function $a(s){return Oe(s,"targets")}function ET(s){return Oe(s,"targetGlobal")}function Mr(s){return Oe(s,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT([s,t],[e,r]){const o=wt(s,e);return o===0?wt(t,r):o}class zD{constructor(t){this.Un=t,this.buffer=new Wt(AT),this.Wn=0}Gn(){return++this.Wn}zn(t){const e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();AT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class BD{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){J("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Hr(e)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Js(e)}await this.Hn(3e5)})}}class qD{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return z.resolve(Un.oe);const r=new zD(e);return this.Jn.forEachTarget(t,o=>r.zn(o.sequenceNumber)).next(()=>this.Jn.Zn(t,o=>r.zn(o))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Jn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(TT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TT):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let r,o,u,h,m,g,_;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(t,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(t,r,e))).next(b=>(u=b,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(_=Date.now(),Za()<=Mt.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function jD(s,t){return new qD(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,e){this.db=t,this.garbageCollector=jD(this,e)}Yn(t){const e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}er(t){let e=0;return this.Zn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(r,o)=>e(o))}addReference(t,e,r){return Qc(t,r)}removeReference(t,e,r){return Qc(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Qc(t,e)}nr(t,e){return function(o,u){let h=!1;return H0(o).Y(m=>G0(o,m,u).next(g=>(g&&(h=!0),z.resolve(!g)))).next(()=>h)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.tr(t,(h,m)=>{if(m<=e){const g=this.nr(t,h).next(_=>{if(!_)return u++,r.getEntry(t,h).next(()=>(r.removeEntry(h,gt.min()),Mr(t).delete(function(b){return[0,sn(b.path)]}(h))))});o.push(g)}}).next(()=>z.waitFor(o)).next(()=>r.apply(t)).next(()=>u)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Qc(t,e)}tr(t,e){const r=Mr(t);let o,u=Un.oe;return r.J({index:"documentTargetsIndex"},([h,m],{path:g,sequenceNumber:_})=>{h===0?(u!==Un.oe&&e(new rt(ci(o)),u),u=_,o=g):u=Un.oe}).next(()=>{u!==Un.oe&&e(new rt(ci(o)),u)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Qc(s,t){return Mr(s).put(function(r,o){return{targetId:0,path:sn(r.path),sequenceNumber:o}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.changes=new Kr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,me.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?z.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Vs(t).put(r)}removeEntry(t,e,r){return Vs(t).delete(function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Sh(h),m[m.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.rr(t,r)))}getEntry(t,e){let r=me.newInvalidDocument(e);return Vs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(e))},(o,u)=>{r=this.ir(e,u)}).next(()=>r)}sr(t,e){let r={size:0,document:me.newInvalidDocument(e)};return Vs(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(e))},(o,u)=>{r={document:this.ir(e,u),size:wh(u)}}).next(()=>r)}getEntries(t,e){let r=An();return this._r(t,e,(o,u)=>{const h=this.ir(o,u);r=r.insert(o,h)}).next(()=>r)}ar(t,e){let r=An(),o=new ae(rt.comparator);return this._r(t,e,(u,h)=>{const m=this.ir(u,h);r=r.insert(u,m),o=o.insert(u,wh(h))}).next(()=>({documents:r,ur:o}))}_r(t,e,r){if(e.isEmpty())return z.resolve();let o=new Wt(IT);e.forEach(g=>o=o.add(g));const u=IDBKeyRange.bound(Ul(o.first()),Ul(o.last())),h=o.getIterator();let m=h.getNext();return Vs(t).J({index:"documentKeyIndex",range:u},(g,_,T)=>{const b=rt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&IT(m,b)<0;)r(m,null),m=h.getNext();m&&m.isEqual(b)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?T.$(Ul(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(t,e,r,o,u){const h=e.path,m=[h.popLast().toArray(),h.lastSegment(),Sh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vs(t).U(IDBKeyRange.bound(m,g,!0)).next(_=>{u==null||u.incrementDocumentReadCount(_.length);let T=An();for(const b of _){const D=this.ir(rt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);D.isFoundDocument()&&(du(e,D)||o.has(D.key))&&(T=T.insert(D.key,D))}return T})}getAllFromCollectionGroup(t,e,r,o){let u=An();const h=ST(e,r),m=ST(e,bn.max());return Vs(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(g,_,T)=>{const b=this.ir(rt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(b.key,b),u.size===o&&T.done()}).next(()=>u)}newChangeBuffer(t){return new HD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return bT(t).get("remoteDocumentGlobalKey").next(e=>(ht(!!e),e))}rr(t,e){return bT(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){const r=DD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(gt.min())))return r}return me.newInvalidDocument(t)}}function Q0(s){return new GD(s)}class HD extends K0{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new Kr(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(t){const e=[];let r=0,o=new Wt((u,h)=>wt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.lr.get(u);if(e.push(this.cr.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=uT(this.cr.serializer,h);o=o.add(u.path.popLast());const _=wh(g);r+=_-m.size,e.push(this.cr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=uT(this.cr.serializer,h.convertToNoDocument(gt.min()));e.push(this.cr.addEntry(t,u,g))}}),o.forEach(u=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,u))}),e.push(this.cr.updateMetadata(t,r)),z.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(r=>(this.lr.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:r,ur:o})=>(o.forEach((u,h)=>{this.lr.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function bT(s){return Oe(s,"remoteDocumentGlobal")}function Vs(s){return Oe(s,"remoteDocumentsV14")}function Ul(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ST(s,t){const e=t.documentKey.path.toArray();return[s,Sh(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function IT(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=wt(e[u],r[u]),o)return o;return o=wt(e.length,r.length),o||(o=wt(e[e.length-2],r[r.length-2]),o||wt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,e))).next(o=>(r!==null&&Yl(r.mutation,o,hn.empty(),ue.now()),o))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Ct()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Ct()){const o=hi();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,r).next(u=>{let h=Bl();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(t,e){const r=hi();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Ct()))}populateOverlays(t,e,r){const o=[];return r.forEach(u=>{e.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,m)=>{e.set(h,m)})})}computeViews(t,e,r,o){let u=An();const h=Ql(),m=function(){return Ql()}();return e.forEach((g,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof Ji)?u=u.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Yl(T.mutation,_,T.mutation.getFieldMask(),ue.now())):h.set(_.key,hn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,T)=>h.set(_,T)),e.forEach((_,T)=>{var b;return m.set(_,new KD(T,(b=h.get(_))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(t,e){const r=Ql();let o=new ae((h,m)=>h-m),u=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=e.get(g);if(_===null)return;let T=r.get(g)||hn.empty();T=m.applyToLocalView(_,T),r.set(g,T);const b=(o.get(m.batchId)||Ct()).add(g);o=o.insert(m.batchId,b)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,T=g.value,b=g0();T.forEach(D=>{if(!u.has(D)){const q=E0(e.get(D),r.get(D));q!==null&&b.set(D,q),u=u.add(D)}}),h.push(this.documentOverlayCache.saveOverlays(t,_,b))}return z.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,o){return function(h){return rt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Q1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):z.resolve(hi());let m=-1,g=u;return h.next(_=>z.forEach(_,(T,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(T)?z.resolve():this.remoteDocumentCache.getEntry(t,T).next(D=>{g=g.insert(T,D)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,Ct())).next(T=>({batchId:m,changes:m0(T)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(r=>{let o=Bl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let h=Bl();return this.indexManager.getCollectionParents(t,u).next(m=>z.forEach(m,g=>{const _=function(b,D){return new Uh(D,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next(T=>{T.forEach((b,D)=>{h=h.insert(b,D)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o))).next(h=>{u.forEach((g,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,me.newInvalidDocument(T)))});let m=Bl();return h.forEach((g,_)=>{const T=u.get(g);T!==void 0&&Yl(T.mutation,_,hn.empty(),ue.now()),du(e,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return z.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(o){return{id:o.id,version:o.version,createTime:an(o.createTime)}}(e)),z.resolve()}getNamedQuery(t,e){return z.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(o){return{name:o.name,query:B0(o.bundledQuery),readTime:an(o.readTime)}}(e)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.overlays=new ae(rt.comparator),this.Ir=new Map}getOverlay(t,e){return z.resolve(this.overlays.get(e))}getOverlays(t,e){const r=hi();return z.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((o,u)=>{this.ht(t,e,u)}),z.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(t,e,r){const o=hi(),u=e.length+1,h=new rt(e.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return z.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ae((_,T)=>_-T);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let T=u.get(_.largestBatchId);T===null&&(T=hi(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=hi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,T)=>m.set(_,T)),!(m.size()>=o)););return z.resolve(m)}ht(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new yg(e,r));let u=this.Ir.get(e);u===void 0&&(u=Ct(),this.Ir.set(e,u)),this.Ir.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.sessionToken=be.EMPTY_BYTE_STRING}getSessionToken(t){return z.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.Tr=new Wt(Le.Er),this.dr=new Wt(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const r=new Le(t,e);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Vr(new Le(t,e))}mr(t,e){t.forEach(r=>this.removeReference(r,e))}gr(t){const e=new rt(new Qt([])),r=new Le(e,t),o=new Le(e,t+1),u=[];return this.dr.forEachInRange([r,o],h=>{this.Vr(h),u.push(h.key)}),u}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new rt(new Qt([])),r=new Le(e,t),o=new Le(e,t+1);let u=Ct();return this.dr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const e=new Le(t,0),r=this.Tr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Le{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return rt.comparator(t.key,e.key)||wt(t.wr,e.wr)}static Ar(t,e){return wt(t.wr,e.wr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Wt(Le.Er)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new pg(u,e,r,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new Le(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return z.resolve(h)}lookupMutationBatch(t,e){return z.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.vr(r),u=o<0?0:o;return z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Le(e,0),o=new Le(e,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([r,o],h=>{const m=this.Dr(h.wr);u.push(m)}),z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Wt(wt);return e.forEach(o=>{const u=new Le(o,0),h=new Le(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],m=>{r=r.add(m.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const h=new Le(new rt(u),0);let m=new Wt(wt);return this.br.forEachWhile(g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.wr)),!0)},h),z.resolve(this.Cr(m))}Cr(t){const e=[];return t.forEach(r=>{const o=this.Dr(r);o!==null&&e.push(o)}),e}removeMutationBatch(t,e){ht(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(e.mutations,o=>{const u=new Le(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,e){const r=new Le(e,0),o=this.br.firstAfterOrEqual(r);return z.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.Mr=t,this.docs=function(){return new ae(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,h=this.Mr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return z.resolve(r?r.document.mutableCopy():me.newInvalidDocument(e))}getEntries(t,e){let r=An();return e.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():me.newInvalidDocument(o))}),z.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=An();const h=e.path,m=new rt(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||ag(HE(T),r)<=0||(o.has(T.key)||du(e,T))&&(u=u.insert(T.key,T.mutableCopy()))}return z.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ut()}Or(t,e){return z.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new JD(this)}getSize(t){return z.resolve(this.size)}}class JD extends K0{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.cr.addEntry(t,o)):this.cr.removeEntry(r)}),z.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t){this.persistence=t,this.Nr=new Kr(e=>Qs(e),fu),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bg,this.targetCount=0,this.kr=$s.Bn()}forEachTarget(t,e){return this.Nr.forEach((r,o)=>e(o)),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Lr&&(this.Lr=e),z.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new $s(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,z.resolve()}updateTargetData(t,e){return this.Kn(e),z.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.Nr.forEach((h,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),z.waitFor(u).next(()=>o)}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,e){const r=this.Nr.get(e)||null;return z.resolve(r)}addMatchingKeys(t,e,r){return this.Br.Rr(e,r),z.resolve()}removeMatchingKeys(t,e,r){this.Br.mr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),z.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),z.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Br.yr(e);return z.resolve(r)}containsKey(t,e){return z.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Un(0),this.Kr=!1,this.Kr=!0,this.$r=new XD,this.referenceDelegate=t(this),this.Ur=new WD(this),this.indexManager=new kD,this.remoteDocumentCache=function(o){return new ZD(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new L0(e),this.Gr=new QD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new YD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.qr[t.toKey()];return r||(r=new $D(e,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,r){J("MemoryPersistence","Starting transaction:",t);const o=new tC(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(u=>this.referenceDelegate.jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Hr(t,e){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,e)))}}class tC extends QE{constructor(t){super(),this.currentSequenceNumber=t}}class Gh{constructor(t){this.persistence=t,this.Jr=new bg,this.Yr=null}static Zr(t){return new Gh(t)}get Xr(){if(this.Yr)return this.Yr;throw ut()}addReference(t,e,r){return this.Jr.addReference(r,e),this.Xr.delete(r.toString()),z.resolve()}removeReference(t,e,r){return this.Jr.removeReference(r,e),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),z.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(o=>{o.forEach(u=>this.Xr.add(u.toString()))}).next(()=>r.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const o=rt.fromPath(r);return this.ei(t,o).next(u=>{u||e.removeEntry(o,gt.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(r=>{r?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return z.or([()=>z.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t){this.serializer=t}O(t,e,r,o){const u=new Mh("createOrUpgrade",e);r<1&&o>=1&&(function(g){g.createObjectStore("owner")}(t),function(g){g.createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zv,{unique:!0}),g.createObjectStore("documentMutations")}(t),wT(t),function(g){g.createObjectStore("remoteDocuments")}(t));let h=z.resolve();return r<3&&o>=3&&(r!==0&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(t),wT(t)),h=h.next(()=>function(g){const _=g.store("targetGlobal"),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",T)}(u))),r<4&&o>=4&&(r!==0&&(h=h.next(()=>function(g,_){return _.store("mutations").U().next(T=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zv,{unique:!0});const b=_.store("mutations"),D=T.map(q=>b.put(q));return z.waitFor(D)})}(t,u))),h=h.next(()=>{(function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),r<5&&o>=5&&(h=h.next(()=>this.ni(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(t),this.ri(u)))),r<7&&o>=7&&(h=h.next(()=>this.ii(u))),r<8&&o>=8&&(h=h.next(()=>this.si(t,u))),r<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&o>=10&&(h=h.next(()=>this.oi(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&o>=12&&(h=h.next(()=>{(function(g){const _=g.createObjectStore("documentOverlays",{keyPath:D1});_.createIndex("collectionPathOverlayIndex",C1,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",V1,{unique:!1})})(t)})),r<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:_1});_.createIndex("documentKeyIndex",y1),_.createIndex("collectionGroupIndex",v1)}(t)).next(()=>this._i(t,u)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>this.ai(t,u))),r<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:S1}).createIndex("sequenceNumberIndex",I1,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:w1}).createIndex("documentKeyIndex",R1,{unique:!1})}(t))),r<16&&o>=16&&(h=h.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),r<17&&o>=17&&(h=h.next(()=>{(function(g){g.createObjectStore("globals",{keyPath:"name"})})(t)})),h}ri(t){let e=0;return t.store("remoteDocuments").J((r,o)=>{e+=wh(o)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.U().next(o=>z.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",h).next(m=>z.forEach(m,g=>{ht(g.userId===u.userId);const _=Ms(this.serializer,g);return F0(t,u.userId,_).next(()=>{})}))}))}ii(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((h,m)=>{const g=new Qt(h),_=function(b){return[0,sn(b)]}(g);u.push(e.get(_).next(T=>T?z.resolve():(b=>e.put({targetId:0,path:sn(b),sequenceNumber:o.highestListenSequenceNumber}))(g)))}).next(()=>z.waitFor(u))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:b1});const r=e.store("collectionParents"),o=new Ag,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:sn(g)})}};return e.store("remoteDocuments").J({H:!0},(h,m)=>{const g=new Qt(h);return u(g.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([h,m,g],_)=>{const T=ci(m);return u(T.popLast())}))}oi(t){const e=t.store("targets");return e.J((r,o)=>{const u=jl(o),h=z0(this.serializer,u);return e.put(h)})}_i(t,e){const r=e.store("remoteDocuments"),o=[];return r.J((u,h)=>{const m=e.store("remoteDocumentsV14"),g=function(b){return b.document?new rt(Qt.fromString(b.document.name).popFirst(5)):b.noDocument?rt.fromSegments(b.noDocument.path):b.unknownDocument?rt.fromSegments(b.unknownDocument.path):ut()}(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(_))}).next(()=>z.waitFor(o))}ai(t,e){const r=e.store("mutations"),o=Q0(this.serializer),u=new X0(Gh.Zr,this.serializer.ct);return r.U().next(h=>{const m=new Map;return h.forEach(g=>{var _;let T=(_=m.get(g.userId))!==null&&_!==void 0?_:Ct();Ms(this.serializer,g).keys().forEach(b=>T=T.add(b)),m.set(g.userId,T)}),z.forEach(m,(g,_)=>{const T=new He(_),b=jh.lt(this.serializer,T),D=u.getIndexManager(T),q=Fh.lt(T,this.serializer,D,u.referenceDelegate);return new Y0(o,q,b,D).recalculateAndSaveOverlaysForDocumentKeys(new wm(e,Un.oe),g).next()})})}}function wT(s){s.createObjectStore("targetDocuments",{keyPath:E1}).createIndex("documentTargetsIndex",A1,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T1,{unique:!0}),s.createObjectStore("targetGlobal")}const dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sg{constructor(t,e,r,o,u,h,m,g,_,T,b=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.ui=u,this.window=h,this.document=m,this.ci=_,this.li=T,this.hi=b,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=D=>Promise.resolve(),!Sg.D())throw new at(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FD(this,o),this.Ai=e+"main",this.serializer=new L0(g),this.Ri=new zr(this.Ai,this.hi,new eC(this.serializer)),this.$r=new VD,this.Ur=new LD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Q0(this.serializer),this.Gr=new CD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,T===!1&&rn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(X.FAILED_PRECONDITION,dm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Un(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Yc(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(Hr(t))return J("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Ll(t).get("owner").next(e=>z.resolve(this.vi(e)))}Ci(t){return Yc(t).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Oe(e,"clientMetadata");return r.U().next(o=>{const u=this.xi(o,18e5),h=o.filter(m=>u.indexOf(m)===-1);return z.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(this.Vi)for(const e of t)this.Vi.removeItem(this.Oi(e.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?z.resolve(!0):Ll(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new at(X.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yc(t).U().next(r=>this.xi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&J("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const e=new wm(t,Un.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()}xi(t,e){return t.filter(r=>this.Mi(r.updateTimeMs,e)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Yc(t).U().next(e=>this.xi(e,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return Fh.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new UD(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return jh.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,r){J("IndexedDbPersistence","Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=function(g){return g===17?x1:g===16?N1:g===15?lg:g===14?JE:g===13?ZE:g===12?O1:g===11?$E:void ut()}(this.hi);let h;return this.Ri.runTransaction(t,o,u,m=>(h=new wm(m,this.Qr?this.Qr.next():Un.oe),e==="readwrite-primary"?this.wi(h).next(g=>!!g||this.Si(h)).next(g=>{if(!g)throw rn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new at(X.FAILED_PRECONDITION,KE);return r(h)}).next(g=>this.Di(h).next(()=>g)):this.Ki(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Ki(t){return Ll(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new at(X.FAILED_PRECONDITION,dm)})}Di(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(t).put("owner",e)}static D(){return zr.D()}bi(t){const e=Ll(t);return e.get("owner").next(r=>this.vi(r)?(J("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):z.resolve())}Mi(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(rn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;XT()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{const r=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return J("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){rn("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Ll(s){return Oe(s,"owner")}function Yc(s){return Oe(s,"clientMetadata")}function nC(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.$i=r,this.Ui=o}static Wi(t,e){let r=Ct(),o=Ct();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ig(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XT()?8:YE(Ve())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.Yi(t,e).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.Zi(t,e,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new iC;return this.Xi(t,e,h).next(m=>{if(u.result=m,this.zi)return this.es(t,e,h,m.size)})}).next(()=>u.result)}es(t,e,r,o){return r.documentReadCount<this.ji?(Za()<=Mt.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ja(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Za()<=Mt.DEBUG&&J("QueryEngine","Query:",Ja(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Za()<=Mt.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ja(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ln(e))):z.resolve())}Yi(t,e){if(Jv(e))return z.resolve(null);let r=Ln(e);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(e.limit!==null&&o===1&&(e=Nm(e,null,"F"),r=Ln(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=Ct(...u);return this.Ji.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,r).next(g=>{const _=this.ts(e,m);return this.ns(e,_,h,g.readTime)?this.Yi(t,Nm(e,null,"F")):this.rs(t,_,e,g)}))})))}Zi(t,e,r,o){return Jv(e)||o.isEqual(gt.min())?z.resolve(null):this.Ji.getDocuments(t,r).next(u=>{const h=this.ts(e,u);return this.ns(e,h,r,o)?z.resolve(null):(Za()<=Mt.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(e)),this.rs(t,h,e,u1(o,-1)).next(m=>m))})}ts(t,e){let r=new Wt(f0(t));return e.forEach((o,u)=>{du(t,u)&&(r=r.add(u))}),r}ns(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(t,e,r){return Za()<=Mt.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ja(e)),this.Ji.getDocumentsMatchingQuery(t,e,bn.min(),r)}rs(t,e,r,o){return this.Ji.getDocumentsMatchingQuery(t,r,o).next(u=>(e.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t,e,r,o){this.persistence=t,this.ss=e,this.serializer=o,this.os=new ae(wt),this._s=new Kr(u=>Qs(u),fu),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Y0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function Z0(s,t,e,r){return new rC(s,t,e,r)}async function J0(s,t){const e=It(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,e.ls(t),e.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let g=Ct();for(const _ of o){h.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of u){m.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(r,g).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:m}))})})}function sC(s,t){const e=It(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=e.cs.newChangeBuffer({trackRemovals:!0});return function(m,g,_,T){const b=_.batch,D=b.keys();let q=z.resolve();return D.forEach($=>{q=q.next(()=>T.getEntry(g,$)).next(W=>{const Q=_.docVersions.get($);ht(Q!==null),W.version.compareTo(Q)<0&&(b.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),T.addEntry(W)))})}),q.next(()=>m.mutationQueue.removeMutationBatch(g,b))}(e,r,t,u).next(()=>u.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=Ct();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>e.localDocuments.getDocuments(r,o))})}function W0(s){const t=It(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function aC(s,t){const e=It(s),r=t.snapshotVersion;let o=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=e.cs.newChangeBuffer({trackRemovals:!0});o=e.os;const m=[];t.targetChanges.forEach((T,b)=>{const D=o.get(b);if(!D)return;m.push(e.Ur.removeMatchingKeys(u,T.removedDocuments,b).next(()=>e.Ur.addMatchingKeys(u,T.addedDocuments,b)));let q=D.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?q=q.withResumeToken(be.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,r)),o=o.insert(b,q),function(W,Q,Tt){return W.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0}(D,q,T)&&m.push(e.Ur.updateTargetData(u,q))});let g=An(),_=Ct();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(oC(u,h,t.documentUpdates).next(T=>{g=T.Ps,_=T.Is})),!r.isEqual(gt.min())){const T=e.Ur.getLastRemoteSnapshotVersion(u).next(b=>e.Ur.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return z.waitFor(m).next(()=>h.apply(u)).next(()=>e.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(e.os=o,u))}function oC(s,t,e){let r=Ct(),o=Ct();return e.forEach(u=>r=r.add(u)),t.getEntries(s,r).next(u=>{let h=An();return e.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(gt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):J("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Ps:h,Is:o}})}function lC(s,t){const e=It(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function uC(s,t){const e=It(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Ur.getTargetData(r,t).next(u=>u?(o=u,z.resolve(o)):e.Ur.allocateTargetId(r).next(h=>(o=new Ki(t,h,"TargetPurposeListen",r.currentSequenceNumber),e.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.os=e.os.insert(r.targetId,r),e._s.set(t,r.targetId)),r})}async function Bm(s,t,e){const r=It(s),o=r.os.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Hr(h))throw h;J("LocalStore",`Failed to update sequence numbers for target ${t}: ${h}`)}r.os=r.os.remove(t),r._s.delete(o.target)}function RT(s,t,e){const r=It(s);let o=gt.min(),u=Ct();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,T){const b=It(g),D=b._s.get(T);return D!==void 0?z.resolve(b.os.get(D)):b.Ur.getTargetData(_,T)}(r,h,Ln(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>r.ss.getDocumentsMatchingQuery(h,t,e?o:gt.min(),e?u:Ct())).next(m=>(cC(r,X1(t),m),{documents:m,Ts:u})))}function cC(s,t,e){let r=s.us.get(t)||gt.min();e.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.us.set(t,r)}class DT{constructor(){this.activeTargetIds=eD()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tA{constructor(){this.so=new DT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,r){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new DT,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function mm(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="WebChannelConnection";class mC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+e.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(e,r,o,u,h){const m=mm(),g=this.xo(e,r.toUriEncodedString());J("RestConnection",`Sending RPC '${e}' ${m}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,u,h),this.No(e,g,_,o).then(T=>(J("RestConnection",`Received RPC '${e}' ${m}: `,T),T),T=>{throw Gs("RestConnection",`RPC '${e}' ${m} failed with error: `,T,"url: ",g,"request:",o),T})}Lo(e,r,o,u,h,m){return this.Mo(e,r,o,u,h)}Oo(e,r,o){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,h)=>e[h]=u),o&&o.headers.forEach((u,h)=>e[h]=u)}xo(e,r){const o=fC[e];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,r,o){const u=mm();return new Promise((h,m)=>{const g=new UE;g.setWithCredentials(!0),g.listenOnce(LE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case eh.NO_ERROR:const T=g.getResponseJson();J($e,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(T)),h(T);break;case eh.TIMEOUT:J($e,`RPC '${t}' ${u} timed out`),m(new at(X.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const b=g.getStatus();if(J($e,`RPC '${t}' ${u} failed with status:`,b,"response text:",g.getResponseText()),b>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const q=D==null?void 0:D.error;if(q&&q.status&&q.message){const $=function(Q){const Tt=Q.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Tt)>=0?Tt:X.UNKNOWN}(q.status);m(new at($,q.message))}else m(new at(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new at(X.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{J($e,`RPC '${t}' ${u} completed.`)}});const _=JSON.stringify(o);J($e,`RPC '${t}' ${u} sending request:`,o),g.send(e,"POST",_,r,15)})}Bo(t,e,r){const o=mm(),u=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=qE(),m=BE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const T=u.join("");J($e,`Creating RPC '${t}' stream ${o}: ${T}`,g);const b=h.createWebChannel(T,g);let D=!1,q=!1;const $=new dC({Io:Q=>{q?J($e,`Not sending because RPC '${t}' stream ${o} is closed:`,Q):(D||(J($e,`Opening RPC '${t}' stream ${o} transport.`),b.open(),D=!0),J($e,`RPC '${t}' stream ${o} sending:`,Q),b.send(Q))},To:()=>b.close()}),W=(Q,Tt,ft)=>{Q.listen(Tt,st=>{try{ft(st)}catch(At){setTimeout(()=>{throw At},0)}})};return W(b,zl.EventType.OPEN,()=>{q||(J($e,`RPC '${t}' stream ${o} transport opened.`),$.yo())}),W(b,zl.EventType.CLOSE,()=>{q||(q=!0,J($e,`RPC '${t}' stream ${o} transport closed`),$.So())}),W(b,zl.EventType.ERROR,Q=>{q||(q=!0,Gs($e,`RPC '${t}' stream ${o} transport errored:`,Q),$.So(new at(X.UNAVAILABLE,"The operation could not be completed")))}),W(b,zl.EventType.MESSAGE,Q=>{var Tt;if(!q){const ft=Q.data[0];ht(!!ft);const st=ft,At=st.error||((Tt=st[0])===null||Tt===void 0?void 0:Tt.error);if(At){J($e,`RPC '${t}' stream ${o} received error:`,At);const lt=At.status;let _t=function(w){const N=Ae[w];if(N!==void 0)return S0(N)}(lt),O=At.message;_t===void 0&&(_t=X.INTERNAL,O="Unknown error status: "+lt+" with message "+At.message),q=!0,$.So(new at(_t,O)),b.close()}else J($e,`RPC '${t}' stream ${o} received:`,ft),$.bo(ft)}}),W(m,zE.STAT_EVENT,Q=>{Q.stat===Sm.PROXY?J($e,`RPC '${t}' stream ${o} detected buffering proxy`):Q.stat===Sm.NOPROXY&&J($e,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.wo()},0),$}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return typeof window<"u"?window:null}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(s){return new yD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,e,r=1e3,o=1.5,u=6e4){this.ui=t,this.timerId=e,this.ko=r,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,e-r);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,e,r,o,u,h,m,g){this.ui=t,this.Ho=r,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eA(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===X.RESOURCE_EXHAUSTED?(rn(e.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===e&&this.P_(r,o)},r=>{t(()=>{const o=new at(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(t,e){const r=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return J("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pC extends nA{constructor(t,e,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=ED(this.serializer,t),r=function(u){if(!("targetChange"in u))return gt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?gt.min():h.readTime?an(h.readTime):gt.min()}(t);return this.listener.d_(e,r)}A_(t){const e={};e.database=Pm(this.serializer),e.addTarget=function(u,h){let m;const g=h.target;if(m=Th(g)?{documents:N0(u,g)}:{query:x0(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=R0(u,h.resumeToken);const _=xm(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(gt.min())>0){m.readTime=po(u,h.snapshotVersion.toTimestamp());const _=xm(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const r=bD(this.serializer,t);r&&(e.labels=r),this.a_(e)}R_(t){const e={};e.database=Pm(this.serializer),e.removeTarget=t,this.a_(e)}}class _C extends nA{constructor(t,e,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return ht(!!t.streamToken),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ht(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=AD(t.writeResults,t.commitTime),r=an(t.commitTime);return this.listener.g_(r,e)}p_(){const t={};t.database=Pm(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>bh(this.serializer,r))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC extends class{}{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new at(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Mo(t,Mm(e,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new at(X.UNKNOWN,u.toString())})}Lo(t,e,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Lo(t,Mm(e,r),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new at(X.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vC{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rn(e),this.D_=!1):J("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(h=>{r.enqueueAndForget(async()=>{ta(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(g){const _=It(g);_.L_.add(4),await gu(_),_.q_.set("Unknown"),_.L_.delete(4),await Kh(_)}(this))})}),this.q_=new vC(r,o)}}async function Kh(s){if(ta(s))for(const t of s.B_)await t(!0)}async function gu(s){for(const t of s.B_)await t(!1)}function iA(s,t){const e=It(s);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Cg(e)?Dg(e):bo(e).r_()&&Rg(e,t))}function wg(s,t){const e=It(s),r=bo(e);e.N_.delete(t),r.r_()&&rA(e,t),e.N_.size===0&&(r.r_()?r.o_():ta(e)&&e.q_.set("Unknown"))}function Rg(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}bo(s).A_(t)}function rA(s,t){s.Q_.xe(t),bo(s).R_(t)}function Dg(s){s.Q_=new mD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),bo(s).start(),s.q_.v_()}function Cg(s){return ta(s)&&!bo(s).n_()&&s.N_.size>0}function ta(s){return It(s).L_.size===0}function sA(s){s.Q_=void 0}async function EC(s){s.q_.set("Online")}async function AC(s){s.N_.forEach((t,e)=>{Rg(s,t)})}async function bC(s,t){sA(s),Cg(s)?(s.q_.M_(t),Dg(s)):s.q_.set("Unknown")}async function SC(s,t,e){if(s.q_.set("Online"),t instanceof w0&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))}(s,t)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Rh(s,r)}else if(t instanceof oh?s.Q_.Ke(t):t instanceof I0?s.Q_.He(t):s.Q_.We(t),!e.isEqual(gt.min()))try{const r=await W0(s.localStore);e.compareTo(r)>=0&&await function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.N_.get(_);T&&u.N_.set(_,T.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const T=u.N_.get(g);if(!T)return;u.N_.set(g,T.withResumeToken(be.EMPTY_BYTE_STRING,T.snapshotVersion)),rA(u,g);const b=new Ki(T.target,g,_,T.sequenceNumber);Rg(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(s,e)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Rh(s,r)}}async function Rh(s,t,e){if(!Hr(t))throw t;s.L_.add(1),await gu(s),s.q_.set("Offline"),e||(e=()=>W0(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await e(),s.L_.delete(1),await Kh(s)})}function aA(s,t){return t().catch(e=>Rh(s,e,t))}async function pu(s){const t=It(s),e=Fr(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;IC(t);)try{const o=await lC(t.localStore,r);if(o===null){t.O_.length===0&&e.o_();break}r=o.batchId,wC(t,o)}catch(o){await Rh(t,o)}oA(t)&&lA(t)}function IC(s){return ta(s)&&s.O_.length<10}function wC(s,t){s.O_.push(t);const e=Fr(s);e.r_()&&e.V_&&e.m_(t.mutations)}function oA(s){return ta(s)&&!Fr(s).n_()&&s.O_.length>0}function lA(s){Fr(s).start()}async function RC(s){Fr(s).p_()}async function DC(s){const t=Fr(s);for(const e of s.O_)t.m_(e.mutations)}async function CC(s,t,e){const r=s.O_.shift(),o=_g.from(r,t,e);await aA(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await pu(s)}async function VC(s,t){t&&Fr(s).V_&&await async function(r,o){if(function(h){return hD(h)&&h!==X.ABORTED}(o.code)){const u=r.O_.shift();Fr(r).s_(),await aA(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await pu(r)}}(s,t),oA(s)&&lA(s)}async function VT(s,t){const e=It(s);e.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=ta(e);e.L_.add(3),await gu(e),r&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await Kh(e)}async function OC(s,t){const e=It(s);t?(e.L_.delete(2),await Kh(e)):t||(e.L_.add(2),await gu(e),e.q_.set("Unknown"))}function bo(s){return s.K_||(s.K_=function(e,r,o){const u=It(e);return u.w_(),new pC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:EC.bind(null,s),Ro:AC.bind(null,s),mo:bC.bind(null,s),d_:SC.bind(null,s)}),s.B_.push(async t=>{t?(s.K_.s_(),Cg(s)?Dg(s):s.q_.set("Unknown")):(await s.K_.stop(),sA(s))})),s.K_}function Fr(s){return s.U_||(s.U_=function(e,r,o){const u=It(e);return u.w_(),new _C(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RC.bind(null,s),mo:VC.bind(null,s),f_:DC.bind(null,s),g_:CC.bind(null,s)}),s.B_.push(async t=>{t?(s.U_.s_(),await pu(s)):(await s.U_.stop(),s.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const h=Date.now()+r,m=new Vg(t,e,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Og(s,t){if(rn("AsyncQueue",`${t}: ${s}`),Hr(s))return new at(X.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t){this.comparator=t?(e,r)=>t(e,r)||rt.comparator(e.key,r.key):(e,r)=>rt.comparator(e.key,r.key),this.keyedMap=Bl(),this.sortedSet=new ae(this.comparator)}static emptySet(t){return new ao(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ao)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ao;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.W_=new ae(rt.comparator)}track(t){const e=t.doc.key,r=this.W_.get(e);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(e,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(e):t.type===1&&r.type===2?this.W_=this.W_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):ut():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,r)=>{t.push(r)}),t}}class _o{constructor(t,e,r,o,u,h,m,g,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,e,r,o,u){const h=[];return e.forEach(m=>{h.push({type:0,doc:m})}),new _o(t,e,ao.emptySet(e),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Lh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class xC{constructor(){this.queries=NT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,r){const o=It(e),u=o.queries;o.queries=NT(),u.forEach((h,m)=>{for(const g of m.j_)g.onError(r)})})(this,new at(X.ABORTED,"Firestore shutting down"))}}function NT(){return new Kr(s=>h0(s),Lh)}async function MC(s,t){const e=It(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.H_()&&t.J_()&&(r=2):(u=new NC,r=t.J_()?0:1);try{switch(r){case 0:u.z_=await e.onListen(o,!0);break;case 1:u.z_=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(h){const m=Og(h,`Initialization of query '${Ja(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.j_.push(t),t.Z_(e.onlineState),u.z_&&t.X_(u.z_)&&Ng(e)}async function PC(s,t){const e=It(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const h=u.j_.indexOf(t);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=t.J_()?0:1:!u.H_()&&t.J_()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function kC(s,t){const e=It(s);let r=!1;for(const o of t){const u=o.query,h=e.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(r=!0);h.z_=o}}r&&Ng(e)}function UC(s,t,e){const r=It(s),o=r.queries.get(t);if(o)for(const u of o.j_)u.onError(e);r.queries.delete(t)}function Ng(s){s.Y_.forEach(t=>{t.next()})}var qm,xT;(xT=qm||(qm={})).ea="default",xT.Cache="cache";class LC{constructor(t,e,r){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new _o(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const r=e!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=_o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t){this.key=t}}class cA{constructor(t){this.key=t}}class zC{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ct(),this.mutatedKeys=Ct(),this.Aa=f0(t),this.Ra=new ao(this.Aa)}get Va(){return this.Ta}ma(t,e){const r=e?e.fa:new OT,o=e?e.Ra:this.Ra;let u=e?e.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((T,b)=>{const D=o.get(T),q=du(this.query,b)?b:null,$=!!D&&this.mutatedKeys.has(D.key),W=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Q=!1;D&&q?D.data.isEqual(q.data)?$!==W&&(r.track({type:3,doc:q}),Q=!0):this.ga(D,q)||(r.track({type:2,doc:q}),Q=!0,(g&&this.Aa(q,g)>0||_&&this.Aa(q,_)<0)&&(m=!0)):!D&&q?(r.track({type:0,doc:q}),Q=!0):D&&!q&&(r.track({type:1,doc:D}),Q=!0,(g||_)&&(m=!0)),Q&&(q?(h=h.add(q),u=W?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Ra:h,fa:r,ns:m,mutatedKeys:u}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const h=t.fa.G_();h.sort((T,b)=>function(q,$){const W=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return W(q)-W($)}(T.type,b.type)||this.Aa(T.doc,b.doc)),this.pa(r),o=o!=null&&o;const m=e&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,h.length!==0||_?{snapshot:new _o(this.query,t.Ra,u,h,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new OT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ct(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const e=[];return t.forEach(r=>{this.da.has(r)||e.push(new cA(r))}),this.da.forEach(r=>{t.has(r)||e.push(new uA(r))}),e}ba(t){this.Ta=t.Ts,this.da=Ct();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return _o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BC{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class qC{constructor(t){this.key=t,this.va=!1}}class jC{constructor(t,e,r,o,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Kr(m=>h0(m),Lh),this.Ma=new Map,this.xa=new Set,this.Oa=new ae(rt.comparator),this.Na=new Map,this.La=new bg,this.Ba={},this.ka=new Map,this.qa=$s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FC(s,t,e=!0){const r=pA(s);let o;const u=r.Fa.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await hA(r,t,e,!0),o}async function GC(s,t){const e=pA(s);await hA(e,t,!0,!1)}async function hA(s,t,e,r){const o=await uC(s.localStore,Ln(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await HC(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&e&&iA(s.remoteStore,o),m}async function HC(s,t,e,r,o){s.Ka=(b,D,q)=>async function(W,Q,Tt,ft){let st=Q.view.ma(Tt);st.ns&&(st=await RT(W.localStore,Q.query,!1).then(({documents:O})=>Q.view.ma(O,st)));const At=ft&&ft.targetChanges.get(Q.targetId),lt=ft&&ft.targetMismatches.get(Q.targetId)!=null,_t=Q.view.applyChanges(st,W.isPrimaryClient,At,lt);return PT(W,Q.targetId,_t.wa),_t.snapshot}(s,b,D,q);const u=await RT(s.localStore,t,!0),h=new zC(t,u.Ts),m=h.ma(u.documents),g=mu.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);PT(s,e,_.wa);const T=new BC(t,e,h);return s.Fa.set(t,T),s.Ma.has(e)?s.Ma.get(e).push(t):s.Ma.set(e,[t]),_.snapshot}async function KC(s,t,e){const r=It(s),o=r.Fa.get(t),u=r.Ma.get(o.targetId);if(u.length>1)return r.Ma.set(o.targetId,u.filter(h=>!Lh(h,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Bm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),e&&wg(r.remoteStore,o.targetId),jm(r,o.targetId)}).catch(Js)):(jm(r,o.targetId),await Bm(r.localStore,o.targetId,!0))}async function QC(s,t){const e=It(s),r=e.Fa.get(t),o=e.Ma.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),wg(e.remoteStore,r.targetId))}async function YC(s,t,e){const r=_A(s);try{const o=await function(h,m){const g=It(h),_=ue.now(),T=m.reduce((q,$)=>q.add($.key),Ct());let b,D;return g.persistence.runTransaction("Locally write mutations","readwrite",q=>{let $=An(),W=Ct();return g.cs.getEntries(q,T).next(Q=>{$=Q,$.forEach((Tt,ft)=>{ft.isValidDocument()||(W=W.add(Tt))})}).next(()=>g.localDocuments.getOverlayedDocuments(q,$)).next(Q=>{b=Q;const Tt=[];for(const ft of m){const st=uD(ft,b.get(ft.key).overlayedDocument);st!=null&&Tt.push(new Ji(ft.key,st,i0(st.value.mapValue),fn.exists(!0)))}return g.mutationQueue.addMutationBatch(q,_,Tt,m)}).next(Q=>{D=Q;const Tt=Q.applyToLocalDocumentSet(b,W);return g.documentOverlayCache.saveOverlays(q,Q.batchId,Tt)})}).then(()=>({batchId:D.batchId,changes:m0(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Ba[h.currentUser.toKey()];_||(_=new ae(wt)),_=_.insert(m,g),h.Ba[h.currentUser.toKey()]=_}(r,o.batchId,e),await _u(r,o.changes),await pu(r.remoteStore)}catch(o){const u=Og(o,"Failed to persist write");e.reject(u)}}async function fA(s,t){const e=It(s);try{const r=await aC(e.localStore,t);t.targetChanges.forEach((o,u)=>{const h=e.Na.get(u);h&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?ht(h.va):o.removedDocuments.size>0&&(ht(h.va),h.va=!1))}),await _u(e,r,t)}catch(r){await Js(r)}}function MT(s,t,e){const r=It(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Fa.forEach((u,h)=>{const m=h.view.Z_(t);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=It(h);g.onlineState=m;let _=!1;g.queries.forEach((T,b)=>{for(const D of b.j_)D.Z_(m)&&(_=!0)}),_&&Ng(g)}(r.eventManager,t),o.length&&r.Ca.d_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function XC(s,t,e){const r=It(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Na.get(t),u=o&&o.key;if(u){let h=new ae(rt.comparator);h=h.insert(u,me.newNoDocument(u,gt.min()));const m=Ct().add(u),g=new qh(gt.min(),new Map,new ae(wt),h,m);await fA(r,g),r.Oa=r.Oa.remove(u),r.Na.delete(t),xg(r)}else await Bm(r.localStore,t,!1).then(()=>jm(r,t,e)).catch(Js)}async function $C(s,t){const e=It(s),r=t.batch.batchId;try{const o=await sC(e.localStore,t);mA(e,r,null),dA(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await _u(e,o)}catch(o){await Js(o)}}async function ZC(s,t,e){const r=It(s);try{const o=await function(h,m){const g=It(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let T;return g.mutationQueue.lookupMutationBatch(_,m).next(b=>(ht(b!==null),T=b.keys(),g.mutationQueue.removeMutationBatch(_,b))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T)).next(()=>g.localDocuments.getDocuments(_,T))})}(r.localStore,t);mA(r,t,e),dA(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await _u(r,o)}catch(o){await Js(o)}}function dA(s,t){(s.ka.get(t)||[]).forEach(e=>{e.resolve()}),s.ka.delete(t)}function mA(s,t,e){const r=It(s);let o=r.Ba[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Ba[r.currentUser.toKey()]=o}}function jm(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Ma.get(t))s.Fa.delete(r),e&&s.Ca.$a(r,e);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach(r=>{s.La.containsKey(r)||gA(s,r)})}function gA(s,t){s.xa.delete(t.path.canonicalString());const e=s.Oa.get(t);e!==null&&(wg(s.remoteStore,e),s.Oa=s.Oa.remove(t),s.Na.delete(e),xg(s))}function PT(s,t,e){for(const r of e)r instanceof uA?(s.La.addReference(r.key,t),JC(s,r)):r instanceof cA?(J("SyncEngine","Document no longer in limbo: "+r.key),s.La.removeReference(r.key,t),s.La.containsKey(r.key)||gA(s,r.key)):ut()}function JC(s,t){const e=t.key,r=e.path.canonicalString();s.Oa.get(e)||s.xa.has(r)||(J("SyncEngine","New document in limbo: "+e),s.xa.add(r),xg(s))}function xg(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const e=new rt(Qt.fromString(t)),r=s.qa.next();s.Na.set(r,new qC(e)),s.Oa=s.Oa.insert(e,r),iA(s.remoteStore,new Ki(Ln(dg(e.path)),r,"TargetPurposeLimboResolution",Un.oe))}}async function _u(s,t,e){const r=It(s),o=[],u=[],h=[];r.Fa.isEmpty()||(r.Fa.forEach((m,g)=>{h.push(r.Ka(g,t,e).then(_=>{var T;if((_||e)&&r.isPrimaryClient){const b=_?!_.fromCache:(T=e==null?void 0:e.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=Ig.Wi(g.targetId,_);u.push(b)}}))}),await Promise.all(h),r.Ca.d_(o),await async function(g,_){const T=It(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>z.forEach(_,D=>z.forEach(D.$i,q=>T.persistence.referenceDelegate.addReference(b,D.targetId,q)).next(()=>z.forEach(D.Ui,q=>T.persistence.referenceDelegate.removeReference(b,D.targetId,q)))))}catch(b){if(!Hr(b))throw b;J("LocalStore","Failed to update sequence numbers: "+b)}for(const b of _){const D=b.targetId;if(!b.fromCache){const q=T.os.get(D),$=q.snapshotVersion,W=q.withLastLimboFreeSnapshotVersion($);T.os=T.os.insert(D,W)}}}(r.localStore,u))}async function WC(s,t){const e=It(s);if(!e.currentUser.isEqual(t)){J("SyncEngine","User change. New user:",t.toKey());const r=await J0(e.localStore,t);e.currentUser=t,function(u,h){u.ka.forEach(m=>{m.forEach(g=>{g.reject(new at(X.CANCELLED,h))})}),u.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _u(e,r.hs)}}function tV(s,t){const e=It(s),r=e.Na.get(t);if(r&&r.va)return Ct().add(r.key);{let o=Ct();const u=e.Ma.get(t);if(!u)return o;for(const h of u){const m=e.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function pA(s){const t=It(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XC.bind(null,t),t.Ca.d_=kC.bind(null,t.eventManager),t.Ca.$a=UC.bind(null,t.eventManager),t}function _A(s){const t=It(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$C.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,t),t}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Hh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return Z0(this.persistence,new $0,t.initialUser,this.serializer)}Ga(t){return new X0(Gh.Zr,this.serializer)}Wa(t){return new tA}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class eV extends su{constructor(t,e,r){super(),this.Ja=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ja.initialize(this,t),await _A(this.Ja.syncEngine),await pu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(t){return Z0(this.persistence,new $0,t.initialUser,this.serializer)}ja(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new BD(r,t.asyncQueue,e)}Ha(t,e){const r=new d1(e,this.persistence);return new f1(t.asyncQueue,r)}Ga(t){const e=nC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Sg(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,gC(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new tA}}class Dh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WC.bind(null,this.syncEngine),await OC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new xC}()}createDatastore(t){const e=Hh(t.databaseInfo.databaseId),r=function(u){return new mC(u)}(t.databaseInfo);return function(u,h,m,g){return new yC(u,h,m,g)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,o,u,h,m){return new TC(r,o,u,h,m)}(this.localStore,this.datastore,t.asyncQueue,e=>MT(this.syncEngine,e,0),function(){return CT.D()?new CT:new hC}())}createSyncEngine(t,e){return function(o,u,h,m,g,_,T){const b=new jC(o,u,h,m,g,_);return T&&(b.Qa=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(o){const u=It(o);J("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await gu(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Dh.provider={build:()=>new Dh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):rn("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=He.UNAUTHENTICATED,this.clientId=FE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{J("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(J("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Og(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function gm(s,t){s.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await J0(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function kT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await rV(s);J("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>VT(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>VT(t.remoteStore,o)),s._onlineComponents=t}async function rV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await gm(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(e))throw e;Gs("Error using user provided cache. Falling back to memory cache: "+e),await gm(s,new su)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await gm(s,new su);return s._offlineComponents}async function yA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await kT(s,s._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await kT(s,new Dh))),s._onlineComponents}function sV(s){return yA(s).then(t=>t.syncEngine)}async function aV(s){const t=await yA(s),e=t.eventManager;return e.onListen=FC.bind(null,t.syncEngine),e.onUnlisten=KC.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=GC.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=QC.bind(null,t.syncEngine),e}function oV(s,t,e={}){const r=new Qi;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const T=new nV({next:D=>{T.Za(),h.enqueueAndForget(()=>PC(u,b)),D.fromCache&&g.source==="server"?_.reject(new at(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),b=new LC(m,T,{includeMetadataChanges:!0,_a:!0});return MC(u,b)}(await aV(s),s.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(s,t,e){if(!e)throw new at(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function lV(s,t,e,r){if(t===!0&&r===!0)throw new at(X.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function LT(s){if(!rt.isDocumentKey(s))throw new at(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function zT(s){if(rt.isDocumentKey(s))throw new at(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Mg(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ut()}function Zs(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new at(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Mg(s);throw new at(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new at(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new at(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vA((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new at(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qh{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BT(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t1;switch(r.type){case"firstParty":return new r1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=UT.get(e);r&&(J("ComponentProvider","Removing Datastore"),UT.delete(e),r.terminate())}(this),Promise.resolve()}}function uV(s,t,e,r={}){var o;const u=(s=Zs(s,Qh))._getSettings(),h=`${t}:${e}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),r.mockUserToken){let m,g;if(typeof r.mockUserToken=="string")m=r.mockUserToken,g=He.MOCK_USER;else{m=wS(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new at(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new He(_)}s._authCredentials=new e1(new jE(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Yh(this.firestore,t,this._query)}}class zn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zn(this.firestore,t,this._key)}}class Br extends Yh{constructor(t,e,r){super(t,e,dg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zn(this.firestore,null,new rt(t))}withConverter(t){return new Br(this.firestore,t,this._path)}}function Pg(s,t,...e){if(s=Je(s),TA("collection","path",t),s instanceof Qh){const r=Qt.fromString(t,...e);return zT(r),new Br(s,null,r)}{if(!(s instanceof zn||s instanceof Br))throw new at(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return zT(r),new Br(s.firestore,null,r)}}function EA(s,t,...e){if(s=Je(s),arguments.length===1&&(t=FE.newId()),TA("doc","path",t),s instanceof Qh){const r=Qt.fromString(t,...e);return LT(r),new zn(s,null,new rt(r))}{if(!(s instanceof zn||s instanceof Br))throw new at(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(t,...e));return LT(r),new zn(s.firestore,s instanceof Br?s.converter:null,new rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eA(this,"async_queue_retry"),this.Vu=()=>{const r=lh();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const e=lh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=lh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new Qi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Hr(t))throw t;J("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(r=>{this.Eu=r,this.du=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(r);throw rn("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=e,e}enqueueAfterDelay(t,e,r){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const o=Vg.createAndSchedule(this,t,e,r,u=>this.yu(u));return this.Tu.push(o),o}fu(){this.Eu&&ut()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class yu extends Qh{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new qT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new qT(t),this._firestoreClient=void 0,await t}}}function cV(s,t){const e=typeof s=="object"?s:tE(),r=typeof s=="string"?s:"(default)",o=Qm(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=SS("firestore");u&&uV(o,...u)}return o}function AA(s){if(s._terminated)throw new at(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||bA(s),s._firestoreClient}function bA(s){var t,e,r;const o=s._freezeSettings(),u=function(m,g,_,T){return new P1(m,g,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,vA(T.experimentalLongPollingOptions),T.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((e=o.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new iV(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}function hV(s,t){Gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return fV(s,Dh.provider,{build:r=>new eV(r,e.cacheSizeBytes,void 0)}),Promise.resolve()}function fV(s,t,e){if((s=Zs(s,yu))._firestoreClient||s._terminated)throw new at(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new at(X.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},bA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yo(be.fromBase64String(t))}catch(e){throw new at(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new yo(be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new at(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new at(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new at(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=/^__.*__$/;class mV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Ji(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ao(t,this.data,e,this.fieldTransforms)}}class SA{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Ji(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function IA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class zg{constructor(t,e,r,o,u,h){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new zg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.Fu({path:r,xu:!1});return o.Ou(t),o}Nu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Ch(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(IA(this.Cu)&&dV.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class gV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Hh(t)}Qu(t,e,r,o=!1){return new zg({Cu:t,methodName:e,qu:r,path:le.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wA(s){const t=s._freezeSettings(),e=Hh(s._databaseId);return new gV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function pV(s,t,e,r,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,t,e,o);Bg("Data must be an object, but it was:",h,r);const m=RA(r,h);let g,_;if(u.merge)g=new hn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const b of u.mergeFields){const D=Fm(t,b,e);if(!h.contains(D))throw new at(X.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);CA(T,D)||T.push(D)}g=new hn(T),_=h.fieldTransforms.filter(b=>g.covers(b.field))}else g=null,_=h.fieldTransforms;return new mV(new Ze(m),g,_)}class $h extends kg{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $h}}function _V(s,t,e,r){const o=s.Qu(1,t,e);Bg("Data must be an object, but it was:",o,r);const u=[],h=Ze.empty();Ws(r,(g,_)=>{const T=qg(t,g,e);_=Je(_);const b=o.Nu(T);if(_ instanceof $h)u.push(T);else{const D=Zh(_,b);D!=null&&(u.push(T),h.set(T,D))}});const m=new hn(u);return new SA(h,m,o.fieldTransforms)}function yV(s,t,e,r,o,u){const h=s.Qu(1,t,e),m=[Fm(t,r,e)],g=[o];if(u.length%2!=0)throw new at(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)m.push(Fm(t,u[D])),g.push(u[D+1]);const _=[],T=Ze.empty();for(let D=m.length-1;D>=0;--D)if(!CA(_,m[D])){const q=m[D];let $=g[D];$=Je($);const W=h.Nu(q);if($ instanceof $h)_.push(q);else{const Q=Zh($,W);Q!=null&&(_.push(q),T.set(q,Q))}}const b=new hn(_);return new SA(T,b,h.fieldTransforms)}function Zh(s,t){if(DA(s=Je(s)))return Bg("Unsupported field value:",t,s),RA(s,t);if(s instanceof kg)return function(r,o){if(!IA(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const m of r){let g=Zh(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,t)}return function(r,o){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nD(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ue.fromDate(r);return{timestampValue:po(o.serializer,u)}}if(r instanceof ue){const u=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:po(o.serializer,u)}}if(r instanceof Ug)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:R0(o.serializer,r._byteString)};if(r instanceof zn){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Lg)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return mg(m.serializer,g)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${Mg(r)}`)}(s,t)}function RA(s,t){const e={};return WE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ws(s,(r,o)=>{const u=Zh(o,t.Mu(r));u!=null&&(e[r]=u)}),{mapValue:{fields:e}}}function DA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ue||s instanceof Ug||s instanceof yo||s instanceof zn||s instanceof kg||s instanceof Lg)}function Bg(s,t,e){if(!DA(e)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(e)){const r=Mg(e);throw r==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+r)}}function Fm(s,t,e){if((t=Je(t))instanceof Xh)return t._internalPath;if(typeof t=="string")return qg(s,t);throw Ch("Field path arguments must be of type string or ",s,!1,void 0,e)}const vV=new RegExp("[~\\*/\\[\\]]");function qg(s,t,e){if(t.search(vV)>=0)throw Ch(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Xh(...t.split("."))._internalPath}catch{throw Ch(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Ch(s,t,e,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new at(X.INVALID_ARGUMENT,m+s+g)}function CA(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new TV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(OA("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class TV extends VA{data(){return super.data()}}function OA(s,t){return typeof t=="string"?qg(s,t):t instanceof Xh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new at(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AV{convertValue(t,e="none"){switch(Ks(t)){case 0:return null;case 1:return t.booleanValue;case 2:return se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ut()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Ws(t,(o,u)=>{r[o]=this.convertValue(u,e)}),r}convertVectorValue(t){var e,r,o;const u=(o=(r=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>se(h.doubleValue));return new Lg(u)}convertGeoPoint(t){return new Ug(se(t.latitude),se(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=cg(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(tu(t));default:return null}}convertTimestamp(t){const e=$i(t);return new ue(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Qt.fromString(t);ht(U0(r));const o=new Hs(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(e)||rn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(s,t,e){let r;return r=s?s.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class SV extends VA{constructor(t,e,r,o,u,h){super(t,e,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(OA("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class uh extends SV{data(t={}){return super.data(t)}}class IV{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new $c(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new uh(this._firestore,this._userDataWriter,r.key,r,new $c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new at(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new uh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new uh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:wV(m.type),doc:g,oldIndex:_,newIndex:T}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}class RV extends AV{constructor(t){super(),this.firestore=t}convertBytes(t){return new yo(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new zn(this.firestore,null,e)}}function NA(s){s=Zs(s,Yh);const t=Zs(s.firestore,yu),e=AA(t),r=new RV(t);return EV(s._query),oV(e,s._query).then(o=>new IV(t,r,s,o))}function DV(s,t,e,...r){s=Zs(s,zn);const o=Zs(s.firestore,yu),u=wA(o);let h;return h=typeof(t=Je(t))=="string"||t instanceof Xh?yV(u,"updateDoc",s._key,t,e,r):_V(u,"updateDoc",s._key,t),xA(o,[h.toMutation(s._key,fn.exists(!0))])}function CV(s,t){const e=Zs(s.firestore,yu),r=EA(s),o=bV(s.converter,t);return xA(e,[pV(wA(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function xA(s,t){return function(r,o){const u=new Qi;return r.asyncQueue.enqueueAndForget(async()=>YC(await sV(r),o,u)),u.promise}(AA(s),t)}(function(t,e=!0){(function(o){Eo=o})(vo),oo(new qs("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new yu(new n1(r.getProvider("auth-internal")),new a1(r.getProvider("app-check-internal")),function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new at(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(_.options.projectId,T)}(h,o),h);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Lr(kv,"4.7.3",t),Lr(kv,"4.7.3","esm2017")})();const VV={apiKey:"AIzaSyCOa_tTly-MBkraG1MtlQcUx1yb5k2piBU",authDomain:"fluencyapp-37ad5.firebaseapp.com",projectId:"fluencyapp-37ad5",storageBucket:"fluencyapp-37ad5.firebasestorage.app",messagingSenderId:"135947529307",appId:"1:135947529307:web:4886c941d78d2fbd96e37e",measurementId:"G-1LKRZJZLXH"},MA=WT(VV),Gr=HR(MA),OV=new qi,au=cV(MA);hV(au).catch(console.warn);const NV=({user:s})=>s?pt.jsx("button",{onClick:()=>bE(Gr),children:"Sign out"}):pt.jsx("button",{onClick:()=>tR(Gr,OV),children:"Sign in with Google"}),xV=()=>{const[s,t]=Ce.useState(""),[e,r]=Ce.useState(""),o=async()=>{const u=Gr.currentUser;if(!u||!s||!e)return;const h=Pg(au,"users",u.uid,"words");await CV(h,{english:s,spanish:e,correctCount:0,lastSeen:Date.now()}),t(""),r("")};return pt.jsxs("div",{children:[pt.jsx("h2",{children:"Add New Word"}),pt.jsx("input",{value:s,onChange:u=>t(u.target.value),placeholder:"English"}),pt.jsx("input",{value:e,onChange:u=>r(u.target.value),placeholder:"Spanish"}),pt.jsx("button",{onClick:o,children:"Add Word"})]})},MV=()=>{const[s,t]=Ce.useState([]),[e,r]=Ce.useState(null),[o,u]=Ce.useState(""),[h,m]=Ce.useState("");Ce.useEffect(()=>{(async()=>{const T=Gr.currentUser;if(!T)return;const D=(await NA(Pg(au,"users",T.uid,"words"))).docs.map(q=>({id:q.id,...q.data()}));t(D),r(D[Math.floor(Math.random()*D.length)])})()},[]);const g=async()=>{if(!e)return;if(o.toLowerCase().trim()===e.spanish.toLowerCase()){m("✅ Correct!");const T=EA(au,"users",Gr.currentUser.uid,"words",e.id);await DV(T,{correctCount:e.correctCount+1,lastSeen:Date.now()})}else m(`❌ Wrong! Correct answer: ${e.spanish}`);u("");const _=s[Math.floor(Math.random()*s.length)];r(_)};return pt.jsxs("div",{children:[pt.jsx("h2",{children:"Practice Mode"}),e&&pt.jsxs("div",{children:[pt.jsxs("p",{children:["Translate: ",pt.jsx("strong",{children:e.english})]}),pt.jsx("input",{value:o,onChange:_=>u(_.target.value),placeholder:"Type in Spanish"}),pt.jsx("button",{onClick:g,children:"Check"}),pt.jsx("p",{children:h})]})]})},PV=()=>{const[s,t]=Ce.useState({total:0,totalCorrect:0,accuracy:0,practicedToday:0,practicedWeek:0,practicedMonth:0});return Ce.useEffect(()=>{(async()=>{const r=Gr.currentUser;if(!r)return;const o=Date.now(),u=1e3*60*60*24,h=u*7,m=u*30,_=(await NA(Pg(au,"users",r.uid,"words"))).docs.map(Q=>({id:Q.id,...Q.data()})),T=_.length,b=_.reduce((Q,Tt)=>Q+(Tt.correctCount||0),0),D=T>0?Math.round(b/T*100):0,q=_.filter(Q=>o-Q.lastSeen<u).length,$=_.filter(Q=>o-Q.lastSeen<h).length,W=_.filter(Q=>o-Q.lastSeen<m).length;t({total:T,totalCorrect:b,accuracy:D,practicedToday:q,practicedWeek:$,practicedMonth:W})})()},[]),pt.jsxs("div",{children:[pt.jsx("h2",{children:"📊 Your Progress"}),pt.jsxs("ul",{children:[pt.jsxs("li",{children:[pt.jsx("strong",{children:"Total words:"})," ",s.total]}),pt.jsxs("li",{children:[pt.jsx("strong",{children:"Total correct answers:"})," ",s.totalCorrect]}),pt.jsxs("li",{children:[pt.jsx("strong",{children:"Accuracy:"})," ",s.accuracy,"%"]}),pt.jsxs("li",{children:[pt.jsx("strong",{children:"Practiced today:"})," ",s.practicedToday]}),pt.jsxs("li",{children:[pt.jsx("strong",{children:"Practiced this week:"})," ",s.practicedWeek]}),pt.jsxs("li",{children:[pt.jsx("strong",{children:"Practiced this month:"})," ",s.practicedMonth]})]})]})},kV=({user:s})=>{const[t,e]=Ce.useState(!1),r=Ce.useRef(null),o=()=>e(!t),u=h=>{r.current&&!r.current.contains(h.target)&&e(!1)};return Ce.useEffect(()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)),[]),pt.jsxs("nav",{className:"navbar",children:[pt.jsx("div",{className:"navbar-title",children:"Fluency App"}),s&&pt.jsxs("div",{className:"profile-container",ref:r,children:[pt.jsx("img",{src:s.photoURL||"/default-avatar.png",alt:"Profile",className:"profile-pic",onClick:o}),t&&pt.jsxs("div",{className:"dropdown",children:[pt.jsx("div",{className:"dropdown-item",children:pt.jsx("strong",{children:s.displayName})}),pt.jsx("div",{className:"dropdown-item",children:s.email}),pt.jsx("hr",{}),pt.jsx("button",{className:"dropdown-item logout",onClick:()=>bE(Gr),children:"Log out"})]})]})]})};function UV(){const[s]=ZR(Gr);return pt.jsxs(pt.Fragment,{children:[pt.jsx(kV,{user:s}),pt.jsx("div",{style:{padding:20},children:s?pt.jsxs(pt.Fragment,{children:[pt.jsx(PV,{}),pt.jsx(xV,{}),pt.jsx(MV,{})]}):pt.jsx(NV,{user:s})})]})}pS.createRoot(document.getElementById("root")).render(pt.jsx(lS.StrictMode,{children:pt.jsx(UV,{})}));
