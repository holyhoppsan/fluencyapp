function QS(s,t){for(var e=0;e<t.length;e++){const r=t[e];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function yT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var _m={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function YS(){if(Ev)return jl;Ev=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return jl.Fragment=t,jl.jsx=e,jl.jsxs=e,jl}var Tv;function XS(){return Tv||(Tv=1,_m.exports=YS()),_m.exports}var ht=XS(),ym={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function $S(){if(Av)return Ct;Av=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,Y={};function q(D,Z,ot){this.props=D,this.context=Z,this.refs=Y,this.updater=ot||k}q.prototype.isReactComponent={},q.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},q.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function st(){}st.prototype=q.prototype;function it(D,Z,ot){this.props=D,this.context=Z,this.refs=Y,this.updater=ot||k}var W=it.prototype=new st;W.constructor=it,H(W,q.prototype),W.isPureReactComponent=!0;var ct=Array.isArray,ut={H:null,A:null,T:null,S:null,V:null},_t=Object.prototype.hasOwnProperty;function x(D,Z,ot,et,vt,Vt){return ot=Vt.ref,{$$typeof:s,type:D,key:Z,ref:ot!==void 0?ot:null,props:Vt}}function S(D,Z){return x(D.type,Z,void 0,void 0,void 0,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ot){return Z[ot]})}var N=/\/+/g;function P(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function C(){}function ze(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function fe(D,Z,ot,et,vt){var Vt=typeof D;(Vt==="undefined"||Vt==="boolean")&&(D=null);var St=!1;if(D===null)St=!0;else switch(Vt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(D.$$typeof){case s:case t:St=!0;break;case E:return St=D._init,fe(St(D._payload),Z,ot,et,vt)}}if(St)return vt=vt(D),St=et===""?"."+P(D,0):et,ct(vt)?(ot="",St!=null&&(ot=St.replace(N,"$&/")+"/"),fe(vt,Z,ot,"",function(Yn){return Yn})):vt!=null&&(R(vt)&&(vt=S(vt,ot+(vt.key==null||D&&D.key===vt.key?"":(""+vt.key).replace(N,"$&/")+"/")+St)),Z.push(vt)),1;St=0;var Ne=et===""?".":et+":";if(ct(D))for(var ne=0;ne<D.length;ne++)et=D[ne],Vt=Ne+P(et,ne),St+=fe(et,Z,ot,Vt,vt);else if(ne=I(D),typeof ne=="function")for(D=ne.call(D),ne=0;!(et=D.next()).done;)et=et.value,Vt=Ne+P(et,ne++),St+=fe(et,Z,ot,Vt,vt);else if(Vt==="object"){if(typeof D.then=="function")return fe(ze(D),Z,ot,et,vt);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return St}function K(D,Z,ot){if(D==null)return D;var et=[],vt=0;return fe(D,et,"","",function(Vt){return Z.call(ot,Vt,vt++)}),et}function at(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(ot){(D._status===0||D._status===-1)&&(D._status=1,D._result=ot)},function(ot){(D._status===0||D._status===-1)&&(D._status=2,D._result=ot)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var yt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function qt(){}return Ct.Children={map:K,forEach:function(D,Z,ot){K(D,function(){Z.apply(this,arguments)},ot)},count:function(D){var Z=0;return K(D,function(){Z++}),Z},toArray:function(D){return K(D,function(Z){return Z})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ct.Component=q,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=it,Ct.StrictMode=r,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ut,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ut.H.useMemoCache(D)}},Ct.cache=function(D){return function(){return D.apply(null,arguments)}},Ct.cloneElement=function(D,Z,ot){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var et=H({},D.props),vt=D.key,Vt=void 0;if(Z!=null)for(St in Z.ref!==void 0&&(Vt=void 0),Z.key!==void 0&&(vt=""+Z.key),Z)!_t.call(Z,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Z.ref===void 0||(et[St]=Z[St]);var St=arguments.length-2;if(St===1)et.children=ot;else if(1<St){for(var Ne=Array(St),ne=0;ne<St;ne++)Ne[ne]=arguments[ne+2];et.children=Ne}return x(D.type,vt,void 0,void 0,Vt,et)},Ct.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ct.createElement=function(D,Z,ot){var et,vt={},Vt=null;if(Z!=null)for(et in Z.key!==void 0&&(Vt=""+Z.key),Z)_t.call(Z,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(vt[et]=Z[et]);var St=arguments.length-2;if(St===1)vt.children=ot;else if(1<St){for(var Ne=Array(St),ne=0;ne<St;ne++)Ne[ne]=arguments[ne+2];vt.children=Ne}if(D&&D.defaultProps)for(et in St=D.defaultProps,St)vt[et]===void 0&&(vt[et]=St[et]);return x(D,Vt,void 0,void 0,null,vt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(D){return{$$typeof:d,render:D}},Ct.isValidElement=R,Ct.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:at}},Ct.memo=function(D,Z){return{$$typeof:p,type:D,compare:Z===void 0?null:Z}},Ct.startTransition=function(D){var Z=ut.T,ot={};ut.T=ot;try{var et=D(),vt=ut.S;vt!==null&&vt(ot,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(qt,yt)}catch(Vt){yt(Vt)}finally{ut.T=Z}},Ct.unstable_useCacheRefresh=function(){return ut.H.useCacheRefresh()},Ct.use=function(D){return ut.H.use(D)},Ct.useActionState=function(D,Z,ot){return ut.H.useActionState(D,Z,ot)},Ct.useCallback=function(D,Z){return ut.H.useCallback(D,Z)},Ct.useContext=function(D){return ut.H.useContext(D)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(D,Z){return ut.H.useDeferredValue(D,Z)},Ct.useEffect=function(D,Z,ot){var et=ut.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(D,Z)},Ct.useId=function(){return ut.H.useId()},Ct.useImperativeHandle=function(D,Z,ot){return ut.H.useImperativeHandle(D,Z,ot)},Ct.useInsertionEffect=function(D,Z){return ut.H.useInsertionEffect(D,Z)},Ct.useLayoutEffect=function(D,Z){return ut.H.useLayoutEffect(D,Z)},Ct.useMemo=function(D,Z){return ut.H.useMemo(D,Z)},Ct.useOptimistic=function(D,Z){return ut.H.useOptimistic(D,Z)},Ct.useReducer=function(D,Z,ot){return ut.H.useReducer(D,Z,ot)},Ct.useRef=function(D){return ut.H.useRef(D)},Ct.useState=function(D){return ut.H.useState(D)},Ct.useSyncExternalStore=function(D,Z,ot){return ut.H.useSyncExternalStore(D,Z,ot)},Ct.useTransition=function(){return ut.H.useTransition()},Ct.version="19.1.0",Ct}var bv;function fg(){return bv||(bv=1,ym.exports=$S()),ym.exports}var nt=fg();const vT=yT(nt),JS=QS({__proto__:null,default:vT},[nt]);var vm={exports:{}},ql={},Em={exports:{}},Tm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function ZS(){return Sv||(Sv=1,function(s){function t(K,at){var yt=K.length;K.push(at);t:for(;0<yt;){var qt=yt-1>>>1,D=K[qt];if(0<a(D,at))K[qt]=at,K[yt]=D,yt=qt;else break t}}function e(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var at=K[0],yt=K.pop();if(yt!==at){K[0]=yt;t:for(var qt=0,D=K.length,Z=D>>>1;qt<Z;){var ot=2*(qt+1)-1,et=K[ot],vt=ot+1,Vt=K[vt];if(0>a(et,yt))vt<D&&0>a(Vt,et)?(K[qt]=Vt,K[vt]=yt,qt=vt):(K[qt]=et,K[ot]=yt,qt=ot);else if(vt<D&&0>a(Vt,yt))K[qt]=Vt,K[vt]=yt,qt=vt;else break t}}return at}function a(K,at){var yt=K.sortIndex-at.sortIndex;return yt!==0?yt:K.id-at.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var g=[],p=[],E=1,A=null,I=3,k=!1,H=!1,Y=!1,q=!1,st=typeof setTimeout=="function"?setTimeout:null,it=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ct(K){for(var at=e(p);at!==null;){if(at.callback===null)r(p);else if(at.startTime<=K)r(p),at.sortIndex=at.expirationTime,t(g,at);else break;at=e(p)}}function ut(K){if(Y=!1,ct(K),!H)if(e(g)!==null)H=!0,_t||(_t=!0,P());else{var at=e(p);at!==null&&fe(ut,at.startTime-K)}}var _t=!1,x=-1,S=5,R=-1;function O(){return q?!0:!(s.unstable_now()-R<S)}function N(){if(q=!1,_t){var K=s.unstable_now();R=K;var at=!0;try{t:{H=!1,Y&&(Y=!1,it(x),x=-1),k=!0;var yt=I;try{e:{for(ct(K),A=e(g);A!==null&&!(A.expirationTime>K&&O());){var qt=A.callback;if(typeof qt=="function"){A.callback=null,I=A.priorityLevel;var D=qt(A.expirationTime<=K);if(K=s.unstable_now(),typeof D=="function"){A.callback=D,ct(K),at=!0;break e}A===e(g)&&r(g),ct(K)}else r(g);A=e(g)}if(A!==null)at=!0;else{var Z=e(p);Z!==null&&fe(ut,Z.startTime-K),at=!1}}break t}finally{A=null,I=yt,k=!1}at=void 0}}finally{at?P():_t=!1}}}var P;if(typeof W=="function")P=function(){W(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ze=C.port2;C.port1.onmessage=N,P=function(){ze.postMessage(null)}}else P=function(){st(N,0)};function fe(K,at){x=st(function(){K(s.unstable_now())},at)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(K){switch(I){case 1:case 2:case 3:var at=3;break;default:at=I}var yt=I;I=at;try{return K()}finally{I=yt}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(K,at){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var yt=I;I=K;try{return at()}finally{I=yt}},s.unstable_scheduleCallback=function(K,at,yt){var qt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?qt+yt:qt):yt=qt,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=yt+D,K={id:E++,callback:at,priorityLevel:K,startTime:yt,expirationTime:D,sortIndex:-1},yt>qt?(K.sortIndex=yt,t(p,K),e(g)===null&&K===e(p)&&(Y?(it(x),x=-1):Y=!0,fe(ut,yt-qt))):(K.sortIndex=D,t(g,K),H||k||(H=!0,_t||(_t=!0,P()))),K},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(K){var at=I;return function(){var yt=I;I=at;try{return K.apply(this,arguments)}finally{I=yt}}}}(Tm)),Tm}var Iv;function WS(){return Iv||(Iv=1,Em.exports=ZS()),Em.exports}var Am={exports:{}},$e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function tI(){if(wv)return $e;wv=1;var s=fg();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$e.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,E)},$e.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},$e.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},$e.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},$e.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,A=d(E,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:A,integrity:I,fetchPriority:k}):E==="script"&&r.d.X(g,{crossOrigin:A,integrity:I,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$e.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=d(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},$e.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,A=d(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$e.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=d(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},$e.requestFormReset=function(g){r.d.r(g)},$e.unstable_batchedUpdates=function(g,p){return g(p)},$e.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},$e.useFormStatus=function(){return c.H.useHostTransitionStatus()},$e.version="19.1.0",$e}var Rv;function ET(){if(Rv)return Am.exports;Rv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Am.exports=tI(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function eI(){if(Cv)return ql;Cv=1;var s=WS(),t=fg(),e=ET();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),n;if(m===u)return d(f),i;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,T=f.child;T;){if(T===o){v=!0,o=f,u=m;break}if(T===u){v=!0,u=f,o=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===o){v=!0,o=m,u=f;break}if(T===u){v=!0,u=m,o=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),it=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),ut=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case q:return"Profiler";case Y:return"StrictMode";case ut:return"Suspense";case _t:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case W:return(n.displayName||"Context")+".Provider";case it:return(n._context.displayName||"Context")+".Consumer";case ct:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return i=n.displayName||null,i!==null?i:ze(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return ze(n(i))}catch{}}return null}var fe=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},qt=[],D=-1;function Z(n){return{current:n}}function ot(n){0>D||(n.current=qt[D],qt[D]=null,D--)}function et(n,i){D++,qt[D]=n.current,n.current=i}var vt=Z(null),Vt=Z(null),St=Z(null),Ne=Z(null);function ne(n,i){switch(et(St,i),et(Vt,n),et(vt,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Yy(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Yy(i),n=Xy(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ot(vt),et(vt,n)}function Yn(){ot(vt),ot(Vt),ot(St)}function tr(n){n.memoizedState!==null&&et(Ne,n);var i=vt.current,o=Xy(i,n.type);i!==o&&(et(Vt,n),et(vt,o))}function pi(n){Vt.current===n&&(ot(vt),ot(Vt)),Ne.current===n&&(ot(Ne),kl._currentValue=yt)}var Jr=Object.prototype.hasOwnProperty,Zr=s.unstable_scheduleCallback,Wr=s.unstable_cancelCallback,No=s.unstable_shouldYield,Du=s.unstable_requestPaint,Sn=s.unstable_now,_f=s.unstable_getCurrentPriorityLevel,Mo=s.unstable_ImmediatePriority,sa=s.unstable_UserBlockingPriority,ts=s.unstable_NormalPriority,yf=s.unstable_LowPriority,aa=s.unstable_IdlePriority,Po=s.log,xu=s.unstable_setDisableYieldValue,de=null,Ht=null;function fn(n){if(typeof Po=="function"&&xu(n),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(de,n)}catch{}}var Ye=Math.clz32?Math.clz32:es,Vu=Math.log,vf=Math.LN2;function es(n){return n>>>=0,n===0?32:31-(Vu(n)/vf|0)|0}var ns=256,is=4194304;function jn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function oa(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?f=jn(u):(v&=T,v!==0?f=jn(v):o||(o=T&~n,o!==0&&(f=jn(o))))):(T=u&~m,T!==0?f=jn(T):v!==0?f=jn(v):o||(o=u&~n,o!==0&&(f=jn(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function rs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ko(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uo(){var n=ns;return ns<<=1,(ns&4194048)===0&&(ns=256),n}function Lo(){var n=is;return is<<=1,(is&62914560)===0&&(is=4194304),n}function _i(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function yi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bo(n,i,o,u,f,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,w=n.expirationTimes,B=n.hiddenUpdates;for(o=v&~o;0<o;){var Q=31-Ye(o),$=1<<Q;T[Q]=0,w[Q]=-1;var j=B[Q];if(j!==null)for(B[Q]=null,Q=0;Q<j.length;Q++){var F=j[Q];F!==null&&(F.lane&=-536870913)}o&=~$}u!==0&&Xn(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~i))}function Xn(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Ye(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function zo(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-Ye(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function er(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function la(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nr(){var n=at.p;return n!==0?n:(n=window.event,n===void 0?32:mv(n.type))}function Ou(n,i){var o=at.p;try{return at.p=n,i()}finally{at.p=o}}var re=Math.random().toString(36).slice(2),we="__reactFiber$"+re,Ee="__reactProps$"+re,In="__reactContainer$"+re,jo="__reactEvents$"+re,Ef="__reactListeners$"+re,ir="__reactHandles$"+re,Nu="__reactResources$"+re,ss="__reactMarker$"+re;function rr(n){delete n[we],delete n[Ee],delete n[jo],delete n[Ef],delete n[ir]}function vi(n){var i=n[we];if(i)return i;for(var o=n.parentNode;o;){if(i=o[In]||o[we]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Wy(n);n!==null;){if(o=n[we])return o;n=Wy(n)}return i}n=o,o=n.parentNode}return null}function $n(n){if(n=n[we]||n[In]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Jn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function We(n){var i=n[Nu];return i||(i=n[Nu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _e(n){n[ss]=!0}var qo=new Set,ua={};function qn(n,i){Ei(n,i),Ei(n+"Capture",i)}function Ei(n,i){for(ua[n]=i,n=0;n<i.length;n++)qo.add(i[n])}var Mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},as={};function ku(n){return Jr.call(as,n)?!0:Jr.call(Pu,n)?!1:Mu.test(n)?as[n]=!0:(Pu[n]=!0,!1)}function sr(n,i,o){if(ku(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Zn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function je(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var os,Uu;function Ti(n){if(os===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);os=i&&i[1]||"",Uu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+n+Uu}var ca=!1;function ha(n,i){if(!n||ca)return"";ca=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var j=F}Reflect.construct(n,[],$)}else{try{$.call()}catch(F){j=F}n.call($.prototype)}}else{try{throw Error()}catch(F){j=F}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&j&&typeof F.stack=="string")return[F.stack,j.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var w=v.split(`
`),B=T.split(`
`);for(f=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(u===w.length||f===B.length)for(u=w.length-1,f=B.length-1;1<=u&&0<=f&&w[u]!==B[f];)f--;for(;1<=u&&0<=f;u--,f--)if(w[u]!==B[f]){if(u!==1||f!==1)do if(u--,f--,0>f||w[u]!==B[f]){var Q=`
`+w[u].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=u&&0<=f);break}}}finally{ca=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ti(o):""}function Fo(n){switch(n.tag){case 26:case 27:case 5:return Ti(n.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return ha(n.type,!1);case 11:return ha(n.type.render,!1);case 1:return ha(n.type,!0);case 31:return Ti("Activity");default:return""}}function fa(n){try{var i="";do i+=Fo(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Go(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tf(n){var i=Go(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function da(n){n._valueTracker||(n._valueTracker=Tf(n))}function Ho(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Go(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function ls(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Af=/[\n"\\]/g;function Te(n){return n.replace(Af,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dn(n,i,o,u,f,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+tn(i)):n.value!==""+tn(i)&&(n.value=""+tn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?ar(n,v,tn(i)):o!=null?ar(n,v,tn(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+tn(T):n.removeAttribute("name")}function us(n,i,o,u,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+tn(o):"",i=i!=null?""+tn(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function ar(n,i,o){i==="number"&&ls(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ai(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+tn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Xt(n,i,o){if(i!=null&&(i=""+tn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+tn(o):""}function cs(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(fe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=tn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function wn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||hs.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Ko(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Lu(n,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Lu(n,m,i[m])}function Qo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ma(n){return Sf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var bi=null;function Rn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Si=null,Ii=null;function Yo(n){var i=$n(n);if(i&&(n=i.stateNode)){var o=n[Ee]||null;t:switch(n=i.stateNode,i.type){case"input":if(dn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Te(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[Ee]||null;if(!f)throw Error(r(90));dn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ho(u)}break t;case"textarea":Xt(n,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Ai(n,!!o.multiple,i,!1)}}}var Wn=!1;function Bu(n,i,o){if(Wn)return n(i,o);Wn=!0;try{var u=n(i);return u}finally{if(Wn=!1,(Si!==null||Ii!==null)&&(Oc(),Si&&(i=Si,n=Ii,Ii=Si=null,Yo(i),n)))for(i=0;i<n.length;i++)Yo(n[i])}}function fs(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Ee]||null;if(u===null)return null;o=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cn=!1;if(Fn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Cn=!1}var ti=null,or=null,wi=null;function Xo(){if(wi)return wi;var n,i=or,o=i.length,u,f="value"in ti?ti.value:ti.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===f[m-u];u++);return wi=f.slice(n,1<u?1-u:void 0)}function ei(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ni(){return!0}function $o(){return!1}function Me(n){function i(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ni:$o,this.isPropagationStopped=$o,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=Me(Gt),ms=E({},Gt,{view:0,detail:0}),zu=Me(ms),pa,_a,ii,gs=E({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ii&&(ii&&n.type==="mousemove"?(pa=n.screenX-ii.screenX,_a=n.screenY-ii.screenY):_a=pa=0,ii=n),pa)},movementY:function(n){return"movementY"in n?n.movementY:_a}}),Dn=Me(gs),ju=E({},gs,{dataTransfer:0}),If=Me(ju),ps=E({},ms,{relatedTarget:0}),ya=Me(ps),Jo=E({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),va=Me(Jo),qu=E({},Gt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ea=Me(qu),wf=E({},Gt,{data:0}),Zo=Me(wf),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Gu[n])?!!i[n]:!1}function ys(){return Wo}var Hu=E({},ms,{key:function(n){if(n.key){var i=_s[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(n){return n.type==="keypress"?ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ta=Me(Hu),Ku=E({},gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Me(Ku),Ri=E({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),Qu=Me(Ri),Yu=E({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=Me(Yu),$u=E({},gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Aa=Me($u),en=E({},Gt,{newState:0,oldState:0}),Ju=Me(en),Zu=[9,13,27,32],ri=Fn&&"CompositionEvent"in window,h=null;Fn&&"documentMode"in document&&(h=document.documentMode);var _=Fn&&"TextEvent"in window&&!h,y=Fn&&(!ri||h&&8<h&&11>=h),b=" ",U=!1;function G(n,i){switch(n){case"keyup":return Zu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ut=!1;function Re(n,i){switch(n){case"compositionend":return rt(i);case"keypress":return i.which!==32?null:(U=!0,b);case"textInput":return n=i.data,n===b&&U?null:n;default:return null}}function Lt(n,i){if(Ut)return n==="compositionend"||!ri&&G(n,i)?(n=Xo(),wi=or=ti=null,Ut=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Pe[n.type]:i==="textarea"}function Ci(n,i,o,u){Si?Ii?Ii.push(u):Ii=[u]:Si=u,i=Lc(i,"onChange"),0<i.length&&(o=new ga("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var qe=null,si=null;function el(n){Fy(n,0)}function Wu(n){var i=Jn(n);if(Ho(i))return n}function cp(n,i){if(n==="change")return i}var hp=!1;if(Fn){var Rf;if(Fn){var Cf="oninput"in document;if(!Cf){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),Cf=typeof fp.oninput=="function"}Rf=Cf}else Rf=!1;hp=Rf&&(!document.documentMode||9<document.documentMode)}function dp(){qe&&(qe.detachEvent("onpropertychange",mp),si=qe=null)}function mp(n){if(n.propertyName==="value"&&Wu(si)){var i=[];Ci(i,si,n,Rn(n)),Bu(el,i)}}function bb(n,i,o){n==="focusin"?(dp(),qe=i,si=o,qe.attachEvent("onpropertychange",mp)):n==="focusout"&&dp()}function Sb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wu(si)}function Ib(n,i){if(n==="click")return Wu(i)}function wb(n,i){if(n==="input"||n==="change")return Wu(i)}function Rb(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var mn=typeof Object.is=="function"?Object.is:Rb;function nl(n,i){if(mn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Jr.call(i,f)||!mn(n[f],i[f]))return!1}return!0}function gp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pp(n,i){var o=gp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=gp(o)}}function _p(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?_p(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function yp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ls(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ls(n.document)}return i}function Df(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Cb=Fn&&"documentMode"in document&&11>=document.documentMode,ba=null,xf=null,il=null,Vf=!1;function vp(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vf||ba==null||ba!==ls(u)||(u=ba,"selectionStart"in u&&Df(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&nl(il,u)||(il=u,u=Lc(xf,"onSelect"),0<u.length&&(i=new ga("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=ba)))}function vs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Sa={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Of={},Ep={};Fn&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Es(n){if(Of[n])return Of[n];if(!Sa[n])return n;var i=Sa[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ep)return Of[n]=i[o];return n}var Tp=Es("animationend"),Ap=Es("animationiteration"),bp=Es("animationstart"),Db=Es("transitionrun"),xb=Es("transitionstart"),Vb=Es("transitioncancel"),Sp=Es("transitionend"),Ip=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function Gn(n,i){Ip.set(n,i),qn(i,[n])}var wp=new WeakMap;function xn(n,i){if(typeof n=="object"&&n!==null){var o=wp.get(n);return o!==void 0?o:(i={value:n,source:i,stack:fa(i)},wp.set(n,i),i)}return{value:n,source:i,stack:fa(i)}}var Vn=[],Ia=0,Mf=0;function tc(){for(var n=Ia,i=Mf=Ia=0;i<n;){var o=Vn[i];Vn[i++]=null;var u=Vn[i];Vn[i++]=null;var f=Vn[i];Vn[i++]=null;var m=Vn[i];if(Vn[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&Rp(o,f,m)}}function ec(n,i,o,u){Vn[Ia++]=n,Vn[Ia++]=i,Vn[Ia++]=o,Vn[Ia++]=u,Mf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Pf(n,i,o,u){return ec(n,i,o,u),nc(n)}function wa(n,i){return ec(n,null,null,i),nc(n)}function Rp(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-Ye(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function nc(n){if(50<Cl)throw Cl=0,jd=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ra={};function Ob(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(n,i,o,u){return new Ob(n,i,o,u)}function kf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Di(n,i){var o=n.alternate;return o===null?(o=gn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Cp(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ic(n,i,o,u,f,m){var v=0;if(u=n,typeof n=="function")kf(n)&&(v=1);else if(typeof n=="string")v=MS(n,o,vt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case R:return n=gn(31,o,i,f),n.elementType=R,n.lanes=m,n;case H:return Ts(o.children,f,m,i);case Y:v=8,f|=24;break;case q:return n=gn(12,o,i,f|2),n.elementType=q,n.lanes=m,n;case ut:return n=gn(13,o,i,f),n.elementType=ut,n.lanes=m,n;case _t:return n=gn(19,o,i,f),n.elementType=_t,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case st:case W:v=10;break t;case it:v=9;break t;case ct:v=11;break t;case x:v=14;break t;case S:v=16,u=null;break t}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=gn(v,o,i,f),i.elementType=n,i.type=u,i.lanes=m,i}function Ts(n,i,o,u){return n=gn(7,n,u,i),n.lanes=o,n}function Uf(n,i,o){return n=gn(6,n,null,i),n.lanes=o,n}function Lf(n,i,o){return i=gn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ca=[],Da=0,rc=null,sc=0,On=[],Nn=0,As=null,xi=1,Vi="";function bs(n,i){Ca[Da++]=sc,Ca[Da++]=rc,rc=n,sc=i}function Dp(n,i,o){On[Nn++]=xi,On[Nn++]=Vi,On[Nn++]=As,As=n;var u=xi;n=Vi;var f=32-Ye(u)-1;u&=~(1<<f),o+=1;var m=32-Ye(i)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,xi=1<<32-Ye(i)+f|o<<f|u,Vi=m+n}else xi=1<<m|o<<f|u,Vi=n}function Bf(n){n.return!==null&&(bs(n,1),Dp(n,1,0))}function zf(n){for(;n===rc;)rc=Ca[--Da],Ca[Da]=null,sc=Ca[--Da],Ca[Da]=null;for(;n===As;)As=On[--Nn],On[Nn]=null,Vi=On[--Nn],On[Nn]=null,xi=On[--Nn],On[Nn]=null}var nn=null,me=null,Ft=!1,Ss=null,ai=!1,jf=Error(r(519));function Is(n){var i=Error(r(418,""));throw al(xn(i,n)),jf}function xp(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[we]=n,i[Ee]=u,o){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(o=0;o<xl.length;o++)Mt(xl[o],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),us(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),da(i);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),cs(i,u.value,u.defaultValue,u.children),da(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Qy(i.textContent,o)?(u.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),u.onScroll!=null&&Mt("scroll",i),u.onScrollEnd!=null&&Mt("scrollend",i),u.onClick!=null&&(i.onclick=Bc),i=!0):i=!1,i||Is(n)}function Vp(n){for(nn=n.return;nn;)switch(nn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:nn=nn.return}}function rl(n){if(n!==nn)return!1;if(!Ft)return Vp(n),Ft=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||im(n.type,n.memoizedProps)),o=!o),o&&me&&Is(n),Vp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){me=Kn(n.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}me=null}}else i===27?(i=me,br(n.type)?(n=om,om=null,me=n):me=i):me=nn?Kn(n.stateNode.nextSibling):null;return!0}function sl(){me=nn=null,Ft=!1}function Op(){var n=Ss;return n!==null&&(cn===null?cn=n:cn.push.apply(cn,n),Ss=null),n}function al(n){Ss===null?Ss=[n]:Ss.push(n)}var qf=Z(null),ws=null,Oi=null;function lr(n,i,o){et(qf,i._currentValue),i._currentValue=o}function Ni(n){n._currentValue=qf.current,ot(qf)}function Ff(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Gf(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;t:for(;m!==null;){var T=m;m=f;for(var w=0;w<i.length;w++)if(T.context===i[w]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Ff(m.return,o,n),u||(v=null);break t}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Ff(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ol(n,i,o,u){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;mn(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===Ne.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(kl):n=[kl])}f=f.return}n!==null&&Gf(i,n,o,u),i.flags|=262144}function ac(n){for(n=n.firstContext;n!==null;){if(!mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Rs(n){ws=n,Oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xe(n){return Np(ws,n)}function oc(n,i){return ws===null&&Rs(n),Np(n,i)}function Np(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Oi===null){if(n===null)throw Error(r(308));Oi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Oi=Oi.next=i;return o}var Nb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},Mb=s.unstable_scheduleCallback,Pb=s.unstable_NormalPriority,De={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new Nb,data:new Map,refCount:0}}function ll(n){n.refCount--,n.refCount===0&&Mb(Pb,function(){n.controller.abort()})}var ul=null,Kf=0,xa=0,Va=null;function kb(n,i){if(ul===null){var o=ul=[];Kf=0,xa=Yd(),Va={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Kf++,i.then(Mp,Mp),i}function Mp(){if(--Kf===0&&ul!==null){Va!==null&&(Va.status="fulfilled");var n=ul;ul=null,xa=0,Va=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Ub(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Pp=K.S;K.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kb(n,i),Pp!==null&&Pp(n,i)};var Cs=Z(null);function Qf(){var n=Cs.current;return n!==null?n:ie.pooledCache}function lc(n,i){i===null?et(Cs,Cs.current):et(Cs,i.pool)}function kp(){var n=Qf();return n===null?null:{parent:De._currentValue,pool:n}}var cl=Error(r(460)),Up=Error(r(474)),uc=Error(r(542)),Yf={then:function(){}};function Lp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function cc(){}function Bp(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(cc,cc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,jp(n),n;default:if(typeof i.status=="string")i.then(cc,cc);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,jp(n),n}throw hl=i,cl}}var hl=null;function zp(){if(hl===null)throw Error(r(459));var n=hl;return hl=null,n}function jp(n){if(n===cl||n===uc)throw Error(r(483))}var ur=!1;function Xf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function cr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function hr(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=nc(n),Rp(n,null,o),i}return ec(n,u,i,o),nc(n)}function fl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,zo(n,o)}}function Jf(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Zf=!1;function dl(){if(Zf){var n=Va;if(n!==null)throw n}}function ml(n,i,o,u){Zf=!1;var f=n.updateQueue;ur=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var w=T,B=w.next;w.next=null,v===null?m=B:v.next=B,v=w;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=B:T.next=B,Q.lastBaseUpdate=w))}if(m!==null){var $=f.baseState;v=0,Q=B=w=null,T=m;do{var j=T.lane&-536870913,F=j!==T.lane;if(F?(Bt&j)===j:(u&j)===j){j!==0&&j===xa&&(Zf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var bt=n,Tt=T;j=i;var Zt=o;switch(Tt.tag){case 1:if(bt=Tt.payload,typeof bt=="function"){$=bt.call(Zt,$,j);break t}$=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Tt.payload,j=typeof bt=="function"?bt.call(Zt,$,j):bt,j==null)break t;$=E({},$,j);break t;case 2:ur=!0}}j=T.callback,j!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[j]:F.push(j))}else F={lane:j,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(B=Q=F,w=$):Q=Q.next=F,v|=j;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;F=T,T=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);Q===null&&(w=$),f.baseState=w,f.firstBaseUpdate=B,f.lastBaseUpdate=Q,m===null&&(f.shared.lanes=0),vr|=v,n.lanes=v,n.memoizedState=$}}function qp(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Fp(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)qp(o[n],i)}var Oa=Z(null),hc=Z(0);function Gp(n,i){n=zi,et(hc,n),et(Oa,i),zi=n|i.baseLanes}function Wf(){et(hc,zi),et(Oa,Oa.current)}function td(){zi=hc.current,ot(Oa),ot(hc)}var fr=0,Dt=null,$t=null,Ae=null,fc=!1,Na=!1,Ds=!1,dc=0,gl=0,Ma=null,Lb=0;function ye(){throw Error(r(321))}function ed(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!mn(n[o],i[o]))return!1;return!0}function nd(n,i,o,u,f,m){return fr=m,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?R_:C_,Ds=!1,m=o(u,f),Ds=!1,Na&&(m=Kp(i,o,u,f)),Hp(n),m}function Hp(n){K.H=vc;var i=$t!==null&&$t.next!==null;if(fr=0,Ae=$t=Dt=null,fc=!1,gl=0,Ma=null,i)throw Error(r(300));n===null||ke||(n=n.dependencies,n!==null&&ac(n)&&(ke=!0))}function Kp(n,i,o,u){Dt=n;var f=0;do{if(Na&&(Ma=null),gl=0,Na=!1,25<=f)throw Error(r(301));if(f+=1,Ae=$t=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=Hb,m=i(o,u)}while(Na);return m}function Bb(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?pl(i):i,n=n.useState()[0],($t!==null?$t.memoizedState:null)!==n&&(Dt.flags|=1024),i}function id(){var n=dc!==0;return dc=0,n}function rd(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function sd(n){if(fc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}fc=!1}fr=0,Ae=$t=Dt=null,Na=!1,gl=dc=0,Ma=null}function ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Dt.memoizedState=Ae=n:Ae=Ae.next=n,Ae}function be(){if($t===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var i=Ae===null?Dt.memoizedState:Ae.next;if(i!==null)Ae=i,$t=n;else{if(n===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ae===null?Dt.memoizedState=Ae=n:Ae=Ae.next=n}return Ae}function ad(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(n){var i=gl;return gl+=1,Ma===null&&(Ma=[]),n=Bp(Ma,n,i),i=Dt,(Ae===null?i.memoizedState:Ae.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?R_:C_),n}function mc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pl(n);if(n.$$typeof===W)return Xe(n)}throw Error(r(438,String(n)))}function od(n){var i=null,o=Dt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ad(),Dt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=O;return i.index++,o}function Mi(n,i){return typeof i=="function"?i(n):i}function gc(n){var i=be();return ld(i,$t,n)}function ld(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var T=v=null,w=null,B=i,Q=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Bt&$)===$:(fr&$)===$){var j=B.revertLane;if(j===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===xa&&(Q=!0);else if((fr&j)===j){B=B.next,j===xa&&(Q=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(T=w=$,v=m):w=w.next=$,Dt.lanes|=j,vr|=j;$=B.action,Ds&&o(m,$),m=B.hasEagerState?B.eagerState:o(m,$)}else j={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(T=w=j,v=m):w=w.next=j,Dt.lanes|=$,vr|=$;B=B.next}while(B!==null&&B!==i);if(w===null?v=m:w.next=T,!mn(m,n.memoizedState)&&(ke=!0,Q&&(o=Va,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=w,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ud(n){var i=be(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);mn(m,i.memoizedState)||(ke=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Qp(n,i,o){var u=Dt,f=be(),m=Ft;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=i();var v=!mn(($t||f).memoizedState,o);v&&(f.memoizedState=o,ke=!0),f=f.queue;var T=$p.bind(null,u,f,n);if(_l(2048,8,T,[n]),f.getSnapshot!==i||v||Ae!==null&&Ae.memoizedState.tag&1){if(u.flags|=2048,Pa(9,pc(),Xp.bind(null,u,f,o,i),null),ie===null)throw Error(r(349));m||(fr&124)!==0||Yp(u,i,o)}return o}function Yp(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Dt.updateQueue,i===null?(i=ad(),Dt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Xp(n,i,o,u){i.value=o,i.getSnapshot=u,Jp(i)&&Zp(n)}function $p(n,i,o){return o(function(){Jp(i)&&Zp(n)})}function Jp(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!mn(n,o)}catch{return!0}}function Zp(n){var i=wa(n,2);i!==null&&En(i,n,2)}function cd(n){var i=ln();if(typeof n=="function"){var o=n;if(n=o(),Ds){fn(!0);try{o()}finally{fn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:n},i}function Wp(n,i,o,u){return n.baseState=o,ld(n,$t,typeof u=="function"?u:Mi)}function zb(n,i,o,u,f){if(yc(n))throw Error(r(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,t_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function t_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var m=K.T,v={};K.T=v;try{var T=o(f,u),w=K.S;w!==null&&w(v,T),e_(n,i,T)}catch(B){hd(n,i,B)}finally{K.T=m}}else try{m=o(f,u),e_(n,i,m)}catch(B){hd(n,i,B)}}function e_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){n_(n,i,u)},function(u){return hd(n,i,u)}):n_(n,i,o)}function n_(n,i,o){i.status="fulfilled",i.value=o,i_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,t_(n,o)))}function hd(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,i_(i),i=i.next;while(i!==u)}n.action=null}function i_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function r_(n,i){return i}function s_(n,i){if(Ft){var o=ie.formState;if(o!==null){t:{var u=Dt;if(Ft){if(me){e:{for(var f=me,m=ai;f.nodeType!==8;){if(!m){f=null;break e}if(f=Kn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){me=Kn(f.nextSibling),u=f.data==="F!";break t}}Is(u)}u=!1}u&&(i=o[0])}}return o=ln(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:i},o.queue=u,o=S_.bind(null,Dt,u),u.dispatch=o,u=cd(!1),m=pd.bind(null,Dt,!1,u.queue),u=ln(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=zb.bind(null,Dt,f,m,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function a_(n){var i=be();return o_(i,$t,n)}function o_(n,i,o){if(i=ld(n,i,r_)[0],n=gc(Mi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=pl(i)}catch(v){throw v===cl?uc:v}else u=i;i=be();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Dt.flags|=2048,Pa(9,pc(),jb.bind(null,f,o),null)),[u,m,n]}function jb(n,i){n.action=i}function l_(n){var i=be(),o=$t;if(o!==null)return o_(i,o,n);be(),i=i.memoizedState,o=be();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Pa(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=ad(),Dt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function pc(){return{destroy:void 0,resource:void 0}}function u_(){return be().memoizedState}function _c(n,i,o,u){var f=ln();u=u===void 0?null:u,Dt.flags|=n,f.memoizedState=Pa(1|i,pc(),o,u)}function _l(n,i,o,u){var f=be();u=u===void 0?null:u;var m=f.memoizedState.inst;$t!==null&&u!==null&&ed(u,$t.memoizedState.deps)?f.memoizedState=Pa(i,m,o,u):(Dt.flags|=n,f.memoizedState=Pa(1|i,m,o,u))}function c_(n,i){_c(8390656,8,n,i)}function h_(n,i){_l(2048,8,n,i)}function f_(n,i){return _l(4,2,n,i)}function d_(n,i){return _l(4,4,n,i)}function m_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function g_(n,i,o){o=o!=null?o.concat([n]):null,_l(4,4,m_.bind(null,i,n),o)}function fd(){}function p_(n,i){var o=be();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&ed(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function __(n,i){var o=be();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&ed(i,u[1]))return u[0];if(u=n(),Ds){fn(!0);try{n()}finally{fn(!1)}}return o.memoizedState=[u,i],u}function dd(n,i,o){return o===void 0||(fr&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=Ey(),Dt.lanes|=n,vr|=n,o)}function y_(n,i,o,u){return mn(o,i)?o:Oa.current!==null?(n=dd(n,o,u),mn(n,i)||(ke=!0),n):(fr&42)===0?(ke=!0,n.memoizedState=o):(n=Ey(),Dt.lanes|=n,vr|=n,i)}function v_(n,i,o,u,f){var m=at.p;at.p=m!==0&&8>m?m:8;var v=K.T,T={};K.T=T,pd(n,!1,i,o);try{var w=f(),B=K.S;if(B!==null&&B(T,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var Q=Ub(w,u);yl(n,i,Q,vn(n))}else yl(n,i,u,vn(n))}catch($){yl(n,i,{then:function(){},status:"rejected",reason:$},vn())}finally{at.p=m,K.T=v}}function qb(){}function md(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=E_(n).queue;v_(n,f,i,yt,o===null?qb:function(){return T_(n),o(u)})}function E_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:yt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function T_(n){var i=E_(n).next.queue;yl(n,i,{},vn())}function gd(){return Xe(kl)}function A_(){return be().memoizedState}function b_(){return be().memoizedState}function Fb(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=vn();n=cr(o);var u=hr(i,n,o);u!==null&&(En(u,i,o),fl(u,i,o)),i={cache:Hf()},n.payload=i;return}i=i.return}}function Gb(n,i,o){var u=vn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},yc(n)?I_(i,o):(o=Pf(n,i,o,u),o!==null&&(En(o,n,u),w_(o,i,u)))}function S_(n,i,o){var u=vn();yl(n,i,o,u)}function yl(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(yc(n))I_(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,T=m(v,o);if(f.hasEagerState=!0,f.eagerState=T,mn(T,v))return ec(n,i,f,0),ie===null&&tc(),!1}catch{}finally{}if(o=Pf(n,i,f,u),o!==null)return En(o,n,u),w_(o,i,u),!0}return!1}function pd(n,i,o,u){if(u={lane:2,revertLane:Yd(),action:u,hasEagerState:!1,eagerState:null,next:null},yc(n)){if(i)throw Error(r(479))}else i=Pf(n,o,u,2),i!==null&&En(i,n,2)}function yc(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function I_(n,i){Na=fc=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function w_(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,zo(n,o)}}var vc={readContext:Xe,use:mc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},R_={readContext:Xe,use:mc,useCallback:function(n,i){return ln().memoizedState=[n,i===void 0?null:i],n},useContext:Xe,useEffect:c_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,_c(4194308,4,m_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return _c(4194308,4,n,i)},useInsertionEffect:function(n,i){_c(4,2,n,i)},useMemo:function(n,i){var o=ln();i=i===void 0?null:i;var u=n();if(Ds){fn(!0);try{n()}finally{fn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=ln();if(o!==void 0){var f=o(i);if(Ds){fn(!0);try{o(i)}finally{fn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Gb.bind(null,Dt,n),[u.memoizedState,n]},useRef:function(n){var i=ln();return n={current:n},i.memoizedState=n},useState:function(n){n=cd(n);var i=n.queue,o=S_.bind(null,Dt,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:fd,useDeferredValue:function(n,i){var o=ln();return dd(o,n,i)},useTransition:function(){var n=cd(!1);return n=v_.bind(null,Dt,n.queue,!0,!1),ln().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Dt,f=ln();if(Ft){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),ie===null)throw Error(r(349));(Bt&124)!==0||Yp(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,c_($p.bind(null,u,m,n),[n]),u.flags|=2048,Pa(9,pc(),Xp.bind(null,u,m,o,i),null),o},useId:function(){var n=ln(),i=ie.identifierPrefix;if(Ft){var o=Vi,u=xi;o=(u&~(1<<32-Ye(u)-1)).toString(32)+o,i=""+i+"R"+o,o=dc++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=Lb++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:gd,useFormState:s_,useActionState:s_,useOptimistic:function(n){var i=ln();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=pd.bind(null,Dt,!0,o),o.dispatch=i,[n,i]},useMemoCache:od,useCacheRefresh:function(){return ln().memoizedState=Fb.bind(null,Dt)}},C_={readContext:Xe,use:mc,useCallback:p_,useContext:Xe,useEffect:h_,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:__,useReducer:gc,useRef:u_,useState:function(){return gc(Mi)},useDebugValue:fd,useDeferredValue:function(n,i){var o=be();return y_(o,$t.memoizedState,n,i)},useTransition:function(){var n=gc(Mi)[0],i=be().memoizedState;return[typeof n=="boolean"?n:pl(n),i]},useSyncExternalStore:Qp,useId:A_,useHostTransitionStatus:gd,useFormState:a_,useActionState:a_,useOptimistic:function(n,i){var o=be();return Wp(o,$t,n,i)},useMemoCache:od,useCacheRefresh:b_},Hb={readContext:Xe,use:mc,useCallback:p_,useContext:Xe,useEffect:h_,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:__,useReducer:ud,useRef:u_,useState:function(){return ud(Mi)},useDebugValue:fd,useDeferredValue:function(n,i){var o=be();return $t===null?dd(o,n,i):y_(o,$t.memoizedState,n,i)},useTransition:function(){var n=ud(Mi)[0],i=be().memoizedState;return[typeof n=="boolean"?n:pl(n),i]},useSyncExternalStore:Qp,useId:A_,useHostTransitionStatus:gd,useFormState:l_,useActionState:l_,useOptimistic:function(n,i){var o=be();return $t!==null?Wp(o,$t,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:od,useCacheRefresh:b_},ka=null,vl=0;function Ec(n){var i=vl;return vl+=1,ka===null&&(ka=[]),Bp(ka,n,i)}function El(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Tc(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function D_(n){var i=n._init;return i(n._payload)}function x_(n){function i(M,V){if(n){var L=M.deletions;L===null?(M.deletions=[V],M.flags|=16):L.push(V)}}function o(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function u(M){for(var V=new Map;M!==null;)M.key!==null?V.set(M.key,M):V.set(M.index,M),M=M.sibling;return V}function f(M,V){return M=Di(M,V),M.index=0,M.sibling=null,M}function m(M,V,L){return M.index=L,n?(L=M.alternate,L!==null?(L=L.index,L<V?(M.flags|=67108866,V):L):(M.flags|=67108866,V)):(M.flags|=1048576,V)}function v(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function T(M,V,L,X){return V===null||V.tag!==6?(V=Uf(L,M.mode,X),V.return=M,V):(V=f(V,L),V.return=M,V)}function w(M,V,L,X){var dt=L.type;return dt===H?Q(M,V,L.props.children,X,L.key):V!==null&&(V.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&D_(dt)===V.type)?(V=f(V,L.props),El(V,L),V.return=M,V):(V=ic(L.type,L.key,L.props,null,M.mode,X),El(V,L),V.return=M,V)}function B(M,V,L,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==L.containerInfo||V.stateNode.implementation!==L.implementation?(V=Lf(L,M.mode,X),V.return=M,V):(V=f(V,L.children||[]),V.return=M,V)}function Q(M,V,L,X,dt){return V===null||V.tag!==7?(V=Ts(L,M.mode,X,dt),V.return=M,V):(V=f(V,L),V.return=M,V)}function $(M,V,L){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Uf(""+V,M.mode,L),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return L=ic(V.type,V.key,V.props,null,M.mode,L),El(L,V),L.return=M,L;case k:return V=Lf(V,M.mode,L),V.return=M,V;case S:var X=V._init;return V=X(V._payload),$(M,V,L)}if(fe(V)||P(V))return V=Ts(V,M.mode,L,null),V.return=M,V;if(typeof V.then=="function")return $(M,Ec(V),L);if(V.$$typeof===W)return $(M,oc(M,V),L);Tc(M,V)}return null}function j(M,V,L,X){var dt=V!==null?V.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return dt!==null?null:T(M,V,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return L.key===dt?w(M,V,L,X):null;case k:return L.key===dt?B(M,V,L,X):null;case S:return dt=L._init,L=dt(L._payload),j(M,V,L,X)}if(fe(L)||P(L))return dt!==null?null:Q(M,V,L,X,null);if(typeof L.then=="function")return j(M,V,Ec(L),X);if(L.$$typeof===W)return j(M,V,oc(M,L),X);Tc(M,L)}return null}function F(M,V,L,X,dt){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return M=M.get(L)||null,T(V,M,""+X,dt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case I:return M=M.get(X.key===null?L:X.key)||null,w(V,M,X,dt);case k:return M=M.get(X.key===null?L:X.key)||null,B(V,M,X,dt);case S:var Ot=X._init;return X=Ot(X._payload),F(M,V,L,X,dt)}if(fe(X)||P(X))return M=M.get(L)||null,Q(V,M,X,dt,null);if(typeof X.then=="function")return F(M,V,L,Ec(X),dt);if(X.$$typeof===W)return F(M,V,L,oc(V,X),dt);Tc(V,X)}return null}function bt(M,V,L,X){for(var dt=null,Ot=null,gt=V,At=V=0,Le=null;gt!==null&&At<L.length;At++){gt.index>At?(Le=gt,gt=null):Le=gt.sibling;var jt=j(M,gt,L[At],X);if(jt===null){gt===null&&(gt=Le);break}n&&gt&&jt.alternate===null&&i(M,gt),V=m(jt,V,At),Ot===null?dt=jt:Ot.sibling=jt,Ot=jt,gt=Le}if(At===L.length)return o(M,gt),Ft&&bs(M,At),dt;if(gt===null){for(;At<L.length;At++)gt=$(M,L[At],X),gt!==null&&(V=m(gt,V,At),Ot===null?dt=gt:Ot.sibling=gt,Ot=gt);return Ft&&bs(M,At),dt}for(gt=u(gt);At<L.length;At++)Le=F(gt,M,At,L[At],X),Le!==null&&(n&&Le.alternate!==null&&gt.delete(Le.key===null?At:Le.key),V=m(Le,V,At),Ot===null?dt=Le:Ot.sibling=Le,Ot=Le);return n&&gt.forEach(function(Cr){return i(M,Cr)}),Ft&&bs(M,At),dt}function Tt(M,V,L,X){if(L==null)throw Error(r(151));for(var dt=null,Ot=null,gt=V,At=V=0,Le=null,jt=L.next();gt!==null&&!jt.done;At++,jt=L.next()){gt.index>At?(Le=gt,gt=null):Le=gt.sibling;var Cr=j(M,gt,jt.value,X);if(Cr===null){gt===null&&(gt=Le);break}n&&gt&&Cr.alternate===null&&i(M,gt),V=m(Cr,V,At),Ot===null?dt=Cr:Ot.sibling=Cr,Ot=Cr,gt=Le}if(jt.done)return o(M,gt),Ft&&bs(M,At),dt;if(gt===null){for(;!jt.done;At++,jt=L.next())jt=$(M,jt.value,X),jt!==null&&(V=m(jt,V,At),Ot===null?dt=jt:Ot.sibling=jt,Ot=jt);return Ft&&bs(M,At),dt}for(gt=u(gt);!jt.done;At++,jt=L.next())jt=F(gt,M,At,jt.value,X),jt!==null&&(n&&jt.alternate!==null&&gt.delete(jt.key===null?At:jt.key),V=m(jt,V,At),Ot===null?dt=jt:Ot.sibling=jt,Ot=jt);return n&&gt.forEach(function(KS){return i(M,KS)}),Ft&&bs(M,At),dt}function Zt(M,V,L,X){if(typeof L=="object"&&L!==null&&L.type===H&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case I:t:{for(var dt=L.key;V!==null;){if(V.key===dt){if(dt=L.type,dt===H){if(V.tag===7){o(M,V.sibling),X=f(V,L.props.children),X.return=M,M=X;break t}}else if(V.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&D_(dt)===V.type){o(M,V.sibling),X=f(V,L.props),El(X,L),X.return=M,M=X;break t}o(M,V);break}else i(M,V);V=V.sibling}L.type===H?(X=Ts(L.props.children,M.mode,X,L.key),X.return=M,M=X):(X=ic(L.type,L.key,L.props,null,M.mode,X),El(X,L),X.return=M,M=X)}return v(M);case k:t:{for(dt=L.key;V!==null;){if(V.key===dt)if(V.tag===4&&V.stateNode.containerInfo===L.containerInfo&&V.stateNode.implementation===L.implementation){o(M,V.sibling),X=f(V,L.children||[]),X.return=M,M=X;break t}else{o(M,V);break}else i(M,V);V=V.sibling}X=Lf(L,M.mode,X),X.return=M,M=X}return v(M);case S:return dt=L._init,L=dt(L._payload),Zt(M,V,L,X)}if(fe(L))return bt(M,V,L,X);if(P(L)){if(dt=P(L),typeof dt!="function")throw Error(r(150));return L=dt.call(L),Tt(M,V,L,X)}if(typeof L.then=="function")return Zt(M,V,Ec(L),X);if(L.$$typeof===W)return Zt(M,V,oc(M,L),X);Tc(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,V!==null&&V.tag===6?(o(M,V.sibling),X=f(V,L),X.return=M,M=X):(o(M,V),X=Uf(L,M.mode,X),X.return=M,M=X),v(M)):o(M,V)}return function(M,V,L,X){try{vl=0;var dt=Zt(M,V,L,X);return ka=null,dt}catch(gt){if(gt===cl||gt===uc)throw gt;var Ot=gn(29,gt,null,M.mode);return Ot.lanes=X,Ot.return=M,Ot}finally{}}}var Ua=x_(!0),V_=x_(!1),Mn=Z(null),oi=null;function dr(n){var i=n.alternate;et(xe,xe.current&1),et(Mn,n),oi===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(oi=n)}function O_(n){if(n.tag===22){if(et(xe,xe.current),et(Mn,n),oi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(oi=n)}}else mr()}function mr(){et(xe,xe.current),et(Mn,Mn.current)}function Pi(n){ot(Mn),oi===n&&(oi=null),ot(xe)}var xe=Z(0);function Ac(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||am(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function _d(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var yd={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=vn(),f=cr(u);f.payload=i,o!=null&&(f.callback=o),i=hr(n,f,u),i!==null&&(En(i,n,u),fl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=vn(),f=cr(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=hr(n,f,u),i!==null&&(En(i,n,u),fl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=vn(),u=cr(o);u.tag=2,i!=null&&(u.callback=i),i=hr(n,u,o),i!==null&&(En(i,n,o),fl(i,n,o))}};function N_(n,i,o,u,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!nl(o,u)||!nl(f,m):!0}function M_(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&yd.enqueueReplaceState(i,i.state,null)}function xs(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var bc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function P_(n){bc(n)}function k_(n){console.error(n)}function U_(n){bc(n)}function Sc(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function L_(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function vd(n,i,o){return o=cr(o),o.tag=3,o.payload={element:null},o.callback=function(){Sc(n,i)},o}function B_(n){return n=cr(n),n.tag=3,n}function z_(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){L_(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){L_(i,o,u),typeof f!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Kb(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ol(i,o,f,!0),o=Mn.current,o!==null){switch(o.tag){case 13:return oi===null?Fd():o.alternate===null&&ge===0&&(ge=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Yf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Hd(n,u,f)),!1;case 22:return o.flags|=65536,u===Yf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Hd(n,u,f)),!1}throw Error(r(435,o.tag))}return Hd(n,u,f),Fd(),!1}if(Ft)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==jf&&(n=Error(r(422),{cause:u}),al(xn(n,o)))):(u!==jf&&(i=Error(r(423),{cause:u}),al(xn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=xn(u,o),f=vd(n.stateNode,u,f),Jf(n,f),ge!==4&&(ge=2)),!1;var m=Error(r(520),{cause:u});if(m=xn(m,o),Rl===null?Rl=[m]:Rl.push(m),ge!==4&&(ge=2),i===null)return!0;u=xn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=vd(o.stateNode,u,n),Jf(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Er===null||!Er.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=B_(f),z_(f,n,o,u),Jf(o,f),!1}o=o.return}while(o!==null);return!1}var j_=Error(r(461)),ke=!1;function Fe(n,i,o,u){i.child=n===null?V_(i,null,o,u):Ua(i,n.child,o,u)}function q_(n,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Rs(i),u=nd(n,i,o,v,m,f),T=id(),n!==null&&!ke?(rd(n,i,f),ki(n,i,f)):(Ft&&T&&Bf(i),i.flags|=1,Fe(n,i,u,f),i.child)}function F_(n,i,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!kf(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,G_(n,i,m,u,f)):(n=ic(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Rd(n,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:nl,o(v,u)&&n.ref===i.ref)return ki(n,i,f)}return i.flags|=1,n=Di(m,u),n.ref=i.ref,n.return=i,i.child=n}function G_(n,i,o,u,f){if(n!==null){var m=n.memoizedProps;if(nl(m,u)&&n.ref===i.ref)if(ke=!1,i.pendingProps=u=m,Rd(n,f))(n.flags&131072)!==0&&(ke=!0);else return i.lanes=n.lanes,ki(n,i,f)}return Ed(n,i,o,u,f)}function H_(n,i,o){var u=i.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return K_(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&lc(i,m!==null?m.cachePool:null),m!==null?Gp(i,m):Wf(),O_(i);else return i.lanes=i.childLanes=536870912,K_(n,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(lc(i,m.cachePool),Gp(i,m),mr(),i.memoizedState=null):(n!==null&&lc(i,null),Wf(),mr());return Fe(n,i,f,o),i.child}function K_(n,i,o,u){var f=Qf();return f=f===null?null:{parent:De._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&lc(i,null),Wf(),O_(i),n!==null&&ol(n,i,u,!0),null}function Ic(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Ed(n,i,o,u,f){return Rs(i),o=nd(n,i,o,u,void 0,f),u=id(),n!==null&&!ke?(rd(n,i,f),ki(n,i,f)):(Ft&&u&&Bf(i),i.flags|=1,Fe(n,i,o,f),i.child)}function Q_(n,i,o,u,f,m){return Rs(i),i.updateQueue=null,o=Kp(i,u,o,f),Hp(n),u=id(),n!==null&&!ke?(rd(n,i,m),ki(n,i,m)):(Ft&&u&&Bf(i),i.flags|=1,Fe(n,i,o,m),i.child)}function Y_(n,i,o,u,f){if(Rs(i),i.stateNode===null){var m=Ra,v=o.contextType;typeof v=="object"&&v!==null&&(m=Xe(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=yd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Xf(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Xe(v):Ra,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(_d(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&yd.enqueueReplaceState(m,m.state,null),ml(i,u,m,f),dl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var T=i.memoizedProps,w=xs(o,T);m.props=w;var B=m.context,Q=o.contextType;v=Ra,typeof Q=="object"&&Q!==null&&(v=Xe(Q));var $=o.getDerivedStateFromProps;Q=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||B!==v)&&M_(i,m,u,v),ur=!1;var j=i.memoizedState;m.state=j,ml(i,u,m,f),dl(),B=i.memoizedState,T||j!==B||ur?(typeof $=="function"&&(_d(i,o,$,u),B=i.memoizedState),(w=ur||N_(i,o,w,u,j,B,v))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=B),m.props=u,m.state=B,m.context=v,u=w):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,$f(n,i),v=i.memoizedProps,Q=xs(o,v),m.props=Q,$=i.pendingProps,j=m.context,B=o.contextType,w=Ra,typeof B=="object"&&B!==null&&(w=Xe(B)),T=o.getDerivedStateFromProps,(B=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==$||j!==w)&&M_(i,m,u,w),ur=!1,j=i.memoizedState,m.state=j,ml(i,u,m,f),dl();var F=i.memoizedState;v!==$||j!==F||ur||n!==null&&n.dependencies!==null&&ac(n.dependencies)?(typeof T=="function"&&(_d(i,o,T,u),F=i.memoizedState),(Q=ur||N_(i,o,Q,u,j,F,w)||n!==null&&n.dependencies!==null&&ac(n.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,F,w),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,F,w)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=F),m.props=u,m.state=F,m.context=w,u=Q):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Ic(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Ua(i,n.child,null,f),i.child=Ua(i,null,o,f)):Fe(n,i,o,f),i.memoizedState=m.state,n=i.child):n=ki(n,i,f),n}function X_(n,i,o,u){return sl(),i.flags|=256,Fe(n,i,o,u),i.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(n){return{baseLanes:n,cachePool:kp()}}function bd(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Pn),n}function $_(n,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(xe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ft){if(f?dr(i):mr(),Ft){var T=me,w;if(w=T){t:{for(w=T,T=ai;w.nodeType!==8;){if(!T){T=null;break t}if(w=Kn(w.nextSibling),w===null){T=null;break t}}T=w}T!==null?(i.memoizedState={dehydrated:T,treeContext:As!==null?{id:xi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},w=gn(18,null,null,0),w.stateNode=T,w.return=i,i.child=w,nn=i,me=null,w=!0):w=!1}w||Is(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return am(T)?i.lanes=32:i.lanes=536870912,null;Pi(i)}return T=u.children,u=u.fallback,f?(mr(),f=i.mode,T=wc({mode:"hidden",children:T},f),u=Ts(u,f,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,f=i.child,f.memoizedState=Ad(o),f.childLanes=bd(n,v,o),i.memoizedState=Td,u):(dr(i),Sd(i,T))}if(w=n.memoizedState,w!==null&&(T=w.dehydrated,T!==null)){if(m)i.flags&256?(dr(i),i.flags&=-257,i=Id(n,i,o)):i.memoizedState!==null?(mr(),i.child=n.child,i.flags|=128,i=null):(mr(),f=u.fallback,T=i.mode,u=wc({mode:"visible",children:u.children},T),f=Ts(f,T,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Ua(i,n.child,null,o),u=i.child,u.memoizedState=Ad(o),u.childLanes=bd(n,v,o),i.memoizedState=Td,i=f);else if(dr(i),am(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var B=v.dgst;v=B,u=Error(r(419)),u.stack="",u.digest=v,al({value:u,source:null,stack:null}),i=Id(n,i,o)}else if(ke||ol(n,i,o,!1),v=(o&n.childLanes)!==0,ke||v){if(v=ie,v!==null&&(u=o&-o,u=(u&42)!==0?1:er(u),u=(u&(v.suspendedLanes|o))!==0?0:u,u!==0&&u!==w.retryLane))throw w.retryLane=u,wa(n,u),En(v,n,u),j_;T.data==="$?"||Fd(),i=Id(n,i,o)}else T.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=w.treeContext,me=Kn(T.nextSibling),nn=i,Ft=!0,Ss=null,ai=!1,n!==null&&(On[Nn++]=xi,On[Nn++]=Vi,On[Nn++]=As,xi=n.id,Vi=n.overflow,As=i),i=Sd(i,u.children),i.flags|=4096);return i}return f?(mr(),f=u.fallback,T=i.mode,w=n.child,B=w.sibling,u=Di(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,B!==null?f=Di(B,f):(f=Ts(f,T,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,T=n.child.memoizedState,T===null?T=Ad(o):(w=T.cachePool,w!==null?(B=De._currentValue,w=w.parent!==B?{parent:B,pool:B}:w):w=kp(),T={baseLanes:T.baseLanes|o,cachePool:w}),f.memoizedState=T,f.childLanes=bd(n,v,o),i.memoizedState=Td,u):(dr(i),o=n.child,n=o.sibling,o=Di(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function Sd(n,i){return i=wc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function wc(n,i){return n=gn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Id(n,i,o){return Ua(i,n.child,null,o),n=Sd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function J_(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Ff(n.return,i,o)}function wd(n,i,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function Z_(n,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(Fe(n,i,u.children,o),u=xe.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&J_(n,o,i);else if(n.tag===19)J_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(et(xe,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Ac(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),wd(i,!1,f,o,m);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Ac(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}wd(i,!0,o,null,m);break;case"together":wd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ki(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),vr|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(ol(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Di(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Di(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Rd(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ac(n)))}function Qb(n,i,o){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),lr(i,De,n.memoizedState.cache),sl();break;case 27:case 5:tr(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:lr(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(dr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?$_(n,i,o):(dr(i),n=ki(n,i,o),n!==null?n.sibling:null);dr(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ol(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Z_(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(xe,xe.current),u)break;return null;case 22:case 23:return i.lanes=0,H_(n,i,o);case 24:lr(i,De,n.memoizedState.cache)}return ki(n,i,o)}function W_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)ke=!0;else{if(!Rd(n,o)&&(i.flags&128)===0)return ke=!1,Qb(n,i,o);ke=(n.flags&131072)!==0}else ke=!1,Ft&&(i.flags&1048576)!==0&&Dp(i,sc,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")kf(u)?(n=xs(u,n),i.tag=1,i=Y_(null,i,u,n,o)):(i.tag=0,i=Ed(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ct){i.tag=11,i=q_(null,i,u,n,o);break t}else if(f===x){i.tag=14,i=F_(null,i,u,n,o);break t}}throw i=ze(u)||u,Error(r(306,i,""))}}return i;case 0:return Ed(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=xs(u,i.pendingProps),Y_(n,i,u,f,o);case 3:t:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,$f(n,i),ml(i,u,null,o);var v=i.memoizedState;if(u=v.cache,lr(i,De,u),u!==m.cache&&Gf(i,[De],o,!0),dl(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=X_(n,i,u,o);break t}else if(u!==f){f=xn(Error(r(424)),i),al(f),i=X_(n,i,u,o);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(me=Kn(n.firstChild),nn=i,Ft=!0,Ss=null,ai=!0,o=V_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sl(),u===f){i=ki(n,i,o);break t}Fe(n,i,u,o)}i=i.child}return i;case 26:return Ic(n,i),n===null?(o=iv(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ft||(o=i.type,n=i.pendingProps,u=zc(St.current).createElement(o),u[we]=i,u[Ee]=n,He(u,o,n),_e(u),i.stateNode=u):i.memoizedState=iv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return tr(i),n===null&&Ft&&(u=i.stateNode=tv(i.type,i.pendingProps,St.current),nn=i,ai=!0,f=me,br(i.type)?(om=f,me=Kn(u.firstChild)):me=f),Fe(n,i,i.pendingProps.children,o),Ic(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ft&&((f=u=me)&&(u=TS(u,i.type,i.pendingProps,ai),u!==null?(i.stateNode=u,nn=i,me=Kn(u.firstChild),ai=!1,f=!0):f=!1),f||Is(i)),tr(i),f=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,im(f,m)?u=null:v!==null&&im(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=nd(n,i,Bb,null,null,o),kl._currentValue=f),Ic(n,i),Fe(n,i,u,o),i.child;case 6:return n===null&&Ft&&((n=o=me)&&(o=AS(o,i.pendingProps,ai),o!==null?(i.stateNode=o,nn=i,me=null,n=!0):n=!1),n||Is(i)),null;case 13:return $_(n,i,o);case 4:return ne(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Ua(i,null,u,o):Fe(n,i,u,o),i.child;case 11:return q_(n,i,i.type,i.pendingProps,o);case 7:return Fe(n,i,i.pendingProps,o),i.child;case 8:return Fe(n,i,i.pendingProps.children,o),i.child;case 12:return Fe(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,lr(i,i.type,u.value),Fe(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Rs(i),f=Xe(f),u=u(f),i.flags|=1,Fe(n,i,u,o),i.child;case 14:return F_(n,i,i.type,i.pendingProps,o);case 15:return G_(n,i,i.type,i.pendingProps,o);case 19:return Z_(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=wc(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Di(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return H_(n,i,o);case 24:return Rs(i),u=Xe(De),n===null?(f=Qf(),f===null&&(f=ie,m=Hf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},Xf(i),lr(i,De,f)):((n.lanes&o)!==0&&($f(n,i),ml(i,null,null,o),dl()),f=n.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),lr(i,De,u)):(u=m.cache,lr(i,De,u),u!==f.cache&&Gf(i,[De],o,!0))),Fe(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ui(n){n.flags|=4}function ty(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!lv(i)){if(i=Mn.current,i!==null&&((Bt&4194048)===Bt?oi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||i!==oi))throw hl=Yf,Up;n.flags|=8192}}function Rc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Lo():536870912,n.lanes|=i,ja|=i)}function Tl(n,i){if(!Ft)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function le(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function Yb(n,i,o){var u=i.pendingProps;switch(zf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ni(De),Yn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(rl(i)?Ui(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Op())),le(i),null;case 26:return o=i.memoizedState,n===null?(Ui(i),o!==null?(le(i),ty(i,o)):(le(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Ui(i),le(i),ty(i,o)):(le(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ui(i),le(i),i.flags&=-16777217),null;case 27:pi(i),o=St.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ui(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return le(i),null}n=vt.current,rl(i)?xp(i):(n=tv(f,u,o),i.stateNode=n,Ui(i))}return le(i),null;case 5:if(pi(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ui(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return le(i),null}if(n=vt.current,rl(i))xp(i);else{switch(f=zc(St.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[we]=i,n[Ee]=u;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(He(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Ui(i)}}return le(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ui(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=St.current,rl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=nn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[we]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Qy(n.nodeValue,o)),n||Is(i)}else n=zc(n).createTextNode(u),n[we]=i,i.stateNode=n}return le(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=rl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[we]=i}else sl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),f=!1}else f=Op(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Pi(i),i):(Pi(i),null)}if(Pi(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Rc(i,i.updateQueue),le(i),null;case 4:return Yn(),n===null&&Zd(i.stateNode.containerInfo),le(i),null;case 10:return Ni(i.type),le(i),null;case 19:if(ot(xe),f=i.memoizedState,f===null)return le(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)Tl(f,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Ac(n),m!==null){for(i.flags|=128,Tl(f,!1),n=m.updateQueue,i.updateQueue=n,Rc(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Cp(o,n),o=o.sibling;return et(xe,xe.current&1|2),i.child}n=n.sibling}f.tail!==null&&Sn()>xc&&(i.flags|=128,u=!0,Tl(f,!1),i.lanes=4194304)}else{if(!u)if(n=Ac(m),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Rc(i,n),Tl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ft)return le(i),null}else 2*Sn()-f.renderingStartTime>xc&&o!==536870912&&(i.flags|=128,u=!0,Tl(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Sn(),i.sibling=null,n=xe.current,et(xe,u?n&1|2:n&1),i):(le(i),null);case 22:case 23:return Pi(i),td(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),o=i.updateQueue,o!==null&&Rc(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&ot(Cs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ni(De),le(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Xb(n,i){switch(zf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ni(De),Yn(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return pi(i),null;case 13:if(Pi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));sl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ot(xe),null;case 4:return Yn(),null;case 10:return Ni(i.type),null;case 22:case 23:return Pi(i),td(),n!==null&&ot(Cs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ni(De),null;case 25:return null;default:return null}}function ey(n,i){switch(zf(i),i.tag){case 3:Ni(De),Yn();break;case 26:case 27:case 5:pi(i);break;case 4:Yn();break;case 13:Pi(i);break;case 19:ot(xe);break;case 10:Ni(i.type);break;case 22:case 23:Pi(i),td(),n!==null&&ot(Cs);break;case 24:Ni(De)}}function Al(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(T){ee(i,i.return,T)}}function gr(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=i;var w=o,B=T;try{B()}catch(Q){ee(f,w,Q)}}}u=u.next}while(u!==m)}}catch(Q){ee(i,i.return,Q)}}function ny(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Fp(i,o)}catch(u){ee(n,n.return,u)}}}function iy(n,i,o){o.props=xs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ee(n,i,u)}}function bl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ee(n,i,f)}}function li(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ee(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ee(n,i,f)}else o.current=null}function ry(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ee(n,n.return,f)}}function Cd(n,i,o){try{var u=n.stateNode;pS(u,n.type,o,i),u[Ee]=i}catch(f){ee(n,n.return,f)}}function sy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&br(n.type)||n.tag===4}function Dd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||sy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&br(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xd(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Bc));else if(u!==4&&(u===27&&br(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(xd(n,i,o),n=n.sibling;n!==null;)xd(n,i,o),n=n.sibling}function Cc(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&br(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Cc(n,i,o),n=n.sibling;n!==null;)Cc(n,i,o),n=n.sibling}function ay(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);He(i,u,o),i[we]=n,i[Ee]=o}catch(m){ee(n,n.return,m)}}var Li=!1,ve=!1,Vd=!1,oy=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function $b(n,i){if(n=n.containerInfo,em=Kc,n=yp(n),Df(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var v=0,T=-1,w=-1,B=0,Q=0,$=n,j=null;e:for(;;){for(var F;$!==o||f!==0&&$.nodeType!==3||(T=v+f),$!==m||u!==0&&$.nodeType!==3||(w=v+u),$.nodeType===3&&(v+=$.nodeValue.length),(F=$.firstChild)!==null;)j=$,$=F;for(;;){if($===n)break e;if(j===o&&++B===f&&(T=v),j===m&&++Q===u&&(w=v),(F=$.nextSibling)!==null)break;$=j,j=$.parentNode}$=F}o=T===-1||w===-1?null:{start:T,end:w}}else o=null}o=o||{start:0,end:0}}else o=null;for(nm={focusedElem:n,selectionRange:o},Kc=!1,Ue=i;Ue!==null;)if(i=Ue,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ue=n;else for(;Ue!==null;){switch(i=Ue,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var bt=xs(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(bt,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){ee(o,o.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)sm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ue=n;break}Ue=i.return}}function ly(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:pr(n,o),u&4&&Al(5,o);break;case 1:if(pr(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){ee(o,o.return,v)}else{var f=xs(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){ee(o,o.return,v)}}u&64&&ny(o),u&512&&bl(o,o.return);break;case 3:if(pr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Fp(n,i)}catch(v){ee(o,o.return,v)}}break;case 27:i===null&&u&4&&ay(o);case 26:case 5:pr(n,o),i===null&&u&4&&ry(o),u&512&&bl(o,o.return);break;case 12:pr(n,o);break;case 13:pr(n,o),u&4&&hy(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=sS.bind(null,o),bS(n,o))));break;case 22:if(u=o.memoizedState!==null||Li,!u){i=i!==null&&i.memoizedState!==null||ve,f=Li;var m=ve;Li=u,(ve=i)&&!m?_r(n,o,(o.subtreeFlags&8772)!==0):pr(n,o),Li=f,ve=m}break;case 30:break;default:pr(n,o)}}function uy(n){var i=n.alternate;i!==null&&(n.alternate=null,uy(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&rr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var se=null,un=!1;function Bi(n,i,o){for(o=o.child;o!==null;)cy(n,i,o),o=o.sibling}function cy(n,i,o){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(de,o)}catch{}switch(o.tag){case 26:ve||li(o,i),Bi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ve||li(o,i);var u=se,f=un;br(o.type)&&(se=o.stateNode,un=!1),Bi(n,i,o),Ol(o.stateNode),se=u,un=f;break;case 5:ve||li(o,i);case 6:if(u=se,f=un,se=null,Bi(n,i,o),se=u,un=f,se!==null)if(un)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){ee(o,i,m)}else try{se.removeChild(o.stateNode)}catch(m){ee(o,i,m)}break;case 18:se!==null&&(un?(n=se,Zy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),zl(n)):Zy(se,o.stateNode));break;case 4:u=se,f=un,se=o.stateNode.containerInfo,un=!0,Bi(n,i,o),se=u,un=f;break;case 0:case 11:case 14:case 15:ve||gr(2,o,i),ve||gr(4,o,i),Bi(n,i,o);break;case 1:ve||(li(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&iy(o,i,u)),Bi(n,i,o);break;case 21:Bi(n,i,o);break;case 22:ve=(u=ve)||o.memoizedState!==null,Bi(n,i,o),ve=u;break;default:Bi(n,i,o)}}function hy(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zl(n)}catch(o){ee(i,i.return,o)}}function Jb(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new oy),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new oy),i;default:throw Error(r(435,n.tag))}}function Od(n,i){var o=Jb(n);i.forEach(function(u){var f=aS.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function pn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(br(T.type)){se=T.stateNode,un=!1;break t}break;case 5:se=T.stateNode,un=!1;break t;case 3:case 4:se=T.stateNode.containerInfo,un=!0;break t}T=T.return}if(se===null)throw Error(r(160));cy(m,v,f),se=null,un=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)fy(i,n),i=i.sibling}var Hn=null;function fy(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:pn(i,n),_n(n),u&4&&(gr(3,n,n.return),Al(3,n),gr(5,n,n.return));break;case 1:pn(i,n),_n(n),u&512&&(ve||o===null||li(o,o.return)),u&64&&Li&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Hn;if(pn(i,n),_n(n),u&512&&(ve||o===null||li(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ss]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),He(m,u,o),m[we]=n,_e(m),u=m;break t;case"link":var v=av("link","href",f).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break e}}m=f.createElement(u),He(m,u,o),f.head.appendChild(m);break;case"meta":if(v=av("meta","content",f).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break e}}m=f.createElement(u),He(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[we]=n,_e(m),u=m}n.stateNode=u}else ov(f,n.type,n.stateNode);else n.stateNode=sv(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?ov(f,n.type,n.stateNode):sv(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Cd(n,n.memoizedProps,o.memoizedProps)}break;case 27:pn(i,n),_n(n),u&512&&(ve||o===null||li(o,o.return)),o!==null&&u&4&&Cd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(pn(i,n),_n(n),u&512&&(ve||o===null||li(o,o.return)),n.flags&32){f=n.stateNode;try{wn(f,"")}catch(F){ee(n,n.return,F)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Cd(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Vd=!0);break;case 6:if(pn(i,n),_n(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(F){ee(n,n.return,F)}}break;case 3:if(Fc=null,f=Hn,Hn=jc(i.containerInfo),pn(i,n),Hn=f,_n(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(F){ee(n,n.return,F)}Vd&&(Vd=!1,dy(n));break;case 4:u=Hn,Hn=jc(n.stateNode.containerInfo),pn(i,n),_n(n),Hn=u;break;case 12:pn(i,n),_n(n);break;case 13:pn(i,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ld=Sn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Od(n,u)));break;case 22:f=n.memoizedState!==null;var w=o!==null&&o.memoizedState!==null,B=Li,Q=ve;if(Li=B||f,ve=Q||w,pn(i,n),ve=Q,Li=B,_n(n),u&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||w||Li||ve||Vs(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){w=o=i;try{if(m=w.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=w.stateNode;var $=w.memoizedProps.style,j=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(F){ee(w,w.return,F)}}}else if(i.tag===6){if(o===null){w=i;try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(F){ee(w,w.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Od(n,o))));break;case 19:pn(i,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Od(n,u)));break;case 30:break;case 21:break;default:pn(i,n),_n(n)}}function _n(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(sy(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=Dd(n);Cc(n,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(wn(v,""),o.flags&=-33);var T=Dd(n);Cc(n,T,v);break;case 3:case 4:var w=o.stateNode.containerInfo,B=Dd(n);xd(n,B,w);break;default:throw Error(r(161))}}catch(Q){ee(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function dy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;dy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function pr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ly(n,i.alternate,i),i=i.sibling}function Vs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:gr(4,i,i.return),Vs(i);break;case 1:li(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&iy(i,i.return,o),Vs(i);break;case 27:Ol(i.stateNode);case 26:case 5:li(i,i.return),Vs(i);break;case 22:i.memoizedState===null&&Vs(i);break;case 30:Vs(i);break;default:Vs(i)}n=n.sibling}}function _r(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:_r(f,m,o),Al(4,m);break;case 1:if(_r(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){ee(u,u.return,B)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var w=f.shared.hiddenCallbacks;if(w!==null)for(f.shared.hiddenCallbacks=null,f=0;f<w.length;f++)qp(w[f],T)}catch(B){ee(u,u.return,B)}}o&&v&64&&ny(m),bl(m,m.return);break;case 27:ay(m);case 26:case 5:_r(f,m,o),o&&u===null&&v&4&&ry(m),bl(m,m.return);break;case 12:_r(f,m,o);break;case 13:_r(f,m,o),o&&v&4&&hy(f,m);break;case 22:m.memoizedState===null&&_r(f,m,o),bl(m,m.return);break;case 30:break;default:_r(f,m,o)}i=i.sibling}}function Nd(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ll(o))}function Md(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ll(n))}function ui(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)my(n,i,o,u),i=i.sibling}function my(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ui(n,i,o,u),f&2048&&Al(9,i);break;case 1:ui(n,i,o,u);break;case 3:ui(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ll(n)));break;case 12:if(f&2048){ui(n,i,o,u),n=i.stateNode;try{var m=i.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(w){ee(i,i.return,w)}}else ui(n,i,o,u);break;case 13:ui(n,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?ui(n,i,o,u):Sl(n,i):m._visibility&2?ui(n,i,o,u):(m._visibility|=2,La(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Nd(v,i);break;case 24:ui(n,i,o,u),f&2048&&Md(i.alternate,i);break;default:ui(n,i,o,u)}}function La(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,v=i,T=o,w=u,B=v.flags;switch(v.tag){case 0:case 11:case 15:La(m,v,T,w,f),Al(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?La(m,v,T,w,f):Sl(m,v):(Q._visibility|=2,La(m,v,T,w,f)),f&&B&2048&&Nd(v.alternate,v);break;case 24:La(m,v,T,w,f),f&&B&2048&&Md(v.alternate,v);break;default:La(m,v,T,w,f)}i=i.sibling}}function Sl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:Sl(o,u),f&2048&&Nd(u.alternate,u);break;case 24:Sl(o,u),f&2048&&Md(u.alternate,u);break;default:Sl(o,u)}i=i.sibling}}var Il=8192;function Ba(n){if(n.subtreeFlags&Il)for(n=n.child;n!==null;)gy(n),n=n.sibling}function gy(n){switch(n.tag){case 26:Ba(n),n.flags&Il&&n.memoizedState!==null&&kS(Hn,n.memoizedState,n.memoizedProps);break;case 5:Ba(n);break;case 3:case 4:var i=Hn;Hn=jc(n.stateNode.containerInfo),Ba(n),Hn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Il,Il=16777216,Ba(n),Il=i):Ba(n));break;default:Ba(n)}}function py(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function wl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ue=u,yy(u,n)}py(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_y(n),n=n.sibling}function _y(n){switch(n.tag){case 0:case 11:case 15:wl(n),n.flags&2048&&gr(9,n,n.return);break;case 3:wl(n);break;case 12:wl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Dc(n)):wl(n);break;default:wl(n)}}function Dc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ue=u,yy(u,n)}py(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:gr(8,i,i.return),Dc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Dc(i));break;default:Dc(i)}n=n.sibling}}function yy(n,i){for(;Ue!==null;){var o=Ue;switch(o.tag){case 0:case 11:case 15:gr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ll(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ue=u;else t:for(o=n;Ue!==null;){u=Ue;var f=u.sibling,m=u.return;if(uy(u),u===o){Ue=null;break t}if(f!==null){f.return=m,Ue=f;break t}Ue=m}}}var Zb={getCacheForType:function(n){var i=Xe(De),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},Wb=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ie=null,Nt=null,Bt=0,Qt=0,yn=null,yr=!1,za=!1,Pd=!1,zi=0,ge=0,vr=0,Os=0,kd=0,Pn=0,ja=0,Rl=null,cn=null,Ud=!1,Ld=0,xc=1/0,Vc=null,Er=null,Ge=0,Tr=null,qa=null,Fa=0,Bd=0,zd=null,vy=null,Cl=0,jd=null;function vn(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(K.T!==null){var n=xa;return n!==0?n:Yd()}return nr()}function Ey(){Pn===0&&(Pn=(Bt&536870912)===0||Ft?Uo():536870912);var n=Mn.current;return n!==null&&(n.flags|=32),Pn}function En(n,i,o){(n===ie&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&(Ga(n,0),Ar(n,Bt,Pn,!1)),yi(n,o),((Kt&2)===0||n!==ie)&&(n===ie&&((Kt&2)===0&&(Os|=o),ge===4&&Ar(n,Bt,Pn,!1)),ci(n))}function Ty(n,i,o){if((Kt&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||rs(n,i),f=u?nS(n,i):Gd(n,i,!0),m=u;do{if(f===0){za&&!u&&Ar(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!tS(o)){f=Gd(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=n;f=Rl;var w=T.current.memoizedState.isDehydrated;if(w&&(Ga(T,v).flags|=256),v=Gd(T,v,!1),v!==2){if(Pd&&!w){T.errorRecoveryDisabledLanes|=m,Os|=m,f=4;break t}m=cn,cn=f,m!==null&&(cn===null?cn=m:cn.push.apply(cn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Ga(n,0),Ar(n,i,0,!0);break}t:{switch(u=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ar(u,i,Pn,!yr);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Ld+300-Sn(),10<f)){if(Ar(u,i,Pn,!yr),oa(u,0,!0)!==0)break t;u.timeoutHandle=$y(Ay.bind(null,u,o,cn,Vc,Ud,i,Pn,Os,ja,yr,m,2,-0,0),f);break t}Ay(u,o,cn,Vc,Ud,i,Pn,Os,ja,yr,m,0,-0,0)}}break}while(!0);ci(n)}function Ay(n,i,o,u,f,m,v,T,w,B,Q,$,j,F){if(n.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:PS},gy(i),$=US(),$!==null)){n.cancelPendingCommit=$(Dy.bind(null,n,i,m,o,u,f,v,T,w,Q,1,j,F)),Ar(n,m,v,!B);return}Dy(n,i,m,o,u,f,v,T,w)}function tS(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!mn(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ar(n,i,o,u){i&=~kd,i&=~Os,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var m=31-Ye(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Xn(n,o,i)}function Oc(){return(Kt&6)===0?(Dl(0),!1):!0}function qd(){if(Nt!==null){if(Qt===0)var n=Nt.return;else n=Nt,Oi=ws=null,sd(n),ka=null,vl=0,n=Nt;for(;n!==null;)ey(n.alternate,n),n=n.return;Nt=null}}function Ga(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,yS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),qd(),ie=n,Nt=o=Di(n.current,null),Bt=i,Qt=0,yn=null,yr=!1,za=rs(n,i),Pd=!1,ja=Pn=kd=Os=vr=ge=0,cn=Rl=null,Ud=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-Ye(u),m=1<<f;i|=n[f],u&=~m}return zi=i,tc(),o}function by(n,i){Dt=null,K.H=vc,i===cl||i===uc?(i=zp(),Qt=3):i===Up?(i=zp(),Qt=4):Qt=i===j_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Nt===null&&(ge=1,Sc(n,xn(i,n.current)))}function Sy(){var n=K.H;return K.H=vc,n===null?vc:n}function Iy(){var n=K.A;return K.A=Zb,n}function Fd(){ge=4,yr||(Bt&4194048)!==Bt&&Mn.current!==null||(za=!0),(vr&134217727)===0&&(Os&134217727)===0||ie===null||Ar(ie,Bt,Pn,!1)}function Gd(n,i,o){var u=Kt;Kt|=2;var f=Sy(),m=Iy();(ie!==n||Bt!==i)&&(Vc=null,Ga(n,i)),i=!1;var v=ge;t:do try{if(Qt!==0&&Nt!==null){var T=Nt,w=yn;switch(Qt){case 8:qd(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var B=Qt;if(Qt=0,yn=null,Ha(n,T,w,B),o&&za){v=0;break t}break;default:B=Qt,Qt=0,yn=null,Ha(n,T,w,B)}}eS(),v=ge;break}catch(Q){by(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Oi=ws=null,Kt=u,K.H=f,K.A=m,Nt===null&&(ie=null,Bt=0,tc()),v}function eS(){for(;Nt!==null;)wy(Nt)}function nS(n,i){var o=Kt;Kt|=2;var u=Sy(),f=Iy();ie!==n||Bt!==i?(Vc=null,xc=Sn()+500,Ga(n,i)):za=rs(n,i);t:do try{if(Qt!==0&&Nt!==null){i=Nt;var m=yn;e:switch(Qt){case 1:Qt=0,yn=null,Ha(n,i,m,1);break;case 2:case 9:if(Lp(m)){Qt=0,yn=null,Ry(i);break}i=function(){Qt!==2&&Qt!==9||ie!==n||(Qt=7),ci(n)},m.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Lp(m)?(Qt=0,yn=null,Ry(i)):(Qt=0,yn=null,Ha(n,i,m,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var T=Nt;if(!v||lv(v)){Qt=0,yn=null;var w=T.sibling;if(w!==null)Nt=w;else{var B=T.return;B!==null?(Nt=B,Nc(B)):Nt=null}break e}}Qt=0,yn=null,Ha(n,i,m,5);break;case 6:Qt=0,yn=null,Ha(n,i,m,6);break;case 8:qd(),ge=6;break t;default:throw Error(r(462))}}iS();break}catch(Q){by(n,Q)}while(!0);return Oi=ws=null,K.H=u,K.A=f,Kt=o,Nt!==null?0:(ie=null,Bt=0,tc(),ge)}function iS(){for(;Nt!==null&&!No();)wy(Nt)}function wy(n){var i=W_(n.alternate,n,zi);n.memoizedProps=n.pendingProps,i===null?Nc(n):Nt=i}function Ry(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Q_(o,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=Q_(o,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:sd(i);default:ey(o,i),i=Nt=Cp(i,zi),i=W_(o,i,zi)}n.memoizedProps=n.pendingProps,i===null?Nc(n):Nt=i}function Ha(n,i,o,u){Oi=ws=null,sd(i),ka=null,vl=0;var f=i.return;try{if(Kb(n,f,i,o,Bt)){ge=1,Sc(n,xn(o,n.current)),Nt=null;return}}catch(m){if(f!==null)throw Nt=f,m;ge=1,Sc(n,xn(o,n.current)),Nt=null;return}i.flags&32768?(Ft||u===1?n=!0:za||(Bt&536870912)!==0?n=!1:(yr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cy(i,n)):Nc(i)}function Nc(n){var i=n;do{if((i.flags&32768)!==0){Cy(i,yr);return}n=i.return;var o=Yb(i.alternate,i,zi);if(o!==null){Nt=o;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);ge===0&&(ge=5)}function Cy(n,i){do{var o=Xb(n.alternate,n);if(o!==null){o.flags&=32767,Nt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=o}while(n!==null);ge=6,Nt=null}function Dy(n,i,o,u,f,m,v,T,w){n.cancelPendingCommit=null;do Mc();while(Ge!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Mf,Bo(n,o,m,v,T,w),n===ie&&(Nt=ie=null,Bt=0),qa=i,Tr=n,Fa=o,Bd=m,zd=f,vy=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,oS(ts,function(){return My(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,f=at.p,at.p=2,v=Kt,Kt|=4;try{$b(n,i,o)}finally{Kt=v,at.p=f,K.T=u}}Ge=1,xy(),Vy(),Oy()}}function xy(){if(Ge===1){Ge=0;var n=Tr,i=qa,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var u=at.p;at.p=2;var f=Kt;Kt|=4;try{fy(i,n);var m=nm,v=yp(n.containerInfo),T=m.focusedElem,w=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&_p(T.ownerDocument.documentElement,T)){if(w!==null&&Df(T)){var B=w.start,Q=w.end;if(Q===void 0&&(Q=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(Q,T.value.length);else{var $=T.ownerDocument||document,j=$&&$.defaultView||window;if(j.getSelection){var F=j.getSelection(),bt=T.textContent.length,Tt=Math.min(w.start,bt),Zt=w.end===void 0?Tt:Math.min(w.end,bt);!F.extend&&Tt>Zt&&(v=Zt,Zt=Tt,Tt=v);var M=pp(T,Tt),V=pp(T,Zt);if(M&&V&&(F.rangeCount!==1||F.anchorNode!==M.node||F.anchorOffset!==M.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var L=$.createRange();L.setStart(M.node,M.offset),F.removeAllRanges(),Tt>Zt?(F.addRange(L),F.extend(V.node,V.offset)):(L.setEnd(V.node,V.offset),F.addRange(L))}}}}for($=[],F=T;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var X=$[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Kc=!!em,nm=em=null}finally{Kt=f,at.p=u,K.T=o}}n.current=i,Ge=2}}function Vy(){if(Ge===2){Ge=0;var n=Tr,i=qa,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var u=at.p;at.p=2;var f=Kt;Kt|=4;try{ly(n,i.alternate,i)}finally{Kt=f,at.p=u,K.T=o}}Ge=3}}function Oy(){if(Ge===4||Ge===3){Ge=0,Du();var n=Tr,i=qa,o=Fa,u=vy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ge=5:(Ge=0,qa=Tr=null,Ny(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Er=null),la(o),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(de,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=K.T,f=at.p,at.p=2,K.T=null;try{for(var m=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];m(T.value,{componentStack:T.stack})}}finally{K.T=i,at.p=f}}(Fa&3)!==0&&Mc(),ci(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===jd?Cl++:(Cl=0,jd=n):Cl=0,Dl(0)}}function Ny(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ll(i)))}function Mc(n){return xy(),Vy(),Oy(),My()}function My(){if(Ge!==5)return!1;var n=Tr,i=Bd;Bd=0;var o=la(Fa),u=K.T,f=at.p;try{at.p=32>o?32:o,K.T=null,o=zd,zd=null;var m=Tr,v=Fa;if(Ge=0,qa=Tr=null,Fa=0,(Kt&6)!==0)throw Error(r(331));var T=Kt;if(Kt|=4,_y(m.current),my(m,m.current,v,o),Kt=T,Dl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(de,m)}catch{}return!0}finally{at.p=f,K.T=u,Ny(n,i)}}function Py(n,i,o){i=xn(o,i),i=vd(n.stateNode,i,2),n=hr(n,i,2),n!==null&&(yi(n,2),ci(n))}function ee(n,i,o){if(n.tag===3)Py(n,n,o);else for(;i!==null;){if(i.tag===3){Py(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Er===null||!Er.has(u))){n=xn(o,n),o=B_(2),u=hr(i,o,2),u!==null&&(z_(o,u,i,n),yi(u,2),ci(u));break}}i=i.return}}function Hd(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Wb;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Pd=!0,f.add(o),n=rS.bind(null,n,i,o),i.then(n,n))}function rS(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ie===n&&(Bt&o)===o&&(ge===4||ge===3&&(Bt&62914560)===Bt&&300>Sn()-Ld?(Kt&2)===0&&Ga(n,0):kd|=o,ja===Bt&&(ja=0)),ci(n)}function ky(n,i){i===0&&(i=Lo()),n=wa(n,i),n!==null&&(yi(n,i),ci(n))}function sS(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),ky(n,o)}function aS(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),ky(n,o)}function oS(n,i){return Zr(n,i)}var Pc=null,Ka=null,Kd=!1,kc=!1,Qd=!1,Ns=0;function ci(n){n!==Ka&&n.next===null&&(Ka===null?Pc=Ka=n:Ka=Ka.next=n),kc=!0,Kd||(Kd=!0,uS())}function Dl(n,i){if(!Qd&&kc){Qd=!0;do for(var o=!1,u=Pc;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-Ye(42|n)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,zy(u,m))}else m=Bt,m=oa(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||rs(u,m)||(o=!0,zy(u,m));u=u.next}while(o);Qd=!1}}function lS(){Uy()}function Uy(){kc=Kd=!1;var n=0;Ns!==0&&(_S()&&(n=Ns),Ns=0);for(var i=Sn(),o=null,u=Pc;u!==null;){var f=u.next,m=Ly(u,i);m===0?(u.next=null,o===null?Pc=f:o.next=f,f===null&&(Ka=o)):(o=u,(n!==0||(m&3)!==0)&&(kc=!0)),u=f}Dl(n)}function Ly(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-Ye(m),T=1<<v,w=f[v];w===-1?((T&o)===0||(T&u)!==0)&&(f[v]=ko(T,i)):w<=i&&(n.expiredLanes|=T),m&=~T}if(i=ie,o=Bt,o=oa(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Wr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||rs(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&Wr(u),la(o)){case 2:case 8:o=sa;break;case 32:o=ts;break;case 268435456:o=aa;break;default:o=ts}return u=By.bind(null,n),o=Zr(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&Wr(u),n.callbackPriority=2,n.callbackNode=null,2}function By(n,i){if(Ge!==0&&Ge!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Mc()&&n.callbackNode!==o)return null;var u=Bt;return u=oa(n,n===ie?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Ty(n,u,i),Ly(n,Sn()),n.callbackNode!=null&&n.callbackNode===o?By.bind(null,n):null)}function zy(n,i){if(Mc())return null;Ty(n,i,!0)}function uS(){vS(function(){(Kt&6)!==0?Zr(Mo,lS):Uy()})}function Yd(){return Ns===0&&(Ns=Uo()),Ns}function jy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ma(""+n)}function qy(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function cS(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=jy((f[Ee]||null).action),v=u.submitter;v&&(i=(i=v[Ee]||null)?jy(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var T=new ga("action","action",null,u,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ns!==0){var w=v?qy(f,v):new FormData(f);md(o,{pending:!0,data:w,method:f.method,action:m},null,w)}}else typeof m=="function"&&(T.preventDefault(),w=v?qy(f,v):new FormData(f),md(o,{pending:!0,data:w,method:f.method,action:m},m,w))},currentTarget:f}]})}}for(var Xd=0;Xd<Nf.length;Xd++){var $d=Nf[Xd],hS=$d.toLowerCase(),fS=$d[0].toUpperCase()+$d.slice(1);Gn(hS,"on"+fS)}Gn(Tp,"onAnimationEnd"),Gn(Ap,"onAnimationIteration"),Gn(bp,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(Db,"onTransitionRun"),Gn(xb,"onTransitionStart"),Gn(Vb,"onTransitionCancel"),Gn(Sp,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function Fy(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var T=u[v],w=T.instance,B=T.currentTarget;if(T=T.listener,w!==m&&f.isPropagationStopped())break t;m=T,f.currentTarget=B;try{m(f)}catch(Q){bc(Q)}f.currentTarget=null,m=w}else for(v=0;v<u.length;v++){if(T=u[v],w=T.instance,B=T.currentTarget,T=T.listener,w!==m&&f.isPropagationStopped())break t;m=T,f.currentTarget=B;try{m(f)}catch(Q){bc(Q)}f.currentTarget=null,m=w}}}}function Mt(n,i){var o=i[jo];o===void 0&&(o=i[jo]=new Set);var u=n+"__bubble";o.has(u)||(Gy(i,n,2,!1),o.add(u))}function Jd(n,i,o){var u=0;i&&(u|=4),Gy(o,n,u,i)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Zd(n){if(!n[Uc]){n[Uc]=!0,qo.forEach(function(o){o!=="selectionchange"&&(dS.has(o)||Jd(o,!1,n),Jd(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Uc]||(i[Uc]=!0,Jd("selectionchange",!1,i))}}function Gy(n,i,o,u){switch(mv(i)){case 2:var f=zS;break;case 8:f=jS;break;default:f=fm}o=f.bind(null,i,o,n),f=void 0,!Cn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Wd(n,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=u.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=vi(T),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){u=m=v;continue t}T=T.parentNode}}u=u.return}Bu(function(){var B=m,Q=Rn(o),$=[];t:{var j=Ip.get(n);if(j!==void 0){var F=ga,bt=n;switch(n){case"keypress":if(ei(o)===0)break t;case"keydown":case"keyup":F=Ta;break;case"focusin":bt="focus",F=ya;break;case"focusout":bt="blur",F=ya;break;case"beforeblur":case"afterblur":F=ya;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Qu;break;case Tp:case Ap:case bp:F=va;break;case Sp:F=Xu;break;case"scroll":case"scrollend":F=zu;break;case"wheel":F=Aa;break;case"copy":case"cut":case"paste":F=Ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=tl;break;case"toggle":case"beforetoggle":F=Ju}var Tt=(i&4)!==0,Zt=!Tt&&(n==="scroll"||n==="scrollend"),M=Tt?j!==null?j+"Capture":null:j;Tt=[];for(var V=B,L;V!==null;){var X=V;if(L=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||L===null||M===null||(X=fs(V,M),X!=null&&Tt.push(Vl(V,X,L))),Zt)break;V=V.return}0<Tt.length&&(j=new F(j,bt,null,o,Q),$.push({event:j,listeners:Tt}))}}if((i&7)===0){t:{if(j=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",j&&o!==bi&&(bt=o.relatedTarget||o.fromElement)&&(vi(bt)||bt[In]))break t;if((F||j)&&(j=Q.window===Q?Q:(j=Q.ownerDocument)?j.defaultView||j.parentWindow:window,F?(bt=o.relatedTarget||o.toElement,F=B,bt=bt?vi(bt):null,bt!==null&&(Zt=l(bt),Tt=bt.tag,bt!==Zt||Tt!==5&&Tt!==27&&Tt!==6)&&(bt=null)):(F=null,bt=B),F!==bt)){if(Tt=Dn,X="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=tl,X="onPointerLeave",M="onPointerEnter",V="pointer"),Zt=F==null?j:Jn(F),L=bt==null?j:Jn(bt),j=new Tt(X,V+"leave",F,o,Q),j.target=Zt,j.relatedTarget=L,X=null,vi(Q)===B&&(Tt=new Tt(M,V+"enter",bt,o,Q),Tt.target=L,Tt.relatedTarget=Zt,X=Tt),Zt=X,F&&bt)e:{for(Tt=F,M=bt,V=0,L=Tt;L;L=Qa(L))V++;for(L=0,X=M;X;X=Qa(X))L++;for(;0<V-L;)Tt=Qa(Tt),V--;for(;0<L-V;)M=Qa(M),L--;for(;V--;){if(Tt===M||M!==null&&Tt===M.alternate)break e;Tt=Qa(Tt),M=Qa(M)}Tt=null}else Tt=null;F!==null&&Hy($,j,F,Tt,!1),bt!==null&&Zt!==null&&Hy($,Zt,bt,Tt,!0)}}t:{if(j=B?Jn(B):window,F=j.nodeName&&j.nodeName.toLowerCase(),F==="select"||F==="input"&&j.type==="file")var dt=cp;else if(Ce(j))if(hp)dt=wb;else{dt=Sb;var Ot=bb}else F=j.nodeName,!F||F.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?B&&Qo(B.elementType)&&(dt=cp):dt=Ib;if(dt&&(dt=dt(n,B))){Ci($,dt,o,Q);break t}Ot&&Ot(n,j,B),n==="focusout"&&B&&j.type==="number"&&B.memoizedProps.value!=null&&ar(j,"number",j.value)}switch(Ot=B?Jn(B):window,n){case"focusin":(Ce(Ot)||Ot.contentEditable==="true")&&(ba=Ot,xf=B,il=null);break;case"focusout":il=xf=ba=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,vp($,o,Q);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":vp($,o,Q)}var gt;if(ri)t:{switch(n){case"compositionstart":var At="onCompositionStart";break t;case"compositionend":At="onCompositionEnd";break t;case"compositionupdate":At="onCompositionUpdate";break t}At=void 0}else Ut?G(n,o)&&(At="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(At="onCompositionStart");At&&(y&&o.locale!=="ko"&&(Ut||At!=="onCompositionStart"?At==="onCompositionEnd"&&Ut&&(gt=Xo()):(ti=Q,or="value"in ti?ti.value:ti.textContent,Ut=!0)),Ot=Lc(B,At),0<Ot.length&&(At=new Zo(At,n,null,o,Q),$.push({event:At,listeners:Ot}),gt?At.data=gt:(gt=rt(o),gt!==null&&(At.data=gt)))),(gt=_?Re(n,o):Lt(n,o))&&(At=Lc(B,"onBeforeInput"),0<At.length&&(Ot=new Zo("onBeforeInput","beforeinput",null,o,Q),$.push({event:Ot,listeners:At}),Ot.data=gt)),cS($,n,B,o,Q)}Fy($,i)})}function Vl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Lc(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fs(n,o),f!=null&&u.unshift(Vl(n,f,m)),f=fs(n,i),f!=null&&u.push(Vl(n,f,m))),n.tag===3)return u;n=n.return}return[]}function Qa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Hy(n,i,o,u,f){for(var m=i._reactName,v=[];o!==null&&o!==u;){var T=o,w=T.alternate,B=T.stateNode;if(T=T.tag,w!==null&&w===u)break;T!==5&&T!==26&&T!==27||B===null||(w=B,f?(B=fs(o,m),B!=null&&v.unshift(Vl(o,B,w))):f||(B=fs(o,m),B!=null&&v.push(Vl(o,B,w)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var mS=/\r\n?/g,gS=/\u0000|\uFFFD/g;function Ky(n){return(typeof n=="string"?n:""+n).replace(mS,`
`).replace(gS,"")}function Qy(n,i){return i=Ky(i),Ky(n)===i}function Bc(){}function Jt(n,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||wn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&wn(n,""+u);break;case"className":Zn(n,"class",u);break;case"tabIndex":Zn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(n,o,u);break;case"style":Ko(n,u,m);break;case"data":if(i!=="object"){Zn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ma(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Jt(n,i,"name",f.name,f,null),Jt(n,i,"formEncType",f.formEncType,f,null),Jt(n,i,"formMethod",f.formMethod,f,null),Jt(n,i,"formTarget",f.formTarget,f,null)):(Jt(n,i,"encType",f.encType,f,null),Jt(n,i,"method",f.method,f,null),Jt(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ma(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Bc);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ma(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),sr(n,"popover",u);break;case"xlinkActuate":je(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":je(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":je(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":je(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":je(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":je(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":je(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":je(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":je(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":sr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bf.get(o)||o,sr(n,o,u))}}function tm(n,i,o,u,f,m){switch(o){case"style":Ko(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?wn(n,u):(typeof u=="number"||typeof u=="bigint")&&wn(n,""+u);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[Ee]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):sr(n,o,u)}}}function He(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(n,i,m,v,o,null)}}f&&Jt(n,i,"srcSet",o.srcSet,o,null),u&&Jt(n,i,"src",o.src,o,null);return;case"input":Mt("invalid",n);var T=m=v=f=null,w=null,B=null;for(u in o)if(o.hasOwnProperty(u)){var Q=o[u];if(Q!=null)switch(u){case"name":f=Q;break;case"type":v=Q;break;case"checked":w=Q;break;case"defaultChecked":B=Q;break;case"value":m=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Jt(n,i,u,Q,o,null)}}us(n,m,T,w,B,v,f,!1),da(n);return;case"select":Mt("invalid",n),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:Jt(n,i,f,T,o,null)}i=m,o=v,n.multiple=!!u,i!=null?Ai(n,!!u,i,!1):o!=null&&Ai(n,!!u,o,!0);return;case"textarea":Mt("invalid",n),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Jt(n,i,v,T,o,null)}cs(n,u,f,m),da(n);return;case"option":for(w in o)if(o.hasOwnProperty(w)&&(u=o[w],u!=null))switch(w){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Jt(n,i,w,u,o,null)}return;case"dialog":Mt("beforetoggle",n),Mt("toggle",n),Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(u=0;u<xl.length;u++)Mt(xl[u],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(n,i,B,u,o,null)}return;default:if(Qo(i)){for(Q in o)o.hasOwnProperty(Q)&&(u=o[Q],u!==void 0&&tm(n,i,Q,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&Jt(n,i,T,u,o,null))}function pS(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,w=null,B=null,Q=null;for(F in o){var $=o[F];if(o.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":w=$;default:u.hasOwnProperty(F)||Jt(n,i,F,null,u,$)}}for(var j in u){var F=u[j];if($=o[j],u.hasOwnProperty(j)&&(F!=null||$!=null))switch(j){case"type":m=F;break;case"name":f=F;break;case"checked":B=F;break;case"defaultChecked":Q=F;break;case"value":v=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&Jt(n,i,j,F,u,$)}}dn(n,v,T,w,B,Q,m,f);return;case"select":F=v=T=j=null;for(m in o)if(w=o[m],o.hasOwnProperty(m)&&w!=null)switch(m){case"value":break;case"multiple":F=w;default:u.hasOwnProperty(m)||Jt(n,i,m,null,u,w)}for(f in u)if(m=u[f],w=o[f],u.hasOwnProperty(f)&&(m!=null||w!=null))switch(f){case"value":j=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==w&&Jt(n,i,f,m,u,w)}i=T,o=v,u=F,j!=null?Ai(n,!!o,j,!1):!!u!=!!o&&(i!=null?Ai(n,!!o,i,!0):Ai(n,!!o,o?[]:"",!1));return;case"textarea":F=j=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Jt(n,i,T,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":j=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Jt(n,i,v,f,u,m)}Xt(n,j,F);return;case"option":for(var bt in o)if(j=o[bt],o.hasOwnProperty(bt)&&j!=null&&!u.hasOwnProperty(bt))switch(bt){case"selected":n.selected=!1;break;default:Jt(n,i,bt,null,u,j)}for(w in u)if(j=u[w],F=o[w],u.hasOwnProperty(w)&&j!==F&&(j!=null||F!=null))switch(w){case"selected":n.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Jt(n,i,w,j,u,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in o)j=o[Tt],o.hasOwnProperty(Tt)&&j!=null&&!u.hasOwnProperty(Tt)&&Jt(n,i,Tt,null,u,j);for(B in u)if(j=u[B],F=o[B],u.hasOwnProperty(B)&&j!==F&&(j!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:Jt(n,i,B,j,u,F)}return;default:if(Qo(i)){for(var Zt in o)j=o[Zt],o.hasOwnProperty(Zt)&&j!==void 0&&!u.hasOwnProperty(Zt)&&tm(n,i,Zt,void 0,u,j);for(Q in u)j=u[Q],F=o[Q],!u.hasOwnProperty(Q)||j===F||j===void 0&&F===void 0||tm(n,i,Q,j,u,F);return}}for(var M in o)j=o[M],o.hasOwnProperty(M)&&j!=null&&!u.hasOwnProperty(M)&&Jt(n,i,M,null,u,j);for($ in u)j=u[$],F=o[$],!u.hasOwnProperty($)||j===F||j==null&&F==null||Jt(n,i,$,j,u,F)}var em=null,nm=null;function zc(n){return n.nodeType===9?n:n.ownerDocument}function Yy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function im(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var rm=null;function _S(){var n=window.event;return n&&n.type==="popstate"?n===rm?!1:(rm=n,!0):(rm=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,Jy=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof Jy<"u"?function(n){return Jy.resolve(null).then(n).catch(ES)}:$y;function ES(n){setTimeout(function(){throw n})}function br(n){return n==="head"}function Zy(n,i){var o=i,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var v=n.ownerDocument;if(o&1&&Ol(v.documentElement),o&2&&Ol(v.body),o&4)for(o=v.head,Ol(o),v=o.firstChild;v;){var T=v.nextSibling,w=v.nodeName;v[ss]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=T}}if(f===0){n.removeChild(m),zl(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);zl(i)}function sm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sm(o),rr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function TS(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ss])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function AS(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Kn(n.nextSibling),n===null))return null;return n}function am(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function bS(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var om=null;function Wy(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function tv(n,i,o){switch(i=zc(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Ol(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);rr(n)}var kn=new Map,ev=new Set;function jc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ji=at.d;at.d={f:SS,r:IS,D:wS,C:RS,L:CS,m:DS,X:VS,S:xS,M:OS};function SS(){var n=ji.f(),i=Oc();return n||i}function IS(n){var i=$n(n);i!==null&&i.tag===5&&i.type==="form"?T_(i):ji.r(n)}var Ya=typeof document>"u"?null:document;function nv(n,i,o){var u=Ya;if(u&&typeof i=="string"&&i){var f=Te(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ev.has(f)||(ev.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),He(i,"link",n),_e(i),u.head.appendChild(i)))}}function wS(n){ji.D(n),nv("dns-prefetch",n,null)}function RS(n,i){ji.C(n,i),nv("preconnect",n,i)}function CS(n,i,o){ji.L(n,i,o);var u=Ya;if(u&&n&&i){var f='link[rel="preload"][as="'+Te(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Te(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Te(o.imageSizes)+'"]')):f+='[href="'+Te(n)+'"]';var m=f;switch(i){case"style":m=Xa(n);break;case"script":m=$a(n)}kn.has(m)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),kn.set(m,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(Nl(m))||i==="script"&&u.querySelector(Ml(m))||(i=u.createElement("link"),He(i,"link",n),_e(i),u.head.appendChild(i)))}}function DS(n,i){ji.m(n,i);var o=Ya;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=$a(n)}if(!kn.has(m)&&(n=E({rel:"modulepreload",href:n},i),kn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ml(m)))return}u=o.createElement("link"),He(u,"link",n),_e(u),o.head.appendChild(u)}}}function xS(n,i,o){ji.S(n,i,o);var u=Ya;if(u&&n){var f=We(u).hoistableStyles,m=Xa(n);i=i||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Nl(m)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=kn.get(m))&&lm(n,o);var w=v=u.createElement("link");_e(w),He(w,"link",n),w._p=new Promise(function(B,Q){w.onload=B,w.onerror=Q}),w.addEventListener("load",function(){T.loading|=1}),w.addEventListener("error",function(){T.loading|=2}),T.loading|=4,qc(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function VS(n,i){ji.X(n,i);var o=Ya;if(o&&n){var u=We(o).hoistableScripts,f=$a(n),m=u.get(f);m||(m=o.querySelector(Ml(f)),m||(n=E({src:n,async:!0},i),(i=kn.get(f))&&um(n,i),m=o.createElement("script"),_e(m),He(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function OS(n,i){ji.M(n,i);var o=Ya;if(o&&n){var u=We(o).hoistableScripts,f=$a(n),m=u.get(f);m||(m=o.querySelector(Ml(f)),m||(n=E({src:n,async:!0,type:"module"},i),(i=kn.get(f))&&um(n,i),m=o.createElement("script"),_e(m),He(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function iv(n,i,o,u){var f=(f=St.current)?jc(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Xa(o.href),o=We(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Xa(o.href);var m=We(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Nl(n)))&&!m._p&&(v.instance=m,v.state.loading=5),kn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},kn.set(n,o),m||NS(f,n,o,v.state))),i&&u===null)throw Error(r(528,""));return v}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$a(o),o=We(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Xa(n){return'href="'+Te(n)+'"'}function Nl(n){return'link[rel="stylesheet"]['+n+"]"}function rv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function NS(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),He(i,"link",o),_e(i),n.head.appendChild(i))}function $a(n){return'[src="'+Te(n)+'"]'}function Ml(n){return"script[async]"+n}function sv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Te(o.href)+'"]');if(u)return i.instance=u,_e(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_e(u),He(u,"style",f),qc(u,o.precedence,n),i.instance=u;case"stylesheet":f=Xa(o.href);var m=n.querySelector(Nl(f));if(m)return i.state.loading|=4,i.instance=m,_e(m),m;u=rv(o),(f=kn.get(f))&&lm(u,f),m=(n.ownerDocument||n).createElement("link"),_e(m);var v=m;return v._p=new Promise(function(T,w){v.onload=T,v.onerror=w}),He(m,"link",u),i.state.loading|=4,qc(m,o.precedence,n),i.instance=m;case"script":return m=$a(o.src),(f=n.querySelector(Ml(m)))?(i.instance=f,_e(f),f):(u=o,(f=kn.get(m))&&(u=E({},o),um(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),_e(f),He(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,qc(u,o.precedence,n));return i.instance}function qc(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===i)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function lm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function um(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Fc=null;function av(n,i,o){if(Fc===null){var u=new Map,f=Fc=new Map;f.set(o,u)}else f=Fc,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[ss]||m[we]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=n+v;var T=u.get(v);T?T.push(m):u.set(v,[m])}}return u}function ov(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function MS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function lv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Pl=null;function PS(){}function kS(n,i,o){if(Pl===null)throw Error(r(475));var u=Pl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Xa(o.href),m=n.querySelector(Nl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Gc.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=m,_e(m);return}m=n.ownerDocument||n,o=rv(o),(f=kn.get(f))&&lm(o,f),m=m.createElement("link"),_e(m);var v=m;v._p=new Promise(function(T,w){v.onload=T,v.onerror=w}),He(m,"link",o),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Gc.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function US(){if(Pl===null)throw Error(r(475));var n=Pl;return n.stylesheets&&n.count===0&&cm(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&cm(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Gc(){if(this.count--,this.count===0){if(this.stylesheets)cm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Hc=null;function cm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Hc=new Map,i.forEach(LS,n),Hc=null,Gc.call(n))}function LS(n,i){if(!(i.state.loading&4)){var o=Hc.get(n);if(o)var u=o.get(null);else{o=new Map,Hc.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=Gc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var kl={$$typeof:W,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function BS(n,i,o,u,f,m,v,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function uv(n,i,o,u,f,m,v,T,w,B,Q,$){return n=new BS(n,i,o,v,T,w,B,$),i=1,m===!0&&(i|=24),m=gn(3,null,null,i),n.current=m,m.stateNode=n,i=Hf(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Xf(m),n}function cv(n){return n?(n=Ra,n):Ra}function hv(n,i,o,u,f,m){f=cv(f),u.context===null?u.context=f:u.pendingContext=f,u=cr(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=hr(n,u,i),o!==null&&(En(o,n,i),fl(o,n,i))}function fv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function hm(n,i){fv(n,i),(n=n.alternate)&&fv(n,i)}function dv(n){if(n.tag===13){var i=wa(n,67108864);i!==null&&En(i,n,67108864),hm(n,67108864)}}var Kc=!0;function zS(n,i,o,u){var f=K.T;K.T=null;var m=at.p;try{at.p=2,fm(n,i,o,u)}finally{at.p=m,K.T=f}}function jS(n,i,o,u){var f=K.T;K.T=null;var m=at.p;try{at.p=8,fm(n,i,o,u)}finally{at.p=m,K.T=f}}function fm(n,i,o,u){if(Kc){var f=dm(u);if(f===null)Wd(n,i,u,Qc,o),gv(n,u);else if(FS(f,n,i,o,u))u.stopPropagation();else if(gv(n,u),i&4&&-1<qS.indexOf(n)){for(;f!==null;){var m=$n(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=jn(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var w=1<<31-Ye(v);T.entanglements[1]|=w,v&=~w}ci(m),(Kt&6)===0&&(xc=Sn()+500,Dl(0))}}break;case 13:T=wa(m,2),T!==null&&En(T,m,2),Oc(),hm(m,2)}if(m=dm(u),m===null&&Wd(n,i,u,Qc,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Wd(n,i,u,null,o)}}function dm(n){return n=Rn(n),mm(n)}var Qc=null;function mm(n){if(Qc=null,n=vi(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Qc=n,null}function mv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_f()){case Mo:return 2;case sa:return 8;case ts:case yf:return 32;case aa:return 268435456;default:return 32}default:return 32}}var gm=!1,Sr=null,Ir=null,wr=null,Ul=new Map,Ll=new Map,Rr=[],qS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gv(n,i){switch(n){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Ul.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(i.pointerId)}}function Bl(n,i,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=$n(i),i!==null&&dv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function FS(n,i,o,u,f){switch(i){case"focusin":return Sr=Bl(Sr,n,i,o,u,f),!0;case"dragenter":return Ir=Bl(Ir,n,i,o,u,f),!0;case"mouseover":return wr=Bl(wr,n,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Ul.set(m,Bl(Ul.get(m)||null,n,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Ll.set(m,Bl(Ll.get(m)||null,n,i,o,u,f)),!0}return!1}function pv(n){var i=vi(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Ou(n.priority,function(){if(o.tag===13){var u=vn();u=er(u);var f=wa(o,u);f!==null&&En(f,o,u),hm(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=dm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);bi=u,o.target.dispatchEvent(u),bi=null}else return i=$n(o),i!==null&&dv(i),n.blockedOn=o,!1;i.shift()}return!0}function _v(n,i,o){Yc(n)&&o.delete(i)}function GS(){gm=!1,Sr!==null&&Yc(Sr)&&(Sr=null),Ir!==null&&Yc(Ir)&&(Ir=null),wr!==null&&Yc(wr)&&(wr=null),Ul.forEach(_v),Ll.forEach(_v)}function Xc(n,i){n.blockedOn===i&&(n.blockedOn=null,gm||(gm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GS)))}var $c=null;function yv(n){$c!==n&&($c=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$c===n&&($c=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(mm(u||o)===null)continue;break}var m=$n(o);m!==null&&(n.splice(i,3),i-=3,md(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function zl(n){function i(w){return Xc(w,n)}Sr!==null&&Xc(Sr,n),Ir!==null&&Xc(Ir,n),wr!==null&&Xc(wr,n),Ul.forEach(i),Ll.forEach(i);for(var o=0;o<Rr.length;o++){var u=Rr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Rr.length&&(o=Rr[0],o.blockedOn===null);)pv(o),o.blockedOn===null&&Rr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Ee]||null;if(typeof m=="function")v||yv(o);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Ee]||null)T=v.formAction;else if(mm(f)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),yv(o)}}}function pm(n){this._internalRoot=n}Jc.prototype.render=pm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=vn();hv(o,u,n,i,null,null)},Jc.prototype.unmount=pm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hv(n.current,2,null,n,null,null),Oc(),i[In]=null}};function Jc(n){this._internalRoot=n}Jc.prototype.unstable_scheduleHydration=function(n){if(n){var i=nr();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Rr.length&&i!==0&&i<Rr[o].priority;o++);Rr.splice(o,0,n),o===0&&pv(n)}};var vv=t.version;if(vv!=="19.1.0")throw Error(r(527,vv,"19.1.0"));at.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var HS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{de=Zc.inject(HS),Ht=Zc}catch{}}return ql.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=P_,m=k_,v=U_,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=uv(n,1,!1,null,null,o,u,f,m,v,T,null),n[In]=i.current,Zd(n),new pm(i)},ql.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",m=P_,v=k_,T=U_,w=null,B=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks),o.formState!==void 0&&(B=o.formState)),i=uv(n,1,!0,i,o??null,u,f,m,v,T,w,B),i.context=cv(null),o=i.current,u=vn(),u=er(u),f=cr(u),f.callback=null,hr(o,f,u),o=u,i.current.lanes=o,yi(i,o),ci(i),n[In]=i.current,Zd(n),new Jc(i)},ql.version="19.1.0",ql}var Dv;function nI(){if(Dv)return vm.exports;Dv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),vm.exports=eI(),vm.exports}var iI=nI();const rI=yT(iI);ET();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r])}return s},ru.apply(this,arguments)}var kr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(kr||(kr={}));const xv="popstate";function sI(s){s===void 0&&(s={});function t(r,a){let{pathname:l,search:c,hash:d}=r.location;return Pm("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(r,a){return typeof a=="string"?a:Th(a)}return oI(t,e,null,s)}function ce(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function TT(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aI(){return Math.random().toString(36).substr(2,8)}function Vv(s,t){return{usr:s.state,key:s.key,idx:t}}function Pm(s,t,e,r){return e===void 0&&(e=null),ru({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?wo(t):t,{state:e,key:t&&t.key||r||aI()})}function Th(s){let{pathname:t="/",search:e="",hash:r=""}=s;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wo(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substr(e),s=s.substr(0,e));let r=s.indexOf("?");r>=0&&(t.search=s.substr(r),s=s.substr(0,r)),s&&(t.pathname=s)}return t}function oI(s,t,e,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d=kr.Pop,g=null,p=E();p==null&&(p=0,c.replaceState(ru({},c.state,{idx:p}),""));function E(){return(c.state||{idx:null}).idx}function A(){d=kr.Pop;let q=E(),st=q==null?null:q-p;p=q,g&&g({action:d,location:Y.location,delta:st})}function I(q,st){d=kr.Push;let it=Pm(Y.location,q,st);p=E()+1;let W=Vv(it,p),ct=Y.createHref(it);try{c.pushState(W,"",ct)}catch(ut){if(ut instanceof DOMException&&ut.name==="DataCloneError")throw ut;a.location.assign(ct)}l&&g&&g({action:d,location:Y.location,delta:1})}function k(q,st){d=kr.Replace;let it=Pm(Y.location,q,st);p=E();let W=Vv(it,p),ct=Y.createHref(it);c.replaceState(W,"",ct),l&&g&&g({action:d,location:Y.location,delta:0})}function H(q){let st=a.location.origin!=="null"?a.location.origin:a.location.href,it=typeof q=="string"?q:Th(q);return it=it.replace(/ $/,"%20"),ce(st,"No window.location.(origin|href) available to create URL for href: "+it),new URL(it,st)}let Y={get action(){return d},get location(){return s(a,c)},listen(q){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(xv,A),g=q,()=>{a.removeEventListener(xv,A),g=null}},createHref(q){return t(a,q)},createURL:H,encodeLocation(q){let st=H(q);return{pathname:st.pathname,search:st.search,hash:st.hash}},push:I,replace:k,go(q){return c.go(q)}};return Y}var Ov;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Ov||(Ov={}));function lI(s,t,e){return e===void 0&&(e="/"),uI(s,t,e)}function uI(s,t,e,r){let a=typeof t=="string"?wo(t):t,l=fo(a.pathname||"/",e);if(l==null)return null;let c=AT(s);cI(c);let d=null;for(let g=0;d==null&&g<c.length;++g){let p=TI(l);d=vI(c[g],p)}return d}function AT(s,t,e,r){t===void 0&&(t=[]),e===void 0&&(e=[]),r===void 0&&(r="");let a=(l,c,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};g.relativePath.startsWith("/")&&(ce(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let p=Lr([r,g.relativePath]),E=e.concat(g);l.children&&l.children.length>0&&(ce(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),AT(l.children,t,E,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:_I(p,l.index),routesMeta:E})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let g of bT(l.path))a(l,c,g)}),t}function bT(s){let t=s.split("/");if(t.length===0)return[];let[e,...r]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=bT(r.join("/")),d=[];return d.push(...c.map(g=>g===""?l:[l,g].join("/"))),a&&d.push(...c),d.map(g=>s.startsWith("/")&&g===""?"/":g)}function cI(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:yI(t.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}const hI=/^:[\w-]+$/,fI=3,dI=2,mI=1,gI=10,pI=-2,Nv=s=>s==="*";function _I(s,t){let e=s.split("/"),r=e.length;return e.some(Nv)&&(r+=pI),t&&(r+=dI),e.filter(a=>!Nv(a)).reduce((a,l)=>a+(hI.test(l)?fI:l===""?mI:gI),r)}function yI(s,t){return s.length===t.length&&s.slice(0,-1).every((r,a)=>r===t[a])?s[s.length-1]-t[t.length-1]:0}function vI(s,t,e){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let g=r[d],p=d===r.length-1,E=l==="/"?t:t.slice(l.length)||"/",A=km({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},E),I=g.route;if(!A)return null;Object.assign(a,A.params),c.push({params:a,pathname:Lr([l,A.pathname]),pathnameBase:II(Lr([l,A.pathnameBase])),route:I}),A.pathnameBase!=="/"&&(l=Lr([l,A.pathnameBase]))}return c}function km(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,r]=EI(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,E,A)=>{let{paramName:I,isOptional:k}=E;if(I==="*"){let Y=d[A]||"";c=l.slice(0,l.length-Y.length).replace(/(.)\/+$/,"$1")}const H=d[A];return k&&!H?p[I]=void 0:p[I]=(H||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function EI(s,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),TT(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,g)=>(r.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function TI(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return TT(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function fo(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,r=s.charAt(e);return r&&r!=="/"?null:s.slice(e)||"/"}function AI(s,t){t===void 0&&(t="/");let{pathname:e,search:r="",hash:a=""}=typeof s=="string"?wo(s):s;return{pathname:e?e.startsWith("/")?e:bI(e,t):t,search:wI(r),hash:RI(a)}}function bI(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function bm(s,t,e,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SI(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function dg(s,t){let e=SI(s);return t?e.map((r,a)=>a===e.length-1?r.pathname:r.pathnameBase):e.map(r=>r.pathnameBase)}function mg(s,t,e,r){r===void 0&&(r=!1);let a;typeof s=="string"?a=wo(s):(a=ru({},s),ce(!a.pathname||!a.pathname.includes("?"),bm("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),bm("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),bm("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=e;else{let A=t.length-1;if(!r&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),A-=1;a.pathname=I.join("/")}d=A>=0?t[A]:"/"}let g=AI(a,d),p=c&&c!=="/"&&c.endsWith("/"),E=(l||c===".")&&e.endsWith("/");return!g.pathname.endsWith("/")&&(p||E)&&(g.pathname+="/"),g}const Lr=s=>s.join("/").replace(/\/\/+/g,"/"),II=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),wI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,RI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function CI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const ST=["post","put","patch","delete"];new Set(ST);const DI=["get",...ST];new Set(DI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r])}return s},su.apply(this,arguments)}const Gh=nt.createContext(null),IT=nt.createContext(null),Zi=nt.createContext(null),Hh=nt.createContext(null),Qr=nt.createContext({outlet:null,matches:[],isDataRoute:!1}),wT=nt.createContext(null);function xI(s,t){let{relative:e}=t===void 0?{}:t;Ro()||ce(!1);let{basename:r,navigator:a}=nt.useContext(Zi),{hash:l,pathname:c,search:d}=Kh(s,{relative:e}),g=c;return r!=="/"&&(g=c==="/"?r:Lr([r,c])),a.createHref({pathname:g,search:d,hash:l})}function Ro(){return nt.useContext(Hh)!=null}function Co(){return Ro()||ce(!1),nt.useContext(Hh).location}function RT(s){nt.useContext(Zi).static||nt.useLayoutEffect(s)}function CT(){let{isDataRoute:s}=nt.useContext(Qr);return s?FI():VI()}function VI(){Ro()||ce(!1);let s=nt.useContext(Gh),{basename:t,future:e,navigator:r}=nt.useContext(Zi),{matches:a}=nt.useContext(Qr),{pathname:l}=Co(),c=JSON.stringify(dg(a,e.v7_relativeSplatPath)),d=nt.useRef(!1);return RT(()=>{d.current=!0}),nt.useCallback(function(p,E){if(E===void 0&&(E={}),!d.current)return;if(typeof p=="number"){r.go(p);return}let A=mg(p,JSON.parse(c),l,E.relative==="path");s==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Lr([t,A.pathname])),(E.replace?r.replace:r.push)(A,E.state,E)},[t,r,c,l,s])}function Kh(s,t){let{relative:e}=t===void 0?{}:t,{future:r}=nt.useContext(Zi),{matches:a}=nt.useContext(Qr),{pathname:l}=Co(),c=JSON.stringify(dg(a,r.v7_relativeSplatPath));return nt.useMemo(()=>mg(s,JSON.parse(c),l,e==="path"),[s,c,l,e])}function OI(s,t){return NI(s,t)}function NI(s,t,e,r){Ro()||ce(!1);let{navigator:a,static:l}=nt.useContext(Zi),{matches:c}=nt.useContext(Qr),d=c[c.length-1],g=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let E=Co(),A;if(t){var I;let st=typeof t=="string"?wo(t):t;p==="/"||(I=st.pathname)!=null&&I.startsWith(p)||ce(!1),A=st}else A=E;let k=A.pathname||"/",H=k;if(p!=="/"){let st=p.replace(/^\//,"").split("/");H="/"+k.replace(/^\//,"").split("/").slice(st.length).join("/")}let Y=lI(s,{pathname:H}),q=LI(Y&&Y.map(st=>Object.assign({},st,{params:Object.assign({},g,st.params),pathname:Lr([p,a.encodeLocation?a.encodeLocation(st.pathname).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?p:Lr([p,a.encodeLocation?a.encodeLocation(st.pathnameBase).pathname:st.pathnameBase])})),c,e,r);return t&&q?nt.createElement(Hh.Provider,{value:{location:su({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:kr.Pop}},q):q}function MI(){let s=qI(),t=CI(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return nt.createElement(nt.Fragment,null,nt.createElement("h2",null,"Unexpected Application Error!"),nt.createElement("h3",{style:{fontStyle:"italic"}},t),e?nt.createElement("pre",{style:a},e):null,null)}const PI=nt.createElement(MI,null);class kI extends nt.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?nt.createElement(Qr.Provider,{value:this.props.routeContext},nt.createElement(wT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UI(s){let{routeContext:t,match:e,children:r}=s,a=nt.useContext(Gh);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),nt.createElement(Qr.Provider,{value:t},r)}function LI(s,t,e,r){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),r===void 0&&(r=null),s==null){var l;if(!e)return null;if(e.errors)s=e.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let c=s,d=(a=e)==null?void 0:a.errors;if(d!=null){let E=c.findIndex(A=>A.route.id&&(d==null?void 0:d[A.route.id])!==void 0);E>=0||ce(!1),c=c.slice(0,Math.min(c.length,E+1))}let g=!1,p=-1;if(e&&r&&r.v7_partialHydration)for(let E=0;E<c.length;E++){let A=c[E];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(p=E),A.route.id){let{loaderData:I,errors:k}=e,H=A.route.loader&&I[A.route.id]===void 0&&(!k||k[A.route.id]===void 0);if(A.route.lazy||H){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((E,A,I)=>{let k,H=!1,Y=null,q=null;e&&(k=d&&A.route.id?d[A.route.id]:void 0,Y=A.route.errorElement||PI,g&&(p<0&&I===0?(GI("route-fallback"),H=!0,q=null):p===I&&(H=!0,q=A.route.hydrateFallbackElement||null)));let st=t.concat(c.slice(0,I+1)),it=()=>{let W;return k?W=Y:H?W=q:A.route.Component?W=nt.createElement(A.route.Component,null):A.route.element?W=A.route.element:W=E,nt.createElement(UI,{match:A,routeContext:{outlet:E,matches:st,isDataRoute:e!=null},children:W})};return e&&(A.route.ErrorBoundary||A.route.errorElement||I===0)?nt.createElement(kI,{location:e.location,revalidation:e.revalidation,component:Y,error:k,children:it(),routeContext:{outlet:null,matches:st,isDataRoute:!0}}):it()},null)}var DT=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(DT||{}),xT=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(xT||{});function BI(s){let t=nt.useContext(Gh);return t||ce(!1),t}function zI(s){let t=nt.useContext(IT);return t||ce(!1),t}function jI(s){let t=nt.useContext(Qr);return t||ce(!1),t}function VT(s){let t=jI(),e=t.matches[t.matches.length-1];return e.route.id||ce(!1),e.route.id}function qI(){var s;let t=nt.useContext(wT),e=zI(),r=VT();return t!==void 0?t:(s=e.errors)==null?void 0:s[r]}function FI(){let{router:s}=BI(DT.UseNavigateStable),t=VT(xT.UseNavigateStable),e=nt.useRef(!1);return RT(()=>{e.current=!0}),nt.useCallback(function(a,l){l===void 0&&(l={}),e.current&&(typeof a=="number"?s.navigate(a):s.navigate(a,su({fromRouteId:t},l)))},[s,t])}const Mv={};function GI(s,t,e){Mv[s]||(Mv[s]=!0)}function HI(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function KI(s){let{to:t,replace:e,state:r,relative:a}=s;Ro()||ce(!1);let{future:l,static:c}=nt.useContext(Zi),{matches:d}=nt.useContext(Qr),{pathname:g}=Co(),p=CT(),E=mg(t,dg(d,l.v7_relativeSplatPath),g,a==="path"),A=JSON.stringify(E);return nt.useEffect(()=>p(JSON.parse(A),{replace:e,state:r,relative:a}),[p,A,a,e,r]),null}function eo(s){ce(!1)}function QI(s){let{basename:t="/",children:e=null,location:r,navigationType:a=kr.Pop,navigator:l,static:c=!1,future:d}=s;Ro()&&ce(!1);let g=t.replace(/^\/*/,"/"),p=nt.useMemo(()=>({basename:g,navigator:l,static:c,future:su({v7_relativeSplatPath:!1},d)}),[g,d,l,c]);typeof r=="string"&&(r=wo(r));let{pathname:E="/",search:A="",hash:I="",state:k=null,key:H="default"}=r,Y=nt.useMemo(()=>{let q=fo(E,g);return q==null?null:{location:{pathname:q,search:A,hash:I,state:k,key:H},navigationType:a}},[g,E,A,I,k,H,a]);return Y==null?null:nt.createElement(Zi.Provider,{value:p},nt.createElement(Hh.Provider,{children:e,value:Y}))}function YI(s){let{children:t,location:e}=s;return OI(Um(t),e)}new Promise(()=>{});function Um(s,t){t===void 0&&(t=[]);let e=[];return nt.Children.forEach(s,(r,a)=>{if(!nt.isValidElement(r))return;let l=[...t,a];if(r.type===nt.Fragment){e.push.apply(e,Um(r.props.children,l));return}r.type!==eo&&ce(!1),!r.props.index||!r.props.children||ce(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Um(r.props.children,l)),e.push(c)}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ah(){return Ah=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r])}return s},Ah.apply(this,arguments)}function OT(s,t){if(s==null)return{};var e={},r=Object.keys(s),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(e[a]=s[a]);return e}function XI(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $I(s,t){return s.button===0&&(!t||t==="_self")&&!XI(s)}const JI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],WI="6";try{window.__reactRouterVersion=WI}catch{}const tw=nt.createContext({isTransitioning:!1}),ew="startTransition",Pv=JS[ew];function nw(s){let{basename:t,children:e,future:r,window:a}=s,l=nt.useRef();l.current==null&&(l.current=sI({window:a,v5Compat:!0}));let c=l.current,[d,g]=nt.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},E=nt.useCallback(A=>{p&&Pv?Pv(()=>g(A)):g(A)},[g,p]);return nt.useLayoutEffect(()=>c.listen(E),[c,E]),nt.useEffect(()=>HI(r),[r]),nt.createElement(QI,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,future:r})}const iw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NT=nt.forwardRef(function(t,e){let{onClick:r,relative:a,reloadDocument:l,replace:c,state:d,target:g,to:p,preventScrollReset:E,viewTransition:A}=t,I=OT(t,JI),{basename:k}=nt.useContext(Zi),H,Y=!1;if(typeof p=="string"&&rw.test(p)&&(H=p,iw))try{let W=new URL(window.location.href),ct=p.startsWith("//")?new URL(W.protocol+p):new URL(p),ut=fo(ct.pathname,k);ct.origin===W.origin&&ut!=null?p=ut+ct.search+ct.hash:Y=!0}catch{}let q=xI(p,{relative:a}),st=aw(p,{replace:c,state:d,target:g,preventScrollReset:E,relative:a,viewTransition:A});function it(W){r&&r(W),W.defaultPrevented||st(W)}return nt.createElement("a",Ah({},I,{href:H||q,onClick:Y||l?r:it,ref:e,target:g}))}),Wc=nt.forwardRef(function(t,e){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:c=!1,style:d,to:g,viewTransition:p,children:E}=t,A=OT(t,ZI),I=Kh(g,{relative:A.relative}),k=Co(),H=nt.useContext(IT),{navigator:Y,basename:q}=nt.useContext(Zi),st=H!=null&&ow(I)&&p===!0,it=Y.encodeLocation?Y.encodeLocation(I).pathname:I.pathname,W=k.pathname,ct=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;a||(W=W.toLowerCase(),ct=ct?ct.toLowerCase():null,it=it.toLowerCase()),ct&&q&&(ct=fo(ct,q)||ct);const ut=it!=="/"&&it.endsWith("/")?it.length-1:it.length;let _t=W===it||!c&&W.startsWith(it)&&W.charAt(ut)==="/",x=ct!=null&&(ct===it||!c&&ct.startsWith(it)&&ct.charAt(it.length)==="/"),S={isActive:_t,isPending:x,isTransitioning:st},R=_t?r:void 0,O;typeof l=="function"?O=l(S):O=[l,_t?"active":null,x?"pending":null,st?"transitioning":null].filter(Boolean).join(" ");let N=typeof d=="function"?d(S):d;return nt.createElement(NT,Ah({},A,{"aria-current":R,className:O,ref:e,style:N,to:g,viewTransition:p}),typeof E=="function"?E(S):E)});var Lm;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Lm||(Lm={}));var kv;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(kv||(kv={}));function sw(s){let t=nt.useContext(Gh);return t||ce(!1),t}function aw(s,t){let{target:e,replace:r,state:a,preventScrollReset:l,relative:c,viewTransition:d}=t===void 0?{}:t,g=CT(),p=Co(),E=Kh(s,{relative:c});return nt.useCallback(A=>{if($I(A,e)){A.preventDefault();let I=r!==void 0?r:Th(p)===Th(E);g(s,{replace:I,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[p,g,E,r,a,e,s,l,c,d])}function ow(s,t){t===void 0&&(t={});let e=nt.useContext(tw);e==null&&ce(!1);let{basename:r}=sw(Lm.useViewTransitionState),a=Kh(s,{relative:t.relative});if(!e.isTransitioning)return!1;let l=fo(e.currentLocation.pathname,r)||e.currentLocation.pathname,c=fo(e.nextLocation.pathname,r)||e.nextLocation.pathname;return km(a.pathname,c)!=null||km(a.pathname,l)!=null}var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},lw=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const a=s[e++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[e++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[e++],c=s[e++],d=s[e++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[e++],c=s[e++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},PT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,E=l>>2,A=(l&3)<<4|d>>4;let I=(d&15)<<2|p>>6,k=p&63;g||(k=64,c||(I=64)),r.push(e[E],e[A],e[I],e[k])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(MT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):lw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const p=a<s.length?e[s.charAt(a)]:64;++a;const A=a<s.length?e[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||A==null)throw new uw;const I=l<<2|d>>4;if(r.push(I),p!==64){const k=d<<4&240|p>>2;if(r.push(k),A!==64){const H=p<<6&192|A;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class uw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cw=function(s){const t=MT(s);return PT.encodeByteArray(t,!0)},bh=function(s){return cw(s).replace(/\./g,"")},kT=function(s){try{return PT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=()=>hw().__FIREBASE_DEFAULTS__,dw=()=>{if(typeof process>"u"||typeof Uv>"u")return;const s=Uv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},mw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&kT(s[1]);return t&&JSON.parse(t)},Qh=()=>{try{return fw()||dw()||mw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},UT=s=>{var t,e;return(e=(t=Qh())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},gw=s=>{const t=UT(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},LT=()=>{var s;return(s=Qh())===null||s===void 0?void 0:s.config},BT=s=>{var t;return(t=Qh())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[bh(JSON.stringify(e)),bh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function vw(){var s;const t=(s=Qh())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ew(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Aw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bw(){const s=Ve();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function zT(){return!vw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="FirebaseError";class Wi extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=Iw,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?ww(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Wi(a,d,r)}}function ww(s,t){return s.replace(Rw,(e,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const Rw=/\{\$([^}]+)}/g;function Cw(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Sh(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const a of e){if(!r.includes(a))return!1;const l=s[a],c=t[a];if(Lv(l)&&Lv(c)){if(!Sh(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!e.includes(a))return!1;return!0}function Lv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Dw(s,t){const e=new xw(s,t);return e.subscribe.bind(e)}class xw{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let a;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");Vw(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:r},a.next===void 0&&(a.next=Sm),a.error===void 0&&(a.error=Sm),a.complete===void 0&&(a.complete=Sm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vw(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(s){return s&&s._delegate?s._delegate:s}class Hs{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new pw;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Mw(t))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ps){return this.instances.has(t)}getOptions(t=Ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,e){var r;const a=this.normalizeInstanceIdentifier(e),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const a of r)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nw(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ps){return this.component?this.component.multipleInstances?t:Ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nw(s){return s===Ps?void 0:s}function Mw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Ow(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const kw={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Uw=Pt.INFO,Lw={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Bw=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),a=Lw[t];if(a)console[a](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gg{constructor(t){this.name=t,this._logLevel=Uw,this._logHandler=Bw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?kw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const zw=(s,t)=>t.some(e=>s instanceof e);let Bv,zv;function jw(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qw(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qT=new WeakMap,Bm=new WeakMap,FT=new WeakMap,Im=new WeakMap,pg=new WeakMap;function Fw(s){const t=new Promise((e,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{e(Br(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&qT.set(e,s)}).catch(()=>{}),pg.set(t,s),t}function Gw(s){if(Bm.has(s))return;const t=new Promise((e,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Bm.set(s,t)}let zm={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Bm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||FT.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Br(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Hw(s){zm=s(zm)}function Kw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(wm(this),t,...e);return FT.set(r,t.sort?t.sort():[t]),Br(r)}:qw().includes(s)?function(...t){return s.apply(wm(this),t),Br(qT.get(this))}:function(...t){return Br(s.apply(wm(this),t))}}function Qw(s){return typeof s=="function"?Kw(s):(s instanceof IDBTransaction&&Gw(s),zw(s,jw())?new Proxy(s,zm):s)}function Br(s){if(s instanceof IDBRequest)return Fw(s);if(Im.has(s))return Im.get(s);const t=Qw(s);return t!==s&&(Im.set(s,t),pg.set(t,s)),t}const wm=s=>pg.get(s);function Yw(s,t,{blocked:e,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,t),d=Br(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Br(c.result),g.oldVersion,g.newVersion,Br(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Xw=["get","getKey","getAll","getAllKeys","count"],$w=["put","add","delete","clear"],Rm=new Map;function jv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Rm.get(t))return Rm.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,a=$w.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Xw.includes(e)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),a&&g.done]))[0]};return Rm.set(t,l),l}Hw(s=>({...s,get:(t,e,r)=>jv(t,e)||s.get(t,e,r),has:(t,e)=>!!jv(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Zw(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function Zw(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const jm="@firebase/app",qv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new gg("@firebase/app"),Ww="@firebase/app-compat",tR="@firebase/analytics-compat",eR="@firebase/analytics",nR="@firebase/app-check-compat",iR="@firebase/app-check",rR="@firebase/auth",sR="@firebase/auth-compat",aR="@firebase/database",oR="@firebase/data-connect",lR="@firebase/database-compat",uR="@firebase/functions",cR="@firebase/functions-compat",hR="@firebase/installations",fR="@firebase/installations-compat",dR="@firebase/messaging",mR="@firebase/messaging-compat",gR="@firebase/performance",pR="@firebase/performance-compat",_R="@firebase/remote-config",yR="@firebase/remote-config-compat",vR="@firebase/storage",ER="@firebase/storage-compat",TR="@firebase/firestore",AR="@firebase/vertexai-preview",bR="@firebase/firestore-compat",SR="firebase",IR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",wR={[jm]:"fire-core",[Ww]:"fire-core-compat",[eR]:"fire-analytics",[tR]:"fire-analytics-compat",[iR]:"fire-app-check",[nR]:"fire-app-check-compat",[rR]:"fire-auth",[sR]:"fire-auth-compat",[aR]:"fire-rtdb",[oR]:"fire-data-connect",[lR]:"fire-rtdb-compat",[uR]:"fire-fn",[cR]:"fire-fn-compat",[hR]:"fire-iid",[fR]:"fire-iid-compat",[dR]:"fire-fcm",[mR]:"fire-fcm-compat",[gR]:"fire-perf",[pR]:"fire-perf-compat",[_R]:"fire-rc",[yR]:"fire-rc-compat",[vR]:"fire-gcs",[ER]:"fire-gcs-compat",[TR]:"fire-fst",[bR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[SR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,RR=new Map,Fm=new Map;function Fv(s,t){try{s.container.addComponent(t)}catch(e){Xi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function mo(s){const t=s.name;if(Fm.has(t))return Xi.debug(`There were multiple attempts to register component ${t}.`),!1;Fm.set(t,s);for(const e of Ih.values())Fv(e,s);for(const e of RR.values())Fv(e,s);return!0}function _g(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Fi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new _u("app","Firebase",CR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=IR;function GT(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:qm,automaticDataCollectionEnabled:!1},t),a=r.name;if(typeof a!="string"||!a)throw zr.create("bad-app-name",{appName:String(a)});if(e||(e=LT()),!e)throw zr.create("no-options");const l=Ih.get(a);if(l){if(Sh(e,l.options)&&Sh(r,l.config))return l;throw zr.create("duplicate-app",{appName:a})}const c=new Pw(a);for(const g of Fm.values())c.addComponent(g);const d=new DR(e,r,c);return Ih.set(a,d),d}function HT(s=qm){const t=Ih.get(s);if(!t&&s===qm&&LT())return GT();if(!t)throw zr.create("no-app",{appName:s});return t}function jr(s,t,e){var r;let a=(r=wR[s])!==null&&r!==void 0?r:s;e&&(a+=`-${e}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xi.warn(d.join(" "));return}mo(new Hs(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="firebase-heartbeat-database",VR=1,au="firebase-heartbeat-store";let Cm=null;function KT(){return Cm||(Cm=Yw(xR,VR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(au)}catch(e){console.warn(e)}}}}).catch(s=>{throw zr.create("idb-open",{originalErrorMessage:s.message})})),Cm}async function OR(s){try{const e=(await KT()).transaction(au),r=await e.objectStore(au).get(QT(s));return await e.done,r}catch(t){if(t instanceof Wi)Xi.warn(t.message);else{const e=zr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xi.warn(e.message)}}}async function Gv(s,t){try{const r=(await KT()).transaction(au,"readwrite");await r.objectStore(au).put(t,QT(s)),await r.done}catch(e){if(e instanceof Wi)Xi.warn(e.message);else{const r=zr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(r.message)}}}function QT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=1024,MR=30*24*60*60*1e3;class PR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new UR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Hv();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=MR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hv(),{heartbeatsToSend:r,unsentEntries:a}=kR(this._heartbeatsCache.heartbeats),l=bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Xi.warn(e),""}}}function Hv(){return new Date().toISOString().substring(0,10)}function kR(s,t=NR){const e=[];let r=s.slice();for(const a of s){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Kv(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Kv(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class UR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await OR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function Kv(s){return bh(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(s){mo(new Hs("platform-logger",t=>new Jw(t),"PRIVATE")),mo(new Hs("heartbeat",t=>new PR(t),"PRIVATE")),jr(jm,qv,s),jr(jm,qv,"esm2017"),jr("fire-js","")}LR("");function yg(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(e[r[a]]=s[r[a]]);return e}function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BR=YT,XT=new _u("auth","Firebase",YT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new gg("@firebase/auth");function zR(s,...t){wh.logLevel<=Pt.WARN&&wh.warn(`Auth (${Do}): ${s}`,...t)}function lh(s,...t){wh.logLevel<=Pt.ERROR&&wh.error(`Auth (${Do}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(s,...t){throw Eg(s,...t)}function Qn(s,...t){return Eg(s,...t)}function vg(s,t,e){const r=Object.assign(Object.assign({},BR()),{[t]:e});return new _u("auth","Firebase",r).create(t,{appName:s.name})}function qs(s){return vg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jR(s,t,e){const r=e;if(!(t instanceof r))throw r.name!==t.constructor.name&&mi(s,"argument-error"),vg(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Eg(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return XT.create(s,...t)}function It(s,t,...e){if(!s)throw Eg(t,...e)}function Gi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw lh(t),new Error(t)}function $i(s,t){s||Gi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function qR(){return Qv()==="http:"||Qv()==="https:"}function Qv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qR()||Tw()||"connection"in navigator)?navigator.onLine:!0}function GR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,e){this.shortDelay=t,this.longDelay=e,$i(e>t,"Short delay should be less than long delay!"),this.isMobile=yw()||Aw()}get(){return FR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(s,t){$i(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new vu(3e4,6e4);function Ag(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function xo(s,t,e,r,a={}){return JT(s,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=yu(Object.assign({key:s.config.apiKey},c)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p=Object.assign({method:t,headers:g},l);return Ew()||(p.referrerPolicy="no-referrer"),$T.fetch()(ZT(s,s.config.apiHost,e,d),p)})}async function JT(s,t,e){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},HR),t);try{const a=new YR(s),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw th(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw th(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw th(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw vg(s,E,p);mi(s,E)}}catch(a){if(a instanceof Wi)throw a;mi(s,"network-request-failed",{message:String(a)})}}async function QR(s,t,e,r,a={}){const l=await xo(s,t,e,r,a);return"mfaPendingCredential"in l&&mi(s,"multi-factor-auth-required",{_serverResponse:l}),l}function ZT(s,t,e,r){const a=`${t}${e}?${r}`;return s.config.emulator?Tg(s.config,a):`${s.config.apiScheme}://${a}`}class YR{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),KR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function th(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const a=Qn(s,t,r);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(s,t){return xo(s,"POST","/v1/accounts:delete",t)}async function WT(s,t){return xo(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $R(s,t=!1){const e=Ze(s),r=await e.getIdToken(t),a=bg(r);It(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:Zl(Dm(a.auth_time)),issuedAtTime:Zl(Dm(a.iat)),expirationTime:Zl(Dm(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Dm(s){return Number(s)*1e3}function bg(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const a=kT(e);return a?JSON.parse(a):(lh("Failed to decode base64 JWT payload"),null)}catch(a){return lh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Yv(s){const t=bg(s);return It(t,"internal-error"),It(typeof t.exp<"u","internal-error"),It(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof Wi&&JR(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function JR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(s){var t;const e=s.auth,r=await s.getIdToken(),a=await ou(s,WT(e,{idToken:r}));It(a==null?void 0:a.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?t0(l.providerUserInfo):[],d=t1(s.providerData,c),g=s.isAnonymous,p=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),E=g?p:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Hm(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,A)}async function WR(s){const t=Ze(s);await Rh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function t1(s,t){return[...s.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function t0(s){return s.map(t=>{var{providerId:e}=t,r=yg(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(s,t){const e=await JT(s,{},async()=>{const r=yu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=ZT(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",$T.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function n1(s,t){return xo(s,"POST","/v2/accounts:revokeToken",Ag(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(typeof t.idToken<"u","internal-error"),It(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Yv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){It(t.length!==0,"internal-error");const e=Yv(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:a,expiresIn:l}=await e1(t,e);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:a,expirationTime:l}=e,c=new lo;return r&&(It(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(It(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(It(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(s,t){It(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Hi{constructor(t){var{uid:e,auth:r,stsTokenManager:a}=t,l=yg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Hm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await ou(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return $R(this,t)}reload(){return WR(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Hi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fi(this.auth.app))return Promise.reject(qs(this.auth));const t=await this.getIdToken();return await ou(this,XR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,a,l,c,d,g,p,E;const A=(r=e.displayName)!==null&&r!==void 0?r:void 0,I=(a=e.email)!==null&&a!==void 0?a:void 0,k=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,H=(c=e.photoURL)!==null&&c!==void 0?c:void 0,Y=(d=e.tenantId)!==null&&d!==void 0?d:void 0,q=(g=e._redirectEventId)!==null&&g!==void 0?g:void 0,st=(p=e.createdAt)!==null&&p!==void 0?p:void 0,it=(E=e.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:W,emailVerified:ct,isAnonymous:ut,providerData:_t,stsTokenManager:x}=e;It(W&&x,t,"internal-error");const S=lo.fromJSON(this.name,x);It(typeof W=="string",t,"internal-error"),Dr(A,t.name),Dr(I,t.name),It(typeof ct=="boolean",t,"internal-error"),It(typeof ut=="boolean",t,"internal-error"),Dr(k,t.name),Dr(H,t.name),Dr(Y,t.name),Dr(q,t.name),Dr(st,t.name),Dr(it,t.name);const R=new Hi({uid:W,auth:t,email:I,emailVerified:ct,displayName:A,isAnonymous:ut,photoURL:H,phoneNumber:k,tenantId:Y,stsTokenManager:S,createdAt:st,lastLoginAt:it});return _t&&Array.isArray(_t)&&(R.providerData=_t.map(O=>Object.assign({},O))),q&&(R._redirectEventId=q),R}static async _fromIdTokenResponse(t,e,r=!1){const a=new lo;a.updateFromServerResponse(e);const l=new Hi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Rh(l),l}static async _fromGetAccountInfoResponse(t,e,r){const a=e.users[0];It(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?t0(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new lo;d.updateFromIdToken(r);const g=new Hi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Hm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;function Ki(s){$i(s instanceof Function,"Expected a class definition");let t=Xv.get(s);return t?($i(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Xv.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}e0.type="NONE";const $v=e0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(s,t,e){return`firebase:${s}:${t}:${e}`}class uo{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=uh(this.userKey,a.apiKey,l),this.fullPersistenceKey=uh("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Hi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new uo(Ki($v),t,r);const a=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ki($v);const c=uh(r,t.config.apiKey,t.name);let d=null;for(const p of e)try{const E=await p._get(c);if(E){const A=Hi._fromJSON(t,E);p!==l&&(d=A),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new uo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new uo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(s0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(n0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(o0(t))return"Blackberry";if(l0(t))return"Webos";if(i0(t))return"Safari";if((t.includes("chrome/")||r0(t))&&!t.includes("edge/"))return"Chrome";if(a0(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function n0(s=Ve()){return/firefox\//i.test(s)}function i0(s=Ve()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function r0(s=Ve()){return/crios\//i.test(s)}function s0(s=Ve()){return/iemobile/i.test(s)}function a0(s=Ve()){return/android/i.test(s)}function o0(s=Ve()){return/blackberry/i.test(s)}function l0(s=Ve()){return/webos/i.test(s)}function Sg(s=Ve()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function i1(s=Ve()){var t;return Sg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function r1(){return bw()&&document.documentMode===10}function u0(s=Ve()){return Sg(s)||a0(s)||l0(s)||o0(s)||/windows phone/i.test(s)||s0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(s,t=[]){let e;switch(s){case"Browser":e=Jv(Ve());break;case"Worker":e=`${Jv(Ve())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Do}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=e,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(s,t={}){return xo(s,"GET","/v2/passwordPolicy",Ag(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=6;class l1{constructor(t){var e,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:o1,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(e=g.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(t,e,r,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new s1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ki(e)),this._initializationPromise=this.queue(async()=>{var r,a;if(!this._deleted&&(this.persistenceManager=await uo.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await WT(this,{idToken:t}),r=await Hi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Fi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,d=a==null?void 0:a._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&(g!=null&&g.user)&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Rh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=GR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fi(this.app))return Promise.reject(qs(this));const e=t?Ze(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fi(this.app)?Promise.reject(qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fi(this.app)?Promise.reject(qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await a1(this),e=new l1(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new _u("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await n1(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ki(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[Ki(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=c0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&zR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yh(s){return Ze(s)}class Zv{constructor(t){this.auth=t,this.observer=null,this.addObserver=Dw(e=>this.observer=e)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c1(s){Ig=s}function h1(s){return Ig.loadJS(s)}function f1(){return Ig.gapiScript}function d1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(s,t){const e=_g(s,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(Sh(l,t??{}))return a;mi(a,"already-initialized")}return e.initialize({options:t})}function g1(s,t){const e=(t==null?void 0:t.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Ki);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function p1(s,t,e){const r=Yh(s);It(r._canInitEmulator,r,"emulator-config-failed"),It(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=h0(t),{host:c,port:d}=_1(t),g=d===null?"":`:${d}`;r.config.emulator={url:`${l}//${c}${g}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})}),y1()}function h0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function _1(s){const t=h0(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Wv(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Wv(c)}}}function Wv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function y1(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Gi("not implemented")}_getIdTokenResponse(t){return Gi("not implemented")}_linkToIdToken(t,e){return Gi("not implemented")}_getReauthenticationResolver(t){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s,t){return QR(s,"POST","/v1/accounts:signInWithIdp",Ag(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="http://localhost";class Ks extends f0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):mi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=e,l=yg(e,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ks(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return co(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,co(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,co(t,e)}buildRequest(){const t={requestUri:v1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=yu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends wg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Eu{constructor(){super("facebook.com")}static credential(t){return Ks._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Or.credentialFromTaggedObject(t)}static credentialFromError(t){return Or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Or.credential(t.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ks._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return qi.credential(e,r)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Eu{constructor(){super("github.com")}static credential(t){return Ks._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nr.credential(t.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Eu{constructor(){super("twitter.com")}static credential(t,e){return Ks._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Mr.credentialFromTaggedObject(t)}static credentialFromError(t){return Mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Mr.credential(e,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,a=!1){const l=await Hi._fromIdTokenResponse(t,r,a),c=tE(r);return new go({user:l,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const a=tE(r);return new go({user:t,providerId:a,_tokenResponse:r,operationType:e})}}function tE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Wi{constructor(t,e,r,a){var l;super(e.code,e.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,a){return new Ch(t,e,r,a)}}function d0(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(s,l,t,r):l})}async function E1(s,t,e=!1){const r=await ou(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return go._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(s,t,e=!1){const{auth:r}=s;if(Fi(r.app))return Promise.reject(qs(r));const a="reauthenticate";try{const l=await ou(s,d0(r,a,t,s),e);It(l.idToken,r,"internal-error");const c=bg(l.idToken);It(c,r,"internal-error");const{sub:d}=c;return It(s.uid===d,r,"user-mismatch"),go._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(s,t,e=!1){if(Fi(s.app))return Promise.reject(qs(s));const r="signIn",a=await d0(s,r,t),l=await go._fromIdTokenResponse(s,r,a);return e||await s._updateCurrentUser(l.user),l}function b1(s,t,e,r){return Ze(s).onIdTokenChanged(t,e,r)}function S1(s,t,e){return Ze(s).beforeAuthStateChanged(t,e)}function I1(s,t,e,r){return Ze(s).onAuthStateChanged(t,e,r)}function m0(s){return Ze(s).signOut()}const Dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1e3,R1=10;class p0 extends g0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),a=this.localCache[e];r!==a&&t(e,a,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);r1()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,R1):a()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},w1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}p0.type="LOCAL";const C1=p0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends g0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}_0.type="SESSION";const y0=_0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const r=new Xh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async p=>p(e.origin,l)),g=await D1(d);e.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const p=Rg("",20);a.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(A){const I=A;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function V1(s){di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function O1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N1(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function M1(){return v0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="firebaseLocalStorageDb",P1=1,xh="firebaseLocalStorage",T0="fbase_key";class Tu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function $h(s,t){return s.transaction([xh],t?"readwrite":"readonly").objectStore(xh)}function k1(){const s=indexedDB.deleteDatabase(E0);return new Tu(s).toPromise()}function Km(){const s=indexedDB.open(E0,P1);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(xh,{keyPath:T0})}catch(a){e(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(xh)?t(r):(r.close(),await k1(),t(await Km()))})})}async function eE(s,t,e){const r=$h(s,!0).put({[T0]:t,value:e});return new Tu(r).toPromise()}async function U1(s,t){const e=$h(s,!1).get(t),r=await new Tu(e).toPromise();return r===void 0?null:r.value}function nE(s,t){const e=$h(s,!0).delete(t);return new Tu(e).toPromise()}const L1=800,B1=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>B1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xh._getInstance(M1()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await O1(),!this.activeServiceWorker)return;this.sender=new x1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||N1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Km();return await eE(t,Dh,"1"),await nE(t,Dh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>eE(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>U1(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>nE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=$h(a,!1).getAll();return new Tu(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const z1=A0;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(s,t){return t?Ki(t):(It(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends f0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return co(t,this._buildIdpRequest())}_linkToIdToken(t,e){return co(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return co(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function j1(s){return A1(s.auth,new Cg(s),s.bypassAuthState)}function q1(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),T1(e,new Cg(s),s.bypassAuthState)}async function F1(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),E1(e,new Cg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,e,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return j1;case"linkViaPopup":case"linkViaRedirect":return F1;case"reauthViaPopup":case"reauthViaRedirect":return q1;default:mi(this.auth,"internal-error")}}resolve(t){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new vu(2e3,1e4);async function H1(s,t,e){if(Fi(s.app))return Promise.reject(Qn(s,"operation-not-supported-in-this-environment"));const r=Yh(s);jR(s,t,wg);const a=b0(r,e);return new js(r,"signInViaPopup",t,a).executeNotNull()}class js extends S0{constructor(t,e,r,a,l){super(t,e,a,l),this.provider=r,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const t=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,G1.get())};t()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="pendingRedirect",ch=new Map;class Q1 extends S0{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=ch.get(this.auth._key());if(!t){try{const r=await Y1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}ch.set(this.auth._key(),t)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y1(s,t){const e=J1(t),r=$1(s);if(!await r._isAvailable())return!1;const a=await r._get(e)==="true";return await r._remove(e),a}function X1(s,t){ch.set(s._key(),t)}function $1(s){return Ki(s._redirectPersistence)}function J1(s){return uh(K1,s.config.apiKey,s.name)}async function Z1(s,t,e=!1){if(Fi(s.app))return Promise.reject(qs(s));const r=Yh(s),a=b0(r,t),c=await new Q1(r,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=10*60*1e3;class tC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!eC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!I0(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(Qn(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=W1&&this.cachedEventUids.clear(),this.cachedEventUids.has(iE(t))}saveEventToCache(t){this.cachedEventUids.add(iE(t)),this.lastProcessedEventTime=Date.now()}}function iE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function I0({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function eC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return I0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(s,t={}){return xo(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rC=/^https?/;async function sC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await nC(s);for(const e of t)try{if(aC(e))return}catch{}mi(s,"unauthorized-domain")}function aC(s){const t=Gm(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!rC.test(e))return!1;if(iC.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new vu(3e4,6e4);function rE(){const s=di().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function lC(s){return new Promise((t,e)=>{var r,a,l;function c(){rE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rE(),e(Qn(s,"network-request-failed"))},timeout:oC.get()})}if(!((a=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=di().gapi)===null||l===void 0)&&l.load)c();else{const d=d1("iframefcb");return di()[d]=()=>{gapi.load?c():e(Qn(s,"network-request-failed"))},h1(`${f1()}?onload=${d}`).catch(g=>e(g))}}).catch(t=>{throw hh=null,t})}let hh=null;function uC(s){return hh=hh||lC(s),hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new vu(5e3,15e3),hC="__/auth/iframe",fC="emulator/auth/iframe",dC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gC(s){const t=s.config;It(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Tg(t,fC):`https://${s.config.authDomain}/${hC}`,r={apiKey:t.apiKey,appName:s.name,v:Do},a=mC.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${e}?${yu(r).slice(1)}`}async function pC(s){const t=await uC(s),e=di().gapi;return It(e,s,"internal-error"),t.open({where:document.body,url:gC(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dC,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Qn(s,"network-request-failed"),d=di().setTimeout(()=>{l(c)},cC.get());function g(){di().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yC=500,vC=600,EC="_blank",TC="http://localhost";class sE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AC(s,t,e,r=yC,a=vC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},_C),{width:r.toString(),height:a.toString(),top:l,left:c}),p=Ve().toLowerCase();e&&(d=r0(p)?EC:e),n0(p)&&(t=t||TC,g.scrollbars="yes");const E=Object.entries(g).reduce((I,[k,H])=>`${I}${k}=${H},`,"");if(i1(p)&&d!=="_self")return bC(t||"",d),new sE(null);const A=window.open(t||"",d,E);It(A,s,"popup-blocked");try{A.focus()}catch{}return new sE(A)}function bC(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="__/auth/handler",IC="emulator/auth/handler",wC=encodeURIComponent("fac");async function aE(s,t,e,r,a,l){It(s.config.authDomain,s,"auth-domain-config-required"),It(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:Do,eventId:a};if(t instanceof wg){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",Cw(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,A]of Object.entries({}))c[E]=A}if(t instanceof Eu){const E=t.getScopes().filter(A=>A!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const g=await s._getAppCheckToken(),p=g?`#${wC}=${encodeURIComponent(g)}`:"";return`${RC(s)}?${yu(d).slice(1)}${p}`}function RC({config:s}){return s.emulator?Tg(s,IC):`https://${s.authDomain}/${SC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class CC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y0,this._completeRedirectFn=Z1,this._overrideRedirectResult=X1}async _openPopup(t,e,r,a){var l;$i((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await aE(t,e,r,Gm(),a);return AC(t,c,Rg())}async _openRedirect(t,e,r,a){await this._originValidation(t);const l=await aE(t,e,r,Gm(),a);return V1(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):($i(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await pC(t),r=new tC(t);return e.register("authEvent",a=>(It(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(xm,{type:xm},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[xm];c!==void 0&&e(!!c),mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=sC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return u0()||i0()||Sg()}}const DC=CC;var oE="@firebase/auth",lE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OC(s){mo(new Hs("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;It(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c0(s)},p=new u1(r,a,l,g);return g1(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),mo(new Hs("auth-internal",t=>{const e=Yh(t.getProvider("auth").getImmediate());return(r=>new xC(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(oE,lE,VC(s)),jr(oE,lE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=5*60,MC=BT("authIdTokenMaxAge")||NC;let uE=null;const PC=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>MC)return;const a=e==null?void 0:e.token;uE!==a&&(uE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function kC(s=HT()){const t=_g(s,"auth");if(t.isInitialized())return t.getImmediate();const e=m1(s,{popupRedirectResolver:DC,persistence:[z1,C1,y0]}),r=BT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=PC(l.toString());S1(e,c,()=>c(e.currentUser)),b1(e,d=>c(d))}}const a=UT("auth");return a&&p1(e,`http://${a}`),e}function UC(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}c1({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=a=>{const l=Qn("internal-error");l.customData=a,e(l)},r.type="text/javascript",r.charset="UTF-8",UC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OC("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function LC(s,t,e,r){function a(l){return l instanceof e?l:new e(function(c){c(l)})}return new(e||(e=Promise))(function(l,c){function d(E){try{p(r.next(E))}catch(A){c(A)}}function g(E){try{p(r.throw(E))}catch(A){c(A)}}function p(E){E.done?l(E.value):a(E.value).then(d,g)}p((r=r.apply(s,[])).next())})}function BC(s,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(E){return g([p,E])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,a=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){e.label=p[1];break}if(p[0]===6&&e.label<l[1]){e.label=l[1],l=p;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(p);break}l[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(s,e)}catch(E){p=[6,E],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oo=function(){return oo=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},oo.apply(this,arguments)},w0=function(s){return{loading:s==null,value:s}},zC=function(){return function(s,t){switch(t.type){case"error":return oo(oo({},s),{error:t.error,loading:!1,value:void 0});case"reset":return w0(t.defaultValue);case"value":return oo(oo({},s),{error:void 0,loading:!1,value:t.value});default:return s}}},jC=function(s){var t=s?s():void 0,e=nt.useReducer(zC(),w0(t)),r=e[0],a=e[1],l=nt.useCallback(function(){var g=s?s():void 0;a({type:"reset",defaultValue:g})},[s]),c=nt.useCallback(function(g){a({type:"error",error:g})},[]),d=nt.useCallback(function(g){a({type:"value",value:g})},[]);return nt.useMemo(function(){return{error:r.error,loading:r.loading,reset:l,setError:c,setValue:d,value:r.value}},[r.error,r.loading,l,c,d,r.value])},qC=function(s,t){var e=jC(function(){return s.currentUser}),r=e.error,a=e.loading,l=e.setError,c=e.setValue,d=e.value;return nt.useEffect(function(){var g=I1(s,function(p){return LC(void 0,void 0,void 0,function(){var E;return BC(this,function(A){switch(A.label){case 0:return[3,4];case 1:return A.trys.push([1,3,,4]),[4,t.onUserChanged(p)];case 2:return A.sent(),[3,4];case 3:return E=A.sent(),l(E),[3,4];case 4:return c(p),[2]}})})},l);return function(){g()}},[s]),[d,a,r]},FC="firebase",GC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(FC,GC,"app");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,R0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,S){function R(){}R.prototype=S.prototype,x.D=S.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(O,N,P){for(var C=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)C[ze-2]=arguments[ze];return S.prototype[N].apply(O,C)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,R){R||(R=0);var O=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)O[N]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(N=0;16>N;++N)O[N]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=x.g[0],R=x.g[1],N=x.g[2];var P=x.g[3],C=S+(P^R&(N^P))+O[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=P+(N^S&(R^N))+O[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=N+(R^P&(S^R))+O[2]+606105819&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(S^N&(P^S))+O[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(P^R&(N^P))+O[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(N^S&(R^N))+O[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=N+(R^P&(S^R))+O[6]+2821735955&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(S^N&(P^S))+O[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(P^R&(N^P))+O[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(N^S&(R^N))+O[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=N+(R^P&(S^R))+O[10]+4294925233&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(S^N&(P^S))+O[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(P^R&(N^P))+O[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=P+(N^S&(R^N))+O[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=N+(R^P&(S^R))+O[14]+2792965006&4294967295,N=P+(C<<17&4294967295|C>>>15),C=R+(S^N&(P^S))+O[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(N^P&(R^N))+O[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(S^R))+O[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(P^S))+O[11]+643717713&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(N^P))+O[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^P&(R^N))+O[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(S^R))+O[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(P^S))+O[15]+3634488961&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(N^P))+O[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^P&(R^N))+O[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(S^R))+O[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(P^S))+O[3]+4107603335&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(N^P))+O[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^P&(R^N))+O[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=P+(R^N&(S^R))+O[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(P^S))+O[7]+1735328473&4294967295,N=P+(C<<14&4294967295|C>>>18),C=R+(P^S&(N^P))+O[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(R^N^P)+O[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^N)+O[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=N+(P^S^R)+O[11]+1839030562&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^S)+O[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^P)+O[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^N)+O[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=N+(P^S^R)+O[7]+4139469664&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^S)+O[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^P)+O[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^N)+O[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=N+(P^S^R)+O[3]+3572445317&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^S)+O[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^P)+O[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=P+(S^R^N)+O[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=N+(P^S^R)+O[15]+530742520&4294967295,N=P+(C<<16&4294967295|C>>>16),C=R+(N^P^S)+O[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(N^(R|~P))+O[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~N))+O[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=N+(S^(P|~R))+O[14]+2878612391&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~S))+O[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~P))+O[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~N))+O[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=N+(S^(P|~R))+O[10]+4293915773&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~S))+O[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~P))+O[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~N))+O[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=N+(S^(P|~R))+O[6]+2734768916&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~S))+O[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~P))+O[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=P+(R^(S|~N))+O[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=N+(S^(P|~R))+O[2]+718787259&4294967295,N=P+(C<<15&4294967295|C>>>17),C=R+(P^(N|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var R=S-this.blockSize,O=this.B,N=this.h,P=0;P<S;){if(N==0)for(;P<=R;)a(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<S;)if(O[N++]=x.charCodeAt(P++),N==this.blockSize){a(this,O),N=0;break}}else for(;P<S;)if(O[N++]=x[P++],N==this.blockSize){a(this,O),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var R=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=R&255,R/=256;for(this.u(x),x=Array(16),S=R=0;4>S;++S)for(var O=0;32>O;O+=8)x[R++]=this.g[S]>>>O&255;return x};function l(x,S){var R=d;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=S(x)}function c(x,S){this.h=S;for(var R=[],O=!0,N=x.length-1;0<=N;N--){var P=x[N]|0;O&&P==S||(R[N]=P,O=!1)}this.g=R}var d={};function g(x){return-128<=x&&128>x?l(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return A;if(0>x)return q(p(-x));for(var S=[],R=1,O=0;x>=R;O++)S[O]=x/R|0,R*=4294967296;return new c(S,0)}function E(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return q(E(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(S,8)),O=A,N=0;N<x.length;N+=8){var P=Math.min(8,x.length-N),C=parseInt(x.substring(N,N+P),S);8>P?(P=p(Math.pow(S,P)),O=O.j(P).add(p(C))):(O=O.j(R),O=O.add(p(C)))}return O}var A=g(0),I=g(1),k=g(16777216);s=c.prototype,s.m=function(){if(Y(this))return-q(this).m();for(var x=0,S=1,R=0;R<this.g.length;R++){var O=this.i(R);x+=(0<=O?O:4294967296+O)*S,S*=4294967296}return x},s.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(H(this))return"0";if(Y(this))return"-"+q(this).toString(x);for(var S=p(Math.pow(x,6)),R=this,O="";;){var N=ct(R,S).g;R=st(R,N.j(S));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=N,H(R))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},s.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function H(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function Y(x){return x.h==-1}s.l=function(x){return x=st(this,x),Y(x)?-1:H(x)?0:1};function q(x){for(var S=x.g.length,R=[],O=0;O<S;O++)R[O]=~x.g[O];return new c(R,~x.h).add(I)}s.abs=function(){return Y(this)?q(this):this},s.add=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],O=0,N=0;N<=S;N++){var P=O+(this.i(N)&65535)+(x.i(N)&65535),C=(P>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);O=C>>>16,P&=65535,C&=65535,R[N]=C<<16|P}return new c(R,R[R.length-1]&-2147483648?-1:0)};function st(x,S){return x.add(q(S))}s.j=function(x){if(H(this)||H(x))return A;if(Y(this))return Y(x)?q(this).j(q(x)):q(q(this).j(x));if(Y(x))return q(this.j(q(x)));if(0>this.l(k)&&0>x.l(k))return p(this.m()*x.m());for(var S=this.g.length+x.g.length,R=[],O=0;O<2*S;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var N=0;N<x.g.length;N++){var P=this.i(O)>>>16,C=this.i(O)&65535,ze=x.i(N)>>>16,fe=x.i(N)&65535;R[2*O+2*N]+=C*fe,it(R,2*O+2*N),R[2*O+2*N+1]+=P*fe,it(R,2*O+2*N+1),R[2*O+2*N+1]+=C*ze,it(R,2*O+2*N+1),R[2*O+2*N+2]+=P*ze,it(R,2*O+2*N+2)}for(O=0;O<S;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=S;O<2*S;O++)R[O]=0;return new c(R,0)};function it(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function W(x,S){this.g=x,this.h=S}function ct(x,S){if(H(S))throw Error("division by zero");if(H(x))return new W(A,A);if(Y(x))return S=ct(q(x),S),new W(q(S.g),q(S.h));if(Y(S))return S=ct(x,q(S)),new W(q(S.g),S.h);if(30<x.g.length){if(Y(x)||Y(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,O=S;0>=O.l(x);)R=ut(R),O=ut(O);var N=_t(R,1),P=_t(O,1);for(O=_t(O,2),R=_t(R,2);!H(O);){var C=P.add(O);0>=C.l(x)&&(N=N.add(R),P=C),O=_t(O,1),R=_t(R,1)}return S=st(x,N.j(S)),new W(N,S)}for(N=A;0<=x.l(S);){for(R=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=p(R),C=P.j(S);Y(C)||0<C.l(x);)R-=O,P=p(R),C=P.j(S);H(P)&&(P=I),N=N.add(P),x=st(x,C)}return new W(N,x)}s.A=function(x){return ct(this,x).h},s.and=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)&x.i(O);return new c(R,this.h&x.h)},s.or=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)|x.i(O);return new c(R,this.h|x.h)},s.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)^x.i(O);return new c(R,this.h^x.h)};function ut(x){for(var S=x.g.length+1,R=[],O=0;O<S;O++)R[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(R,x.h)}function _t(x,S){var R=S>>5;S%=32;for(var O=x.g.length-R,N=[],P=0;P<O;P++)N[P]=0<S?x.i(P+R)>>>S|x.i(P+R+1)<<32-S:x.i(P+R);return new c(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,R0=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,Fs=c}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C0,Yl,D0,fh,Qm,x0,V0,O0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,y){return h==Array.prototype||h==Object.prototype||(h[_]=y.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var _=0;_<h.length;++_){var y=h[_];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function a(h,_){if(_)t:{var y=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var U=h[b];if(!(U in y))break t;y=y[U]}h=h[h.length-1],b=y[h],_=_(b),_!=b&&_!=null&&t(y,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var y=0,b=!1,U={next:function(){if(!b&&y<h.length){var G=y++;return{value:_(G,h[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function E(h,_,y){return h.call.apply(h.bind,arguments)}function A(h,_,y){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),h.apply(_,U)}}return function(){return h.apply(_,arguments)}}function I(h,_,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,I.apply(null,arguments)}function k(h,_){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function H(h,_){function y(){}y.prototype=_.prototype,h.aa=_.prototype,h.prototype=new y,h.prototype.constructor=h,h.Qb=function(b,U,G){for(var rt=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)rt[Ut-2]=arguments[Ut];return _.prototype[U].apply(b,rt)}}function Y(h){const _=h.length;if(0<_){const y=Array(_);for(let b=0;b<_;b++)y[b]=h[b];return y}return[]}function q(h,_){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const U=h.length||0,G=b.length||0;h.length=U+G;for(let rt=0;rt<G;rt++)h[U+rt]=b[rt]}else h.push(b)}}class st{constructor(_,y){this.i=_,this.j=y,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function it(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ct(h){return ct[" "](h),h}ct[" "]=function(){};var ut=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function _t(h,_,y){for(const b in h)_.call(y,h[b],b,h)}function x(h,_){for(const y in h)_.call(void 0,h[y],y,h)}function S(h){const _={};for(const y in h)_[y]=h[y];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,_){let y,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(y in b)h[y]=b[y];for(let G=0;G<R.length;G++)y=R[G],Object.prototype.hasOwnProperty.call(b,y)&&(h[y]=b[y])}}function N(h){var _=1;h=h.split(":");const y=[];for(;0<_&&h.length;)y.push(h.shift()),_--;return h.length&&y.push(h.join(":")),y}function P(h){d.setTimeout(()=>{throw h},0)}function C(){var h=qt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ze{constructor(){this.h=this.g=null}add(_,y){const b=fe.get();b.set(_,y),this.h?this.h.next=b:this.g=b,this.h=b}}var fe=new st(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,y){this.h=_,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let at,yt=!1,qt=new ze,D=()=>{const h=d.Promise.resolve(void 0);at=()=>{h.then(Z)}};var Z=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(y){P(y)}var _=fe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}yt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const y=()=>{};d.addEventListener("test",y,_),d.removeEventListener("test",y,_)}catch{}return h}();function Vt(h,_){if(et.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var y=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ut){t:{try{ct(_.nodeName);var U=!0;break t}catch{}U=!1}U||(_=null)}}else y=="mouseover"?_=h.fromElement:y=="mouseout"&&(_=h.toElement);this.relatedTarget=_,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:St[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Vt.aa.h.call(this)}}H(Vt,et);var St={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),ne=0;function Yn(h,_,y,b,U){this.listener=h,this.proxy=null,this.src=_,this.type=y,this.capture=!!b,this.ha=U,this.key=++ne,this.da=this.fa=!1}function tr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pi(h){this.src=h,this.g={},this.h=0}pi.prototype.add=function(h,_,y,b,U){var G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);var rt=Zr(h,_,b,U);return-1<rt?(_=h[rt],y||(_.fa=!1)):(_=new Yn(_,this.src,G,!!b,U),_.fa=y,h.push(_)),_};function Jr(h,_){var y=_.type;if(y in h.g){var b=h.g[y],U=Array.prototype.indexOf.call(b,_,void 0),G;(G=0<=U)&&Array.prototype.splice.call(b,U,1),G&&(tr(_),h.g[y].length==0&&(delete h.g[y],h.h--))}}function Zr(h,_,y,b){for(var U=0;U<h.length;++U){var G=h[U];if(!G.da&&G.listener==_&&G.capture==!!y&&G.ha==b)return U}return-1}var Wr="closure_lm_"+(1e6*Math.random()|0),No={};function Du(h,_,y,b,U){if(Array.isArray(_)){for(var G=0;G<_.length;G++)Du(h,_[G],y,b,U);return null}return y=xu(y),h&&h[Ne]?h.K(_,y,p(b)?!!b.capture:!1,U):Sn(h,_,y,!1,b,U)}function Sn(h,_,y,b,U,G){if(!_)throw Error("Invalid event type");var rt=p(U)?!!U.capture:!!U,Ut=aa(h);if(Ut||(h[Wr]=Ut=new pi(h)),y=Ut.add(_,y,b,rt,G),y.proxy)return y;if(b=_f(),y.proxy=b,b.src=h,b.listener=y,h.addEventListener)vt||(U=rt),U===void 0&&(U=!1),h.addEventListener(_.toString(),b,U);else if(h.attachEvent)h.attachEvent(ts(_.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function _f(){function h(y){return _.call(h.src,h.listener,y)}const _=yf;return h}function Mo(h,_,y,b,U){if(Array.isArray(_))for(var G=0;G<_.length;G++)Mo(h,_[G],y,b,U);else b=p(b)?!!b.capture:!!b,y=xu(y),h&&h[Ne]?(h=h.i,_=String(_).toString(),_ in h.g&&(G=h.g[_],y=Zr(G,y,b,U),-1<y&&(tr(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete h.g[_],h.h--)))):h&&(h=aa(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Zr(_,y,b,U)),(y=-1<h?_[h]:null)&&sa(y))}function sa(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ne])Jr(_.i,h);else{var y=h.type,b=h.proxy;_.removeEventListener?_.removeEventListener(y,b,h.capture):_.detachEvent?_.detachEvent(ts(y),b):_.addListener&&_.removeListener&&_.removeListener(b),(y=aa(_))?(Jr(y,h),y.h==0&&(y.src=null,_[Wr]=null)):tr(h)}}}function ts(h){return h in No?No[h]:No[h]="on"+h}function yf(h,_){if(h.da)h=!0;else{_=new Vt(_,this);var y=h.listener,b=h.ha||h.src;h.fa&&sa(h),h=y.call(b,_)}return h}function aa(h){return h=h[Wr],h instanceof pi?h:null}var Po="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(h){return typeof h=="function"?h:(h[Po]||(h[Po]=function(_){return h.handleEvent(_)}),h[Po])}function de(){ot.call(this),this.i=new pi(this),this.M=this,this.F=null}H(de,ot),de.prototype[Ne]=!0,de.prototype.removeEventListener=function(h,_,y,b){Mo(this,h,_,y,b)};function Ht(h,_){var y,b=h.F;if(b)for(y=[];b;b=b.F)y.push(b);if(h=h.M,b=_.type||_,typeof _=="string")_=new et(_,h);else if(_ instanceof et)_.target=_.target||h;else{var U=_;_=new et(b,h),O(_,U)}if(U=!0,y)for(var G=y.length-1;0<=G;G--){var rt=_.g=y[G];U=fn(rt,b,!0,_)&&U}if(rt=_.g=h,U=fn(rt,b,!0,_)&&U,U=fn(rt,b,!1,_)&&U,y)for(G=0;G<y.length;G++)rt=_.g=y[G],U=fn(rt,b,!1,_)&&U}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var y=h.g[_],b=0;b<y.length;b++)tr(y[b]);delete h.g[_],h.h--}}this.F=null},de.prototype.K=function(h,_,y,b){return this.i.add(String(h),_,!1,y,b)},de.prototype.L=function(h,_,y,b){return this.i.add(String(h),_,!0,y,b)};function fn(h,_,y,b){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var U=!0,G=0;G<_.length;++G){var rt=_[G];if(rt&&!rt.da&&rt.capture==y){var Ut=rt.listener,Re=rt.ha||rt.src;rt.fa&&Jr(h.i,rt),U=Ut.call(Re,b)!==!1&&U}}return U&&!b.defaultPrevented}function Ye(h,_,y){if(typeof h=="function")y&&(h=I(h,y));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Vu(h){h.g=Ye(()=>{h.g=null,h.i&&(h.i=!1,Vu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class vf extends ot{constructor(_,y){super(),this.m=_,this.l=y,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Vu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(h){ot.call(this),this.h=h,this.g={}}H(es,ot);var ns=[];function is(h){_t(h.g,function(_,y){this.g.hasOwnProperty(y)&&sa(_)},h),h.g={}}es.prototype.N=function(){es.aa.N.call(this),is(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=d.JSON.stringify,oa=d.JSON.parse,rs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ko(){}ko.prototype.h=null;function Uo(h){return h.h||(h.h=h.i())}function Lo(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){et.call(this,"d")}H(yi,et);function Bo(){et.call(this,"c")}H(Bo,et);var Xn={},zo=null;function er(){return zo=zo||new de}Xn.La="serverreachability";function la(h){et.call(this,Xn.La,h)}H(la,et);function nr(h){const _=er();Ht(_,new la(_))}Xn.STAT_EVENT="statevent";function Ou(h,_){et.call(this,Xn.STAT_EVENT,h),this.stat=_}H(Ou,et);function re(h){const _=er();Ht(_,new Ou(_,h))}Xn.Ma="timingevent";function we(h,_){et.call(this,Xn.Ma,h),this.size=_}H(we,et);function Ee(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function jo(h,_,y,b,U,G){h.info(function(){if(h.g)if(G)for(var rt="",Ut=G.split("&"),Re=0;Re<Ut.length;Re++){var Lt=Ut[Re].split("=");if(1<Lt.length){var Pe=Lt[0];Lt=Lt[1];var Ce=Pe.split("_");rt=2<=Ce.length&&Ce[1]=="type"?rt+(Pe+"="+Lt+"&"):rt+(Pe+"=redacted&")}}else rt=null;else rt=G;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+_+`
`+y+`
`+rt})}function Ef(h,_,y,b,U,G,rt){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+_+`
`+y+`
`+G+" "+rt})}function ir(h,_,y,b){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+ss(h,y)+(b?" "+b:"")})}function Nu(h,_){h.info(function(){return"TIMEOUT: "+_})}In.prototype.info=function(){};function ss(h,_){if(!h.g)return _;if(!_)return null;try{var y=JSON.parse(_);if(y){for(h=0;h<y.length;h++)if(Array.isArray(y[h])){var b=y[h];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var rt=1;rt<U.length;rt++)U[rt]=""}}}}return jn(y)}catch{return _}}var rr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Jn(){}H(Jn,ko),Jn.prototype.g=function(){return new XMLHttpRequest},Jn.prototype.i=function(){return{}},$n=new Jn;function We(h,_,y,b){this.j=h,this.i=_,this.l=y,this.R=b||1,this.U=new es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var qo={},ua={};function qn(h,_,y){h.L=1,h.v=cs(dn(_)),h.m=y,h.P=!0,Ei(h,null)}function Ei(h,_){h.F=Date.now(),as(h),h.A=dn(h.v);var y=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Yo(y.i,"t",b),h.C=0,y=h.j.J,h.h=new _e,h.g=Xu(h.j,y?_:null,!h.m),0<h.O&&(h.M=new vf(I(h.Y,h,h.g),h.O)),_=h.U,y=h.g,b=h.ca;var U="readystatechange";Array.isArray(U)||(U&&(ns[0]=U.toString()),U=ns);for(var G=0;G<U.length;G++){var rt=Du(y,U[G],b||_.handleEvent,!1,_.h||_);if(!rt)break;_.g[rt.key]=rt}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),nr(),jo(h.i,h.u,h.A,h.l,h.R,h.m)}We.prototype.ca=function(h){h=h.target;const _=this.M;_&&Dn(h)==3?_.j():this.Y(h)},We.prototype.Y=function(h){try{if(h==this.g)t:{const Ce=Dn(this.g);var _=this.g.Ba();const Ci=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||ju(this.g)))){this.J||Ce!=4||_==7||(_==8||0>=Ci?nr(3):nr(2)),sr(this);var y=this.g.Z();this.X=y;e:if(Mu(this)){var b=ju(this.g);h="";var U=b.length,G=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){je(this),Zn(this);var rt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<U;_++)this.h.h=!0,h+=this.h.i.decode(b[_],{stream:!(G&&_==U-1)});b.length=0,this.h.g+=h,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=y==200,Ef(this.i,this.u,this.A,this.l,this.R,Ce,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Re=this.g;if((Ut=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!it(Ut)){var Lt=Ut;break e}}Lt=null}if(y=Lt)ir(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,y);else{this.o=!1,this.s=3,re(12),je(this),Zn(this);break t}}if(this.P){y=!0;let qe;for(;!this.J&&this.C<rt.length;)if(qe=Pu(this,rt),qe==ua){Ce==4&&(this.s=4,re(14),y=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==qo){this.s=4,re(15),ir(this.i,this.l,rt,"[Invalid Chunk]"),y=!1;break}else ir(this.i,this.l,qe,null),os(this,qe);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||rt.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)ir(this.i,this.l,rt,"[Invalid Chunked Response]"),je(this),Zn(this);else if(0<rt.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),ys(Pe),Pe.M=!0,re(11))}}else ir(this.i,this.l,rt,null),os(this,rt);Ce==4&&je(this),this.o&&!this.J&&(Ce==4?Ku(this.j,this):(this.o=!1,as(this)))}else If(this.g),y==400&&0<rt.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),je(this),Zn(this)}}}catch{}finally{}};function Mu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Pu(h,_){var y=h.C,b=_.indexOf(`
`,y);return b==-1?ua:(y=Number(_.substring(y,b)),isNaN(y)?qo:(b+=1,b+y>_.length?ua:(_=_.slice(b,b+y),h.C=b+y,_)))}We.prototype.cancel=function(){this.J=!0,je(this)};function as(h){h.S=Date.now()+h.I,ku(h,h.I)}function ku(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ee(I(h.ba,h),_)}function sr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}We.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Nu(this.i,this.A),this.L!=2&&(nr(),re(17)),je(this),this.s=2,Zn(this)):ku(this,this.S-h)};function Zn(h){h.j.G==0||h.J||Ku(h.j,h)}function je(h){sr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,is(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function os(h,_){try{var y=h.j;if(y.G!=0&&(y.g==h||Fo(y.h,h))){if(!h.K&&Fo(y.h,h)&&y.G==3){try{var b=y.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<h.F)Ta(y),va(y);else break t;Wo(y),re(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ee(I(y.Za,y),6e3));if(1>=ha(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ri(y,11)}else if((h.K||y.g==h)&&Ta(y),!it(_))for(U=y.Da.g.parse(_),_=0;_<U.length;_++){let Lt=U[_];if(y.T=Lt[0],Lt=Lt[1],y.G==2)if(Lt[0]=="c"){y.K=Lt[1],y.ia=Lt[2];const Pe=Lt[3];Pe!=null&&(y.la=Pe,y.j.info("VER="+y.la));const Ce=Lt[4];Ce!=null&&(y.Aa=Ce,y.j.info("SVER="+y.Aa));const Ci=Lt[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(b=1.5*Ci,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const qe=h.g;if(qe){const si=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var G=b.h;G.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(fa(G,G.h),G.h=null))}if(b.D){const el=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(b.ya=el,Xt(b.I,b.D,el))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-h.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var rt=h;if(b.qa=Yu(b,b.J?b.ia:null,b.W),rt.K){tn(b.h,rt);var Ut=rt,Re=b.L;Re&&(Ut.I=Re),Ut.B&&(sr(Ut),as(Ut)),b.g=rt}else Gu(b);0<y.i.length&&Ea(y)}else Lt[0]!="stop"&&Lt[0]!="close"||Ri(y,7);else y.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Ri(y,7):Jo(y):Lt[0]!="noop"&&y.l&&y.l.ta(Lt),y.v=0)}}nr(4)}catch{}}var Uu=class{constructor(h,_){this.g=h,this.map=_}};function Ti(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ca(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ha(h){return h.h?1:h.g?h.g.size:0}function Fo(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function fa(h,_){h.g?h.g.add(_):h.h=_}function tn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ti.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Go(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const y of h.g.values())_=_.concat(y.D);return _}return Y(h.i)}function Tf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],y=h.length,b=0;b<y;b++)_.push(h[b]);return _}_=[],y=0;for(b in h)_[y++]=h[b];return _}function da(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var y=0;y<h;y++)_.push(y);return _}_=[],y=0;for(const b in h)_[y++]=b;return _}}}function Ho(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var y=da(h),b=Tf(h),U=b.length,G=0;G<U;G++)_.call(void 0,b[G],y&&y[G],h)}var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(h,_){if(h){h=h.split("&");for(var y=0;y<h.length;y++){var b=h[y].indexOf("="),U=null;if(0<=b){var G=h[y].substring(0,b);U=h[y].substring(b+1)}else G=h[y];_(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Te(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Te){this.h=h.h,us(this,h.j),this.o=h.o,this.g=h.g,ar(this,h.s),this.l=h.l;var _=h.i,y=new bi;y.i=_.i,_.g&&(y.g=new Map(_.g),y.h=_.h),Ai(this,y),this.m=h.m}else h&&(_=String(h).match(ls))?(this.h=!1,us(this,_[1]||"",!0),this.o=wn(_[2]||""),this.g=wn(_[3]||"",!0),ar(this,_[4]),this.l=wn(_[5]||"",!0),Ai(this,_[6]||"",!0),this.m=wn(_[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}Te.prototype.toString=function(){var h=[],_=this.j;_&&h.push(hs(_,Ko,!0),":");var y=this.g;return(y||_=="file")&&(h.push("//"),(_=this.o)&&h.push(hs(_,Ko,!0),"@"),h.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&h.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&h.push("/"),h.push(hs(y,y.charAt(0)=="/"?bf:Qo,!0))),(y=this.i.toString())&&h.push("?",y),(y=this.m)&&h.push("#",hs(y,ma)),h.join("")};function dn(h){return new Te(h)}function us(h,_,y){h.j=y?wn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ar(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ai(h,_,y){_ instanceof bi?(h.i=_,Bu(h.i,h.h)):(y||(_=hs(_,Sf)),h.i=new bi(_,h.h))}function Xt(h,_,y){h.i.set(_,y)}function cs(h){return Xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function wn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function hs(h,_,y){return typeof h=="string"?(h=encodeURI(h).replace(_,Lu),y&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Lu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ko=/[#\/\?@]/g,Qo=/[#\?:]/g,bf=/[#\?]/g,Sf=/[#\?@]/g,ma=/#/g;function bi(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Rn(h){h.g||(h.g=new Map,h.h=0,h.i&&Af(h.i,function(_,y){h.add(decodeURIComponent(_.replace(/\+/g," ")),y)}))}s=bi.prototype,s.add=function(h,_){Rn(this),this.i=null,h=Wn(this,h);var y=this.g.get(h);return y||this.g.set(h,y=[]),y.push(_),this.h+=1,this};function Si(h,_){Rn(h),_=Wn(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ii(h,_){return Rn(h),_=Wn(h,_),h.g.has(_)}s.forEach=function(h,_){Rn(this),this.g.forEach(function(y,b){y.forEach(function(U){h.call(_,U,b,this)},this)},this)},s.na=function(){Rn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),y=[];for(let b=0;b<_.length;b++){const U=h[b];for(let G=0;G<U.length;G++)y.push(_[b])}return y},s.V=function(h){Rn(this);let _=[];if(typeof h=="string")Ii(this,h)&&(_=_.concat(this.g.get(Wn(this,h))));else{h=Array.from(this.g.values());for(let y=0;y<h.length;y++)_=_.concat(h[y])}return _},s.set=function(h,_){return Rn(this),this.i=null,h=Wn(this,h),Ii(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Yo(h,_,y){Si(h,_),0<y.length&&(h.i=null,h.g.set(Wn(h,_),Y(y)),h.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var y=0;y<_.length;y++){var b=_[y];const G=encodeURIComponent(String(b)),rt=this.V(b);for(b=0;b<rt.length;b++){var U=G;rt[b]!==""&&(U+="="+encodeURIComponent(String(rt[b]))),h.push(U)}}return this.i=h.join("&")};function Wn(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Bu(h,_){_&&!h.j&&(Rn(h),h.i=null,h.g.forEach(function(y,b){var U=b.toLowerCase();b!=U&&(Si(this,b),Yo(this,U,y))},h)),h.j=_}function fs(h,_){const y=new In;if(d.Image){const b=new Image;b.onload=k(Cn,y,"TestLoadImage: loaded",!0,_,b),b.onerror=k(Cn,y,"TestLoadImage: error",!1,_,b),b.onabort=k(Cn,y,"TestLoadImage: abort",!1,_,b),b.ontimeout=k(Cn,y,"TestLoadImage: timeout",!1,_,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else _(!1)}function Fn(h,_){const y=new In,b=new AbortController,U=setTimeout(()=>{b.abort(),Cn(y,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:b.signal}).then(G=>{clearTimeout(U),G.ok?Cn(y,"TestPingServer: ok",!0,_):Cn(y,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),Cn(y,"TestPingServer: error",!1,_)})}function Cn(h,_,y,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(y)}catch{}}function ds(){this.g=new rs}function ti(h,_,y){const b=y||"";try{Ho(h,function(U,G){let rt=U;p(U)&&(rt=jn(U)),_.push(b+G+"="+encodeURIComponent(rt))})}catch(U){throw _.push(b+"type="+encodeURIComponent("_badmap")),U}}function or(h){this.l=h.Ub||null,this.j=h.eb||!1}H(or,ko),or.prototype.g=function(){return new wi(this.l,this.j)},or.prototype.i=function(h){return function(){return h}}({});function wi(h,_){de.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(wi,de),s=wi.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ni(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ei(this):ni(this),this.readyState==3&&Xo(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,ei(this))},s.Qa=function(h){this.g&&(this.response=h,ei(this))},s.ga=function(){this.g&&ei(this)};function ei(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}s.setRequestHeader=function(h,_){this.u.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var y=_.next();!y.done;)y=y.value,h.push(y[0]+": "+y[1]),y=_.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $o(h){let _="";return _t(h,function(y,b){_+=b,_+=":",_+=y,_+=`\r
`}),_}function Me(h,_,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=$o(y),typeof h=="string"?y!=null&&encodeURIComponent(String(y)):Xt(h,_,y))}function Gt(h){de.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Gt,de);var ga=/^https?$/i,ms=["POST","PUT"];s=Gt.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,_,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?Uo(this.o):Uo($n),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(G){zu(this,G);return}if(h=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)y.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),U=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ms,_,void 0))||b||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,rt]of y)this.g.setRequestHeader(G,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gs(this),this.u=!0,this.g.send(h),this.u=!1}catch(G){zu(this,G)}};function zu(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,pa(h),ii(h)}function pa(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ht(this,"complete"),Ht(this,"abort"),ii(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),Gt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},s.bb=function(){_a(this)};function _a(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Dn(h)!=4||h.Z()!=2)){if(h.u&&Dn(h)==4)Ye(h.Ea,0,h);else if(Ht(h,"readystatechange"),Dn(h)==4){h.h=!1;try{const rt=h.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var y;if(!(y=_)){var b;if(b=rt===0){var U=String(h.D).match(ls)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),b=!ga.test(U?U.toLowerCase():"")}y=b}if(y)Ht(h,"complete"),Ht(h,"success");else{h.m=6;try{var G=2<Dn(h)?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.Z()+"]",pa(h)}}finally{ii(h)}}}}function ii(h,_){if(h.g){gs(h);const y=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ht(h,"ready");try{y.onreadystatechange=b}catch{}}}function gs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Dn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),oa(_)}};function ju(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function If(h){const _={};h=(h.g&&2<=Dn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(it(h[b]))continue;var y=N(h[b]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=_[U]||[];_[U]=G,G.push(y)}x(_,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(h,_,y){return y&&y.internalChannelParams&&y.internalChannelParams[h]||_}function ya(h){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,h),this.cb=ps("retryDelaySeedMs",1e4,h),this.Wa=ps("forwardChannelMaxRetries",2,h),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(h&&h.concurrentRequestLimit),this.Da=new ds,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ya.prototype,s.la=8,s.G=1,s.connect=function(h,_,y,b){re(0),this.W=h,this.H=_||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=Yu(this,null,this.W),Ea(this)};function Jo(h){if(qu(h),h.G==3){var _=h.U++,y=dn(h.I);if(Xt(y,"SID",h.K),Xt(y,"RID",_),Xt(y,"TYPE","terminate"),_s(h,y),_=new We(h,h.j,_),_.L=2,_.v=cs(dn(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=_.v,y=!0),y||(_.g=Xu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),as(_)}Qu(h)}function va(h){h.g&&(ys(h),h.g.cancel(),h.g=null)}function qu(h){va(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ta(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ea(h){if(!ca(h.h)&&!h.s){h.s=!0;var _=h.Ga;at||D(),yt||(at(),yt=!0),qt.add(_,h),h.B=0}}function wf(h,_){return ha(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ee(I(h.Ga,h,_),tl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new We(this,this.j,h);let G=this.o;if(this.S&&(G?(G=S(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)t:{for(var _=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(_+=b,4096<_){_=y;break t}if(_===4096||y===this.i.length-1){_=y+1;break t}}_=1e3}else _=1e3;_=Fu(this,U,_),y=dn(this.I),Xt(y,"RID",h),Xt(y,"CVER",22),this.D&&Xt(y,"X-HTTP-Session-Id",this.D),_s(this,y),G&&(this.O?_="headers="+encodeURIComponent(String($o(G)))+"&"+_:this.m&&Me(y,this.m,G)),fa(this.h,U),this.Ua&&Xt(y,"TYPE","init"),this.P?(Xt(y,"$req",_),Xt(y,"SID","null"),U.T=!0,qn(U,y,null)):qn(U,y,_),this.G=2}}else this.G==3&&(h?Zo(this,h):this.i.length==0||ca(this.h)||Zo(this))};function Zo(h,_){var y;_?y=_.l:y=h.U++;const b=dn(h.I);Xt(b,"SID",h.K),Xt(b,"RID",y),Xt(b,"AID",h.T),_s(h,b),h.m&&h.o&&Me(b,h.m,h.o),y=new We(h,h.j,y,h.B+1),h.m===null&&(y.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Fu(h,y,1e3),y.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fa(h.h,y),qn(y,b,_)}function _s(h,_){h.H&&_t(h.H,function(y,b){Xt(_,b,y)}),h.l&&Ho({},function(y,b){Xt(_,b,y)})}function Fu(h,_,y){y=Math.min(h.i.length,y);var b=h.l?I(h.l.Na,h.l,h):null;t:{var U=h.i;let G=-1;for(;;){const rt=["count="+y];G==-1?0<y?(G=U[0].g,rt.push("ofs="+G)):G=0:rt.push("ofs="+G);let Ut=!0;for(let Re=0;Re<y;Re++){let Lt=U[Re].g;const Pe=U[Re].map;if(Lt-=G,0>Lt)G=Math.max(0,U[Re].g-100),Ut=!1;else try{ti(Pe,rt,"req"+Lt+"_")}catch{b&&b(Pe)}}if(Ut){b=rt.join("&");break t}}}return h=h.i.splice(0,y),_.D=h,b}function Gu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;at||D(),yt||(at(),yt=!0),qt.add(_,h),h.v=0}}function Wo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ee(I(h.Fa,h),tl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ee(I(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),va(this),Hu(this))};function ys(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Hu(h){h.g=new We(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=dn(h.qa);Xt(_,"RID","rpc"),Xt(_,"SID",h.K),Xt(_,"AID",h.T),Xt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xt(_,"TO",h.ja),Xt(_,"TYPE","xmlhttp"),_s(h,_),h.m&&h.o&&Me(_,h.m,h.o),h.L&&(h.g.I=h.L);var y=h.g;h=h.ia,y.L=1,y.v=cs(dn(_)),y.m=null,y.P=!0,Ei(y,h)}s.Za=function(){this.C!=null&&(this.C=null,va(this),Wo(this),re(19))};function Ta(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ku(h,_){var y=null;if(h.g==_){Ta(h),ys(h),h.g=null;var b=2}else if(Fo(h.h,_))y=_.D,tn(h.h,_),b=1;else return;if(h.G!=0){if(_.o)if(b==1){y=_.m?_.m.length:0,_=Date.now()-_.F;var U=h.B;b=er(),Ht(b,new we(b,y)),Ea(h)}else Gu(h);else if(U=_.s,U==3||U==0&&0<_.X||!(b==1&&wf(h,_)||b==2&&Wo(h)))switch(y&&0<y.length&&(_=h.h,_.i=_.i.concat(y)),U){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function tl(h,_){let y=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(y*=2),y*_}function Ri(h,_){if(h.j.info("Error code "+_),_==2){var y=I(h.fb,h),b=h.Xa;const U=!b;b=new Te(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||us(b,"https"),cs(b),U?fs(b.toString(),y):Fn(b.toString(),y)}else re(2);h.G=0,h.l&&h.l.sa(_),Qu(h),qu(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Qu(h){if(h.G=0,h.ka=[],h.l){const _=Go(h.h);(_.length!=0||h.i.length!=0)&&(q(h.ka,_),q(h.ka,h.i),h.h.i.length=0,Y(h.i),h.i.length=0),h.l.ra()}}function Yu(h,_,y){var b=y instanceof Te?dn(y):new Te(y);if(b.g!="")_&&(b.g=_+"."+b.g),ar(b,b.s);else{var U=d.location;b=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;var G=new Te(null);b&&us(G,b),_&&(G.g=_),U&&ar(G,U),y&&(G.l=y),b=G}return y=h.D,_=h.ya,y&&_&&Xt(b,y,_),Xt(b,"VER",h.la),_s(h,b),b}function Xu(h,_,y){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Gt(new or({eb:y})):new Gt(h.pa),_.Ha(h.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}s=$u.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Aa(){}Aa.prototype.g=function(h,_){return new en(h,_)};function en(h,_){de.call(this),this.g=new ya(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!it(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!it(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ri(this)}H(en,de),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Jo(this.g)},en.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var y={};y.__data__=h,h=y}else this.u&&(y={},y.__data__=jn(h),h=y);_.i.push(new Uu(_.Ya++,h)),_.G==3&&Ea(_)},en.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,en.aa.N.call(this)};function Ju(h){yi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const y in _){h=y;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}H(Ju,yi);function Zu(){Bo.call(this),this.status=1}H(Zu,Bo);function ri(h){this.g=h}H(ri,$u),ri.prototype.ua=function(){Ht(this.g,"a")},ri.prototype.ta=function(h){Ht(this.g,new Ju(h))},ri.prototype.sa=function(h){Ht(this.g,new Zu)},ri.prototype.ra=function(){Ht(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,O0=function(){return new Aa},V0=function(){return er()},x0=Xn,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,fh=rr,vi.COMPLETE="complete",D0=vi,Lo.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",de.prototype.listen=de.prototype.K,Yl=Lo,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,C0=Gt}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const hE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new gg("@firebase/firestore");function no(){return Qs.logLevel}function tt(s,...t){if(Qs.logLevel<=Pt.DEBUG){const e=t.map(Dg);Qs.debug(`Firestore (${Vo}): ${s}`,...e)}}function rn(s,...t){if(Qs.logLevel<=Pt.ERROR){const e=t.map(Dg);Qs.error(`Firestore (${Vo}): ${s}`,...e)}}function Ys(s,...t){if(Qs.logLevel<=Pt.WARN){const e=t.map(Dg);Qs.warn(`Firestore (${Vo}): ${s}`,...e)}}function Dg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(s="Unexpected state"){const t=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: `+s;throw rn(t),new Error(t)}function pt(s,t){s||mt()}function wt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Wi{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class HC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ke.UNAUTHENTICATED))}shutdown(){}}class KC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class QC{constructor(t){this.t=t,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){pt(this.o===void 0);let r=this.i;const a=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let l=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yi,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yi)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string"),new N0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pt(t===null||typeof t=="string"),new Ke(t)}}class YC{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XC{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new YC(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $C{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JC{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){pt(this.o===void 0);const r=l=>{l.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(pt(typeof e.token=="string"),this.R=e.token,new $C(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const a=ZC(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<e&&(r+=t.charAt(a[l]%t.length))}return r}}function Rt(s,t){return s<t?-1:s>t?1:0}function po(s,t,e){return s.length===t.length&&s.every((r,a)=>e(r,t[a]))}function P0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ft(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ft(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ft(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return he.fromMillis(Date.now())}static fromDate(t){return he.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new he(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Et(t)}static min(){return new Et(new he(0,0))}static max(){return new Et(new he(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,e,r){e===void 0?e=0:e>t.length&&mt(),r===void 0?r=t.length-e:r>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return lu.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof lu?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const l=t.get(a),c=e.get(a);if(l<c)return-1;if(l>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yt extends lu{construct(t,e,r){return new Yt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new ft(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(a=>a.length>0))}return new Yt(e)}static emptyPath(){return new Yt([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends lu{construct(t,e,r){return new ue(t,e,r)}static isValidIdentifier(t){return WC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ue(["__name__"])}static fromServerFormat(t){const e=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ft(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new ft(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ft(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ft(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(e)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Yt.fromString(t))}static fromName(t){return new lt(Yt.fromString(t).popFirst(5))}static empty(){return new lt(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Yt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Yt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(t,e,r,a){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=a}}function Ym(s){return s.fields.find(t=>t.kind===2)}function ks(s){return s.fields.filter(t=>t.kind!==2)}Vh.UNKNOWN_ID=-1;class dh{constructor(t,e){this.fieldPath=t,this.kind=e}}class uu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new uu(0,bn.min())}}function tD(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Et.fromTimestamp(r===1e9?new he(e+1,0):new he(e,r));return new bn(a,lt.empty(),t)}function k0(s){return new bn(s.readTime,s.key,-1)}class bn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new bn(Et.min(),lt.empty(),-1)}static max(){return new bn(Et.max(),lt.empty(),-1)}}function xg(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=lt.comparator(s.documentKey,t.documentKey),e!==0?e:Rt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==U0)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new z((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof z?e:z.resolve(e)}catch(e){return z.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):z.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):z.reject(e)}static resolve(t){return new z((e,r)=>{e(t)})}static reject(t){return new z((e,r)=>{r(t)})}static waitFor(t){return new z((e,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&e()},g=>r(g))}),c=!0,l===a&&e()})}static or(t){let e=z.resolve(!1);for(const r of t)e=e.next(a=>a?z.resolve(a):r());return e}static forEach(t,e){const r=[];return t.forEach((a,l)=>{r.push(e.call(this,a,l))}),this.waitFor(r)}static mapArray(t,e){return new z((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;e(t[p]).next(E=>{c[p]=E,++d,d===l&&r(c)},E=>a(E))}})}static doWhile(t,e){return new z((r,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Yi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Wl(t,e.error)):this.V.resolve()},this.transaction.onerror=r=>{const a=Vg(r.target.error);this.V.reject(new Wl(t,a))}}static open(t,e,r,a){try{return new Jh(e,t.transaction(a,r))}catch(l){throw new Wl(e,l)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(tt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new nD(e)}}class qr{constructor(t,e,r){this.name=t,this.version=e,this.p=r,qr.S(Ve())===12.2&&rn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return tt("SimpleDb","Removing database:",t),Us(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!jT())return!1;if(qr.v())return!0;const t=Ve(),e=qr.S(t),r=0<e&&e<10,a=B0(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(t){return this.db||(tt("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{r(new Wl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ft(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ft(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Wl(t,c))},a.onupgradeneeded=l=>{tt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.p.O(c,a.transaction,l.oldVersion,this.version).next(()=>{tt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(t);const d=Jh.open(this.db,t,l?"readonly":"readwrite",r),g=a(d).next(p=>(d.g(),p)).catch(p=>(d.abort(p),z.reject(p))).toPromise();return g.catch(()=>{}),await d.m,g}catch(d){const g=d,p=g.name!=="FirebaseError"&&c<3;if(tt("SimpleDb","Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function B0(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class eD{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Us(this.B.delete())}}class Wl extends ft{constructor(t,e){super(J.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Yr(s){return s.name==="IndexedDbTransactionError"}class nD{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Us(r)}add(t){return tt("SimpleDb","ADD",this.store.name,t,t),Us(this.store.add(t))}get(t){return Us(this.store.get(t)).next(e=>(e===void 0&&(e=null),tt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return tt("SimpleDb","DELETE",this.store.name,t),Us(this.store.delete(t))}count(){return tt("SimpleDb","COUNT",this.store.name),Us(this.store.count())}U(t,e){const r=this.options(t,e),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z((c,d)=>{l.onerror=g=>{d(g.target.error)},l.onsuccess=g=>{c(g.target.result)}})}{const l=this.cursor(r),c=[];return this.W(l,(d,g)=>{c.push(g)}).next(()=>c)}}G(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new z((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}j(t,e){tt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.H=!1;const a=this.cursor(r);return this.W(a,(l,c,d)=>d.delete())}J(t,e){let r;e?r=t:(r={},e=t);const a=this.cursor(r);return this.W(a,e)}Y(t){const e=this.cursor({});return new z((r,a)=>{e.onerror=l=>{const c=Vg(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}W(t,e){const r=[];return new z((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const g=new eD(d),p=e(d.primaryKey,d.value,g);if(p instanceof z){const E=p.catch(A=>(g.done(),z.reject(A)));r.push(E)}g.isDone?a():g.K===null?d.continue():d.continue(g.K)}}).next(()=>z.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.H?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Us(s){return new z((t,e)=>{s.onsuccess=r=>{const a=r.target.result;t(a)},s.onerror=r=>{const a=Vg(r.target.error);e(a)}})}let fE=!1;function Vg(s){const t=qr.S(Ve());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fE||(fE=!0,setTimeout(()=>{throw r},0)),r}}return s}class iD{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){tt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{tt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Yr(e)?tt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await na(e)}await this.X(6e4)})}}class rD{constructor(t,e){this.localStore=t,this.persistence=e}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))}te(t,e){const r=new Set;let a=e,l=!0;return z.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(c!==null&&!r.has(c))return tt("IndexBackfiller",`Processing collection: ${c}`),this.ne(t,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>e-a)}ne(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(a=>this.localStore.localDocuments.getNextDocuments(t,e,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.re(a,l)).next(d=>(tt("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}re(t,e){let r=t;return e.changes.forEach((a,l)=>{const c=k0(l);xg(c,r)>0&&(r=c)}),new bn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ie(r),this.se=r=>e.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Un.oe=-1;function Zh(s){return s==null}function cu(s){return s===0&&1/s==-1/0}function sD(s){return typeof s=="number"&&Number.isInteger(s)&&!cu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=dE(t)),t=aD(s.get(e),t);return dE(t)}function aD(s,t){let e=t;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":e+="";break;case"":e+="";break;default:e+=l}}return e}function dE(s){return s+""}function hi(s){const t=s.length;if(pt(t>=2),t===2)return pt(s.charAt(0)===""&&s.charAt(1)===""),Yt.emptyPath();const e=t-2,r=[];let a="";for(let l=0;l<t;){const c=s.indexOf("",l);switch((c<0||c>e)&&mt(),s.charAt(c+1)){case"":const d=s.substring(l,c);let g;a.length===0?g=d:(a+=d,g=a,a=""),r.push(g);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:mt()}l=c+2}return new Yt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(s,t){return[s,an(t)]}function z0(s,t,e){return[s,an(t),e]}const oD={},lD=["prefixPath","collectionGroup","readTime","documentId"],uD=["prefixPath","collectionGroup","documentId"],cD=["collectionGroup","readTime","prefixPath","documentId"],hD=["canonicalId","targetId"],fD=["targetId","path"],dD=["path","targetId"],mD=["collectionId","parent"],gD=["indexId","uid"],pD=["uid","sequenceNumber"],_D=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yD=["indexId","uid","orderedDocumentKey"],vD=["userId","collectionPath","documentId"],ED=["userId","collectionPath","largestBatchId"],TD=["userId","collectionGroup","largestBatchId"],j0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AD=[...j0,"documentOverlays"],q0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],F0=q0,Og=[...F0,"indexConfiguration","indexState","indexEntries"],bD=Og,SD=[...Og,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends L0{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Oe(s,t){const e=wt(s);return qr.F(e._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function ia(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function G0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,e){this.comparator=t,this.root=e||Qe.EMPTY}insert(t,e){return new oe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return e+r.left.size;a<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nh(this.root,t,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nh(this.root,t,this.comparator,!0)}}class nh{constructor(t,e,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,e,r,a,l){this.key=t,this.value=e,this.color=r??Qe.RED,this.left=a??Qe.EMPTY,this.right=l??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,a,l){return new Qe(t??this.key,e??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,r),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Qe.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(t,e,r,a,l){return this}insert(t,e,r){return new Qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(t){return new pE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new te(this.comparator);return e.data=t,e}}class pE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ja(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new Ln([])}unionWith(t){let e=new te(ue.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Ln(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return po(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H0("Invalid base64 string: "+l):l}}(t);return new Ie(e)}static fromUint8Array(t){const e=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new Ie(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const ID=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(s){if(pt(!!s),typeof s=="string"){let t=0;const e=ID.exec(s);if(pt(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ae(s.seconds),nanos:ae(s.nanos)}}function ae(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Gr(s){return typeof s=="string"?Ie.fromBase64String(s):Ie.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Mg(s){const t=s.mapValue.fields.__previous_value__;return Ng(t)?Mg(t):t}function hu(s){const t=Ji(s.mapValue.fields.__local_write_time__.timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(t,e,r,a,l,c,d,g,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p}}class Xs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Xs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Xs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gh={nullValue:"NULL_VALUE"};function $s(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ng(s)?4:K0(s)?9007199254740991:Wh(s)?10:11:mt()}function gi(s,t){if(s===t)return!0;const e=$s(s);if(e!==$s(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return hu(s).isEqual(hu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ji(a.timestampValue),d=Ji(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(a,l){return Gr(a.bytesValue).isEqual(Gr(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(a,l){return ae(a.geoPointValue.latitude)===ae(l.geoPointValue.latitude)&&ae(a.geoPointValue.longitude)===ae(l.geoPointValue.longitude)}(s,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ae(a.integerValue)===ae(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ae(a.doubleValue),d=ae(l.doubleValue);return c===d?cu(c)===cu(d):isNaN(c)&&isNaN(d)}return!1}(s,t);case 9:return po(s.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(gE(c)!==gE(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!gi(c[g],d[g])))return!1;return!0}(s,t);default:return mt()}}function fu(s,t){return(s.values||[]).find(e=>gi(e,t))!==void 0}function Hr(s,t){if(s===t)return 0;const e=$s(s),r=$s(t);if(e!==r)return Rt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Rt(s.booleanValue,t.booleanValue);case 2:return function(l,c){const d=ae(l.integerValue||l.doubleValue),g=ae(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(s,t);case 3:return _E(s.timestampValue,t.timestampValue);case 4:return _E(hu(s),hu(t));case 5:return Rt(s.stringValue,t.stringValue);case 6:return function(l,c){const d=Gr(l),g=Gr(c);return d.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const E=Rt(d[p],g[p]);if(E!==0)return E}return Rt(d.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Rt(ae(l.latitude),ae(c.latitude));return d!==0?d:Rt(ae(l.longitude),ae(c.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return yE(s.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,p,E;const A=l.fields||{},I=c.fields||{},k=(d=A.value)===null||d===void 0?void 0:d.arrayValue,H=(g=I.value)===null||g===void 0?void 0:g.arrayValue,Y=Rt(((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0,((E=H==null?void 0:H.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:yE(k,H)}(s.mapValue,t.mapValue);case 11:return function(l,c){if(l===Ur.mapValue&&c===Ur.mapValue)return 0;if(l===Ur.mapValue)return 1;if(c===Ur.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const I=Rt(g[A],E[A]);if(I!==0)return I;const k=Hr(d[g[A]],p[E[A]]);if(k!==0)return k}return Rt(g.length,E.length)}(s.mapValue,t.mapValue);default:throw mt()}}function _E(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Rt(s,t);const e=Ji(s),r=Ji(t),a=Rt(e.seconds,r.seconds);return a!==0?a:Rt(e.nanos,r.nanos)}function yE(s,t){const e=s.values||[],r=t.values||[];for(let a=0;a<e.length&&a<r.length;++a){const l=Hr(e[a],r[a]);if(l)return l}return Rt(e.length,r.length)}function _o(s){return $m(s)}function $m(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=Ji(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return Gr(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return lt.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",a=!0;for(const l of e.values||[])a?a=!1:r+=",",r+=$m(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${$m(e.fields[c])}`;return a+"}"}(s.mapValue):mt()}function Pg(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Jm(s){return!!s&&"integerValue"in s}function du(s){return!!s&&"arrayValue"in s}function vE(s){return!!s&&"nullValue"in s}function EE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ph(s){return!!s&&"mapValue"in s}function Wh(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function tu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ia(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=tu(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tu(s.arrayValue.values[e]);return t}return Object.assign({},s)}function K0(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Q0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RD(s){return"nullValue"in s?gh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Pg(Xs.empty(),lt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Wh(s)?Q0:{mapValue:{}}:mt()}function CD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Pg(Xs.empty(),lt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Q0:"mapValue"in s?Wh(s)?{mapValue:{}}:Ur:mt()}function TE(s,t){const e=Hr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function AE(s,t){const e=Hr(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.value=t}static empty(){return new sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!ph(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tu(e)}setAll(t){let e=ue.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,r,a),r={},a=[],e=d.popLast()}c?r[d.lastSegment()]=tu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,a)}delete(t){const e=this.field(t.popLast());ph(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=e.mapValue.fields[t.get(r)];ph(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,r){ia(e,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new sn(tu(this.value))}}function Y0(s){const t=[];return ia(s.fields,(e,r)=>{const a=new ue([e]);if(ph(r)){const l=Y0(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Ln(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,e,r,a,l,c,d){this.key=t,this.documentType=e,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new pe(t,0,Et.min(),Et.min(),Et.min(),sn.empty(),0)}static newFoundDocument(t,e,r,a){return new pe(t,1,e,Et.min(),r,a,0)}static newNoDocument(t,e){return new pe(t,2,e,Et.min(),Et.min(),sn.empty(),0)}static newUnknownDocument(t,e){return new pe(t,3,e,Et.min(),Et.min(),sn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,e){this.position=t,this.inclusive=e}}function bE(s,t,e){let r=0;for(let a=0;a<s.position.length;a++){const l=t[a],c=s.position[a];if(l.field.isKeyField()?r=lt.comparator(lt.fromName(c.referenceValue),e.key):r=Hr(c,e.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function SE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!gi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t,e="asc"){this.field=t,this.dir=e}}function DD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{}class kt extends X0{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new xD(t,e,r):e==="array-contains"?new ND(t,r):e==="in"?new eA(t,r):e==="not-in"?new MD(t,r):e==="array-contains-any"?new PD(t,r):new kt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new VD(t,r):new OD(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Hr(e,this.value)):e!==null&&$s(this.value)===$s(e)&&this.matchesComparison(Hr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends X0{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Wt(t,e)}matches(t){return vo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vo(s){return s.op==="and"}function Zm(s){return s.op==="or"}function kg(s){return $0(s)&&vo(s)}function $0(s){for(const t of s.filters)if(t instanceof Wt)return!1;return!0}function Wm(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+_o(s.value);if(kg(s))return s.filters.map(t=>Wm(t)).join(",");{const t=s.filters.map(e=>Wm(e)).join(",");return`${s.op}(${t})`}}function J0(s,t){return s instanceof kt?function(r,a){return a instanceof kt&&r.op===a.op&&r.field.isEqual(a.field)&&gi(r.value,a.value)}(s,t):s instanceof Wt?function(r,a){return a instanceof Wt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&J0(c,a.filters[d]),!0):!1}(s,t):void mt()}function Z0(s,t){const e=s.filters.concat(t);return Wt.create(e,s.op)}function W0(s){return s instanceof kt?function(e){return`${e.field.canonicalString()} ${e.op} ${_o(e.value)}`}(s):s instanceof Wt?function(e){return e.op.toString()+" {"+e.getFilters().map(W0).join(" ,")+"}"}(s):"Filter"}class xD extends kt{constructor(t,e,r){super(t,e,r),this.key=lt.fromName(r.referenceValue)}matches(t){const e=lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class VD extends kt{constructor(t,e){super(t,"in",e),this.keys=tA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class OD extends kt{constructor(t,e){super(t,"not-in",e),this.keys=tA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function tA(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>lt.fromName(r.referenceValue))}class ND extends kt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return du(e)&&fu(e.arrayValue,this.value)}}class eA extends kt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&fu(this.value.arrayValue,e)}}class MD extends kt{constructor(t,e){super(t,"not-in",e)}matches(t){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!fu(this.value.arrayValue,e)}}class PD extends kt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!du(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t,e=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function tg(s,t=null,e=[],r=[],a=null,l=null,c=null){return new kD(s,t,e,r,a,l,c)}function Js(s){const t=wt(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Wm(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Zh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>_o(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>_o(r)).join(",")),t.ue=e}return t.ue}function Au(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!DD(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!J0(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!SE(s.startAt,t.startAt)&&SE(s.endAt,t.endAt)}function Nh(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Mh(s,t){return s.filters.filter(e=>e instanceof kt&&e.field.isEqual(t))}function IE(s,t,e){let r=gh,a=!0;for(const l of Mh(s,t)){let c=gh,d=!0;switch(l.op){case"<":case"<=":c=RD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=gh}TE({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];TE({value:r,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(r=c,a=e.inclusive);break}}return{value:r,inclusive:a}}function wE(s,t,e){let r=Ur,a=!0;for(const l of Mh(s,t)){let c=Ur,d=!0;switch(l.op){case">=":case">":c=CD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Ur}AE({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];AE({value:r,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(r=c,a=e.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t,e=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UD(s,t,e,r,a,l,c,d){return new tf(s,t,e,r,a,l,c,d)}function Ug(s){return new tf(s)}function RE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function LD(s){return s.collectionGroup!==null}function eu(s){const t=wt(s);if(t.ce===null){t.ce=[];const e=new Set;for(const l of t.explicitOrderBy)t.ce.push(l),e.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new te(ue.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.ce.push(new Oh(l,r))}),e.has(ue.keyField().canonicalString())||t.ce.push(new Oh(ue.keyField(),r))}return t.ce}function Bn(s){const t=wt(s);return t.le||(t.le=BD(t,eu(s))),t.le}function BD(s,t){if(s.limitType==="F")return tg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Oh(a.field,l)});const e=s.endAt?new yo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new yo(s.startAt.position,s.startAt.inclusive):null;return tg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function eg(s,t,e){return new tf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function ef(s,t){return Au(Bn(s),Bn(t))&&s.limitType===t.limitType}function nA(s){return`${Js(Bn(s))}|lt:${s.limitType}`}function io(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(a=>W0(a)).join(", ")}]`),Zh(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>_o(a)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>_o(a)).join(",")),`Target(${r})`}(Bn(s))}; limitType=${s.limitType})`}function bu(s,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):lt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,t)&&function(r,a){for(const l of eu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const p=bE(c,d,g);return c.inclusive?p<=0:p<0}(r.startAt,eu(r),a)||r.endAt&&!function(c,d,g){const p=bE(c,d,g);return c.inclusive?p>=0:p>0}(r.endAt,eu(r),a))}(s,t)}function zD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function iA(s){return(t,e)=>{let r=!1;for(const a of eu(s)){const l=jD(a,t,e);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function jD(s,t,e){const r=s.field.isKeyField()?lt.comparator(t.key,e.key):function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?Hr(g,p):mt()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[e]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){ia(this.inner,(e,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return G0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new oe(lt.comparator);function Tn(){return qD}const rA=new oe(lt.comparator);function Xl(...s){let t=rA;for(const e of s)t=t.insert(e.key,e);return t}function sA(s){let t=rA;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function fi(){return nu()}function aA(){return nu()}function nu(){return new Xr(s=>s.toString(),(s,t)=>s.isEqual(t))}const FD=new oe(lt.comparator),GD=new te(lt.comparator);function xt(...s){let t=GD;for(const e of s)t=t.add(e);return t}const HD=new te(Rt);function KD(){return HD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(t)?"-0":t}}function oA(s){return{integerValue:""+s}}function QD(s,t){return sD(t)?oA(t):Lg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this._=void 0}}function YD(s,t,e){return s instanceof mu?function(a,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ng(l)&&(l=Mg(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(e,t):s instanceof Eo?uA(s,t):s instanceof To?cA(s,t):function(a,l){const c=lA(a,l),d=CE(c)+CE(a.Pe);return Jm(c)&&Jm(a.Pe)?oA(d):Lg(a.serializer,d)}(s,t)}function XD(s,t,e){return s instanceof Eo?uA(s,t):s instanceof To?cA(s,t):e}function lA(s,t){return s instanceof gu?function(r){return Jm(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class mu extends nf{}class Eo extends nf{constructor(t){super(),this.elements=t}}function uA(s,t){const e=hA(t);for(const r of s.elements)e.some(a=>gi(a,r))||e.push(r);return{arrayValue:{values:e}}}class To extends nf{constructor(t){super(),this.elements=t}}function cA(s,t){let e=hA(t);for(const r of s.elements)e=e.filter(a=>!gi(a,r));return{arrayValue:{values:e}}}class gu extends nf{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function CE(s){return ae(s.integerValue||s.doubleValue)}function hA(s){return du(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,e){this.field=t,this.transform=e}}function JD(s,t){return s.field.isEqual(t.field)&&function(r,a){return r instanceof Eo&&a instanceof Eo||r instanceof To&&a instanceof To?po(r.elements,a.elements,gi):r instanceof gu&&a instanceof gu?gi(r.Pe,a.Pe):r instanceof mu&&a instanceof mu}(s.transform,t.transform)}class ZD{constructor(t,e){this.version=t,this.transformResults=e}}class An{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new An}static exists(t){return new An(void 0,t)}static updateTime(t){return new An(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _h(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class rf{}function fA(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Bg(s.key,An.none()):new Su(s.key,s.data,An.none());{const e=s.data,r=sn.empty();let a=new te(ue.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new $r(s.key,r,new Ln(a.toArray()),An.none())}}function WD(s,t,e){s instanceof Su?function(a,l,c){const d=a.value.clone(),g=xE(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,t,e):s instanceof $r?function(a,l,c){if(!_h(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=xE(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(dA(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(s,t,e):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function iu(s,t,e,r){return s instanceof Su?function(l,c,d,g){if(!_h(l.precondition,c))return d;const p=l.value.clone(),E=VE(l.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,t,e,r):s instanceof $r?function(l,c,d,g){if(!_h(l.precondition,c))return d;const p=VE(l.fieldTransforms,g,c),E=c.data;return E.setAll(dA(l)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(s,t,e,r):function(l,c,d){return _h(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,t,e)}function tx(s,t){let e=null;for(const r of s.fieldTransforms){const a=t.data.field(r.field),l=lA(r.transform,a||null);l!=null&&(e===null&&(e=sn.empty()),e.set(r.field,l))}return e||null}function DE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&po(r,a,(l,c)=>JD(l,c))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Su extends rf{constructor(t,e,r,a=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class $r extends rf{constructor(t,e,r,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dA(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function xE(s,t,e){const r=new Map;pt(s.length===e.length);for(let a=0;a<e.length;a++){const l=s[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,XD(c,d,e[a]))}return r}function VE(s,t,e){const r=new Map;for(const a of s){const l=a.transform,c=e.data.field(a.field);r.set(a.field,YD(l,c,t))}return r}class Bg extends rf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mA extends rf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t,e,r,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&WD(l,t,r[a])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=iu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=iu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=aA();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(a.key)?null:d;const g=fA(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),xt())}isEqual(t){return this.batchId===t.batchId&&po(this.mutations,t.mutations,(e,r)=>DE(e,r))&&po(this.baseMutations,t.baseMutations,(e,r)=>DE(e,r))}}class jg{constructor(t,e,r,a){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=a}static from(t,e,r){pt(t.mutations.length===r.length);let a=function(){return FD}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new jg(t,e,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se,zt;function nx(s){switch(s){default:return mt();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function gA(s){if(s===void 0)return rn("GRPC error has no .code"),J.UNKNOWN;switch(s){case Se.OK:return J.OK;case Se.CANCELLED:return J.CANCELLED;case Se.UNKNOWN:return J.UNKNOWN;case Se.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Se.INTERNAL:return J.INTERNAL;case Se.UNAVAILABLE:return J.UNAVAILABLE;case Se.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Se.NOT_FOUND:return J.NOT_FOUND;case Se.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Se.ABORTED:return J.ABORTED;case Se.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Se.DATA_LOSS:return J.DATA_LOSS;default:return mt()}}(zt=Se||(Se={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Fs([4294967295,4294967295],0);function OE(s){const t=ix().encode(s),e=new R0;return e.update(t),new Uint8Array(e.digest())}function NE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Fs([e,r],0),new Fs([a,l],0)]}class Fg{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new $l(`Invalid padding: ${e}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new $l(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Fs.fromNumber(this.Ie)}Ee(t,e,r){let a=t.add(e.multiply(Fs.fromNumber(r)));return a.compare(rx)===1&&(a=new Fs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=OE(t),[r,a]=NE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,a,l);if(!this.de(c))return!1}return!0}static create(t,e,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Fg(l,a,e);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.Ie===0)return;const e=OE(t),[r,a]=NE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,a,l);this.Ae(c)}}Ae(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,e,r,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const a=new Map;return a.set(t,Iu.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new sf(Et.min(),a,new oe(Rt),Tn(),xt())}}class Iu{constructor(t,e,r,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Iu(r,e,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,e,r,a){this.Re=t,this.removedTargetIds=e,this.key=r,this.Ve=a}}class pA{constructor(t,e){this.targetId=t,this.me=e}}class _A{constructor(t,e,r=Ie.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=a}}class ME{constructor(){this.fe=0,this.ge=kE(),this.pe=Ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=xt(),e=xt(),r=xt();return this.ge.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:r=r.add(a);break;default:mt()}}),new Iu(this.pe,this.ye,t,e,r)}Ce(){this.we=!1,this.ge=kE()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Tn(),this.qe=PE(),this.Qe=new oe(Rt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const r=this.Ge(e);switch(t.state){case 0:this.ze(e)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),r.De(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((r,a)=>{this.ze(a)&&e(a)})}He(t){const e=t.targetId,r=t.me.count,a=this.Je(e);if(a){const l=a.target;if(Nh(l))if(r===0){const c=new lt(l.path);this.Ue(e,c,pe.newNoDocument(c,Et.min()))}else pt(r===1);else{const c=this.Ye(e);if(c!==r){const d=this.Ze(t),g=d?this.Xe(d,t,c):1;if(g!==0){this.je(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,p)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=e;let c,d;try{c=Gr(r).toUint8Array()}catch(g){if(g instanceof H0)return Ys("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Fg(c,a,l)}catch(g){return Ys(g instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ie===0?null:d}Xe(t,e,r){return e.me.count===r-this.nt(t,e.targetId)?0:2}nt(t,e){const r=this.Le.getRemoteKeysForTarget(e);let a=0;return r.forEach(l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.Ue(e,l,null),a++)}),a}rt(t){const e=new Map;this.Be.forEach((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Nh(d.target)){const g=new lt(d.target.path);this.ke.get(g)!==null||this.it(c,g)||this.Ue(c,g,pe.newNoDocument(g,t))}l.be&&(e.set(c,l.ve()),l.Ce())}});let r=xt();this.qe.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const p=this.Je(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(t));const a=new sf(t,e,this.Qe,this.ke,r);return this.ke=Tn(),this.qe=PE(),this.Qe=new oe(Rt),a}$e(t,e){if(!this.ze(t))return;const r=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,r),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,r){if(!this.ze(t))return;const a=this.Ge(t);this.it(t,e)?a.Fe(e,1):a.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),r&&(this.ke=this.ke.insert(e,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new ME,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new te(Rt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ME),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function PE(){return new oe(lt.comparator)}function kE(){return new oe(lt.comparator)}const ax={asc:"ASCENDING",desc:"DESCENDING"},ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lx={and:"AND",or:"OR"};class ux{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ng(s,t){return s.useProto3Json||Zh(t)?t:{value:t}}function Ao(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yA(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function cx(s,t){return Ao(s,t.toTimestamp())}function on(s){return pt(!!s),Et.fromTimestamp(function(e){const r=Ji(e);return new he(r.seconds,r.nanos)}(s))}function Gg(s,t){return ig(s,t).canonicalString()}function ig(s,t){const e=function(a){return new Yt(["projects",a.projectId,"databases",a.database])}(s).child("documents");return t===void 0?e:e.child(t)}function vA(s){const t=Yt.fromString(s);return pt(CA(t)),t}function Ph(s,t){return Gg(s.databaseId,t.path)}function Gs(s,t){const e=vA(t);if(e.get(1)!==s.databaseId.projectId)throw new ft(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new ft(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new lt(AA(e))}function EA(s,t){return Gg(s.databaseId,t)}function TA(s){const t=vA(s);return t.length===4?Yt.emptyPath():AA(t)}function rg(s){return new Yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function AA(s){return pt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function UE(s,t,e){return{name:Ph(s,t),fields:e.value.mapValue.fields}}function hx(s,t,e){const r=Gs(s,t.name),a=on(t.updateTime),l=t.createTime?on(t.createTime):Et.min(),c=new sn({mapValue:{fields:t.fields}}),d=pe.newFoundDocument(r,a,l,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function fx(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:mt()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,E){return p.useProto3Json?(pt(E===void 0||typeof E=="string"),Ie.fromBase64String(E||"")):(pt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Ie.fromUint8Array(E||new Uint8Array))}(s,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const E=p.code===void 0?J.UNKNOWN:gA(p.code);return new ft(E,p.message||"")}(c);e=new _A(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Gs(s,r.document.name),l=on(r.document.updateTime),c=r.document.createTime?on(r.document.createTime):Et.min(),d=new sn({mapValue:{fields:r.document.fields}}),g=pe.newFoundDocument(a,l,c,d),p=r.targetIds||[],E=r.removedTargetIds||[];e=new yh(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Gs(s,r.document),l=r.readTime?on(r.readTime):Et.min(),c=pe.newNoDocument(a,l),d=r.removedTargetIds||[];e=new yh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Gs(s,r.document),l=r.removedTargetIds||[];e=new yh([],l,a,null)}else{if(!("filter"in t))return mt();{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new ex(a,l),d=r.targetId;e=new pA(d,c)}}return e}function kh(s,t){let e;if(t instanceof Su)e={update:UE(s,t.key,t.value)};else if(t instanceof Bg)e={delete:Ph(s,t.key)};else if(t instanceof $r)e={update:UE(s,t.key,t.data),updateMask:yx(t.fieldMask)};else{if(!(t instanceof mA))return mt();e={verify:Ph(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof mu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof To)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gu)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw mt()}(0,r))),t.precondition.isNone||(e.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:cx(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:mt()}(s,t.precondition)),e}function sg(s,t){const e=t.currentDocument?function(l){return l.updateTime!==void 0?An.updateTime(on(l.updateTime)):l.exists!==void 0?An.exists(l.exists):An.none()}(t.currentDocument):An.none(),r=t.updateTransforms?t.updateTransforms.map(a=>function(c,d){let g=null;if("setToServerValue"in d)pt(d.setToServerValue==="REQUEST_TIME"),g=new mu;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];g=new Eo(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];g=new To(E)}else"increment"in d?g=new gu(c,d.increment):mt();const p=ue.fromServerFormat(d.fieldPath);return new $D(p,g)}(s,a)):[];if(t.update){t.update.name;const a=Gs(s,t.update.name),l=new sn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=function(g){const p=g.fieldPaths||[];return new Ln(p.map(E=>ue.fromServerFormat(E)))}(t.updateMask);return new $r(a,l,c,e,r)}return new Su(a,l,e,r)}if(t.delete){const a=Gs(s,t.delete);return new Bg(a,e)}if(t.verify){const a=Gs(s,t.verify);return new mA(a,e)}return mt()}function dx(s,t){return s&&s.length>0?(pt(t!==void 0),s.map(e=>function(a,l){let c=a.updateTime?on(a.updateTime):on(l);return c.isEqual(Et.min())&&(c=on(l)),new ZD(c,a.transformResults||[])}(e,t))):[]}function bA(s,t){return{documents:[EA(s,t.path)]}}function SA(s,t){const e={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=EA(s,a);const l=function(p){if(p.length!==0)return RA(Wt.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(E=>function(I){return{field:ro(I.field),direction:gx(I.dir)}}(E))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=ng(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{_t:e,parent:a}}function IA(s){let t=TA(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let a=null;if(r>0){pt(r===1);const E=e.from[0];E.allDescendants?a=E.collectionId:t=t.child(E.collectionId)}let l=[];e.where&&(l=function(A){const I=wA(A);return I instanceof Wt&&kg(I)?I.getFilters():[I]}(e.where));let c=[];e.orderBy&&(c=function(A){return A.map(I=>function(H){return new Oh(so(H.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(I))}(e.orderBy));let d=null;e.limit&&(d=function(A){let I;return I=typeof A=="object"?A.value:A,Zh(I)?null:I}(e.limit));let g=null;e.startAt&&(g=function(A){const I=!!A.before,k=A.values||[];return new yo(k,I)}(e.startAt));let p=null;return e.endAt&&(p=function(A){const I=!A.before,k=A.values||[];return new yo(k,I)}(e.endAt)),UD(t,a,c,l,d,"F",g,p)}function mx(s,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function wA(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=so(e.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=so(e.unaryFilter.field);return kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=so(e.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=so(e.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(s):s.fieldFilter!==void 0?function(e){return kt.create(so(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Wt.create(e.compositeFilter.filters.map(r=>wA(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return mt()}}(e.compositeFilter.op))}(s):mt()}function gx(s){return ax[s]}function px(s){return ox[s]}function _x(s){return lx[s]}function ro(s){return{fieldPath:s.canonicalString()}}function so(s){return ue.fromServerFormat(s.fieldPath)}function RA(s){return s instanceof kt?function(e){if(e.op==="=="){if(EE(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NAN"}};if(vE(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(EE(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NAN"}};if(vE(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(e.field),op:px(e.op),value:e.value}}}(s):s instanceof Wt?function(e){const r=e.getFilters().map(a=>RA(a));return r.length===1?r[0]:{compositeFilter:{op:_x(e.op),filters:r}}}(s):mt()}function yx(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function CA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,e,r,a,l=Et.min(),c=Et.min(),d=Ie.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Qi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(t){this.ct=t}}function vx(s,t){let e;if(t.document)e=hx(s.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=lt.fromSegments(t.noDocument.path),a=Ws(t.noDocument.readTime);e=pe.newNoDocument(r,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const r=lt.fromSegments(t.unknownDocument.path),a=Ws(t.unknownDocument.version);e=pe.newUnknownDocument(r,a)}}return t.readTime&&e.setReadTime(function(a){const l=new he(a[0],a[1]);return Et.fromTimestamp(l)}(t.readTime)),e}function LE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Uh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(l,c){return{name:Ph(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Ao(l,c.version.toTimestamp()),createTime:Ao(l,c.createTime.toTimestamp())}}(s.ct,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Zs(t.version)};else{if(!t.isUnknownDocument())return mt();r.unknownDocument={path:e.path.toArray(),version:Zs(t.version)}}return r}function Uh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Zs(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ws(s){const t=new he(s.seconds,s.nanoseconds);return Et.fromTimestamp(t)}function Ls(s,t){const e=(t.baseMutations||[]).map(l=>sg(s.ct,l));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const d=t.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const r=t.mutations.map(l=>sg(s.ct,l)),a=he.fromMillis(t.localWriteTimeMs);return new zg(t.batchId,a,e,r)}function Jl(s){const t=Ws(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Ws(s.lastLimboFreeSnapshotVersion):Et.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return pt(l.documents.length===1),Bn(Ug(TA(l.documents[0])))}(s.query):function(l){return Bn(IA(l))}(s.query),new Qi(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Ie.fromBase64String(s.resumeToken))}function xA(s,t){const e=Zs(t.snapshotVersion),r=Zs(t.lastLimboFreeSnapshotVersion);let a;a=Nh(t.target)?bA(s.ct,t.target):SA(s.ct,t.target)._t;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Js(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function VA(s){const t=IA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?eg(t,t.limit,"L"):t}function Vm(s,t){return new qg(t.largestBatchId,sg(s.ct,t.overlayMutation))}function BE(s,t){const e=t.path.lastSegment();return[s,an(t.path.popLast()),e]}function zE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Zs(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{getBundleMetadata(t,e){return jE(t).get(e).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ws(l.createTime),version:l.version}}(r)})}saveBundleMetadata(t,e){return jE(t).put(function(a){return{bundleId:a.id,createTime:Zs(on(a.createTime)),version:a.version}}(e))}getNamedQuery(t,e){return qE(t).get(e).next(r=>{if(r)return function(l){return{name:l.name,query:VA(l.bundledQuery),readTime:Ws(l.readTime)}}(r)})}saveNamedQuery(t,e){return qE(t).put(function(a){return{name:a.name,readTime:Zs(on(a.readTime)),bundledQuery:a.bundledQuery}}(e))}}function jE(s){return Oe(s,"bundles")}function qE(s){return Oe(s,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const r=e.uid||"";return new af(t,r)}getOverlay(t,e){return Fl(t).get(BE(this.userId,e)).next(r=>r?Vm(this.serializer,r):null)}getOverlays(t,e){const r=fi();return z.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,e,r){const a=[];return r.forEach((l,c)=>{const d=new qg(e,c);a.push(this.ht(t,d))}),z.waitFor(a)}removeOverlaysForBatchId(t,e,r){const a=new Set;e.forEach(c=>a.add(an(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Fl(t).j("collectionPathOverlayIndex",d))}),z.waitFor(l)}getOverlaysForCollection(t,e,r){const a=fi(),l=an(e),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Fl(t).U("collectionPathOverlayIndex",c).next(d=>{for(const g of d){const p=Vm(this.serializer,g);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(t,e,r,a){const l=fi();let c;const d=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Fl(t).J({index:"collectionGroupOverlayIndex",range:d},(g,p,E)=>{const A=Vm(this.serializer,p);l.size()<a||A.largestBatchId===c?(l.set(A.getKey(),A),c=A.largestBatchId):E.done()}).next(()=>l)}ht(t,e){return Fl(t).put(function(a,l,c){const[d,g,p]=BE(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:kh(a.ct,c.mutation)}}(this.serializer,this.userId,e))}}function Fl(s){return Oe(s,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{Pt(t){return Oe(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?Ie.fromUint8Array(r):Ie.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ae(t.integerValue));else if("doubleValue"in t){const r=ae(t.doubleValue);isNaN(r)?this.dt(e,13):(this.dt(e,15),cu(r)?e.At(0):e.At(r))}else if("timestampValue"in t){let r=t.timestampValue;this.dt(e,20),typeof r=="string"&&(r=Ji(r)),e.Rt(`${r.seconds||""}`),e.At(r.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Gr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.dt(e,45),e.At(r.latitude||0),e.At(r.longitude||0)}else"mapValue"in t?K0(t)?this.dt(e,Number.MAX_SAFE_INTEGER):Wh(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):mt()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const r=t.fields||{};this.dt(e,55);for(const a of Object.keys(r))this.Vt(a,e),this.Tt(r[a],e)}wt(t,e){var r,a;const l=t.fields||{};this.dt(e,53);const c="value",d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.dt(e,15),e.At(ae(d)),this.Vt(c,e),this.Tt(l[c],e)}bt(t,e){const r=t.values||[];this.dt(e,50);for(const a of r)this.Tt(a,e)}yt(t,e){this.dt(e,37),lt.fromName(t).path.forEach(r=>{this.dt(e,60),this.Dt(r,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}Bs.vt=new Bs;function Ax(s){if(s===0)return 8;let t=0;return s>>4==0&&(t+=4,s<<=4),s>>6==0&&(t+=2,s<<=2),s>>7==0&&(t+=1),t}function FE(s){const t=64-function(r){let a=0;for(let l=0;l<8;++l){const c=Ax(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(t/8)}class bx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ft(r.value),r=e.next();this.Mt()}xt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ot(r.value),r=e.next();this.Nt()}Lt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const a=e.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const a=e.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(t){const e=this.qt(t),r=FE(e);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let a=e.length-r;a<e.length;++a)this.buffer[this.position++]=255&e[a]}Kt(t){const e=this.qt(t),r=FE(e);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let a=e.length-r;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const e=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(t),r=(128&e[0])!=0;e[0]^=r?255:128;for(let a=1;a<e.length;++a)e[a]^=r?255:0;return e}Ft(t){const e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){const e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class Sx{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Ix{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Gl{constructor(){this.jt=new bx,this.Ht=new Sx(this.jt),this.Jt=new Ix(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e,r,a){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=a}Zt(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new zs(this.indexId,this.documentKey,this.arrayValue,r)}}function xr(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=GE(s.arrayValue,t.arrayValue),e!==0?e:(e=GE(s.directionalValue,t.directionalValue),e!==0?e:lt.comparator(s.documentKey,t.documentKey)))}function GE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(t){this.Xt=new te((e,r)=>ue.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const e of t.filters){const r=e;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(t){if(pt(t.collectionGroup===this.collectionId),this.nn)return!1;const e=Ym(t);if(e!==void 0&&!this.sn(e))return!1;const r=ks(t);let a=new Set,l=0,c=0;for(;l<r.length&&this.sn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const g=r[l];if(!this.on(d,g)||!this._n(this.en[c++],g))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.en.length||!this._n(this.en[c++],d))return!1}return!0}an(){if(this.nn)return null;let t=new te(ue.comparator);const e=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new dh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new dh(r.field,0))}for(const r of this.en)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new dh(r.field,r.dir==="asc"?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,e,uu.empty())}sn(t){for(const e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(s){var t,e;if(pt(s instanceof kt||s instanceof Wt),s instanceof kt){if(s instanceof eA){const a=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(l=>kt.create(s.field,"==",l)))||[];return Wt.create(a,"or")}return s}const r=s.filters.map(a=>OA(a));return Wt.create(r,s.op)}function wx(s){if(s.getFilters().length===0)return[];const t=lg(OA(s));return pt(NA(t)),ag(t)||og(t)?[t]:t.getFilters()}function ag(s){return s instanceof kt}function og(s){return s instanceof Wt&&kg(s)}function NA(s){return ag(s)||og(s)||function(e){if(e instanceof Wt&&Zm(e)){for(const r of e.getFilters())if(!ag(r)&&!og(r))return!1;return!0}return!1}(s)}function lg(s){if(pt(s instanceof kt||s instanceof Wt),s instanceof kt)return s;if(s.filters.length===1)return lg(s.filters[0]);const t=s.filters.map(r=>lg(r));let e=Wt.create(t,s.op);return e=Lh(e),NA(e)?e:(pt(e instanceof Wt),pt(vo(e)),pt(e.filters.length>1),e.filters.reduce((r,a)=>Hg(r,a)))}function Hg(s,t){let e;return pt(s instanceof kt||s instanceof Wt),pt(t instanceof kt||t instanceof Wt),e=s instanceof kt?t instanceof kt?function(a,l){return Wt.create([a,l],"and")}(s,t):KE(s,t):t instanceof kt?KE(t,s):function(a,l){if(pt(a.filters.length>0&&l.filters.length>0),vo(a)&&vo(l))return Z0(a,l.getFilters());const c=Zm(a)?a:l,d=Zm(a)?l:a,g=c.filters.map(p=>Hg(p,d));return Wt.create(g,"or")}(s,t),Lh(e)}function KE(s,t){if(vo(t))return Z0(t,s.getFilters());{const e=t.filters.map(r=>Hg(s,r));return Wt.create(e,"or")}}function Lh(s){if(pt(s instanceof kt||s instanceof Wt),s instanceof kt)return s;const t=s.getFilters();if(t.length===1)return Lh(t[0]);if($0(s))return s;const e=t.map(a=>Lh(a)),r=[];return e.forEach(a=>{a instanceof kt?r.push(a):a instanceof Wt&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Wt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.un=new Kg}addToCollectionParentIndex(t,e){return this.un.add(e),z.resolve()}getCollectionParents(t,e){return z.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return z.resolve()}deleteFieldIndex(t,e){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,e){return z.resolve()}getDocumentsMatchingTarget(t,e){return z.resolve(null)}getIndexType(t,e){return z.resolve(0)}getFieldIndexes(t,e){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,e){return z.resolve(bn.min())}getMinOffsetFromCollectionGroup(t,e){return z.resolve(bn.min())}updateCollectionGroup(t,e,r){return z.resolve()}updateIndexEntries(t,e){return z.resolve()}}class Kg{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e]||new te(Yt.comparator),l=!a.has(r);return this.index[e]=a.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e];return a&&a.has(r)}getEntries(t){return(this.index[t]||new te(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Uint8Array(0);class Cx{constructor(t,e){this.databaseId=e,this.cn=new Kg,this.ln=new Xr(r=>Js(r),(r,a)=>Au(r,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){const r=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});const l={collectionId:r,parent:an(a)};return QE(t).put(l)}return z.resolve()}getCollectionParents(t,e){const r=[],a=IDBKeyRange.bound([e,""],[P0(e),""],!1,!0);return QE(t).U(a).next(l=>{for(const c of l){if(c.collectionId!==e)break;r.push(hi(c.parent))}return r})}addFieldIndex(t,e){const r=Hl(t),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete a.indexId;const l=r.add(a);if(e.indexState){const c=Wa(t);return l.next(d=>{c.put(zE(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const r=Hl(t),a=Wa(t),l=Za(t);return r.delete(e.indexId).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Hl(t),r=Za(t),a=Wa(t);return e.j().next(()=>r.j()).next(()=>a.j())}createTargetIndexes(t,e){return z.forEach(this.hn(e),r=>this.getIndexType(t,r).next(a=>{if(a===0||a===1){const l=new HE(r).an();if(l!=null)return this.addFieldIndex(t,l)}}))}getDocumentsMatchingTarget(t,e){const r=Za(t);let a=!0;const l=new Map;return z.forEach(this.hn(e),c=>this.Pn(t,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=xt();const d=[];return z.forEach(l,(g,p)=>{tt("IndexedDbIndexManager",`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`}(g)} to execute ${Js(e)}`);const E=function(W,ct){const ut=Ym(ct);if(ut===void 0)return null;for(const _t of Mh(W,ut.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(p,g),A=function(W,ct){const ut=new Map;for(const _t of ks(ct))for(const x of Mh(W,_t.fieldPath))switch(x.op){case"==":case"in":ut.set(_t.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ut.set(_t.fieldPath.canonicalString(),x.value),Array.from(ut.values())}return null}(p,g),I=function(W,ct){const ut=[];let _t=!0;for(const x of ks(ct)){const S=x.kind===0?IE(W,x.fieldPath,W.startAt):wE(W,x.fieldPath,W.startAt);ut.push(S.value),_t&&(_t=S.inclusive)}return new yo(ut,_t)}(p,g),k=function(W,ct){const ut=[];let _t=!0;for(const x of ks(ct)){const S=x.kind===0?wE(W,x.fieldPath,W.endAt):IE(W,x.fieldPath,W.endAt);ut.push(S.value),_t&&(_t=S.inclusive)}return new yo(ut,_t)}(p,g),H=this.In(g,p,I),Y=this.In(g,p,k),q=this.Tn(g,p,A),st=this.En(g.indexId,E,H,I.inclusive,Y,k.inclusive,q);return z.forEach(st,it=>r.G(it,e.limit).next(W=>{W.forEach(ct=>{const ut=lt.fromSegments(ct.documentKey);c.has(ut)||(c=c.add(ut),d.push(ut))})}))}).next(()=>d)}return z.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=wx(Wt.create(t.filters,"and")).map(r=>tg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,r,a,l,c,d){const g=(e!=null?e.length:1)*Math.max(r.length,l.length),p=g/(e!=null?e.length:1),E=[];for(let A=0;A<g;++A){const I=e?this.dn(e[A/p]):ih,k=this.An(t,I,r[A%p],a),H=this.Rn(t,I,l[A%p],c),Y=d.map(q=>this.An(t,I,q,!0));E.push(...this.createRange(k,H,Y))}return E}An(t,e,r,a){const l=new zs(t,lt.empty(),e,r);return a?l:l.Zt()}Rn(t,e,r,a){const l=new zs(t,lt.empty(),e,r);return a?l.Zt():l}Pn(t,e){const r=new HE(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next(l=>{let c=null;for(const d of l)r.rn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let r=2;const a=this.hn(e);return z.forEach(a,l=>this.Pn(t,l).next(c=>{c?r!==0&&c.fields.length<function(g){let p=new te(ue.comparator),E=!1;for(const A of g.filters)for(const I of A.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?E=!0:p=p.add(I.field));for(const A of g.orderBy)A.field.isKeyField()||(p=p.add(A.field));return p.size+(E?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(e)&&a.length>1&&r===2?1:r)}Vn(t,e){const r=new Gl;for(const a of ks(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=r.Yt(a.kind);Bs.vt.It(l,c)}return r.zt()}dn(t){const e=new Gl;return Bs.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){const r=new Gl;return Bs.vt.It(Pg(this.databaseId,e),r.Yt(function(l){const c=ks(l);return c.length===0?0:c[c.length-1].kind}(t))),r.zt()}Tn(t,e,r){if(r===null)return[];let a=[];a.push(new Gl);let l=0;for(const c of ks(t)){const d=r[l++];for(const g of a)if(this.fn(e,c.fieldPath)&&du(d))a=this.gn(a,c,d);else{const p=g.Yt(c.kind);Bs.vt.It(d,p)}}return this.pn(a)}In(t,e,r){return this.Tn(t,e,r.position)}pn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].zt();return e}gn(t,e,r){const a=[...t],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const g=new Gl;g.seed(d.zt()),Bs.vt.It(c,g.Yt(e.kind)),l.push(g)}return l}fn(t,e){return!!t.filters.find(r=>r instanceof kt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=Hl(t),a=Wa(t);return(e?r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.U()).next(l=>{const c=[];return z.forEach(l,d=>a.get([d.indexId,this.uid]).next(g=>{c.push(function(E,A){const I=A?new uu(A.sequenceNumber,new bn(Ws(A.readTime),new lt(hi(A.documentKey)),A.largestBatchId)):uu.empty(),k=E.fields.map(([H,Y])=>new dh(ue.fromServerFormat(H),Y));return new Vh(E.indexId,E.collectionGroup,k,I)}(d,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Rt(r.collectionGroup,a.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const a=Hl(t),l=Wa(t);return this.yn(t).next(c=>a.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>z.forEach(d,g=>l.put(zE(g.indexId,this.uid,c,r)))))}updateIndexEntries(t,e){const r=new Map;return z.forEach(e,(a,l)=>{const c=r.get(a.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),z.forEach(d,g=>this.wn(t,a,g).next(p=>{const E=this.Sn(l,g);return p.isEqual(E)?z.resolve():this.bn(t,l,g,p,E)}))))})}Dn(t,e,r,a){return Za(t).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(r,e.key),documentKey:e.key.path.toArray()})}vn(t,e,r,a){return Za(t).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(r,e.key),e.key.path.toArray()])}wn(t,e,r){const a=Za(t);let l=new te(xr);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,e)])},(c,d)=>{l=l.add(new zs(r.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>l)}Sn(t,e){let r=new te(xr);const a=this.Vn(e,t);if(a==null)return r;const l=Ym(e);if(l!=null){const c=t.data.field(l.fieldPath);if(du(c))for(const d of c.arrayValue.values||[])r=r.add(new zs(e.indexId,t.key,this.dn(d),a))}else r=r.add(new zs(e.indexId,t.key,ih,a));return r}bn(t,e,r,a,l){tt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(g,p,E,A,I){const k=g.getIterator(),H=p.getIterator();let Y=Ja(k),q=Ja(H);for(;Y||q;){let st=!1,it=!1;if(Y&&q){const W=E(Y,q);W<0?it=!0:W>0&&(st=!0)}else Y!=null?it=!0:st=!0;st?(A(q),q=Ja(H)):it?(I(Y),Y=Ja(k)):(Y=Ja(k),q=Ja(H))}}(a,l,xr,d=>{c.push(this.Dn(t,e,r,d))},d=>{c.push(this.vn(t,e,r,d))}),z.waitFor(c)}yn(t){let e=1;return Wa(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),e=a.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,d)=>xr(c,d)).filter((c,d,g)=>!d||xr(c,g[d-1])!==0);const a=[];a.push(t);for(const c of r){const d=xr(c,t),g=xr(c,e);if(d===0)a[0]=t.Zt();else if(d>0&&g<0)a.push(c),a.push(c.Zt());else if(g>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Cn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,ih,[]],g=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,ih,[]];l.push(IDBKeyRange.bound(d,g))}return l}Cn(t,e){return xr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(YE)}getMinOffset(t,e){return z.mapArray(this.hn(e),r=>this.Pn(t,r).next(a=>a||mt())).next(YE)}}function QE(s){return Oe(s,"collectionParents")}function Za(s){return Oe(s,"indexEntries")}function Hl(s){return Oe(s,"indexConfiguration")}function Wa(s){return Oe(s,"indexState")}function YE(s){pt(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;xg(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new bn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new hn(t,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(s,t,e){const r=s.store("mutations"),a=s.store("documentMutations"),l=[],c=IDBKeyRange.only(e.batchId);let d=0;const g=r.J({range:c},(E,A,I)=>(d++,I.delete()));l.push(g.next(()=>{pt(d===1)}));const p=[];for(const E of e.mutations){const A=z0(t,E.key.path,e.batchId);l.push(a.delete(A)),p.push(E.key)}return z.waitFor(l).next(()=>p)}function Bh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw mt();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class of{constructor(t,e,r,a){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=a,this.Fn={}}static lt(t,e,r,a){pt(t.uid!=="");const l=t.isAuthenticated()?t.uid:"";return new of(l,e,r,a)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).J({index:"userMutationsIndex",range:r},(a,l,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,a){const l=ao(t),c=Vr(t);return c.add({}).next(d=>{pt(typeof d=="number");const g=new zg(d,e,r,a),p=function(k,H,Y){const q=Y.baseMutations.map(it=>kh(k.ct,it)),st=Y.mutations.map(it=>kh(k.ct,it));return{userId:H,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:q,mutations:st}}(this.serializer,this.userId,g),E=[];let A=new te((I,k)=>Rt(I.canonicalString(),k.canonicalString()));for(const I of a){const k=z0(this.userId,I.key.path,d);A=A.add(I.key.path.popLast()),E.push(c.put(p)),E.push(l.put(k,oD))}return A.forEach(I=>{E.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.Fn[d]=g.keys()}),z.waitFor(E).next(()=>g)})}lookupMutationBatch(t,e){return Vr(t).get(e).next(r=>r?(pt(r.userId===this.userId),Ls(this.serializer,r)):null)}Mn(t,e){return this.Fn[e]?z.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const a=r.keys();return this.Fn[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Vr(t).J({index:"userMutationsIndex",range:a},(c,d,g)=>{d.userId===this.userId&&(pt(d.batchId>=r),l=Ls(this.serializer,d)),g.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vr(t).J({index:"userMutationsIndex",range:e,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).U("userMutationsIndex",e).next(r=>r.map(a=>Ls(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=mh(this.userId,e.path),a=IDBKeyRange.lowerBound(r),l=[];return ao(t).J({range:a},(c,d,g)=>{const[p,E,A]=c,I=hi(E);if(p===this.userId&&e.path.isEqual(I))return Vr(t).get(A).next(k=>{if(!k)throw mt();pt(k.userId===this.userId),l.push(Ls(this.serializer,k))});g.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new te(Rt);const a=[];return e.forEach(l=>{const c=mh(this.userId,l.path),d=IDBKeyRange.lowerBound(c),g=ao(t).J({range:d},(p,E,A)=>{const[I,k,H]=p,Y=hi(k);I===this.userId&&l.path.isEqual(Y)?r=r.add(H):A.done()});a.push(g)}),z.waitFor(a).next(()=>this.xn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1,l=mh(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new te(Rt);return ao(t).J({range:c},(g,p,E)=>{const[A,I,k]=g,H=hi(I);A===this.userId&&r.isPrefixOf(H)?H.length===a&&(d=d.add(k)):E.done()}).next(()=>this.xn(t,d))}xn(t,e){const r=[],a=[];return e.forEach(l=>{a.push(Vr(t).get(l).next(c=>{if(c===null)throw mt();pt(c.userId===this.userId),r.push(Ls(this.serializer,c))}))}),z.waitFor(a).next(()=>r)}removeMutationBatch(t,e){return MA(t._e,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),z.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return z.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return ao(t).J({range:r},(l,c,d)=>{if(l[0]===this.userId){const g=hi(l[1]);a.push(g)}else d.done()}).next(()=>{pt(a.length===0)})})}containsKey(t,e){return PA(t,this.userId,e)}Nn(t){return kA(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PA(s,t,e){const r=mh(t,e.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return ao(s).J({range:l,H:!0},(d,g,p)=>{const[E,A,I]=d;E===t&&A===a&&(c=!0),p.done()}).next(()=>c)}function Vr(s){return Oe(s,"mutations")}function ao(s){return Oe(s,"documentMutations")}function kA(s){return Oe(s,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new ta(0)}static kn(){return new ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{const r=new ta(e.highestTargetId);return e.highestTargetId=r.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>Et.fromTimestamp(new he(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.qn(t).next(a=>(a.highestListenSequenceNumber=e,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.Qn(t,a)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(r=>(r.targetCount+=1,this.$n(e,r),this.Qn(t,r))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>to(t).delete(e.targetId)).next(()=>this.qn(t)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.Qn(t,r)))}removeTargets(t,e,r){let a=0;const l=[];return to(t).J((c,d)=>{const g=Jl(d);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(t,g)))}).next(()=>z.waitFor(l)).next(()=>a)}forEachTarget(t,e){return to(t).J((r,a)=>{const l=Jl(a);e(l)})}qn(t){return $E(t).get("targetGlobalKey").next(e=>(pt(e!==null),e))}Qn(t,e){return $E(t).put("targetGlobalKey",e)}Kn(t,e){return to(t).put(xA(this.serializer,e))}$n(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Js(e),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return to(t).J({range:a,index:"queryTargetsIndex"},(c,d,g)=>{const p=Jl(d);Au(e,p.target)&&(l=p,g.done())}).next(()=>l)}addMatchingKeys(t,e,r){const a=[],l=Pr(t);return e.forEach(c=>{const d=an(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(t,r,c))}),z.waitFor(a)}removeMatchingKeys(t,e,r){const a=Pr(t);return z.forEach(e,l=>{const c=an(l.path);return z.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=Pr(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),a=Pr(t);let l=xt();return a.J({range:r,H:!0},(c,d,g)=>{const p=hi(c[1]),E=new lt(p);l=l.add(E)}).next(()=>l)}containsKey(t,e){const r=an(e.path),a=IDBKeyRange.bound([r],[P0(r)],!1,!0);let l=0;return Pr(t).J({index:"documentTargetsIndex",H:!0,range:a},([c,d],g,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}ot(t,e){return to(t).get(e).next(r=>r?Jl(r):null)}}function to(s){return Oe(s,"targets")}function $E(s){return Oe(s,"targetGlobal")}function Pr(s){return Oe(s,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE([s,t],[e,r]){const a=Rt(s,e);return a===0?Rt(t,r):a}class xx{constructor(t){this.Un=t,this.buffer=new te(JE),this.Wn=0}Gn(){return++this.Wn}zn(t){const e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();JE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Vx{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){tt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Yr(e)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await na(e)}await this.Hn(3e5)})}}class Ox{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return z.resolve(Un.oe);const r=new xx(e);return this.Jn.forEachTarget(t,a=>r.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(t,a=>r.zn(a))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Jn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(XE)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let r,a,l,c,d,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,c=Date.now(),this.nthSequenceNumber(t,a))).next(A=>(r=A,d=Date.now(),this.removeTargets(t,r,e))).next(A=>(l=A,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(p=Date.now(),no()<=Pt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${A} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:A})))}}function Nx(s,t){return new Ox(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t,e){this.db=t,this.garbageCollector=Nx(this,e)}Yn(t){const e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(a=>r+a))}er(t){let e=0;return this.Zn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(r,a)=>e(a))}addReference(t,e,r){return rh(t,r)}removeReference(t,e,r){return rh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return rh(t,e)}nr(t,e){return function(a,l){let c=!1;return kA(a).Y(d=>PA(a,d,l).next(g=>(g&&(c=!0),z.resolve(!g)))).next(()=>c)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(t,(c,d)=>{if(d<=e){const g=this.nr(t,c).next(p=>{if(!p)return l++,r.getEntry(t,c).next(()=>(r.removeEntry(c,Et.min()),Pr(t).delete(function(A){return[0,an(A.path)]}(c))))});a.push(g)}}).next(()=>z.waitFor(a)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return rh(t,e)}tr(t,e){const r=Pr(t);let a,l=Un.oe;return r.J({index:"documentTargetsIndex"},([c,d],{path:g,sequenceNumber:p})=>{c===0?(l!==Un.oe&&e(new lt(hi(a)),l),l=p,a=g):l=Un.oe}).next(()=>{l!==Un.oe&&e(new lt(hi(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function rh(s,t){return Pr(s).put(function(r,a){return{targetId:0,path:an(r.path),sequenceNumber:a}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.changes=new Xr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?z.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Ms(t).put(r)}removeEntry(t,e,r){return Ms(t).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Uh(c),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.rr(t,r)))}getEntry(t,e){let r=pe.newInvalidDocument(e);return Ms(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kl(e))},(a,l)=>{r=this.ir(e,l)}).next(()=>r)}sr(t,e){let r={size:0,document:pe.newInvalidDocument(e)};return Ms(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kl(e))},(a,l)=>{r={document:this.ir(e,l),size:Bh(l)}}).next(()=>r)}getEntries(t,e){let r=Tn();return this._r(t,e,(a,l)=>{const c=this.ir(a,l);r=r.insert(a,c)}).next(()=>r)}ar(t,e){let r=Tn(),a=new oe(lt.comparator);return this._r(t,e,(l,c)=>{const d=this.ir(l,c);r=r.insert(l,d),a=a.insert(l,Bh(c))}).next(()=>({documents:r,ur:a}))}_r(t,e,r){if(e.isEmpty())return z.resolve();let a=new te(tT);e.forEach(g=>a=a.add(g));const l=IDBKeyRange.bound(Kl(a.first()),Kl(a.last())),c=a.getIterator();let d=c.getNext();return Ms(t).J({index:"documentKeyIndex",range:l},(g,p,E)=>{const A=lt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&tT(d,A)<0;)r(d,null),d=c.getNext();d&&d.isEqual(A)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?E.$(Kl(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,r,a,l){const c=e.path,d=[c.popLast().toArray(),c.lastSegment(),Uh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ms(t).U(IDBKeyRange.bound(d,g,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let E=Tn();for(const A of p){const I=this.ir(lt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);I.isFoundDocument()&&(bu(e,I)||a.has(I.key))&&(E=E.insert(I.key,I))}return E})}getAllFromCollectionGroup(t,e,r,a){let l=Tn();const c=WE(e,r),d=WE(e,bn.max());return Ms(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(g,p,E)=>{const A=this.ir(lt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(A.key,A),l.size===a&&E.done()}).next(()=>l)}newChangeBuffer(t){return new kx(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return ZE(t).get("remoteDocumentGlobalKey").next(e=>(pt(!!e),e))}rr(t,e){return ZE(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){const r=vx(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(Et.min())))return r}return pe.newInvalidDocument(t)}}function LA(s){return new Px(s)}class kx extends UA{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new Xr(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(t){const e=[];let r=0,a=new te((l,c)=>Rt(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.lr.get(l);if(e.push(this.cr.removeEntry(t,l,d.readTime)),c.isValidDocument()){const g=LE(this.cr.serializer,c);a=a.add(l.path.popLast());const p=Bh(g);r+=p-d.size,e.push(this.cr.addEntry(t,l,g))}else if(r-=d.size,this.trackRemovals){const g=LE(this.cr.serializer,c.convertToNoDocument(Et.min()));e.push(this.cr.addEntry(t,l,g))}}),a.forEach(l=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.cr.updateMetadata(t,r)),z.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(r=>(this.lr.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:r,ur:a})=>(a.forEach((l,c)=>{this.lr.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function ZE(s){return Oe(s,"remoteDocumentGlobal")}function Ms(s){return Oe(s,"remoteDocumentsV14")}function Kl(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function WE(s,t){const e=t.documentKey.path.toArray();return[s,Uh(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function tT(s,t){const e=s.path.toArray(),r=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(a=Rt(e[l],r[l]),a)return a;return a=Rt(e.length,r.length),a||(a=Rt(e[e.length-2],r[r.length-2]),a||Rt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,e,r,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(r!==null&&iu(r.mutation,a,Ln.empty(),he.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,xt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=xt()){const a=fi();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,r).next(l=>{let c=Xl();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const r=fi();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,xt()))}populateOverlays(t,e,r){const a=[];return r.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,r,a){let l=Tn();const c=nu(),d=function(){return nu()}();return e.forEach((g,p)=>{const E=r.get(p.key);a.has(p.key)&&(E===void 0||E.mutation instanceof $r)?l=l.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),iu(E.mutation,p,E.mutation.getFieldMask(),he.now())):c.set(p.key,Ln.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((p,E)=>c.set(p,E)),e.forEach((p,E)=>{var A;return d.set(p,new Ux(E,(A=c.get(p))!==null&&A!==void 0?A:null))}),d))}recalculateAndSaveOverlays(t,e){const r=nu();let a=new oe((c,d)=>c-d),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(g=>{const p=e.get(g);if(p===null)return;let E=r.get(g)||Ln.empty();E=d.applyToLocalView(p,E),r.set(g,E);const A=(a.get(d.batchId)||xt()).add(g);a=a.insert(d.batchId,A)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,E=g.value,A=aA();E.forEach(I=>{if(!l.has(I)){const k=fA(e.get(I),r.get(I));k!==null&&A.set(I,k),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,A))}return z.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,a){return function(c){return lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):LD(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,a):this.getDocumentsMatchingCollectionQuery(t,e,r,a)}getNextDocuments(t,e,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,a-l.size):z.resolve(fi());let d=-1,g=l;return c.next(p=>z.forEach(p,(E,A)=>(d<A.largestBatchId&&(d=A.largestBatchId),l.get(E)?z.resolve():this.remoteDocumentCache.getEntry(t,E).next(I=>{g=g.insert(E,I)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,g,p,xt())).next(E=>({batchId:d,changes:sA(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new lt(e)).next(r=>{let a=Xl();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,r,a){const l=e.collectionGroup;let c=Xl();return this.indexManager.getCollectionParents(t,l).next(d=>z.forEach(d,g=>{const p=function(A,I){return new tf(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,r,a).next(E=>{E.forEach((A,I)=>{c=c.insert(A,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,l,a))).next(c=>{l.forEach((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,pe.newInvalidDocument(E)))});let d=Xl();return c.forEach((g,p)=>{const E=l.get(g);E!==void 0&&iu(E.mutation,p,Ln.empty(),he.now()),bu(e,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return z.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:on(a.createTime)}}(e)),z.resolve()}getNamedQuery(t,e){return z.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(a){return{name:a.name,query:VA(a.bundledQuery),readTime:on(a.readTime)}}(e)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.overlays=new oe(lt.comparator),this.Ir=new Map}getOverlay(t,e){return z.resolve(this.overlays.get(e))}getOverlays(t,e){const r=fi();return z.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((a,l)=>{this.ht(t,e,l)}),z.resolve()}removeOverlaysForBatchId(t,e,r){const a=this.Ir.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(t,e,r){const a=fi(),l=e.length+1,c=new lt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return z.resolve(a)}getOverlaysForCollectionGroup(t,e,r,a){let l=new oe((p,E)=>p-E);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let E=l.get(p.largestBatchId);E===null&&(E=fi(),l=l.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const d=fi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,E)=>d.set(p,E)),!(d.size()>=a)););return z.resolve(d)}ht(t,e,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Ir.get(a.largestBatchId).delete(r.key);this.Ir.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qg(e,r));let l=this.Ir.get(e);l===void 0&&(l=xt(),this.Ir.set(e,l)),this.Ir.set(e,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(t){return z.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Tr=new te(Be.Er),this.dr=new te(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const r=new Be(t,e);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Vr(new Be(t,e))}mr(t,e){t.forEach(r=>this.removeReference(r,e))}gr(t){const e=new lt(new Yt([])),r=new Be(e,t),a=new Be(e,t+1),l=[];return this.dr.forEachInRange([r,a],c=>{this.Vr(c),l.push(c.key)}),l}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new lt(new Yt([])),r=new Be(e,t),a=new Be(e,t+1);let l=xt();return this.dr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Be(t,0),r=this.Tr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Be{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return lt.comparator(t.key,e.key)||Rt(t.wr,e.wr)}static Ar(t,e){return Rt(t.wr,e.wr)||lt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new te(Be.Er)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zg(l,e,r,a);this.mutationQueue.push(c);for(const d of a)this.br=this.br.add(new Be(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return z.resolve(c)}lookupMutationBatch(t,e){return z.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=this.vr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Be(e,0),a=new Be(e,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,a],c=>{const d=this.Dr(c.wr);l.push(d)}),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new te(Rt);return e.forEach(a=>{const l=new Be(a,0),c=new Be(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],d=>{r=r.add(d.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1;let l=r;lt.isDocumentKey(l)||(l=l.child(""));const c=new Be(new lt(l),0);let d=new te(Rt);return this.br.forEachWhile(g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(g.wr)),!0)},c),z.resolve(this.Cr(d))}Cr(t){const e=[];return t.forEach(r=>{const a=this.Dr(r);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){pt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(e.mutations,a=>{const l=new Be(a.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,e){const r=new Be(e,0),a=this.br.firstAfterOrEqual(r);return z.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t){this.Mr=t,this.docs=function(){return new oe(lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,a=this.docs.get(r),l=a?a.size:0,c=this.Mr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return z.resolve(r?r.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let r=Tn();return e.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():pe.newInvalidDocument(a))}),z.resolve(r)}getDocumentsMatchingQuery(t,e,r,a){let l=Tn();const c=e.path,d=new lt(c.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||xg(k0(E),r)<=0||(a.has(E.key)||bu(e,E))&&(l=l.insert(E.key,E.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(t,e,r,a){mt()}Or(t,e){return z.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new Fx(this)}getSize(t){return z.resolve(this.size)}}class Fx extends UA{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?e.push(this.cr.addEntry(t,a)):this.cr.removeEntry(r)}),z.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t){this.persistence=t,this.Nr=new Xr(e=>Js(e),Au),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qg,this.targetCount=0,this.kr=ta.Bn()}forEachTarget(t,e){return this.Nr.forEach((r,a)=>e(a)),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Lr&&(this.Lr=e),z.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new ta(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,z.resolve()}updateTargetData(t,e){return this.Kn(e),z.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,e,r){let a=0;const l=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=e&&r.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),z.waitFor(l).next(()=>a)}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,e){const r=this.Nr.get(e)||null;return z.resolve(r)}addMatchingKeys(t,e,r){return this.Br.Rr(e,r),z.resolve()}removeMatchingKeys(t,e,r){this.Br.mr(e,r);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),z.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),z.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Br.yr(e);return z.resolve(r)}containsKey(t,e){return z.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Un(0),this.Kr=!1,this.Kr=!0,this.$r=new zx,this.referenceDelegate=t(this),this.Ur=new Gx(this),this.indexManager=new Rx,this.remoteDocumentCache=function(a){return new qx(a)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new DA(e),this.Gr=new Lx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Bx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.qr[t.toKey()];return r||(r=new jx(e,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const a=new Hx(this.Qr.next());return this.referenceDelegate.zr(),r(a).next(l=>this.referenceDelegate.jr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Hr(t,e){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,e)))}}class Hx extends L0{constructor(t){super(),this.currentSequenceNumber=t}}class lf{constructor(t){this.persistence=t,this.Jr=new Qg,this.Yr=null}static Zr(t){return new lf(t)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(t,e,r){return this.Jr.addReference(r,e),this.Xr.delete(r.toString()),z.resolve()}removeReference(t,e,r){return this.Jr.removeReference(r,e),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),z.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(a=>this.Xr.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.Xr.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const a=lt.fromPath(r);return this.ei(t,a).next(l=>{l||e.removeEntry(a,Et.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(r=>{r?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return z.or([()=>z.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t){this.serializer=t}O(t,e,r,a){const l=new Jh("createOrUpgrade",e);r<1&&a>=1&&(function(g){g.createObjectStore("owner")}(t),function(g){g.createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mE,{unique:!0}),g.createObjectStore("documentMutations")}(t),eT(t),function(g){g.createObjectStore("remoteDocuments")}(t));let c=z.resolve();return r<3&&a>=3&&(r!==0&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(t),eT(t)),c=c.next(()=>function(g){const p=g.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",E)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(g,p){return p.store("mutations").U().next(E=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mE,{unique:!0});const A=p.store("mutations"),I=E.map(k=>A.put(k));return z.waitFor(I)})}(t,l))),c=c.next(()=>{(function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),r<5&&a>=5&&(c=c.next(()=>this.ni(l))),r<6&&a>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(t),this.ri(l)))),r<7&&a>=7&&(c=c.next(()=>this.ii(l))),r<8&&a>=8&&(c=c.next(()=>this.si(t,l))),r<9&&a>=9&&(c=c.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&a>=10&&(c=c.next(()=>this.oi(l))),r<11&&a>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&a>=12&&(c=c.next(()=>{(function(g){const p=g.createObjectStore("documentOverlays",{keyPath:vD});p.createIndex("collectionPathOverlayIndex",ED,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",TD,{unique:!1})})(t)})),r<13&&a>=13&&(c=c.next(()=>function(g){const p=g.createObjectStore("remoteDocumentsV14",{keyPath:lD});p.createIndex("documentKeyIndex",uD),p.createIndex("collectionGroupIndex",cD)}(t)).next(()=>this._i(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(c=c.next(()=>this.ai(t,l))),r<15&&a>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:gD}).createIndex("sequenceNumberIndex",pD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:_D}).createIndex("documentKeyIndex",yD,{unique:!1})}(t))),r<16&&a>=16&&(c=c.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(g){g.createObjectStore("globals",{keyPath:"name"})})(t)})),c}ri(t){let e=0;return t.store("remoteDocuments").J((r,a)=>{e+=Bh(a)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.U().next(a=>z.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",c).next(d=>z.forEach(d,g=>{pt(g.userId===l.userId);const p=Ls(this.serializer,g);return MA(t,l.userId,p).next(()=>{})}))}))}ii(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return r.J((c,d)=>{const g=new Yt(c),p=function(A){return[0,an(A)]}(g);l.push(e.get(p).next(E=>E?z.resolve():(A=>e.put({targetId:0,path:an(A),sequenceNumber:a.highestListenSequenceNumber}))(g)))}).next(()=>z.waitFor(l))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:mD});const r=e.store("collectionParents"),a=new Kg,l=c=>{if(a.add(c)){const d=c.lastSegment(),g=c.popLast();return r.put({collectionId:d,parent:an(g)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const g=new Yt(c);return l(g.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,g],p)=>{const E=hi(d);return l(E.popLast())}))}oi(t){const e=t.store("targets");return e.J((r,a)=>{const l=Jl(a),c=xA(this.serializer,l);return e.put(c)})}_i(t,e){const r=e.store("remoteDocuments"),a=[];return r.J((l,c)=>{const d=e.store("remoteDocumentsV14"),g=function(A){return A.document?new lt(Yt.fromString(A.document.name).popFirst(5)):A.noDocument?lt.fromSegments(A.noDocument.path):A.unknownDocument?lt.fromSegments(A.unknownDocument.path):mt()}(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>z.waitFor(a))}ai(t,e){const r=e.store("mutations"),a=LA(this.serializer),l=new zA(lf.Zr,this.serializer.ct);return r.U().next(c=>{const d=new Map;return c.forEach(g=>{var p;let E=(p=d.get(g.userId))!==null&&p!==void 0?p:xt();Ls(this.serializer,g).keys().forEach(A=>E=E.add(A)),d.set(g.userId,E)}),z.forEach(d,(g,p)=>{const E=new Ke(p),A=af.lt(this.serializer,E),I=l.getIndexManager(E),k=of.lt(E,this.serializer,I,l.referenceDelegate);return new BA(a,k,A,I).recalculateAndSaveOverlaysForDocumentKeys(new Xm(e,Un.oe),g).next()})})}}function eT(s){s.createObjectStore("targetDocuments",{keyPath:fD}).createIndex("documentTargetsIndex",dD,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hD,{unique:!0}),s.createObjectStore("targetGlobal")}const Om="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yg{constructor(t,e,r,a,l,c,d,g,p,E,A=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.ui=l,this.window=c,this.document=d,this.ci=p,this.li=E,this.hi=A,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!Yg.D())throw new ft(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mx(this,a),this.Ai=e+"main",this.serializer=new DA(g),this.Ri=new qr(this.Ai,this.hi,new Kx(this.serializer)),this.$r=new Tx,this.Ur=new Dx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LA(this.serializer),this.Gr=new Ex,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,E===!1&&rn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(J.FAILED_PRECONDITION,Om);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Un(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>sh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(Yr(t))return tt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Ql(t).get("owner").next(e=>z.resolve(this.vi(e)))}Ci(t){return sh(t).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Oe(e,"clientMetadata");return r.U().next(a=>{const l=this.xi(a,18e5),c=a.filter(d=>l.indexOf(d)===-1);return z.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Vi)for(const e of t)this.Vi.removeItem(this.Oi(e.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?z.resolve(!0):Ql(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new ft(J.FAILED_PRECONDITION,Om);return!1}}return!(!this.networkEnabled||!this.inForeground)||sh(t).U().next(r=>this.xi(r,5e3).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&tt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const e=new Xm(t,Un.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()}xi(t,e){return t.filter(r=>this.Mi(r.updateTimeMs,e)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>sh(t).U().next(e=>this.xi(e,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return of.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Cx(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return af.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,r){tt("IndexedDbPersistence","Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=function(g){return g===17?SD:g===16?bD:g===15?Og:g===14?F0:g===13?q0:g===12?AD:g===11?j0:void mt()}(this.hi);let c;return this.Ri.runTransaction(t,a,l,d=>(c=new Xm(d,this.Qr?this.Qr.next():Un.oe),e==="readwrite-primary"?this.wi(c).next(g=>!!g||this.Si(c)).next(g=>{if(!g)throw rn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ft(J.FAILED_PRECONDITION,U0);return r(c)}).next(g=>this.Di(c).next(()=>g)):this.Ki(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ki(t){return Ql(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ft(J.FAILED_PRECONDITION,Om)})}Di(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ql(t).put("owner",e)}static D(){return qr.D()}bi(t){const e=Ql(t);return e.get("owner").next(r=>this.vi(r)?(tt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):z.resolve())}Mi(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(rn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;zT()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{const r=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return tt("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){rn("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Ql(s){return Oe(s,"owner")}function sh(s){return Oe(s,"clientMetadata")}function Qx(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t,e,r,a){this.targetId=t,this.fromCache=e,this.$i=r,this.Ui=a}static Wi(t,e){let r=xt(),a=xt();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Xg(t,e.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zT()?8:B0(Ve())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,r,a){const l={result:null};return this.Yi(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Zi(t,e,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Yx;return this.Xi(t,e,c).next(d=>{if(l.result=d,this.zi)return this.es(t,e,c,d.size)})}).next(()=>l.result)}es(t,e,r,a){return r.documentReadCount<this.ji?(no()<=Pt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",io(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(no()<=Pt.DEBUG&&tt("QueryEngine","Query:",io(e),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.Hi*a?(no()<=Pt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",io(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bn(e))):z.resolve())}Yi(t,e){if(RE(e))return z.resolve(null);let r=Bn(e);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=eg(e,null,"F"),r=Bn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=xt(...l);return this.Ji.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const p=this.ts(e,d);return this.ns(e,p,c,g.readTime)?this.Yi(t,eg(e,null,"F")):this.rs(t,p,e,g)}))})))}Zi(t,e,r,a){return RE(e)||a.isEqual(Et.min())?z.resolve(null):this.Ji.getDocuments(t,r).next(l=>{const c=this.ts(e,l);return this.ns(e,c,r,a)?z.resolve(null):(no()<=Pt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),io(e)),this.rs(t,c,e,tD(a,-1)).next(d=>d))})}ts(t,e){let r=new te(iA(t));return e.forEach((a,l)=>{bu(t,l)&&(r=r.add(l))}),r}ns(t,e,r,a){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(t,e,r){return no()<=Pt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",io(e)),this.Ji.getDocumentsMatchingQuery(t,e,bn.min(),r)}rs(t,e,r,a){return this.Ji.getDocumentsMatchingQuery(t,r,a).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t,e,r,a){this.persistence=t,this.ss=e,this.serializer=a,this.os=new oe(Rt),this._s=new Xr(l=>Js(l),Au),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new BA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function qA(s,t,e,r){return new Xx(s,t,e,r)}async function FA(s,t){const e=wt(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let a;return e.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,e.ls(t),e.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=xt();for(const p of a){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of l){d.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:d}))})})}function $x(s,t){const e=wt(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=e.cs.newChangeBuffer({trackRemovals:!0});return function(d,g,p,E){const A=p.batch,I=A.keys();let k=z.resolve();return I.forEach(H=>{k=k.next(()=>E.getEntry(g,H)).next(Y=>{const q=p.docVersions.get(H);pt(q!==null),Y.version.compareTo(q)<0&&(A.applyToRemoteDocument(Y,p),Y.isValidDocument()&&(Y.setReadTime(p.commitVersion),E.addEntry(Y)))})}),k.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=xt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(t))).next(()=>e.localDocuments.getDocuments(r,a))})}function GA(s){const t=wt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Jx(s,t){const e=wt(s),r=t.snapshotVersion;let a=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.cs.newChangeBuffer({trackRemovals:!0});a=e.os;const d=[];t.targetChanges.forEach((E,A)=>{const I=a.get(A);if(!I)return;d.push(e.Ur.removeMatchingKeys(l,E.removedDocuments,A).next(()=>e.Ur.addMatchingKeys(l,E.addedDocuments,A)));let k=I.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(A)!==null?k=k.withResumeToken(Ie.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,r)),a=a.insert(A,k),function(Y,q,st){return Y.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8?!0:st.addedDocuments.size+st.modifiedDocuments.size+st.removedDocuments.size>0}(I,k,E)&&d.push(e.Ur.updateTargetData(l,k))});let g=Tn(),p=xt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,E))}),d.push(Zx(l,c,t.documentUpdates).next(E=>{g=E.Ps,p=E.Is})),!r.isEqual(Et.min())){const E=e.Ur.getLastRemoteSnapshotVersion(l).next(A=>e.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(E)}return z.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(e.os=a,l))}function Zx(s,t,e){let r=xt(),a=xt();return e.forEach(l=>r=r.add(l)),t.getEntries(s,r).next(l=>{let c=Tn();return e.forEach((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Et.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):tt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{Ps:c,Is:a}})}function Wx(s,t){const e=wt(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function tV(s,t){const e=wt(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return e.Ur.getTargetData(r,t).next(l=>l?(a=l,z.resolve(a)):e.Ur.allocateTargetId(r).next(c=>(a=new Qi(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Ur.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=e.os.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.os=e.os.insert(r.targetId,r),e._s.set(t,r.targetId)),r})}async function ug(s,t,e){const r=wt(s),a=r.os.get(t),l=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Yr(c))throw c;tt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}r.os=r.os.remove(t),r._s.delete(a.target)}function nT(s,t,e){const r=wt(s);let a=Et.min(),l=xt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,p,E){const A=wt(g),I=A._s.get(E);return I!==void 0?z.resolve(A.os.get(I)):A.Ur.getTargetData(p,E)}(r,c,Bn(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.ss.getDocumentsMatchingQuery(c,t,e?a:Et.min(),e?l:xt())).next(d=>(eV(r,zD(t),d),{documents:d,Ts:l})))}function eV(s,t,e){let r=s.us.get(t)||Et.min();e.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.us.set(t,r)}class iT{constructor(){this.activeTargetIds=KD()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HA{constructor(){this.so=new iT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,r){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new iT,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;function Nm(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class sV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+e.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(e,r,a,l,c){const d=Nm(),g=this.xo(e,r.toUriEncodedString());tt("RestConnection",`Sending RPC '${e}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,c),this.No(e,g,p,a).then(E=>(tt("RestConnection",`Received RPC '${e}' ${d}: `,E),E),E=>{throw Ys("RestConnection",`RPC '${e}' ${d} failed with error: `,E,"url: ",g,"request:",a),E})}Lo(e,r,a,l,c,d){return this.Mo(e,r,a,l,c)}Oo(e,r,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,c)=>e[c]=l),a&&a.headers.forEach((l,c)=>e[c]=l)}xo(e,r){const a=iV[e];return`${this.Do}/v1/${r}:${a}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,r,a){const l=Nm();return new Promise((c,d)=>{const g=new C0;g.setWithCredentials(!0),g.listenOnce(D0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case fh.NO_ERROR:const E=g.getResponseJson();tt(Je,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(E)),c(E);break;case fh.TIMEOUT:tt(Je,`RPC '${t}' ${l} timed out`),d(new ft(J.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const A=g.getStatus();if(tt(Je,`RPC '${t}' ${l} failed with status:`,A,"response text:",g.getResponseText()),A>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const H=function(q){const st=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(st)>=0?st:J.UNKNOWN}(k.status);d(new ft(H,k.message))}else d(new ft(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ft(J.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{tt(Je,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(a);tt(Je,`RPC '${t}' ${l} sending request:`,a),g.send(e,"POST",p,r,15)})}Bo(t,e,r){const a=Nm(),l=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=O0(),d=V0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=l.join("");tt(Je,`Creating RPC '${t}' stream ${a}: ${E}`,g);const A=c.createWebChannel(E,g);let I=!1,k=!1;const H=new rV({Io:q=>{k?tt(Je,`Not sending because RPC '${t}' stream ${a} is closed:`,q):(I||(tt(Je,`Opening RPC '${t}' stream ${a} transport.`),A.open(),I=!0),tt(Je,`RPC '${t}' stream ${a} sending:`,q),A.send(q))},To:()=>A.close()}),Y=(q,st,it)=>{q.listen(st,W=>{try{it(W)}catch(ct){setTimeout(()=>{throw ct},0)}})};return Y(A,Yl.EventType.OPEN,()=>{k||(tt(Je,`RPC '${t}' stream ${a} transport opened.`),H.yo())}),Y(A,Yl.EventType.CLOSE,()=>{k||(k=!0,tt(Je,`RPC '${t}' stream ${a} transport closed`),H.So())}),Y(A,Yl.EventType.ERROR,q=>{k||(k=!0,Ys(Je,`RPC '${t}' stream ${a} transport errored:`,q),H.So(new ft(J.UNAVAILABLE,"The operation could not be completed")))}),Y(A,Yl.EventType.MESSAGE,q=>{var st;if(!k){const it=q.data[0];pt(!!it);const W=it,ct=W.error||((st=W[0])===null||st===void 0?void 0:st.error);if(ct){tt(Je,`RPC '${t}' stream ${a} received error:`,ct);const ut=ct.status;let _t=function(R){const O=Se[R];if(O!==void 0)return gA(O)}(ut),x=ct.message;_t===void 0&&(_t=J.INTERNAL,x="Unknown error status: "+ut+" with message "+ct.message),k=!0,H.So(new ft(_t,x)),A.close()}else tt(Je,`RPC '${t}' stream ${a} received:`,it),H.bo(it)}}),Y(d,x0.STAT_EVENT,q=>{q.stat===Qm.PROXY?tt(Je,`RPC '${t}' stream ${a} detected buffering proxy`):q.stat===Qm.NOPROXY&&tt(Je,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{H.wo()},0),H}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return typeof window<"u"?window:null}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(s){return new ux(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,e,r=1e3,a=1.5,l=6e4){this.ui=t,this.timerId=e,this.ko=r,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),a=Math.max(0,e-r);a>0&&tt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t,e,r,a,l,c,d,g){this.ui=t,this.Ho=r,this.Jo=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KA(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===J.RESOURCE_EXHAUSTED?(rn(e.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Yo===e&&this.P_(r,a)},r=>{t(()=>{const a=new ft(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(a)})})}P_(t,e){const r=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{r(()=>this.I_(a))}),this.stream.onMessage(a=>{r(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return tt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oV extends QA{constructor(t,e,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,a,c),this.serializer=l}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=fx(this.serializer,t),r=function(l){if(!("targetChange"in l))return Et.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?on(c.readTime):Et.min()}(t);return this.listener.d_(e,r)}A_(t){const e={};e.database=rg(this.serializer),e.addTarget=function(l,c){let d;const g=c.target;if(d=Nh(g)?{documents:bA(l,g)}:{query:SA(l,g)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=yA(l,c.resumeToken);const p=ng(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Et.min())>0){d.readTime=Ao(l,c.snapshotVersion.toTimestamp());const p=ng(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const r=mx(this.serializer,t);r&&(e.labels=r),this.a_(e)}R_(t){const e={};e.database=rg(this.serializer),e.removeTarget=t,this.a_(e)}}class lV extends QA{constructor(t,e,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,a,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return pt(!!t.streamToken),this.lastStreamToken=t.streamToken,pt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=dx(t.writeResults,t.commitTime),r=on(t.commitTime);return this.listener.g_(r,e)}p_(){const t={};t.database=rg(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>kh(this.serializer,r))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV extends class{}{constructor(t,e,r,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ft(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Mo(t,ig(e,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ft(J.UNKNOWN,l.toString())})}Lo(t,e,r,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(t,ig(e,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(J.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rn(e),this.D_=!1):tt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(t,e,r,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(c=>{r.enqueueAndForget(async()=>{ra(this)&&(tt("RemoteStore","Restarting streams for network reachability change."),await async function(g){const p=wt(g);p.L_.add(4),await wu(p),p.q_.set("Unknown"),p.L_.delete(4),await cf(p)}(this))})}),this.q_=new cV(r,a)}}async function cf(s){if(ra(s))for(const t of s.B_)await t(!0)}async function wu(s){for(const t of s.B_)await t(!1)}function YA(s,t){const e=wt(s);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Wg(e)?Zg(e):Oo(e).r_()&&Jg(e,t))}function $g(s,t){const e=wt(s),r=Oo(e);e.N_.delete(t),r.r_()&&XA(e,t),e.N_.size===0&&(r.r_()?r.o_():ra(e)&&e.q_.set("Unknown"))}function Jg(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Oo(s).A_(t)}function XA(s,t){s.Q_.xe(t),Oo(s).R_(t)}function Zg(s){s.Q_=new sx({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),Oo(s).start(),s.q_.v_()}function Wg(s){return ra(s)&&!Oo(s).n_()&&s.N_.size>0}function ra(s){return wt(s).L_.size===0}function $A(s){s.Q_=void 0}async function fV(s){s.q_.set("Online")}async function dV(s){s.N_.forEach((t,e)=>{Jg(s,t)})}async function mV(s,t){$A(s),Wg(s)?(s.q_.M_(t),Zg(s)):s.q_.set("Unknown")}async function gV(s,t,e){if(s.q_.set("Online"),t instanceof _A&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.N_.delete(d),a.Q_.removeTarget(d))}(s,t)}catch(r){tt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await zh(s,r)}else if(t instanceof yh?s.Q_.Ke(t):t instanceof pA?s.Q_.He(t):s.Q_.We(t),!e.isEqual(Et.min()))try{const r=await GA(s.localStore);e.compareTo(r)>=0&&await function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.N_.get(p);E&&l.N_.set(p,E.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,p)=>{const E=l.N_.get(g);if(!E)return;l.N_.set(g,E.withResumeToken(Ie.EMPTY_BYTE_STRING,E.snapshotVersion)),XA(l,g);const A=new Qi(E.target,g,p,E.sequenceNumber);Jg(l,A)}),l.remoteSyncer.applyRemoteEvent(d)}(s,e)}catch(r){tt("RemoteStore","Failed to raise snapshot:",r),await zh(s,r)}}async function zh(s,t,e){if(!Yr(t))throw t;s.L_.add(1),await wu(s),s.q_.set("Offline"),e||(e=()=>GA(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{tt("RemoteStore","Retrying IndexedDB access"),await e(),s.L_.delete(1),await cf(s)})}function JA(s,t){return t().catch(e=>zh(s,e,t))}async function Ru(s){const t=wt(s),e=Kr(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;pV(t);)try{const a=await Wx(t.localStore,r);if(a===null){t.O_.length===0&&e.o_();break}r=a.batchId,_V(t,a)}catch(a){await zh(t,a)}ZA(t)&&WA(t)}function pV(s){return ra(s)&&s.O_.length<10}function _V(s,t){s.O_.push(t);const e=Kr(s);e.r_()&&e.V_&&e.m_(t.mutations)}function ZA(s){return ra(s)&&!Kr(s).n_()&&s.O_.length>0}function WA(s){Kr(s).start()}async function yV(s){Kr(s).p_()}async function vV(s){const t=Kr(s);for(const e of s.O_)t.m_(e.mutations)}async function EV(s,t,e){const r=s.O_.shift(),a=jg.from(r,t,e);await JA(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Ru(s)}async function TV(s,t){t&&Kr(s).V_&&await async function(r,a){if(function(c){return nx(c)&&c!==J.ABORTED}(a.code)){const l=r.O_.shift();Kr(r).s_(),await JA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Ru(r)}}(s,t),ZA(s)&&WA(s)}async function sT(s,t){const e=wt(s);e.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const r=ra(e);e.L_.add(3),await wu(e),r&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await cf(e)}async function AV(s,t){const e=wt(s);t?(e.L_.delete(2),await cf(e)):t||(e.L_.add(2),await wu(e),e.q_.set("Unknown"))}function Oo(s){return s.K_||(s.K_=function(e,r,a){const l=wt(e);return l.w_(),new oV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:fV.bind(null,s),Ro:dV.bind(null,s),mo:mV.bind(null,s),d_:gV.bind(null,s)}),s.B_.push(async t=>{t?(s.K_.s_(),Wg(s)?Zg(s):s.q_.set("Unknown")):(await s.K_.stop(),$A(s))})),s.K_}function Kr(s){return s.U_||(s.U_=function(e,r,a){const l=wt(e);return l.w_(),new lV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yV.bind(null,s),mo:TV.bind(null,s),f_:vV.bind(null,s),g_:EV.bind(null,s)}),s.B_.push(async t=>{t?(s.U_.s_(),await Ru(s)):(await s.U_.stop(),s.O_.length>0&&(tt("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t,e,r,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,a,l){const c=Date.now()+r,d=new tp(t,e,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ep(s,t){if(rn("AsyncQueue",`${t}: ${s}`),Yr(s))return new ft(J.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t){this.comparator=t?(e,r)=>t(e,r)||lt.comparator(e.key,r.key):(e,r)=>lt.comparator(e.key,r.key),this.keyedMap=Xl(),this.sortedSet=new oe(this.comparator)}static emptySet(t){return new ho(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ho)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ho;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.W_=new oe(lt.comparator)}track(t){const e=t.doc.key,r=this.W_.get(e);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(e,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(e):t.type===1&&r.type===2?this.W_=this.W_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):mt():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,r)=>{t.push(r)}),t}}class bo{constructor(t,e,r,a,l,c,d,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,a,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new bo(t,e,ho.emptySet(e),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ef(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==r[a].type||!e[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class SV{constructor(){this.queries=oT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,r){const a=wt(e),l=a.queries;a.queries=oT(),l.forEach((c,d)=>{for(const g of d.j_)g.onError(r)})})(this,new ft(J.ABORTED,"Firestore shutting down"))}}function oT(){return new Xr(s=>nA(s),ef)}async function IV(s,t){const e=wt(s);let r=3;const a=t.query;let l=e.queries.get(a);l?!l.H_()&&t.J_()&&(r=2):(l=new bV,r=t.J_()?0:1);try{switch(r){case 0:l.z_=await e.onListen(a,!0);break;case 1:l.z_=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const d=ep(c,`Initialization of query '${io(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,l),l.j_.push(t),t.Z_(e.onlineState),l.z_&&t.X_(l.z_)&&np(e)}async function wV(s,t){const e=wt(s),r=t.query;let a=3;const l=e.queries.get(r);if(l){const c=l.j_.indexOf(t);c>=0&&(l.j_.splice(c,1),l.j_.length===0?a=t.J_()?0:1:!l.H_()&&t.J_()&&(a=2))}switch(a){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function RV(s,t){const e=wt(s);let r=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const d of c.j_)d.X_(a)&&(r=!0);c.z_=a}}r&&np(e)}function CV(s,t,e){const r=wt(s),a=r.queries.get(t);if(a)for(const l of a.j_)l.onError(e);r.queries.delete(t)}function np(s){s.Y_.forEach(t=>{t.next()})}var cg,lT;(lT=cg||(cg={})).ea="default",lT.Cache="cache";class DV{constructor(t,e,r){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new bo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const r=e!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=bo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t){this.key=t}}class eb{constructor(t){this.key=t}}class xV{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xt(),this.mutatedKeys=xt(),this.Aa=iA(t),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(t,e){const r=e?e.fa:new aT,a=e?e.Ra:this.Ra;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((E,A)=>{const I=a.get(E),k=bu(this.query,A)?A:null,H=!!I&&this.mutatedKeys.has(I.key),Y=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let q=!1;I&&k?I.data.isEqual(k.data)?H!==Y&&(r.track({type:3,doc:k}),q=!0):this.ga(I,k)||(r.track({type:2,doc:k}),q=!0,(g&&this.Aa(k,g)>0||p&&this.Aa(k,p)<0)&&(d=!0)):!I&&k?(r.track({type:0,doc:k}),q=!0):I&&!k&&(r.track({type:1,doc:I}),q=!0,(g||p)&&(d=!0)),q&&(k?(c=c.add(k),l=Y?l.add(E):l.delete(E)):(c=c.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),l=l.delete(E.key),r.track({type:1,doc:E})}return{Ra:c,fa:r,ns:d,mutatedKeys:l}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,a){const l=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const c=t.fa.G_();c.sort((E,A)=>function(k,H){const Y=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return Y(k)-Y(H)}(E.type,A.type)||this.Aa(E.doc,A.doc)),this.pa(r),a=a!=null&&a;const d=e&&!a?this.ya():[],g=this.da.size===0&&this.current&&!a?1:0,p=g!==this.Ea;return this.Ea=g,c.length!==0||p?{snapshot:new bo(this.query,t.Ra,l,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new aT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=xt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const e=[];return t.forEach(r=>{this.da.has(r)||e.push(new eb(r))}),this.da.forEach(r=>{t.has(r)||e.push(new tb(r))}),e}ba(t){this.Ta=t.Ts,this.da=xt();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VV{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class OV{constructor(t){this.key=t,this.va=!1}}class NV{constructor(t,e,r,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Xr(d=>nA(d),ef),this.Ma=new Map,this.xa=new Set,this.Oa=new oe(lt.comparator),this.Na=new Map,this.La=new Qg,this.Ba={},this.ka=new Map,this.qa=ta.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MV(s,t,e=!0){const r=ob(s);let a;const l=r.Fa.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await nb(r,t,e,!0),a}async function PV(s,t){const e=ob(s);await nb(e,t,!0,!1)}async function nb(s,t,e,r){const a=await tV(s.localStore,Bn(t)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,e);let d;return r&&(d=await kV(s,t,l,c==="current",a.resumeToken)),s.isPrimaryClient&&e&&YA(s.remoteStore,a),d}async function kV(s,t,e,r,a){s.Ka=(A,I,k)=>async function(Y,q,st,it){let W=q.view.ma(st);W.ns&&(W=await nT(Y.localStore,q.query,!1).then(({documents:x})=>q.view.ma(x,W)));const ct=it&&it.targetChanges.get(q.targetId),ut=it&&it.targetMismatches.get(q.targetId)!=null,_t=q.view.applyChanges(W,Y.isPrimaryClient,ct,ut);return cT(Y,q.targetId,_t.wa),_t.snapshot}(s,A,I,k);const l=await nT(s.localStore,t,!0),c=new xV(t,l.Ts),d=c.ma(l.documents),g=Iu.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,g);cT(s,e,p.wa);const E=new VV(t,e,c);return s.Fa.set(t,E),s.Ma.has(e)?s.Ma.get(e).push(t):s.Ma.set(e,[t]),p.snapshot}async function UV(s,t,e){const r=wt(s),a=r.Fa.get(t),l=r.Ma.get(a.targetId);if(l.length>1)return r.Ma.set(a.targetId,l.filter(c=>!ef(c,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ug(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),e&&$g(r.remoteStore,a.targetId),hg(r,a.targetId)}).catch(na)):(hg(r,a.targetId),await ug(r.localStore,a.targetId,!0))}async function LV(s,t){const e=wt(s),r=e.Fa.get(t),a=e.Ma.get(r.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),$g(e.remoteStore,r.targetId))}async function BV(s,t,e){const r=lb(s);try{const a=await function(c,d){const g=wt(c),p=he.now(),E=d.reduce((k,H)=>k.add(H.key),xt());let A,I;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let H=Tn(),Y=xt();return g.cs.getEntries(k,E).next(q=>{H=q,H.forEach((st,it)=>{it.isValidDocument()||(Y=Y.add(st))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,H)).next(q=>{A=q;const st=[];for(const it of d){const W=tx(it,A.get(it.key).overlayedDocument);W!=null&&st.push(new $r(it.key,W,Y0(W.value.mapValue),An.exists(!0)))}return g.mutationQueue.addMutationBatch(k,p,st,d)}).next(q=>{I=q;const st=q.applyToLocalDocumentSet(A,Y);return g.documentOverlayCache.saveOverlays(k,q.batchId,st)})}).then(()=>({batchId:I.batchId,changes:sA(A)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let p=c.Ba[c.currentUser.toKey()];p||(p=new oe(Rt)),p=p.insert(d,g),c.Ba[c.currentUser.toKey()]=p}(r,a.batchId,e),await Cu(r,a.changes),await Ru(r.remoteStore)}catch(a){const l=ep(a,"Failed to persist write");e.reject(l)}}async function ib(s,t){const e=wt(s);try{const r=await Jx(e.localStore,t);t.targetChanges.forEach((a,l)=>{const c=e.Na.get(l);c&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.va=!0:a.modifiedDocuments.size>0?pt(c.va):a.removedDocuments.size>0&&(pt(c.va),c.va=!1))}),await Cu(e,r,t)}catch(r){await na(r)}}function uT(s,t,e){const r=wt(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const a=[];r.Fa.forEach((l,c)=>{const d=c.view.Z_(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=wt(c);g.onlineState=d;let p=!1;g.queries.forEach((E,A)=>{for(const I of A.j_)I.Z_(d)&&(p=!0)}),p&&np(g)}(r.eventManager,t),a.length&&r.Ca.d_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zV(s,t,e){const r=wt(s);r.sharedClientState.updateQueryState(t,"rejected",e);const a=r.Na.get(t),l=a&&a.key;if(l){let c=new oe(lt.comparator);c=c.insert(l,pe.newNoDocument(l,Et.min()));const d=xt().add(l),g=new sf(Et.min(),new Map,new oe(Rt),c,d);await ib(r,g),r.Oa=r.Oa.remove(l),r.Na.delete(t),ip(r)}else await ug(r.localStore,t,!1).then(()=>hg(r,t,e)).catch(na)}async function jV(s,t){const e=wt(s),r=t.batch.batchId;try{const a=await $x(e.localStore,t);sb(e,r,null),rb(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(e,a)}catch(a){await na(a)}}async function qV(s,t,e){const r=wt(s);try{const a=await function(c,d){const g=wt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return g.mutationQueue.lookupMutationBatch(p,d).next(A=>(pt(A!==null),E=A.keys(),g.mutationQueue.removeMutationBatch(p,A))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>g.localDocuments.getDocuments(p,E))})}(r.localStore,t);sb(r,t,e),rb(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Cu(r,a)}catch(a){await na(a)}}function rb(s,t){(s.ka.get(t)||[]).forEach(e=>{e.resolve()}),s.ka.delete(t)}function sb(s,t,e){const r=wt(s);let a=r.Ba[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),r.Ba[r.currentUser.toKey()]=a}}function hg(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Ma.get(t))s.Fa.delete(r),e&&s.Ca.$a(r,e);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach(r=>{s.La.containsKey(r)||ab(s,r)})}function ab(s,t){s.xa.delete(t.path.canonicalString());const e=s.Oa.get(t);e!==null&&($g(s.remoteStore,e),s.Oa=s.Oa.remove(t),s.Na.delete(e),ip(s))}function cT(s,t,e){for(const r of e)r instanceof tb?(s.La.addReference(r.key,t),FV(s,r)):r instanceof eb?(tt("SyncEngine","Document no longer in limbo: "+r.key),s.La.removeReference(r.key,t),s.La.containsKey(r.key)||ab(s,r.key)):mt()}function FV(s,t){const e=t.key,r=e.path.canonicalString();s.Oa.get(e)||s.xa.has(r)||(tt("SyncEngine","New document in limbo: "+e),s.xa.add(r),ip(s))}function ip(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const e=new lt(Yt.fromString(t)),r=s.qa.next();s.Na.set(r,new OV(e)),s.Oa=s.Oa.insert(e,r),YA(s.remoteStore,new Qi(Bn(Ug(e.path)),r,"TargetPurposeLimboResolution",Un.oe))}}async function Cu(s,t,e){const r=wt(s),a=[],l=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((d,g)=>{c.push(r.Ka(g,t,e).then(p=>{var E;if((p||e)&&r.isPrimaryClient){const A=p?!p.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(p){a.push(p);const A=Xg.Wi(g.targetId,p);l.push(A)}}))}),await Promise.all(c),r.Ca.d_(a),await async function(g,p){const E=wt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>z.forEach(p,I=>z.forEach(I.$i,k=>E.persistence.referenceDelegate.addReference(A,I.targetId,k)).next(()=>z.forEach(I.Ui,k=>E.persistence.referenceDelegate.removeReference(A,I.targetId,k)))))}catch(A){if(!Yr(A))throw A;tt("LocalStore","Failed to update sequence numbers: "+A)}for(const A of p){const I=A.targetId;if(!A.fromCache){const k=E.os.get(I),H=k.snapshotVersion,Y=k.withLastLimboFreeSnapshotVersion(H);E.os=E.os.insert(I,Y)}}}(r.localStore,l))}async function GV(s,t){const e=wt(s);if(!e.currentUser.isEqual(t)){tt("SyncEngine","User change. New user:",t.toKey());const r=await FA(e.localStore,t);e.currentUser=t,function(l,c){l.ka.forEach(d=>{d.forEach(g=>{g.reject(new ft(J.CANCELLED,c))})}),l.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Cu(e,r.hs)}}function HV(s,t){const e=wt(s),r=e.Na.get(t);if(r&&r.va)return xt().add(r.key);{let a=xt();const l=e.Ma.get(t);if(!l)return a;for(const c of l){const d=e.Fa.get(c);a=a.unionWith(d.view.Va)}return a}}function ob(s){const t=wt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=ib.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zV.bind(null,t),t.Ca.d_=RV.bind(null,t.eventManager),t.Ca.$a=CV.bind(null,t.eventManager),t}function lb(s){const t=wt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qV.bind(null,t),t}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=uf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return qA(this.persistence,new jA,t.initialUser,this.serializer)}Ga(t){return new zA(lf.Zr,this.serializer)}Wa(t){return new HA}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class KV extends pu{constructor(t,e,r){super(),this.Ja=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ja.initialize(this,t),await lb(this.Ja.syncEngine),await Ru(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(t){return qA(this.persistence,new jA,t.initialUser,this.serializer)}ja(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new Vx(r,t.asyncQueue,e)}Ha(t,e){const r=new rD(e,this.persistence);return new iD(t.asyncQueue,r)}Ga(t){const e=Qx(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Yg(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,aV(),vh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new HA}}class jh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GV.bind(null,this.syncEngine),await AV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new SV}()}createDatastore(t){const e=uf(t.databaseInfo.databaseId),r=function(l){return new sV(l)}(t.databaseInfo);return function(l,c,d,g){return new uV(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,a,l,c,d){return new hV(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>uT(this.syncEngine,e,0),function(){return rT.D()?new rT:new nV}())}createSyncEngine(t,e){return function(a,l,c,d,g,p,E){const A=new NV(a,l,c,d,g,p);return E&&(A.Qa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=wt(a);tt("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await wu(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):rn("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(t,e,r,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=a,this.user=Ke.UNAUTHENTICATED,this.clientId=M0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{tt("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(tt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ep(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Mm(s,t){s.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await FA(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function hT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await XV(s);tt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>sT(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>sT(t.remoteStore,a)),s._onlineComponents=t}async function XV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mm(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Ys("Error using user provided cache. Falling back to memory cache: "+e),await Mm(s,new pu)}}else tt("FirestoreClient","Using default OfflineComponentProvider"),await Mm(s,new pu);return s._offlineComponents}async function ub(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt("FirestoreClient","Using user provided OnlineComponentProvider"),await hT(s,s._uninitializedComponentsProvider._online)):(tt("FirestoreClient","Using default OnlineComponentProvider"),await hT(s,new jh))),s._onlineComponents}function $V(s){return ub(s).then(t=>t.syncEngine)}async function JV(s){const t=await ub(s),e=t.eventManager;return e.onListen=MV.bind(null,t.syncEngine),e.onUnlisten=UV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=PV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=LV.bind(null,t.syncEngine),e}function ZV(s,t,e={}){const r=new Yi;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,p){const E=new QV({next:I=>{E.Za(),c.enqueueAndForget(()=>wV(l,A)),I.fromCache&&g.source==="server"?p.reject(new ft(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),A=new DV(d,E,{includeMetadataChanges:!0,_a:!0});return IV(l,A)}(await JV(s),s.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(s,t,e){if(!e)throw new ft(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function WV(s,t,e,r){if(t===!0&&r===!0)throw new ft(J.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function dT(s){if(!lt.isDocumentKey(s))throw new ft(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function mT(s){if(lt.isDocumentKey(s))throw new ft(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function rp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":mt()}function So(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ft(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=rp(s);throw new ft(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ft(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ft(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}WV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ft(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ft(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ft(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hf{constructor(t,e,r,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gT(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HC;switch(r.type){case"firstParty":return new XC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=fT.get(e);r&&(tt("ComponentProvider","Removing Datastore"),fT.delete(e),r.terminate())}(this),Promise.resolve()}}function tO(s,t,e,r={}){var a;const l=(s=So(s,hf))._getSettings(),c=`${t}:${e}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=Ke.MOCK_USER;else{d=_w(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ft(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ke(p)}s._authCredentials=new KC(new N0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ff(this.firestore,t,this._query)}}class zn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zn(this.firestore,t,this._key)}}class Fr extends ff{constructor(t,e,r){super(t,e,Ug(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zn(this.firestore,null,new lt(t))}withConverter(t){return new Fr(this.firestore,t,this._path)}}function fb(s,t,...e){if(s=Ze(s),hb("collection","path",t),s instanceof hf){const r=Yt.fromString(t,...e);return mT(r),new Fr(s,null,r)}{if(!(s instanceof zn||s instanceof Fr))throw new ft(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(t,...e));return mT(r),new Fr(s.firestore,null,r)}}function eO(s,t,...e){if(s=Ze(s),arguments.length===1&&(t=M0.newId()),hb("doc","path",t),s instanceof hf){const r=Yt.fromString(t,...e);return dT(r),new zn(s,null,new lt(r))}{if(!(s instanceof zn||s instanceof Fr))throw new ft(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(t,...e));return dT(r),new zn(s.firestore,s instanceof Fr?s.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KA(this,"async_queue_retry"),this.Vu=()=>{const r=vh();r&&tt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=t;const e=vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=vh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new Yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Yr(t))throw t;tt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(r=>{this.Eu=r,this.du=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw rn("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.du=!1,r))));return this.mu=e,e}enqueueAfterDelay(t,e,r){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const a=tp.createAndSchedule(this,t,e,r,l=>this.yu(l));return this.Tu.push(a),a}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class df extends hf{constructor(t,e,r,a){super(t,e,r,a),this.type="firestore",this._queue=new pT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pT(t),this._firestoreClient=void 0,await t}}}function nO(s,t){const e=typeof s=="object"?s:HT(),r=typeof s=="string"?s:"(default)",a=_g(e,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=gw("firestore");l&&tO(a,...l)}return a}function db(s){if(s._terminated)throw new ft(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||mb(s),s._firestoreClient}function mb(s){var t,e,r;const a=s._freezeSettings(),l=function(d,g,p,E){return new wD(d,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,cb(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new YV(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(s._componentsProvider))}function iO(s,t){Ys("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return rO(s,jh.provider,{build:r=>new KV(r,e.cacheSizeBytes,void 0)}),Promise.resolve()}function rO(s,t,e){if((s=So(s,df))._firestoreClient||s._terminated)throw new ft(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ft(J.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},mb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Io(Ie.fromBase64String(t))}catch(e){throw new ft(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Io(Ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ft(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ft(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ft(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^__.*__$/;class gb{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new $r(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function pb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class lp{constructor(t,e,r,a,l,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new lp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:r,xu:!1});return a.Ou(t),a}Nu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:r,xu:!1});return a.vu(),a}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return qh(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(pb(this.Cu)&&sO.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class aO{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||uf(t)}Qu(t,e,r,a=!1){return new lp({Cu:t,methodName:e,qu:r,path:ue.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oO(s){const t=s._freezeSettings(),e=uf(s._databaseId);return new aO(s._databaseId,!!t.ignoreUndefinedProperties,e)}class gf extends sp{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gf}}function lO(s,t,e,r){const a=s.Qu(1,t,e);yb("Data must be an object, but it was:",a,r);const l=[],c=sn.empty();ia(r,(g,p)=>{const E=up(t,g,e);p=Ze(p);const A=a.Nu(E);if(p instanceof gf)l.push(E);else{const I=pf(p,A);I!=null&&(l.push(E),c.set(E,I))}});const d=new Ln(l);return new gb(c,d,a.fieldTransforms)}function uO(s,t,e,r,a,l){const c=s.Qu(1,t,e),d=[_T(t,r,e)],g=[a];if(l.length%2!=0)throw new ft(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(_T(t,l[I])),g.push(l[I+1]);const p=[],E=sn.empty();for(let I=d.length-1;I>=0;--I)if(!fO(p,d[I])){const k=d[I];let H=g[I];H=Ze(H);const Y=c.Nu(k);if(H instanceof gf)p.push(k);else{const q=pf(H,Y);q!=null&&(p.push(k),E.set(k,q))}}const A=new Ln(p);return new gb(E,A,c.fieldTransforms)}function pf(s,t){if(_b(s=Ze(s)))return yb("Unsupported field value:",t,s),cO(s,t);if(s instanceof sp)return function(r,a){if(!pb(a.Cu))throw a.Bu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=pf(d,a.Lu(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(s,t)}return function(r,a){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=he.fromDate(r);return{timestampValue:Ao(a.serializer,l)}}if(r instanceof he){const l=new he(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ao(a.serializer,l)}}if(r instanceof ap)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:yA(a.serializer,r._byteString)};if(r instanceof zn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gg(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof op)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Bu("VectorValues must only contain numeric values.");return Lg(d.serializer,g)})}}}}}}(r,a);throw a.Bu(`Unsupported field value: ${rp(r)}`)}(s,t)}function cO(s,t){const e={};return G0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ia(s,(r,a)=>{const l=pf(a,t.Mu(r));l!=null&&(e[r]=l)}),{mapValue:{fields:e}}}function _b(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof he||s instanceof ap||s instanceof Io||s instanceof zn||s instanceof sp||s instanceof op)}function yb(s,t,e){if(!_b(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const r=rp(e);throw r==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+r)}}function _T(s,t,e){if((t=Ze(t))instanceof mf)return t._internalPath;if(typeof t=="string")return up(s,t);throw qh("Field path arguments must be of type string or ",s,!1,void 0,e)}const hO=new RegExp("[~\\*/\\[\\]]");function up(s,t,e){if(t.search(hO)>=0)throw qh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new mf(...t.split("."))._internalPath}catch{throw qh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function qh(s,t,e,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new ft(J.INVALID_ARGUMENT,d+s+g)}function fO(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,e,r,a,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Eb("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class dO extends vb{data(){return super.data()}}function Eb(s,t){return typeof t=="string"?up(s,t):t instanceof mf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ft(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gO{convertValue(t,e="none"){switch($s(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw mt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return ia(t,(a,l)=>{r[a]=this.convertValue(l,e)}),r}convertVectorValue(t){var e,r,a;const l=(a=(r=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>ae(c.doubleValue));return new op(l)}convertGeoPoint(t){return new ap(ae(t.latitude),ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Mg(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(hu(t));default:return null}}convertTimestamp(t){const e=Ji(t);return new he(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Yt.fromString(t);pt(CA(r));const a=new Xs(r.get(1),r.get(3)),l=new lt(r.popFirst(5));return a.isEqual(e)||rn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pO extends vb{constructor(t,e,r,a,l,c){super(t,e,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Eb("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Eh extends pO{data(t={}){return super.data(t)}}class _O{constructor(t,e,r,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new oh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Eh(this._firestore,this._userDataWriter,r.key,r,new oh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ft(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new Eh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new oh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new Eh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new oh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,E=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),E=c.indexOf(d.doc.key)),{type:yO(d.type),doc:g,oldIndex:p,newIndex:E}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function yO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}class vO extends gO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Io(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new zn(this.firestore,null,e)}}function Tb(s){s=So(s,ff);const t=So(s.firestore,df),e=db(t),r=new vO(t);return mO(s._query),ZV(e,s._query).then(a=>new _O(t,r,s,a))}function EO(s,t,e,...r){s=So(s,zn);const a=So(s.firestore,df),l=oO(a);let c;return c=typeof(t=Ze(t))=="string"||t instanceof mf?uO(l,"updateDoc",s._key,t,e,r):lO(l,"updateDoc",s._key,t),TO(a,[c.toMutation(s._key,An.exists(!0))])}function TO(s,t){return function(r,a){const l=new Yi;return r.asyncQueue.enqueueAndForget(async()=>BV(await $V(r),a,l)),l.promise}(db(s),t)}(function(t,e=!0){(function(a){Vo=a})(Do),mo(new Hs("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new df(new QC(r.getProvider("auth-internal")),new JC(r.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ft(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(p.options.projectId,E)}(c,a),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),jr(hE,"4.7.3",t),jr(hE,"4.7.3","esm2017")})();const AO={apiKey:"AIzaSyCOa_tTly-MBkraG1MtlQcUx1yb5k2piBU",authDomain:"fluencyapp-37ad5.firebaseapp.com",projectId:"fluencyapp-37ad5",storageBucket:"fluencyapp-37ad5.firebasestorage.app",messagingSenderId:"135947529307",appId:"1:135947529307:web:4886c941d78d2fbd96e37e",measurementId:"G-1LKRZJZLXH"},Ab=GT(AO),ea=kC(Ab),bO=new qi,Fh=nO(Ab);iO(Fh).catch(console.warn);const SO=({user:s})=>s?ht.jsx("button",{onClick:()=>m0(ea),children:"Sign out"}):ht.jsx("button",{onClick:()=>H1(ea,bO),children:"Sign in with Google"}),IO=({user:s,onToggleSidebar:t})=>{const[e,r]=nt.useState(!1),a=nt.useRef(null),l=()=>r(!e),c=()=>r(!1);return nt.useEffect(()=>{const d=g=>{a.current&&!a.current.contains(g.target)&&c()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),ht.jsxs("nav",{className:"navbar",children:[ht.jsxs("div",{className:"navbar-left",children:[ht.jsx("button",{className:"hamburger",onClick:()=>{window.innerWidth<=768?document.body.classList.toggle("menu-open"):t()},children:""}),ht.jsx("span",{className:"navbar-title",children:"Fluency App"})]}),ht.jsxs("div",{className:"profile-container",ref:a,children:[ht.jsx("img",{src:s.photoURL||"/default-avatar.png",alt:"Profile",className:"profile-pic",onClick:l}),e&&ht.jsxs("div",{className:"dropdown",children:[ht.jsx("div",{className:"dropdown-item",children:s.displayName}),ht.jsx("div",{className:"dropdown-item",children:s.email}),ht.jsx("hr",{}),ht.jsx(NT,{to:"/profile",className:"dropdown-item",children:"My Profile"}),ht.jsx("button",{className:"dropdown-item logout",onClick:()=>m0(ea),children:"Log out"})]})]})]})},wO=()=>ht.jsx("aside",{className:"sidebar",children:ht.jsxs("nav",{children:[ht.jsx(Wc,{to:"/home",className:({isActive:s})=>s?"nav-item active":"nav-item",children:"Home"}),ht.jsx(Wc,{to:"/practice",className:({isActive:s})=>s?"nav-item active":"nav-item",children:"Practice"}),ht.jsx(Wc,{to:"/stats",className:({isActive:s})=>s?"nav-item active":"nav-item",children:"Stats"}),ht.jsx(Wc,{to:"/profile",className:({isActive:s})=>s?"nav-item active":"nav-item",children:"Profile"})]})});function RO(){return ht.jsx("h2",{children:"Welcome to Fluency App!"})}const CO=()=>{const[s,t]=nt.useState([]),[e,r]=nt.useState(null),[a,l]=nt.useState(""),[c,d]=nt.useState("");nt.useEffect(()=>{(async()=>{const E=ea.currentUser;if(!E)return;const I=(await Tb(fb(Fh,"users",E.uid,"words"))).docs.map(k=>({id:k.id,...k.data()}));t(I),r(I[Math.floor(Math.random()*I.length)])})()},[]);const g=async()=>{if(!e)return;if(a.toLowerCase().trim()===e.spanish.toLowerCase()){d(" Correct!");const E=eO(Fh,"users",ea.currentUser.uid,"words",e.id);await EO(E,{correctCount:e.correctCount+1,lastSeen:Date.now()})}else d(` Wrong! Correct answer: ${e.spanish}`);l("");const p=s[Math.floor(Math.random()*s.length)];r(p)};return ht.jsxs("div",{children:[ht.jsx("h2",{children:"Practice Mode"}),e&&ht.jsxs("div",{children:[ht.jsxs("p",{children:["Translate: ",ht.jsx("strong",{children:e.english})]}),ht.jsx("input",{value:a,onChange:p=>l(p.target.value),placeholder:"Type in Spanish"}),ht.jsx("button",{onClick:g,children:"Check"}),ht.jsx("p",{children:c})]})]})};function DO(){return ht.jsx(CO,{})}const xO=()=>{const[s,t]=nt.useState({total:0,totalCorrect:0,accuracy:0,practicedToday:0,practicedWeek:0,practicedMonth:0});return nt.useEffect(()=>{(async()=>{const r=ea.currentUser;if(!r)return;const a=Date.now(),l=1e3*60*60*24,c=l*7,d=l*30,p=(await Tb(fb(Fh,"users",r.uid,"words"))).docs.map(q=>({id:q.id,...q.data()})),E=p.length,A=p.reduce((q,st)=>q+(st.correctCount||0),0),I=E>0?Math.round(A/E*100):0,k=p.filter(q=>a-q.lastSeen<l).length,H=p.filter(q=>a-q.lastSeen<c).length,Y=p.filter(q=>a-q.lastSeen<d).length;t({total:E,totalCorrect:A,accuracy:I,practicedToday:k,practicedWeek:H,practicedMonth:Y})})()},[]),ht.jsxs("div",{children:[ht.jsx("h2",{children:" Your Progress"}),ht.jsxs("ul",{children:[ht.jsxs("li",{children:[ht.jsx("strong",{children:"Total words:"})," ",s.total]}),ht.jsxs("li",{children:[ht.jsx("strong",{children:"Total correct answers:"})," ",s.totalCorrect]}),ht.jsxs("li",{children:[ht.jsx("strong",{children:"Accuracy:"})," ",s.accuracy,"%"]}),ht.jsxs("li",{children:[ht.jsx("strong",{children:"Practiced today:"})," ",s.practicedToday]}),ht.jsxs("li",{children:[ht.jsx("strong",{children:"Practiced this week:"})," ",s.practicedWeek]}),ht.jsxs("li",{children:[ht.jsx("strong",{children:"Practiced this month:"})," ",s.practicedMonth]})]})]})};function VO(){return ht.jsx(xO,{})}function OO(){return ht.jsx("h2",{children:"Coming soon: Your profile details!"})}const NO=({user:s})=>{const[t,e]=nt.useState(!1);return ht.jsxs("div",{className:`app-layout ${t?"collapsed":""}`,children:[ht.jsx(IO,{user:s,onToggleSidebar:()=>e(r=>!r)}),ht.jsxs("div",{className:"app-body",children:[ht.jsx(wO,{}),ht.jsx("main",{className:"app-content",children:ht.jsxs(YI,{children:[ht.jsx(eo,{path:"/",element:ht.jsx(KI,{to:"/home"})}),ht.jsx(eo,{path:"/home",element:ht.jsx(RO,{})}),ht.jsx(eo,{path:"/practice",element:ht.jsx(DO,{})}),ht.jsx(eo,{path:"/stats",element:ht.jsx(VO,{})}),ht.jsx(eo,{path:"/profile",element:ht.jsx(OO,{})})]})})]})]})};function MO(){const[s]=qC(ea);return s?ht.jsx(NO,{user:s}):ht.jsx(SO,{user:s})}rI.createRoot(document.getElementById("root")).render(ht.jsx(vT.StrictMode,{children:ht.jsx(nw,{children:ht.jsx(MO,{})})}));
