function rI(s,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function RT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vm={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function sI(){if(Dv)return Gl;Dv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Gl.Fragment=t,Gl.jsx=e,Gl.jsxs=e,Gl}var xv;function aI(){return xv||(xv=1,vm.exports=sI()),vm.exports}var G=aI(),Em={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function oI(){if(Vv)return Ct;Vv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,Q={};function z(x,tt,lt){this.props=x,this.context=tt,this.refs=Q,this.updater=lt||M}z.prototype.isReactComponent={},z.prototype.setState=function(x,tt){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,tt,"setState")},z.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function nt(){}nt.prototype=z.prototype;function et(x,tt,lt){this.props=x,this.context=tt,this.refs=Q,this.updater=lt||M}var it=et.prototype=new nt;it.constructor=et,H(it,z.prototype),it.isPureReactComponent=!0;var ut=Array.isArray,ct={H:null,A:null,T:null,S:null,V:null},gt=Object.prototype.hasOwnProperty;function D(x,tt,lt,st,vt,Vt){return lt=Vt.ref,{$$typeof:s,type:x,key:tt,ref:lt!==void 0?lt:null,props:Vt}}function A(x,tt){return D(x.type,tt,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===s}function V(x){var tt={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(lt){return tt[lt]})}var O=/\/+/g;function k(x,tt){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):tt.toString(36)}function C(){}function je(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(C,C):(x.status="pending",x.then(function(tt){x.status==="pending"&&(x.status="fulfilled",x.value=tt)},function(tt){x.status==="pending"&&(x.status="rejected",x.reason=tt)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function fe(x,tt,lt,st,vt){var Vt=typeof x;(Vt==="undefined"||Vt==="boolean")&&(x=null);var At=!1;if(x===null)At=!0;else switch(Vt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(x.$$typeof){case s:case t:At=!0;break;case y:return At=x._init,fe(At(x._payload),tt,lt,st,vt)}}if(At)return vt=vt(x),At=st===""?"."+k(x,0):st,ut(vt)?(lt="",At!=null&&(lt=At.replace(O,"$&/")+"/"),fe(vt,tt,lt,"",function(Yn){return Yn})):vt!=null&&(R(vt)&&(vt=A(vt,lt+(vt.key==null||x&&x.key===vt.key?"":(""+vt.key).replace(O,"$&/")+"/")+At)),tt.push(vt)),1;At=0;var Oe=st===""?".":st+":";if(ut(x))for(var ne=0;ne<x.length;ne++)st=x[ne],Vt=Oe+k(st,ne),At+=fe(st,tt,lt,Vt,vt);else if(ne=I(x),typeof ne=="function")for(x=ne.call(x),ne=0;!(st=x.next()).done;)st=st.value,Vt=Oe+k(st,ne++),At+=fe(st,tt,lt,Vt,vt);else if(Vt==="object"){if(typeof x.then=="function")return fe(je(x),tt,lt,st,vt);throw tt=String(x),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return At}function Y(x,tt,lt){if(x==null)return x;var st=[],vt=0;return fe(x,st,"","",function(Vt){return tt.call(lt,Vt,vt++)}),st}function ot(x){if(x._status===-1){var tt=x._result;tt=tt(),tt.then(function(lt){(x._status===0||x._status===-1)&&(x._status=1,x._result=lt)},function(lt){(x._status===0||x._status===-1)&&(x._status=2,x._result=lt)}),x._status===-1&&(x._status=0,x._result=tt)}if(x._status===1)return x._result.default;throw x._result}var yt=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function qt(){}return Ct.Children={map:Y,forEach:function(x,tt,lt){Y(x,function(){tt.apply(this,arguments)},lt)},count:function(x){var tt=0;return Y(x,function(){tt++}),tt},toArray:function(x){return Y(x,function(tt){return tt})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ct.Component=z,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=et,Ct.StrictMode=i,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ct.H.useMemoCache(x)}},Ct.cache=function(x){return function(){return x.apply(null,arguments)}},Ct.cloneElement=function(x,tt,lt){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var st=H({},x.props),vt=x.key,Vt=void 0;if(tt!=null)for(At in tt.ref!==void 0&&(Vt=void 0),tt.key!==void 0&&(vt=""+tt.key),tt)!gt.call(tt,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&tt.ref===void 0||(st[At]=tt[At]);var At=arguments.length-2;if(At===1)st.children=lt;else if(1<At){for(var Oe=Array(At),ne=0;ne<At;ne++)Oe[ne]=arguments[ne+2];st.children=Oe}return D(x.type,vt,void 0,void 0,Vt,st)},Ct.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ct.createElement=function(x,tt,lt){var st,vt={},Vt=null;if(tt!=null)for(st in tt.key!==void 0&&(Vt=""+tt.key),tt)gt.call(tt,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(vt[st]=tt[st]);var At=arguments.length-2;if(At===1)vt.children=lt;else if(1<At){for(var Oe=Array(At),ne=0;ne<At;ne++)Oe[ne]=arguments[ne+2];vt.children=Oe}if(x&&x.defaultProps)for(st in At=x.defaultProps,At)vt[st]===void 0&&(vt[st]=At[st]);return D(x,Vt,void 0,void 0,null,vt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(x){return{$$typeof:d,render:x}},Ct.isValidElement=R,Ct.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:ot}},Ct.memo=function(x,tt){return{$$typeof:p,type:x,compare:tt===void 0?null:tt}},Ct.startTransition=function(x){var tt=ct.T,lt={};ct.T=lt;try{var st=x(),vt=ct.S;vt!==null&&vt(lt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(qt,yt)}catch(Vt){yt(Vt)}finally{ct.T=tt}},Ct.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},Ct.use=function(x){return ct.H.use(x)},Ct.useActionState=function(x,tt,lt){return ct.H.useActionState(x,tt,lt)},Ct.useCallback=function(x,tt){return ct.H.useCallback(x,tt)},Ct.useContext=function(x){return ct.H.useContext(x)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(x,tt){return ct.H.useDeferredValue(x,tt)},Ct.useEffect=function(x,tt,lt){var st=ct.H;if(typeof lt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(x,tt)},Ct.useId=function(){return ct.H.useId()},Ct.useImperativeHandle=function(x,tt,lt){return ct.H.useImperativeHandle(x,tt,lt)},Ct.useInsertionEffect=function(x,tt){return ct.H.useInsertionEffect(x,tt)},Ct.useLayoutEffect=function(x,tt){return ct.H.useLayoutEffect(x,tt)},Ct.useMemo=function(x,tt){return ct.H.useMemo(x,tt)},Ct.useOptimistic=function(x,tt){return ct.H.useOptimistic(x,tt)},Ct.useReducer=function(x,tt,lt){return ct.H.useReducer(x,tt,lt)},Ct.useRef=function(x){return ct.H.useRef(x)},Ct.useState=function(x){return ct.H.useState(x)},Ct.useSyncExternalStore=function(x,tt,lt){return ct.H.useSyncExternalStore(x,tt,lt)},Ct.useTransition=function(){return ct.H.useTransition()},Ct.version="19.1.0",Ct}var Nv;function pg(){return Nv||(Nv=1,Em.exports=oI()),Em.exports}var W=pg();const CT=RT(W),lI=rI({__proto__:null,default:CT},[W]);var Tm={exports:{}},Hl={},bm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function uI(){return Ov||(Ov=1,function(s){function t(Y,ot){var yt=Y.length;Y.push(ot);t:for(;0<yt;){var qt=yt-1>>>1,x=Y[qt];if(0<a(x,ot))Y[qt]=ot,Y[yt]=x,yt=qt;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ot=Y[0],yt=Y.pop();if(yt!==ot){Y[0]=yt;t:for(var qt=0,x=Y.length,tt=x>>>1;qt<tt;){var lt=2*(qt+1)-1,st=Y[lt],vt=lt+1,Vt=Y[vt];if(0>a(st,yt))vt<x&&0>a(Vt,st)?(Y[qt]=Vt,Y[vt]=yt,qt=vt):(Y[qt]=st,Y[lt]=yt,qt=lt);else if(vt<x&&0>a(Vt,yt))Y[qt]=Vt,Y[vt]=yt,qt=vt;else break t}}return ot}function a(Y,ot){var yt=Y.sortIndex-ot.sortIndex;return yt!==0?yt:Y.id-ot.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var g=[],p=[],y=1,T=null,I=3,M=!1,H=!1,Q=!1,z=!1,nt=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function ut(Y){for(var ot=e(p);ot!==null;){if(ot.callback===null)i(p);else if(ot.startTime<=Y)i(p),ot.sortIndex=ot.expirationTime,t(g,ot);else break;ot=e(p)}}function ct(Y){if(Q=!1,ut(Y),!H)if(e(g)!==null)H=!0,gt||(gt=!0,k());else{var ot=e(p);ot!==null&&fe(ct,ot.startTime-Y)}}var gt=!1,D=-1,A=5,R=-1;function V(){return z?!0:!(s.unstable_now()-R<A)}function O(){if(z=!1,gt){var Y=s.unstable_now();R=Y;var ot=!0;try{t:{H=!1,Q&&(Q=!1,et(D),D=-1),M=!0;var yt=I;try{e:{for(ut(Y),T=e(g);T!==null&&!(T.expirationTime>Y&&V());){var qt=T.callback;if(typeof qt=="function"){T.callback=null,I=T.priorityLevel;var x=qt(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof x=="function"){T.callback=x,ut(Y),ot=!0;break e}T===e(g)&&i(g),ut(Y)}else i(g);T=e(g)}if(T!==null)ot=!0;else{var tt=e(p);tt!==null&&fe(ct,tt.startTime-Y),ot=!1}}break t}finally{T=null,I=yt,M=!1}ot=void 0}}finally{ot?k():gt=!1}}}var k;if(typeof it=="function")k=function(){it(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,je=C.port2;C.port1.onmessage=O,k=function(){je.postMessage(null)}}else k=function(){nt(O,0)};function fe(Y,ot){D=nt(function(){Y(s.unstable_now())},ot)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(Y){switch(I){case 1:case 2:case 3:var ot=3;break;default:ot=I}var yt=I;I=ot;try{return Y()}finally{I=yt}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(Y,ot){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var yt=I;I=Y;try{return ot()}finally{I=yt}},s.unstable_scheduleCallback=function(Y,ot,yt){var qt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?qt+yt:qt):yt=qt,Y){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=yt+x,Y={id:y++,callback:ot,priorityLevel:Y,startTime:yt,expirationTime:x,sortIndex:-1},yt>qt?(Y.sortIndex=yt,t(p,Y),e(g)===null&&Y===e(p)&&(Q?(et(D),D=-1):Q=!0,fe(ct,yt-qt))):(Y.sortIndex=x,t(g,Y),H||M||(H=!0,gt||(gt=!0,k()))),Y},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Y){var ot=I;return function(){var yt=I;I=ot;try{return Y.apply(this,arguments)}finally{I=yt}}}}(Sm)),Sm}var Mv;function cI(){return Mv||(Mv=1,bm.exports=uI()),bm.exports}var Am={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function hI(){if(Pv)return Je;Pv=1;var s=pg();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:g,containerInfo:p,implementation:y}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Je.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,y)},Je.flushSync=function(g){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,g)return g()}finally{c.T=p,i.p=y,i.d.f()}},Je.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},Je.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Je.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin),I=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:M}):y==="script"&&i.d.X(g,{crossOrigin:T,integrity:I,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Je.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},Je.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin);i.d.L(g,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Je.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},Je.requestFormReset=function(g){i.d.r(g)},Je.unstable_batchedUpdates=function(g,p){return g(p)},Je.useFormState=function(g,p,y){return c.H.useFormState(g,p,y)},Je.useFormStatus=function(){return c.H.useHostTransitionStatus()},Je.version="19.1.0",Je}var kv;function DT(){if(kv)return Am.exports;kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Am.exports=hI(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function fI(){if(Uv)return Hl;Uv=1;var s=cI(),t=pg(),e=DT();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function g(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),n;if(m===u)return d(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,b=f.child;b;){if(b===o){E=!0,o=f,u=m;break}if(b===u){E=!0,u=f,o=m;break}b=b.sibling}if(!E){for(b=m.child;b;){if(b===o){E=!0,o=m,u=f;break}if(b===u){E=!0,u=m,o=f;break}b=b.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var y=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),et=Symbol.for("react.consumer"),it=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function je(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case z:return"Profiler";case Q:return"StrictMode";case ct:return"Suspense";case gt:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case it:return(n.displayName||"Context")+".Provider";case et:return(n._context.displayName||"Context")+".Consumer";case ut:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:je(n.type)||"Memo";case A:r=n._payload,n=n._init;try{return je(n(r))}catch{}}return null}var fe=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},qt=[],x=-1;function tt(n){return{current:n}}function lt(n){0>x||(n.current=qt[x],qt[x]=null,x--)}function st(n,r){x++,qt[x]=n.current,n.current=r}var vt=tt(null),Vt=tt(null),At=tt(null),Oe=tt(null);function ne(n,r){switch(st(At,r),st(Vt,n),st(vt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?iv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=iv(r),n=rv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}lt(vt),st(vt,n)}function Yn(){lt(vt),lt(Vt),lt(At)}function rr(n){n.memoizedState!==null&&st(Oe,n);var r=vt.current,o=rv(r,n.type);r!==o&&(st(Vt,n),st(vt,o))}function _i(n){Vt.current===n&&(lt(vt),lt(Vt)),Oe.current===n&&(lt(Oe),Bl._currentValue=yt)}var es=Object.prototype.hasOwnProperty,ns=s.unstable_scheduleCallback,is=s.unstable_cancelCallback,ko=s.unstable_shouldYield,Ou=s.unstable_requestPaint,In=s.unstable_now,vf=s.unstable_getCurrentPriorityLevel,Uo=s.unstable_ImmediatePriority,ua=s.unstable_UserBlockingPriority,rs=s.unstable_NormalPriority,Ef=s.unstable_LowPriority,ca=s.unstable_IdlePriority,Lo=s.log,Mu=s.unstable_setDisableYieldValue,de=null,Ht=null;function mn(n){if(typeof Lo=="function"&&Mu(n),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(de,n)}catch{}}var $e=Math.clz32?Math.clz32:ss,Pu=Math.log,Tf=Math.LN2;function ss(n){return n>>>=0,n===0?32:31-(Pu(n)/Tf|0)|0}var as=256,os=4194304;function jn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ha(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=jn(u):(E&=b,E!==0?f=jn(E):o||(o=b&~n,o!==0&&(f=jn(o))))):(b=u&~m,b!==0?f=jn(b):E!==0?f=jn(E):o||(o=u&~n,o!==0&&(f=jn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function ls(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Bo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(){var n=as;return as<<=1,(as&4194048)===0&&(as=256),n}function jo(){var n=os;return os<<=1,(os&62914560)===0&&(os=4194304),n}function yi(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function vi(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qo(n,r,o,u,f,m){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,w=n.expirationTimes,B=n.hiddenUpdates;for(o=E&~o;0<o;){var X=31-$e(o),J=1<<X;b[X]=0,w[X]=-1;var q=B[X];if(q!==null)for(B[X]=null,X=0;X<q.length;X++){var F=q[X];F!==null&&(F.lane&=-536870913)}o&=~J}u!==0&&Xn(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~r))}function Xn(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-$e(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Fo(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-$e(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function sr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ar(){var n=ot.p;return n!==0?n:(n=window.event,n===void 0?32:Sv(n.type))}function ku(n,r){var o=ot.p;try{return ot.p=n,r()}finally{ot.p=o}}var re=Math.random().toString(36).slice(2),we="__reactFiber$"+re,Ee="__reactProps$"+re,wn="__reactContainer$"+re,Go="__reactEvents$"+re,bf="__reactListeners$"+re,or="__reactHandles$"+re,Uu="__reactResources$"+re,us="__reactMarker$"+re;function lr(n){delete n[we],delete n[Ee],delete n[Go],delete n[bf],delete n[or]}function Ei(n){var r=n[we];if(r)return r;for(var o=n.parentNode;o;){if(r=o[wn]||o[we]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=lv(n);n!==null;){if(o=n[we])return o;n=lv(n)}return r}n=o,o=n.parentNode}return null}function $n(n){if(n=n[we]||n[wn]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Wn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function en(n){var r=n[Uu];return r||(r=n[Uu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function _e(n){n[us]=!0}var Ho=new Set,da={};function qn(n,r){Ti(n,r),Ti(n+"Capture",r)}function Ti(n,r){for(da[n]=r,n=0;n<r.length;n++)Ho.add(r[n])}var Lu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bu={},cs={};function zu(n){return es.call(cs,n)?!0:es.call(Bu,n)?!1:Lu.test(n)?cs[n]=!0:(Bu[n]=!0,!1)}function ur(n,r,o){if(zu(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Jn(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function qe(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var hs,ju;function bi(n){if(hs===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);hs=r&&r[1]||"",ju=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+n+ju}var ma=!1;function ga(n,r){if(!n||ma)return"";ma=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(F){var q=F}Reflect.construct(n,[],J)}else{try{J.call()}catch(F){q=F}n.call(J.prototype)}}else{try{throw Error()}catch(F){q=F}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],b=m[1];if(E&&b){var w=E.split(`
`),B=b.split(`
`);for(f=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(u===w.length||f===B.length)for(u=w.length-1,f=B.length-1;1<=u&&0<=f&&w[u]!==B[f];)f--;for(;1<=u&&0<=f;u--,f--)if(w[u]!==B[f]){if(u!==1||f!==1)do if(u--,f--,0>f||w[u]!==B[f]){var X=`
`+w[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{ma=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?bi(o):""}function Ko(n){switch(n.tag){case 26:case 27:case 5:return bi(n.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return ga(n.type,!1);case 11:return ga(n.type.render,!1);case 1:return ga(n.type,!0);case 31:return bi("Activity");default:return""}}function pa(n){try{var r="";do r+=Ko(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function nn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Sf(n){var r=Qo(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function _a(n){n._valueTracker||(n._valueTracker=Sf(n))}function Yo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Qo(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function fs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Af=/[\n"\\]/g;function Te(n){return n.replace(Af,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gn(n,r,o,u,f,m,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+nn(r)):n.value!==""+nn(r)&&(n.value=""+nn(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?cr(n,E,nn(r)):o!=null?cr(n,E,nn(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+nn(b):n.removeAttribute("name")}function ds(n,r,o,u,f,m,E,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+nn(o):"",r=r!=null?""+nn(r):o,b||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function cr(n,r,o){r==="number"&&fs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Si(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+nn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Xt(n,r,o){if(r!=null&&(r=""+nn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+nn(o):""}function ms(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(fe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=nn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Rn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qu(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||gs.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Xo(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&qu(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&qu(n,m,r[m])}function $o(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ya(n){return wf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ai=null;function Cn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ii=null,wi=null;function Wo(n){var r=$n(n);if(r&&(n=r.stateNode)){var o=n[Ee]||null;t:switch(n=r.stateNode,r.type){case"input":if(gn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Te(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[Ee]||null;if(!f)throw Error(i(90));gn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Yo(u)}break t;case"textarea":Xt(n,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&Si(n,!!o.multiple,r,!1)}}}var Zn=!1;function Fu(n,r,o){if(Zn)return n(r,o);Zn=!0;try{var u=n(r);return u}finally{if(Zn=!1,(Ii!==null||wi!==null)&&(kc(),Ii&&(r=Ii,n=wi,wi=Ii=null,Wo(r),n)))for(r=0;r<n.length;r++)Wo(n[r])}}function ps(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Ee]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=!1;if(Fn)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Dn=!1}var ti=null,hr=null,Ri=null;function Jo(){if(Ri)return Ri;var n,r=hr,o=r.length,u,f="value"in ti?ti.value:ti.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&r[o-u]===f[m-u];u++);return Ri=f.slice(n,1<u?1-u:void 0)}function ei(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ni(){return!0}function Zo(){return!1}function Me(n){function r(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ni:Zo,this.isPropagationStopped=Zo,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),r}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Me(Gt),ys=y({},Gt,{view:0,detail:0}),Gu=Me(ys),Ea,Ta,ii,vs=y({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ii&&(ii&&n.type==="mousemove"?(Ea=n.screenX-ii.screenX,Ta=n.screenY-ii.screenY):Ta=Ea=0,ii=n),Ea)},movementY:function(n){return"movementY"in n?n.movementY:Ta}}),xn=Me(vs),Hu=y({},vs,{dataTransfer:0}),Rf=Me(Hu),Es=y({},ys,{relatedTarget:0}),ba=Me(Es),tl=y({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=Me(tl),Ku=y({},Gt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Aa=Me(Ku),Cf=y({},Gt,{data:0}),el=Me(Cf),Ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Yu[n])?!!r[n]:!1}function bs(){return nl}var Xu=y({},ys,{key:function(n){if(n.key){var r=Ts[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(n){return n.type==="keypress"?ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ia=Me(Xu),$u=y({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Me($u),Ci=y({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Wu=Me(Ci),Ju=y({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zu=Me(Ju),tc=y({},vs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wa=Me(tc),rn=y({},Gt,{newState:0,oldState:0}),ec=Me(rn),nc=[9,13,27,32],ri=Fn&&"CompositionEvent"in window,h=null;Fn&&"documentMode"in document&&(h=document.documentMode);var _=Fn&&"TextEvent"in window&&!h,v=Fn&&(!ri||h&&8<h&&11>=h),S=" ",U=!1;function K(n,r){switch(n){case"keyup":return nc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function at(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ut=!1;function Re(n,r){switch(n){case"compositionend":return at(r);case"keypress":return r.which!==32?null:(U=!0,S);case"textInput":return n=r.data,n===S&&U?null:n;default:return null}}function Lt(n,r){if(Ut)return n==="compositionend"||!ri&&K(n,r)?(n=Jo(),Ri=hr=ti=null,Ut=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Pe[n.type]:r==="textarea"}function Di(n,r,o,u){Ii?wi?wi.push(u):wi=[u]:Ii=u,r=qc(r,"onChange"),0<r.length&&(o=new va("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Fe=null,si=null;function rl(n){Jy(n,0)}function ic(n){var r=Wn(n);if(Yo(r))return n}function vp(n,r){if(n==="change")return r}var Ep=!1;if(Fn){var Df;if(Fn){var xf="oninput"in document;if(!xf){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),xf=typeof Tp.oninput=="function"}Df=xf}else Df=!1;Ep=Df&&(!document.documentMode||9<document.documentMode)}function bp(){Fe&&(Fe.detachEvent("onpropertychange",Sp),si=Fe=null)}function Sp(n){if(n.propertyName==="value"&&ic(si)){var r=[];Di(r,si,n,Cn(n)),Fu(rl,r)}}function MS(n,r,o){n==="focusin"?(bp(),Fe=r,si=o,Fe.attachEvent("onpropertychange",Sp)):n==="focusout"&&bp()}function PS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ic(si)}function kS(n,r){if(n==="click")return ic(r)}function US(n,r){if(n==="input"||n==="change")return ic(r)}function LS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var pn=typeof Object.is=="function"?Object.is:LS;function sl(n,r){if(pn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!es.call(r,f)||!pn(n[f],r[f]))return!1}return!0}function Ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ip(n,r){var o=Ap(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ap(o)}}function wp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?wp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Rp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=fs(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=fs(n.document)}return r}function Vf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var BS=Fn&&"documentMode"in document&&11>=document.documentMode,Ra=null,Nf=null,al=null,Of=!1;function Cp(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Of||Ra==null||Ra!==fs(u)||(u=Ra,"selectionStart"in u&&Vf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),al&&sl(al,u)||(al=u,u=qc(Nf,"onSelect"),0<u.length&&(r=new va("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Ra)))}function Ss(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Ca={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},Mf={},Dp={};Fn&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function As(n){if(Mf[n])return Mf[n];if(!Ca[n])return n;var r=Ca[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Dp)return Mf[n]=r[o];return n}var xp=As("animationend"),Vp=As("animationiteration"),Np=As("animationstart"),zS=As("transitionrun"),jS=As("transitionstart"),qS=As("transitioncancel"),Op=As("transitionend"),Mp=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function Gn(n,r){Mp.set(n,r),qn(r,[n])}var Pp=new WeakMap;function Vn(n,r){if(typeof n=="object"&&n!==null){var o=Pp.get(n);return o!==void 0?o:(r={value:n,source:r,stack:pa(r)},Pp.set(n,r),r)}return{value:n,source:r,stack:pa(r)}}var Nn=[],Da=0,kf=0;function rc(){for(var n=Da,r=kf=Da=0;r<n;){var o=Nn[r];Nn[r++]=null;var u=Nn[r];Nn[r++]=null;var f=Nn[r];Nn[r++]=null;var m=Nn[r];if(Nn[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&kp(o,f,m)}}function sc(n,r,o,u){Nn[Da++]=n,Nn[Da++]=r,Nn[Da++]=o,Nn[Da++]=u,kf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Uf(n,r,o,u){return sc(n,r,o,u),ac(n)}function xa(n,r){return sc(n,null,null,r),ac(n)}function kp(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-$e(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function ac(n){if(50<Vl)throw Vl=0,Fd=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Va={};function FS(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,r,o,u){return new FS(n,r,o,u)}function Lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xi(n,r){var o=n.alternate;return o===null?(o=_n(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Up(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function oc(n,r,o,u,f,m){var E=0;if(u=n,typeof n=="function")Lf(n)&&(E=1);else if(typeof n=="string")E=HA(n,o,vt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case R:return n=_n(31,o,r,f),n.elementType=R,n.lanes=m,n;case H:return Is(o.children,f,m,r);case Q:E=8,f|=24;break;case z:return n=_n(12,o,r,f|2),n.elementType=z,n.lanes=m,n;case ct:return n=_n(13,o,r,f),n.elementType=ct,n.lanes=m,n;case gt:return n=_n(19,o,r,f),n.elementType=gt,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nt:case it:E=10;break t;case et:E=9;break t;case ut:E=11;break t;case D:E=14;break t;case A:E=16,u=null;break t}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=_n(E,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function Is(n,r,o,u){return n=_n(7,n,u,r),n.lanes=o,n}function Bf(n,r,o){return n=_n(6,n,null,r),n.lanes=o,n}function zf(n,r,o){return r=_n(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Na=[],Oa=0,lc=null,uc=0,On=[],Mn=0,ws=null,Vi=1,Ni="";function Rs(n,r){Na[Oa++]=uc,Na[Oa++]=lc,lc=n,uc=r}function Lp(n,r,o){On[Mn++]=Vi,On[Mn++]=Ni,On[Mn++]=ws,ws=n;var u=Vi;n=Ni;var f=32-$e(u)-1;u&=~(1<<f),o+=1;var m=32-$e(r)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Vi=1<<32-$e(r)+f|o<<f|u,Ni=m+n}else Vi=1<<m|o<<f|u,Ni=n}function jf(n){n.return!==null&&(Rs(n,1),Lp(n,1,0))}function qf(n){for(;n===lc;)lc=Na[--Oa],Na[Oa]=null,uc=Na[--Oa],Na[Oa]=null;for(;n===ws;)ws=On[--Mn],On[Mn]=null,Ni=On[--Mn],On[Mn]=null,Vi=On[--Mn],On[Mn]=null}var sn=null,me=null,Ft=!1,Cs=null,ai=!1,Ff=Error(i(519));function Ds(n){var r=Error(i(418,""));throw ul(Vn(r,n)),Ff}function Bp(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[we]=n,r[Ee]=u,o){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(o=0;o<Ol.length;o++)Mt(Ol[o],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":Mt("invalid",r),ds(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),_a(r);break;case"select":Mt("invalid",r);break;case"textarea":Mt("invalid",r),ms(r,u.value,u.defaultValue,u.children),_a(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||nv(r.textContent,o)?(u.popover!=null&&(Mt("beforetoggle",r),Mt("toggle",r)),u.onScroll!=null&&Mt("scroll",r),u.onScrollEnd!=null&&Mt("scrollend",r),u.onClick!=null&&(r.onclick=Fc),r=!0):r=!1,r||Ds(n)}function zp(n){for(sn=n.return;sn;)switch(sn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:sn=sn.return}}function ol(n){if(n!==sn)return!1;if(!Ft)return zp(n),Ft=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||sm(n.type,n.memoizedProps)),o=!o),o&&me&&Ds(n),zp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){me=Kn(n.nextSibling);break t}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}me=null}}else r===27?(r=me,Rr(n.type)?(n=um,um=null,me=n):me=r):me=sn?Kn(n.stateNode.nextSibling):null;return!0}function ll(){me=sn=null,Ft=!1}function jp(){var n=Cs;return n!==null&&(hn===null?hn=n:hn.push.apply(hn,n),Cs=null),n}function ul(n){Cs===null?Cs=[n]:Cs.push(n)}var Gf=tt(null),xs=null,Oi=null;function fr(n,r,o){st(Gf,r._currentValue),r._currentValue=o}function Mi(n){n._currentValue=Gf.current,lt(Gf)}function Hf(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Kf(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;t:for(;m!==null;){var b=m;m=f;for(var w=0;w<r.length;w++)if(b.context===r[w]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),Hf(m.return,o,n),u||(E=null);break t}m=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),Hf(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function cl(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=f.type;pn(f.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(f===Oe.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}f=f.return}n!==null&&Kf(r,n,o,u),r.flags|=262144}function cc(n){for(n=n.firstContext;n!==null;){if(!pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Vs(n){xs=n,Oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function We(n){return qp(xs,n)}function hc(n,r){return xs===null&&Vs(n),qp(n,r)}function qp(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Oi===null){if(n===null)throw Error(i(308));Oi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Oi=Oi.next=r;return o}var GS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},HS=s.unstable_scheduleCallback,KS=s.unstable_NormalPriority,De={$$typeof:it,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new GS,data:new Map,refCount:0}}function hl(n){n.refCount--,n.refCount===0&&HS(KS,function(){n.controller.abort()})}var fl=null,Yf=0,Ma=0,Pa=null;function QS(n,r){if(fl===null){var o=fl=[];Yf=0,Ma=$d(),Pa={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Yf++,r.then(Fp,Fp),r}function Fp(){if(--Yf===0&&fl!==null){Pa!==null&&(Pa.status="fulfilled");var n=fl;fl=null,Ma=0,Pa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function YS(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Gp=Y.S;Y.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&QS(n,r),Gp!==null&&Gp(n,r)};var Ns=tt(null);function Xf(){var n=Ns.current;return n!==null?n:ie.pooledCache}function fc(n,r){r===null?st(Ns,Ns.current):st(Ns,r.pool)}function Hp(){var n=Xf();return n===null?null:{parent:De._currentValue,pool:n}}var dl=Error(i(460)),Kp=Error(i(474)),dc=Error(i(542)),$f={then:function(){}};function Qp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mc(){}function Yp(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(mc,mc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,$p(n),n;default:if(typeof r.status=="string")r.then(mc,mc);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,$p(n),n}throw ml=r,dl}}var ml=null;function Xp(){if(ml===null)throw Error(i(459));var n=ml;return ml=null,n}function $p(n){if(n===dl||n===dc)throw Error(i(483))}var dr=!1;function Wf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function mr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=ac(n),kp(n,null,o),r}return sc(n,u,r,o),ac(n)}function gl(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Fo(n,o)}}function Zf(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var td=!1;function pl(){if(td){var n=Pa;if(n!==null)throw n}}function _l(n,r,o,u){td=!1;var f=n.updateQueue;dr=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var w=b,B=w.next;w.next=null,E===null?m=B:E.next=B,E=w;var X=n.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==E&&(b===null?X.firstBaseUpdate=B:b.next=B,X.lastBaseUpdate=w))}if(m!==null){var J=f.baseState;E=0,X=B=w=null,b=m;do{var q=b.lane&-536870913,F=q!==b.lane;if(F?(Bt&q)===q:(u&q)===q){q!==0&&q===Ma&&(td=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var St=n,Tt=b;q=r;var Jt=o;switch(Tt.tag){case 1:if(St=Tt.payload,typeof St=="function"){J=St.call(Jt,J,q);break t}J=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Tt.payload,q=typeof St=="function"?St.call(Jt,J,q):St,q==null)break t;J=y({},J,q);break t;case 2:dr=!0}}q=b.callback,q!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[q]:F.push(q))}else F={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(B=X=F,w=J):X=X.next=F,E|=q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;F=b,b=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);X===null&&(w=J),f.baseState=w,f.firstBaseUpdate=B,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Sr|=E,n.lanes=E,n.memoizedState=J}}function Wp(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Jp(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Wp(o[n],r)}var ka=tt(null),gc=tt(0);function Zp(n,r){n=ji,st(gc,n),st(ka,r),ji=n|r.baseLanes}function ed(){st(gc,ji),st(ka,ka.current)}function nd(){ji=gc.current,lt(ka),lt(gc)}var pr=0,Dt=null,$t=null,be=null,pc=!1,Ua=!1,Os=!1,_c=0,yl=0,La=null,XS=0;function ye(){throw Error(i(321))}function id(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!pn(n[o],r[o]))return!1;return!0}function rd(n,r,o,u,f,m){return pr=m,Dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=n===null||n.memoizedState===null?k_:U_,Os=!1,m=o(u,f),Os=!1,Ua&&(m=e_(r,o,u,f)),t_(n),m}function t_(n){Y.H=Sc;var r=$t!==null&&$t.next!==null;if(pr=0,be=$t=Dt=null,pc=!1,yl=0,La=null,r)throw Error(i(300));n===null||ke||(n=n.dependencies,n!==null&&cc(n)&&(ke=!0))}function e_(n,r,o,u){Dt=n;var f=0;do{if(Ua&&(La=null),yl=0,Ua=!1,25<=f)throw Error(i(301));if(f+=1,be=$t=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=nA,m=r(o,u)}while(Ua);return m}function $S(){var n=Y.H,r=n.useState()[0];return r=typeof r.then=="function"?vl(r):r,n=n.useState()[0],($t!==null?$t.memoizedState:null)!==n&&(Dt.flags|=1024),r}function sd(){var n=_c!==0;return _c=0,n}function ad(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function od(n){if(pc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}pc=!1}pr=0,be=$t=Dt=null,Ua=!1,yl=_c=0,La=null}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Dt.memoizedState=be=n:be=be.next=n,be}function Se(){if($t===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var r=be===null?Dt.memoizedState:be.next;if(r!==null)be=r,$t=n;else{if(n===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},be===null?Dt.memoizedState=be=n:be=be.next=n}return be}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(n){var r=yl;return yl+=1,La===null&&(La=[]),n=Yp(La,n,r),r=Dt,(be===null?r.memoizedState:be.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?k_:U_),n}function yc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vl(n);if(n.$$typeof===it)return We(n)}throw Error(i(438,String(n)))}function ud(n){var r=null,o=Dt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ld(),Dt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=V;return r.index++,o}function Pi(n,r){return typeof r=="function"?r(n):r}function vc(n){var r=Se();return cd(r,$t,n)}function cd(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var b=E=null,w=null,B=r,X=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Bt&J)===J:(pr&J)===J){var q=B.revertLane;if(q===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Ma&&(X=!0);else if((pr&q)===q){B=B.next,q===Ma&&(X=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(b=w=J,E=m):w=w.next=J,Dt.lanes|=q,Sr|=q;J=B.action,Os&&o(m,J),m=B.hasEagerState?B.eagerState:o(m,J)}else q={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(b=w=q,E=m):w=w.next=q,Dt.lanes|=J,Sr|=J;B=B.next}while(B!==null&&B!==r);if(w===null?E=m:w.next=b,!pn(m,n.memoizedState)&&(ke=!0,X&&(o=Pa,o!==null)))throw o;n.memoizedState=m,n.baseState=E,n.baseQueue=w,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function hd(n){var r=Se(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);pn(m,r.memoizedState)||(ke=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function n_(n,r,o){var u=Dt,f=Se(),m=Ft;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var E=!pn(($t||f).memoizedState,o);E&&(f.memoizedState=o,ke=!0),f=f.queue;var b=s_.bind(null,u,f,n);if(El(2048,8,b,[n]),f.getSnapshot!==r||E||be!==null&&be.memoizedState.tag&1){if(u.flags|=2048,Ba(9,Ec(),r_.bind(null,u,f,o,r),null),ie===null)throw Error(i(349));m||(pr&124)!==0||i_(u,r,o)}return o}function i_(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Dt.updateQueue,r===null?(r=ld(),Dt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function r_(n,r,o,u){r.value=o,r.getSnapshot=u,a_(r)&&o_(n)}function s_(n,r,o){return o(function(){a_(r)&&o_(n)})}function a_(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!pn(n,o)}catch{return!0}}function o_(n){var r=xa(n,2);r!==null&&bn(r,n,2)}function fd(n){var r=un();if(typeof n=="function"){var o=n;if(n=o(),Os){mn(!0);try{o()}finally{mn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:n},r}function l_(n,r,o,u){return n.baseState=o,cd(n,$t,typeof u=="function"?u:Pi)}function WS(n,r,o,u,f){if(bc(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,u_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function u_(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=Y.T,E={};Y.T=E;try{var b=o(f,u),w=Y.S;w!==null&&w(E,b),c_(n,r,b)}catch(B){dd(n,r,B)}finally{Y.T=m}}else try{m=o(f,u),c_(n,r,m)}catch(B){dd(n,r,B)}}function c_(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){h_(n,r,u)},function(u){return dd(n,r,u)}):h_(n,r,o)}function h_(n,r,o){r.status="fulfilled",r.value=o,f_(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,u_(n,o)))}function dd(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,f_(r),r=r.next;while(r!==u)}n.action=null}function f_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function d_(n,r){return r}function m_(n,r){if(Ft){var o=ie.formState;if(o!==null){t:{var u=Dt;if(Ft){if(me){e:{for(var f=me,m=ai;f.nodeType!==8;){if(!m){f=null;break e}if(f=Kn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){me=Kn(f.nextSibling),u=f.data==="F!";break t}}Ds(u)}u=!1}u&&(r=o[0])}}return o=un(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d_,lastRenderedState:r},o.queue=u,o=O_.bind(null,Dt,u),u.dispatch=o,u=fd(!1),m=yd.bind(null,Dt,!1,u.queue),u=un(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=WS.bind(null,Dt,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function g_(n){var r=Se();return p_(r,$t,n)}function p_(n,r,o){if(r=cd(n,r,d_)[0],n=vc(Pi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=vl(r)}catch(E){throw E===dl?dc:E}else u=r;r=Se();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Dt.flags|=2048,Ba(9,Ec(),JS.bind(null,f,o),null)),[u,m,n]}function JS(n,r){n.action=r}function __(n){var r=Se(),o=$t;if(o!==null)return p_(r,o,n);Se(),r=r.memoizedState,o=Se();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function Ba(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Dt.updateQueue,r===null&&(r=ld(),Dt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function Ec(){return{destroy:void 0,resource:void 0}}function y_(){return Se().memoizedState}function Tc(n,r,o,u){var f=un();u=u===void 0?null:u,Dt.flags|=n,f.memoizedState=Ba(1|r,Ec(),o,u)}function El(n,r,o,u){var f=Se();u=u===void 0?null:u;var m=f.memoizedState.inst;$t!==null&&u!==null&&id(u,$t.memoizedState.deps)?f.memoizedState=Ba(r,m,o,u):(Dt.flags|=n,f.memoizedState=Ba(1|r,m,o,u))}function v_(n,r){Tc(8390656,8,n,r)}function E_(n,r){El(2048,8,n,r)}function T_(n,r){return El(4,2,n,r)}function b_(n,r){return El(4,4,n,r)}function S_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function A_(n,r,o){o=o!=null?o.concat([n]):null,El(4,4,S_.bind(null,r,n),o)}function md(){}function I_(n,r){var o=Se();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&id(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function w_(n,r){var o=Se();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&id(r,u[1]))return u[0];if(u=n(),Os){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,r],u}function gd(n,r,o){return o===void 0||(pr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=Dy(),Dt.lanes|=n,Sr|=n,o)}function R_(n,r,o,u){return pn(o,r)?o:ka.current!==null?(n=gd(n,o,u),pn(n,r)||(ke=!0),n):(pr&42)===0?(ke=!0,n.memoizedState=o):(n=Dy(),Dt.lanes|=n,Sr|=n,r)}function C_(n,r,o,u,f){var m=ot.p;ot.p=m!==0&&8>m?m:8;var E=Y.T,b={};Y.T=b,yd(n,!1,r,o);try{var w=f(),B=Y.S;if(B!==null&&B(b,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var X=YS(w,u);Tl(n,r,X,Tn(n))}else Tl(n,r,u,Tn(n))}catch(J){Tl(n,r,{then:function(){},status:"rejected",reason:J},Tn())}finally{ot.p=m,Y.T=E}}function ZS(){}function pd(n,r,o,u){if(n.tag!==5)throw Error(i(476));var f=D_(n).queue;C_(n,f,r,yt,o===null?ZS:function(){return x_(n),o(u)})}function D_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:yt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function x_(n){var r=D_(n).next.queue;Tl(n,r,{},Tn())}function _d(){return We(Bl)}function V_(){return Se().memoizedState}function N_(){return Se().memoizedState}function tA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Tn();n=mr(o);var u=gr(r,n,o);u!==null&&(bn(u,r,o),gl(u,r,o)),r={cache:Qf()},n.payload=r;return}r=r.return}}function eA(n,r,o){var u=Tn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},bc(n)?M_(r,o):(o=Uf(n,r,o,u),o!==null&&(bn(o,n,u),P_(o,r,u)))}function O_(n,r,o){var u=Tn();Tl(n,r,o,u)}function Tl(n,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(bc(n))M_(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,b=m(E,o);if(f.hasEagerState=!0,f.eagerState=b,pn(b,E))return sc(n,r,f,0),ie===null&&rc(),!1}catch{}finally{}if(o=Uf(n,r,f,u),o!==null)return bn(o,n,u),P_(o,r,u),!0}return!1}function yd(n,r,o,u){if(u={lane:2,revertLane:$d(),action:u,hasEagerState:!1,eagerState:null,next:null},bc(n)){if(r)throw Error(i(479))}else r=Uf(n,o,u,2),r!==null&&bn(r,n,2)}function bc(n){var r=n.alternate;return n===Dt||r!==null&&r===Dt}function M_(n,r){Ua=pc=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function P_(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Fo(n,o)}}var Sc={readContext:We,use:yc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},k_={readContext:We,use:yc,useCallback:function(n,r){return un().memoizedState=[n,r===void 0?null:r],n},useContext:We,useEffect:v_,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Tc(4194308,4,S_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Tc(4194308,4,n,r)},useInsertionEffect:function(n,r){Tc(4,2,n,r)},useMemo:function(n,r){var o=un();r=r===void 0?null:r;var u=n();if(Os){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=un();if(o!==void 0){var f=o(r);if(Os){mn(!0);try{o(r)}finally{mn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=eA.bind(null,Dt,n),[u.memoizedState,n]},useRef:function(n){var r=un();return n={current:n},r.memoizedState=n},useState:function(n){n=fd(n);var r=n.queue,o=O_.bind(null,Dt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:md,useDeferredValue:function(n,r){var o=un();return gd(o,n,r)},useTransition:function(){var n=fd(!1);return n=C_.bind(null,Dt,n.queue,!0,!1),un().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Dt,f=un();if(Ft){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ie===null)throw Error(i(349));(Bt&124)!==0||i_(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,v_(s_.bind(null,u,m,n),[n]),u.flags|=2048,Ba(9,Ec(),r_.bind(null,u,m,o,r),null),o},useId:function(){var n=un(),r=ie.identifierPrefix;if(Ft){var o=Ni,u=Vi;o=(u&~(1<<32-$e(u)-1)).toString(32)+o,r=""+r+"R"+o,o=_c++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=XS++,r=""+r+"r"+o.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:_d,useFormState:m_,useActionState:m_,useOptimistic:function(n){var r=un();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=yd.bind(null,Dt,!0,o),o.dispatch=r,[n,r]},useMemoCache:ud,useCacheRefresh:function(){return un().memoizedState=tA.bind(null,Dt)}},U_={readContext:We,use:yc,useCallback:I_,useContext:We,useEffect:E_,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:b_,useMemo:w_,useReducer:vc,useRef:y_,useState:function(){return vc(Pi)},useDebugValue:md,useDeferredValue:function(n,r){var o=Se();return R_(o,$t.memoizedState,n,r)},useTransition:function(){var n=vc(Pi)[0],r=Se().memoizedState;return[typeof n=="boolean"?n:vl(n),r]},useSyncExternalStore:n_,useId:V_,useHostTransitionStatus:_d,useFormState:g_,useActionState:g_,useOptimistic:function(n,r){var o=Se();return l_(o,$t,n,r)},useMemoCache:ud,useCacheRefresh:N_},nA={readContext:We,use:yc,useCallback:I_,useContext:We,useEffect:E_,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:b_,useMemo:w_,useReducer:hd,useRef:y_,useState:function(){return hd(Pi)},useDebugValue:md,useDeferredValue:function(n,r){var o=Se();return $t===null?gd(o,n,r):R_(o,$t.memoizedState,n,r)},useTransition:function(){var n=hd(Pi)[0],r=Se().memoizedState;return[typeof n=="boolean"?n:vl(n),r]},useSyncExternalStore:n_,useId:V_,useHostTransitionStatus:_d,useFormState:__,useActionState:__,useOptimistic:function(n,r){var o=Se();return $t!==null?l_(o,$t,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:ud,useCacheRefresh:N_},za=null,bl=0;function Ac(n){var r=bl;return bl+=1,za===null&&(za=[]),Yp(za,n,r)}function Sl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ic(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function L_(n){var r=n._init;return r(n._payload)}function B_(n){function r(P,N){if(n){var L=P.deletions;L===null?(P.deletions=[N],P.flags|=16):L.push(N)}}function o(P,N){if(!n)return null;for(;N!==null;)r(P,N),N=N.sibling;return null}function u(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function f(P,N){return P=xi(P,N),P.index=0,P.sibling=null,P}function m(P,N,L){return P.index=L,n?(L=P.alternate,L!==null?(L=L.index,L<N?(P.flags|=67108866,N):L):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function E(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,N,L,$){return N===null||N.tag!==6?(N=Bf(L,P.mode,$),N.return=P,N):(N=f(N,L),N.return=P,N)}function w(P,N,L,$){var dt=L.type;return dt===H?X(P,N,L.props.children,$,L.key):N!==null&&(N.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===A&&L_(dt)===N.type)?(N=f(N,L.props),Sl(N,L),N.return=P,N):(N=oc(L.type,L.key,L.props,null,P.mode,$),Sl(N,L),N.return=P,N)}function B(P,N,L,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=zf(L,P.mode,$),N.return=P,N):(N=f(N,L.children||[]),N.return=P,N)}function X(P,N,L,$,dt){return N===null||N.tag!==7?(N=Is(L,P.mode,$,dt),N.return=P,N):(N=f(N,L),N.return=P,N)}function J(P,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Bf(""+N,P.mode,L),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case I:return L=oc(N.type,N.key,N.props,null,P.mode,L),Sl(L,N),L.return=P,L;case M:return N=zf(N,P.mode,L),N.return=P,N;case A:var $=N._init;return N=$(N._payload),J(P,N,L)}if(fe(N)||k(N))return N=Is(N,P.mode,L,null),N.return=P,N;if(typeof N.then=="function")return J(P,Ac(N),L);if(N.$$typeof===it)return J(P,hc(P,N),L);Ic(P,N)}return null}function q(P,N,L,$){var dt=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return dt!==null?null:b(P,N,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return L.key===dt?w(P,N,L,$):null;case M:return L.key===dt?B(P,N,L,$):null;case A:return dt=L._init,L=dt(L._payload),q(P,N,L,$)}if(fe(L)||k(L))return dt!==null?null:X(P,N,L,$,null);if(typeof L.then=="function")return q(P,N,Ac(L),$);if(L.$$typeof===it)return q(P,N,hc(P,L),$);Ic(P,L)}return null}function F(P,N,L,$,dt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(L)||null,b(N,P,""+$,dt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case I:return P=P.get($.key===null?L:$.key)||null,w(N,P,$,dt);case M:return P=P.get($.key===null?L:$.key)||null,B(N,P,$,dt);case A:var Nt=$._init;return $=Nt($._payload),F(P,N,L,$,dt)}if(fe($)||k($))return P=P.get(L)||null,X(N,P,$,dt,null);if(typeof $.then=="function")return F(P,N,L,Ac($),dt);if($.$$typeof===it)return F(P,N,L,hc(N,$),dt);Ic(N,$)}return null}function St(P,N,L,$){for(var dt=null,Nt=null,pt=N,bt=N=0,Le=null;pt!==null&&bt<L.length;bt++){pt.index>bt?(Le=pt,pt=null):Le=pt.sibling;var jt=q(P,pt,L[bt],$);if(jt===null){pt===null&&(pt=Le);break}n&&pt&&jt.alternate===null&&r(P,pt),N=m(jt,N,bt),Nt===null?dt=jt:Nt.sibling=jt,Nt=jt,pt=Le}if(bt===L.length)return o(P,pt),Ft&&Rs(P,bt),dt;if(pt===null){for(;bt<L.length;bt++)pt=J(P,L[bt],$),pt!==null&&(N=m(pt,N,bt),Nt===null?dt=pt:Nt.sibling=pt,Nt=pt);return Ft&&Rs(P,bt),dt}for(pt=u(pt);bt<L.length;bt++)Le=F(pt,P,bt,L[bt],$),Le!==null&&(n&&Le.alternate!==null&&pt.delete(Le.key===null?bt:Le.key),N=m(Le,N,bt),Nt===null?dt=Le:Nt.sibling=Le,Nt=Le);return n&&pt.forEach(function(Nr){return r(P,Nr)}),Ft&&Rs(P,bt),dt}function Tt(P,N,L,$){if(L==null)throw Error(i(151));for(var dt=null,Nt=null,pt=N,bt=N=0,Le=null,jt=L.next();pt!==null&&!jt.done;bt++,jt=L.next()){pt.index>bt?(Le=pt,pt=null):Le=pt.sibling;var Nr=q(P,pt,jt.value,$);if(Nr===null){pt===null&&(pt=Le);break}n&&pt&&Nr.alternate===null&&r(P,pt),N=m(Nr,N,bt),Nt===null?dt=Nr:Nt.sibling=Nr,Nt=Nr,pt=Le}if(jt.done)return o(P,pt),Ft&&Rs(P,bt),dt;if(pt===null){for(;!jt.done;bt++,jt=L.next())jt=J(P,jt.value,$),jt!==null&&(N=m(jt,N,bt),Nt===null?dt=jt:Nt.sibling=jt,Nt=jt);return Ft&&Rs(P,bt),dt}for(pt=u(pt);!jt.done;bt++,jt=L.next())jt=F(pt,P,bt,jt.value,$),jt!==null&&(n&&jt.alternate!==null&&pt.delete(jt.key===null?bt:jt.key),N=m(jt,N,bt),Nt===null?dt=jt:Nt.sibling=jt,Nt=jt);return n&&pt.forEach(function(iI){return r(P,iI)}),Ft&&Rs(P,bt),dt}function Jt(P,N,L,$){if(typeof L=="object"&&L!==null&&L.type===H&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case I:t:{for(var dt=L.key;N!==null;){if(N.key===dt){if(dt=L.type,dt===H){if(N.tag===7){o(P,N.sibling),$=f(N,L.props.children),$.return=P,P=$;break t}}else if(N.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===A&&L_(dt)===N.type){o(P,N.sibling),$=f(N,L.props),Sl($,L),$.return=P,P=$;break t}o(P,N);break}else r(P,N);N=N.sibling}L.type===H?($=Is(L.props.children,P.mode,$,L.key),$.return=P,P=$):($=oc(L.type,L.key,L.props,null,P.mode,$),Sl($,L),$.return=P,P=$)}return E(P);case M:t:{for(dt=L.key;N!==null;){if(N.key===dt)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){o(P,N.sibling),$=f(N,L.children||[]),$.return=P,P=$;break t}else{o(P,N);break}else r(P,N);N=N.sibling}$=zf(L,P.mode,$),$.return=P,P=$}return E(P);case A:return dt=L._init,L=dt(L._payload),Jt(P,N,L,$)}if(fe(L))return St(P,N,L,$);if(k(L)){if(dt=k(L),typeof dt!="function")throw Error(i(150));return L=dt.call(L),Tt(P,N,L,$)}if(typeof L.then=="function")return Jt(P,N,Ac(L),$);if(L.$$typeof===it)return Jt(P,N,hc(P,L),$);Ic(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(o(P,N.sibling),$=f(N,L),$.return=P,P=$):(o(P,N),$=Bf(L,P.mode,$),$.return=P,P=$),E(P)):o(P,N)}return function(P,N,L,$){try{bl=0;var dt=Jt(P,N,L,$);return za=null,dt}catch(pt){if(pt===dl||pt===dc)throw pt;var Nt=_n(29,pt,null,P.mode);return Nt.lanes=$,Nt.return=P,Nt}finally{}}}var ja=B_(!0),z_=B_(!1),Pn=tt(null),oi=null;function _r(n){var r=n.alternate;st(xe,xe.current&1),st(Pn,n),oi===null&&(r===null||ka.current!==null||r.memoizedState!==null)&&(oi=n)}function j_(n){if(n.tag===22){if(st(xe,xe.current),st(Pn,n),oi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(oi=n)}}else yr()}function yr(){st(xe,xe.current),st(Pn,Pn.current)}function ki(n){lt(Pn),oi===n&&(oi=null),lt(xe)}var xe=tt(0);function wc(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||lm(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function vd(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:y({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Ed={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Tn(),f=mr(u);f.payload=r,o!=null&&(f.callback=o),r=gr(n,f,u),r!==null&&(bn(r,n,u),gl(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Tn(),f=mr(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=gr(n,f,u),r!==null&&(bn(r,n,u),gl(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Tn(),u=mr(o);u.tag=2,r!=null&&(u.callback=r),r=gr(n,u,o),r!==null&&(bn(r,n,o),gl(r,n,o))}};function q_(n,r,o,u,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!sl(o,u)||!sl(f,m):!0}function F_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Ed.enqueueReplaceState(r,r.state,null)}function Ms(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=y({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Rc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function G_(n){Rc(n)}function H_(n){console.error(n)}function K_(n){Rc(n)}function Cc(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Q_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Td(n,r,o){return o=mr(o),o.tag=3,o.payload={element:null},o.callback=function(){Cc(n,r)},o}function Y_(n){return n=mr(n),n.tag=3,n}function X_(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){Q_(r,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Q_(r,o,u),typeof f!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function iA(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&cl(r,o,f,!0),o=Pn.current,o!==null){switch(o.tag){case 13:return oi===null?Hd():o.alternate===null&&ge===0&&(ge=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===$f?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Qd(n,u,f)),!1;case 22:return o.flags|=65536,u===$f?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Qd(n,u,f)),!1}throw Error(i(435,o.tag))}return Qd(n,u,f),Hd(),!1}if(Ft)return r=Pn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Ff&&(n=Error(i(422),{cause:u}),ul(Vn(n,o)))):(u!==Ff&&(r=Error(i(423),{cause:u}),ul(Vn(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Vn(u,o),f=Td(n.stateNode,u,f),Zf(n,f),ge!==4&&(ge=2)),!1;var m=Error(i(520),{cause:u});if(m=Vn(m,o),xl===null?xl=[m]:xl.push(m),ge!==4&&(ge=2),r===null)return!0;u=Vn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Td(o.stateNode,u,n),Zf(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ar===null||!Ar.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Y_(f),X_(f,n,o,u),Zf(o,f),!1}o=o.return}while(o!==null);return!1}var $_=Error(i(461)),ke=!1;function Ge(n,r,o,u){r.child=n===null?z_(r,null,o,u):ja(r,n.child,o,u)}function W_(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return Vs(r),u=rd(n,r,o,E,m,f),b=sd(),n!==null&&!ke?(ad(n,r,f),Ui(n,r,f)):(Ft&&b&&jf(r),r.flags|=1,Ge(n,r,u,f),r.child)}function J_(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!Lf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Z_(n,r,m,u,f)):(n=oc(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Dd(n,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:sl,o(E,u)&&n.ref===r.ref)return Ui(n,r,f)}return r.flags|=1,n=xi(m,u),n.ref=r.ref,n.return=r,r.child=n}function Z_(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(sl(m,u)&&n.ref===r.ref)if(ke=!1,r.pendingProps=u=m,Dd(n,f))(n.flags&131072)!==0&&(ke=!0);else return r.lanes=n.lanes,Ui(n,r,f)}return bd(n,r,o,u,f)}function ty(n,r,o){var u=r.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return ey(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&fc(r,m!==null?m.cachePool:null),m!==null?Zp(r,m):ed(),j_(r);else return r.lanes=r.childLanes=536870912,ey(n,r,m!==null?m.baseLanes|o:o,o)}else m!==null?(fc(r,m.cachePool),Zp(r,m),yr(),r.memoizedState=null):(n!==null&&fc(r,null),ed(),yr());return Ge(n,r,f,o),r.child}function ey(n,r,o,u){var f=Xf();return f=f===null?null:{parent:De._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},n!==null&&fc(r,null),ed(),j_(r),n!==null&&cl(n,r,u,!0),null}function Dc(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function bd(n,r,o,u,f){return Vs(r),o=rd(n,r,o,u,void 0,f),u=sd(),n!==null&&!ke?(ad(n,r,f),Ui(n,r,f)):(Ft&&u&&jf(r),r.flags|=1,Ge(n,r,o,f),r.child)}function ny(n,r,o,u,f,m){return Vs(r),r.updateQueue=null,o=e_(r,u,o,f),t_(n),u=sd(),n!==null&&!ke?(ad(n,r,m),Ui(n,r,m)):(Ft&&u&&jf(r),r.flags|=1,Ge(n,r,o,m),r.child)}function iy(n,r,o,u,f){if(Vs(r),r.stateNode===null){var m=Va,E=o.contextType;typeof E=="object"&&E!==null&&(m=We(E)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ed,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},Wf(r),E=o.contextType,m.context=typeof E=="object"&&E!==null?We(E):Va,m.state=r.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(vd(r,o,E,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Ed.enqueueReplaceState(m,m.state,null),_l(r,u,m,f),pl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var b=r.memoizedProps,w=Ms(o,b);m.props=w;var B=m.context,X=o.contextType;E=Va,typeof X=="object"&&X!==null&&(E=We(X));var J=o.getDerivedStateFromProps;X=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||B!==E)&&F_(r,m,u,E),dr=!1;var q=r.memoizedState;m.state=q,_l(r,u,m,f),pl(),B=r.memoizedState,b||q!==B||dr?(typeof J=="function"&&(vd(r,o,J,u),B=r.memoizedState),(w=dr||q_(r,o,w,u,q,B,E))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=B),m.props=u,m.state=B,m.context=E,u=w):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Jf(n,r),E=r.memoizedProps,X=Ms(o,E),m.props=X,J=r.pendingProps,q=m.context,B=o.contextType,w=Va,typeof B=="object"&&B!==null&&(w=We(B)),b=o.getDerivedStateFromProps,(B=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==J||q!==w)&&F_(r,m,u,w),dr=!1,q=r.memoizedState,m.state=q,_l(r,u,m,f),pl();var F=r.memoizedState;E!==J||q!==F||dr||n!==null&&n.dependencies!==null&&cc(n.dependencies)?(typeof b=="function"&&(vd(r,o,b,u),F=r.memoizedState),(X=dr||q_(r,o,X,u,q,F,w)||n!==null&&n.dependencies!==null&&cc(n.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,F,w),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,F,w)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=F),m.props=u,m.state=F,m.context=w,u=X):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,Dc(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=ja(r,n.child,null,f),r.child=ja(r,null,o,f)):Ge(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Ui(n,r,f),n}function ry(n,r,o,u){return ll(),r.flags|=256,Ge(n,r,o,u),r.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(n){return{baseLanes:n,cachePool:Hp()}}function Id(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=kn),n}function sy(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(xe.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ft){if(f?_r(r):yr(),Ft){var b=me,w;if(w=b){t:{for(w=b,b=ai;w.nodeType!==8;){if(!b){b=null;break t}if(w=Kn(w.nextSibling),w===null){b=null;break t}}b=w}b!==null?(r.memoizedState={dehydrated:b,treeContext:ws!==null?{id:Vi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},w=_n(18,null,null,0),w.stateNode=b,w.return=r,r.child=w,sn=r,me=null,w=!0):w=!1}w||Ds(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return lm(b)?r.lanes=32:r.lanes=536870912,null;ki(r)}return b=u.children,u=u.fallback,f?(yr(),f=r.mode,b=xc({mode:"hidden",children:b},f),u=Is(u,f,o,null),b.return=r,u.return=r,b.sibling=u,r.child=b,f=r.child,f.memoizedState=Ad(o),f.childLanes=Id(n,E,o),r.memoizedState=Sd,u):(_r(r),wd(r,b))}if(w=n.memoizedState,w!==null&&(b=w.dehydrated,b!==null)){if(m)r.flags&256?(_r(r),r.flags&=-257,r=Rd(n,r,o)):r.memoizedState!==null?(yr(),r.child=n.child,r.flags|=128,r=null):(yr(),f=u.fallback,b=r.mode,u=xc({mode:"visible",children:u.children},b),f=Is(f,b,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,ja(r,n.child,null,o),u=r.child,u.memoizedState=Ad(o),u.childLanes=Id(n,E,o),r.memoizedState=Sd,r=f);else if(_r(r),lm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var B=E.dgst;E=B,u=Error(i(419)),u.stack="",u.digest=E,ul({value:u,source:null,stack:null}),r=Rd(n,r,o)}else if(ke||cl(n,r,o,!1),E=(o&n.childLanes)!==0,ke||E){if(E=ie,E!==null&&(u=o&-o,u=(u&42)!==0?1:sr(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==w.retryLane))throw w.retryLane=u,xa(n,u),bn(E,n,u),$_;b.data==="$?"||Hd(),r=Rd(n,r,o)}else b.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=w.treeContext,me=Kn(b.nextSibling),sn=r,Ft=!0,Cs=null,ai=!1,n!==null&&(On[Mn++]=Vi,On[Mn++]=Ni,On[Mn++]=ws,Vi=n.id,Ni=n.overflow,ws=r),r=wd(r,u.children),r.flags|=4096);return r}return f?(yr(),f=u.fallback,b=r.mode,w=n.child,B=w.sibling,u=xi(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,B!==null?f=xi(B,f):(f=Is(f,b,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,b=n.child.memoizedState,b===null?b=Ad(o):(w=b.cachePool,w!==null?(B=De._currentValue,w=w.parent!==B?{parent:B,pool:B}:w):w=Hp(),b={baseLanes:b.baseLanes|o,cachePool:w}),f.memoizedState=b,f.childLanes=Id(n,E,o),r.memoizedState=Sd,u):(_r(r),o=n.child,n=o.sibling,o=xi(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=o,r.memoizedState=null,o)}function wd(n,r){return r=xc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function xc(n,r){return n=_n(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Rd(n,r,o){return ja(r,n.child,null,o),n=wd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function ay(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Hf(n.return,r,o)}function Cd(n,r,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function oy(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;if(Ge(n,r,u.children,o),u=xe.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ay(n,o,r);else if(n.tag===19)ay(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(st(xe,u),f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&wc(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Cd(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&wc(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Cd(r,!0,o,null,m);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ui(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Sr|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(cl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=xi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=xi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Dd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&cc(n)))}function rA(n,r,o){switch(r.tag){case 3:ne(r,r.stateNode.containerInfo),fr(r,De,n.memoizedState.cache),ll();break;case 27:case 5:rr(r);break;case 4:ne(r,r.stateNode.containerInfo);break;case 10:fr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(_r(r),r.flags|=128,null):(o&r.child.childLanes)!==0?sy(n,r,o):(_r(r),n=Ui(n,r,o),n!==null?n.sibling:null);_r(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(cl(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return oy(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(xe,xe.current),u)break;return null;case 22:case 23:return r.lanes=0,ty(n,r,o);case 24:fr(r,De,n.memoizedState.cache)}return Ui(n,r,o)}function ly(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)ke=!0;else{if(!Dd(n,o)&&(r.flags&128)===0)return ke=!1,rA(n,r,o);ke=(n.flags&131072)!==0}else ke=!1,Ft&&(r.flags&1048576)!==0&&Lp(r,uc,r.index);switch(r.lanes=0,r.tag){case 16:t:{n=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")Lf(u)?(n=Ms(u,n),r.tag=1,r=iy(null,r,u,n,o)):(r.tag=0,r=bd(null,r,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ut){r.tag=11,r=W_(null,r,u,n,o);break t}else if(f===D){r.tag=14,r=J_(null,r,u,n,o);break t}}throw r=je(u)||u,Error(i(306,r,""))}}return r;case 0:return bd(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Ms(u,r.pendingProps),iy(n,r,u,f,o);case 3:t:{if(ne(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,Jf(n,r),_l(r,u,null,o);var E=r.memoizedState;if(u=E.cache,fr(r,De,u),u!==m.cache&&Kf(r,[De],o,!0),pl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=ry(n,r,u,o);break t}else if(u!==f){f=Vn(Error(i(424)),r),ul(f),r=ry(n,r,u,o);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(me=Kn(n.firstChild),sn=r,Ft=!0,Cs=null,ai=!0,o=z_(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ll(),u===f){r=Ui(n,r,o);break t}Ge(n,r,u,o)}r=r.child}return r;case 26:return Dc(n,r),n===null?(o=fv(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ft||(o=r.type,n=r.pendingProps,u=Gc(At.current).createElement(o),u[we]=r,u[Ee]=n,Ke(u,o,n),_e(u),r.stateNode=u):r.memoizedState=fv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return rr(r),n===null&&Ft&&(u=r.stateNode=uv(r.type,r.pendingProps,At.current),sn=r,ai=!0,f=me,Rr(r.type)?(um=f,me=Kn(u.firstChild)):me=f),Ge(n,r,r.pendingProps.children,o),Dc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ft&&((f=u=me)&&(u=NA(u,r.type,r.pendingProps,ai),u!==null?(r.stateNode=u,sn=r,me=Kn(u.firstChild),ai=!1,f=!0):f=!1),f||Ds(r)),rr(r),f=r.type,m=r.pendingProps,E=n!==null?n.memoizedProps:null,u=m.children,sm(f,m)?u=null:E!==null&&sm(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=rd(n,r,$S,null,null,o),Bl._currentValue=f),Dc(n,r),Ge(n,r,u,o),r.child;case 6:return n===null&&Ft&&((n=o=me)&&(o=OA(o,r.pendingProps,ai),o!==null?(r.stateNode=o,sn=r,me=null,n=!0):n=!1),n||Ds(r)),null;case 13:return sy(n,r,o);case 4:return ne(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=ja(r,null,u,o):Ge(n,r,u,o),r.child;case 11:return W_(n,r,r.type,r.pendingProps,o);case 7:return Ge(n,r,r.pendingProps,o),r.child;case 8:return Ge(n,r,r.pendingProps.children,o),r.child;case 12:return Ge(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,fr(r,r.type,u.value),Ge(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Vs(r),f=We(f),u=u(f),r.flags|=1,Ge(n,r,u,o),r.child;case 14:return J_(n,r,r.type,r.pendingProps,o);case 15:return Z_(n,r,r.type,r.pendingProps,o);case 19:return oy(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=xc(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=xi(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return ty(n,r,o);case 24:return Vs(r),u=We(De),n===null?(f=Xf(),f===null&&(f=ie,m=Qf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},Wf(r),fr(r,De,f)):((n.lanes&o)!==0&&(Jf(n,r),_l(r,null,null,o),pl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),fr(r,De,u)):(u=m.cache,fr(r,De,u),u!==f.cache&&Kf(r,[De],o,!0))),Ge(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Li(n){n.flags|=4}function uy(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!_v(r)){if(r=Pn.current,r!==null&&((Bt&4194048)===Bt?oi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||r!==oi))throw ml=$f,Kp;n.flags|=8192}}function Vc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?jo():536870912,n.lanes|=r,Ha|=r)}function Al(n,r){if(!Ft)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function le(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function sA(n,r,o){var u=r.pendingProps;switch(qf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(r),null;case 1:return le(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Mi(De),Yn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ol(r)?Li(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jp())),le(r),null;case 26:return o=r.memoizedState,n===null?(Li(r),o!==null?(le(r),uy(r,o)):(le(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Li(r),le(r),uy(r,o)):(le(r),r.flags&=-16777217):(n.memoizedProps!==u&&Li(r),le(r),r.flags&=-16777217),null;case 27:_i(r),o=At.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Li(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return le(r),null}n=vt.current,ol(r)?Bp(r):(n=uv(f,u,o),r.stateNode=n,Li(r))}return le(r),null;case 5:if(_i(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Li(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return le(r),null}if(n=vt.current,ol(r))Bp(r);else{switch(f=Gc(At.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[we]=r,n[Ee]=u;t:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;t:switch(Ke(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Li(r)}}return le(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Li(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=At.current,ol(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=sn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[we]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||nv(n.nodeValue,o)),n||Ds(r)}else n=Gc(n).createTextNode(u),n[we]=r,r.stateNode=n}return le(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ol(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[we]=r}else ll(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;le(r),f=!1}else f=jp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ki(r),r):(ki(r),null)}if(ki(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Vc(r,r.updateQueue),le(r),null;case 4:return Yn(),n===null&&tm(r.stateNode.containerInfo),le(r),null;case 10:return Mi(r.type),le(r),null;case 19:if(lt(xe),f=r.memoizedState,f===null)return le(r),null;if(u=(r.flags&128)!==0,m=f.rendering,m===null)if(u)Al(f,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=wc(n),m!==null){for(r.flags|=128,Al(f,!1),n=m.updateQueue,r.updateQueue=n,Vc(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Up(o,n),o=o.sibling;return st(xe,xe.current&1|2),r.child}n=n.sibling}f.tail!==null&&In()>Mc&&(r.flags|=128,u=!0,Al(f,!1),r.lanes=4194304)}else{if(!u)if(n=wc(m),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,Vc(r,n),Al(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ft)return le(r),null}else 2*In()-f.renderingStartTime>Mc&&o!==536870912&&(r.flags|=128,u=!0,Al(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=In(),r.sibling=null,n=xe.current,st(xe,u?n&1|2:n&1),r):(le(r),null);case 22:case 23:return ki(r),nd(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(le(r),r.subtreeFlags&6&&(r.flags|=8192)):le(r),o=r.updateQueue,o!==null&&Vc(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&lt(Ns),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Mi(De),le(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function aA(n,r){switch(qf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Mi(De),Yn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return _i(r),null;case 13:if(ki(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ll()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return lt(xe),null;case 4:return Yn(),null;case 10:return Mi(r.type),null;case 22:case 23:return ki(r),nd(),n!==null&&lt(Ns),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Mi(De),null;case 25:return null;default:return null}}function cy(n,r){switch(qf(r),r.tag){case 3:Mi(De),Yn();break;case 26:case 27:case 5:_i(r);break;case 4:Yn();break;case 13:ki(r);break;case 19:lt(xe);break;case 10:Mi(r.type);break;case 22:case 23:ki(r),nd(),n!==null&&lt(Ns);break;case 24:Mi(De)}}function Il(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(b){ee(r,r.return,b)}}function vr(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=r;var w=o,B=b;try{B()}catch(X){ee(f,w,X)}}}u=u.next}while(u!==m)}}catch(X){ee(r,r.return,X)}}function hy(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{Jp(r,o)}catch(u){ee(n,n.return,u)}}}function fy(n,r,o){o.props=Ms(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ee(n,r,u)}}function wl(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ee(n,r,f)}}function li(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ee(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ee(n,r,f)}else o.current=null}function dy(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ee(n,n.return,f)}}function xd(n,r,o){try{var u=n.stateNode;RA(u,n.type,o,r),u[Ee]=r}catch(f){ee(n,n.return,f)}}function my(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Rr(n.type)||n.tag===4}function Vd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||my(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Rr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nd(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Fc));else if(u!==4&&(u===27&&Rr(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Nd(n,r,o),n=n.sibling;n!==null;)Nd(n,r,o),n=n.sibling}function Nc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&Rr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Nc(n,r,o),n=n.sibling;n!==null;)Nc(n,r,o),n=n.sibling}function gy(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ke(r,u,o),r[we]=n,r[Ee]=o}catch(m){ee(n,n.return,m)}}var Bi=!1,ve=!1,Od=!1,py=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function oA(n,r){if(n=n.containerInfo,im=$c,n=Rp(n),Vf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var E=0,b=-1,w=-1,B=0,X=0,J=n,q=null;e:for(;;){for(var F;J!==o||f!==0&&J.nodeType!==3||(b=E+f),J!==m||u!==0&&J.nodeType!==3||(w=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(F=J.firstChild)!==null;)q=J,J=F;for(;;){if(J===n)break e;if(q===o&&++B===f&&(b=E),q===m&&++X===u&&(w=E),(F=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=F}o=b===-1||w===-1?null:{start:b,end:w}}else o=null}o=o||{start:0,end:0}}else o=null;for(rm={focusedElem:n,selectionRange:o},$c=!1,Ue=r;Ue!==null;)if(r=Ue,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Ue=n;else for(;Ue!==null;){switch(r=Ue,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var St=Ms(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(St,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){ee(o,o.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)om(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":om(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Ue=n;break}Ue=r.return}}function _y(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Er(n,o),u&4&&Il(5,o);break;case 1:if(Er(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(E){ee(o,o.return,E)}else{var f=Ms(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ee(o,o.return,E)}}u&64&&hy(o),u&512&&wl(o,o.return);break;case 3:if(Er(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Jp(n,r)}catch(E){ee(o,o.return,E)}}break;case 27:r===null&&u&4&&gy(o);case 26:case 5:Er(n,o),r===null&&u&4&&dy(o),u&512&&wl(o,o.return);break;case 12:Er(n,o);break;case 13:Er(n,o),u&4&&Ey(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=pA.bind(null,o),MA(n,o))));break;case 22:if(u=o.memoizedState!==null||Bi,!u){r=r!==null&&r.memoizedState!==null||ve,f=Bi;var m=ve;Bi=u,(ve=r)&&!m?Tr(n,o,(o.subtreeFlags&8772)!==0):Er(n,o),Bi=f,ve=m}break;case 30:break;default:Er(n,o)}}function yy(n){var r=n.alternate;r!==null&&(n.alternate=null,yy(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&lr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var se=null,cn=!1;function zi(n,r,o){for(o=o.child;o!==null;)vy(n,r,o),o=o.sibling}function vy(n,r,o){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(de,o)}catch{}switch(o.tag){case 26:ve||li(o,r),zi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ve||li(o,r);var u=se,f=cn;Rr(o.type)&&(se=o.stateNode,cn=!1),zi(n,r,o),Pl(o.stateNode),se=u,cn=f;break;case 5:ve||li(o,r);case 6:if(u=se,f=cn,se=null,zi(n,r,o),se=u,cn=f,se!==null)if(cn)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(o.stateNode)}catch(m){ee(o,r,m)}else try{se.removeChild(o.stateNode)}catch(m){ee(o,r,m)}break;case 18:se!==null&&(cn?(n=se,ov(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Fl(n)):ov(se,o.stateNode));break;case 4:u=se,f=cn,se=o.stateNode.containerInfo,cn=!0,zi(n,r,o),se=u,cn=f;break;case 0:case 11:case 14:case 15:ve||vr(2,o,r),ve||vr(4,o,r),zi(n,r,o);break;case 1:ve||(li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&fy(o,r,u)),zi(n,r,o);break;case 21:zi(n,r,o);break;case 22:ve=(u=ve)||o.memoizedState!==null,zi(n,r,o),ve=u;break;default:zi(n,r,o)}}function Ey(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fl(n)}catch(o){ee(r,r.return,o)}}function lA(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new py),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new py),r;default:throw Error(i(435,n.tag))}}function Md(n,r){var o=lA(n);r.forEach(function(u){var f=_A.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function yn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,E=r,b=E;t:for(;b!==null;){switch(b.tag){case 27:if(Rr(b.type)){se=b.stateNode,cn=!1;break t}break;case 5:se=b.stateNode,cn=!1;break t;case 3:case 4:se=b.stateNode.containerInfo,cn=!0;break t}b=b.return}if(se===null)throw Error(i(160));vy(m,E,f),se=null,cn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ty(r,n),r=r.sibling}var Hn=null;function Ty(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(r,n),vn(n),u&4&&(vr(3,n,n.return),Il(3,n),vr(5,n,n.return));break;case 1:yn(r,n),vn(n),u&512&&(ve||o===null||li(o,o.return)),u&64&&Bi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Hn;if(yn(r,n),vn(n),u&512&&(ve||o===null||li(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[us]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Ke(m,u,o),m[we]=n,_e(m),u=m;break t;case"link":var E=gv("link","href",f).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(m=E[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break e}}m=f.createElement(u),Ke(m,u,o),f.head.appendChild(m);break;case"meta":if(E=gv("meta","content",f).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(m=E[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break e}}m=f.createElement(u),Ke(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[we]=n,_e(m),u=m}n.stateNode=u}else pv(f,n.type,n.stateNode);else n.stateNode=mv(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?pv(f,n.type,n.stateNode):mv(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&xd(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(r,n),vn(n),u&512&&(ve||o===null||li(o,o.return)),o!==null&&u&4&&xd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(r,n),vn(n),u&512&&(ve||o===null||li(o,o.return)),n.flags&32){f=n.stateNode;try{Rn(f,"")}catch(F){ee(n,n.return,F)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,xd(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Od=!0);break;case 6:if(yn(r,n),vn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(F){ee(n,n.return,F)}}break;case 3:if(Qc=null,f=Hn,Hn=Hc(r.containerInfo),yn(r,n),Hn=f,vn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(F){ee(n,n.return,F)}Od&&(Od=!1,by(n));break;case 4:u=Hn,Hn=Hc(n.stateNode.containerInfo),yn(r,n),vn(n),Hn=u;break;case 12:yn(r,n),vn(n);break;case 13:yn(r,n),vn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(zd=In()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Md(n,u)));break;case 22:f=n.memoizedState!==null;var w=o!==null&&o.memoizedState!==null,B=Bi,X=ve;if(Bi=B||f,ve=X||w,yn(r,n),ve=X,Bi=B,vn(n),u&8192)t:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||w||Bi||ve||Ps(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){w=o=r;try{if(m=w.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=w.stateNode;var J=w.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(F){ee(w,w.return,F)}}}else if(r.tag===6){if(o===null){w=r;try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(F){ee(w,w.return,F)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Md(n,o))));break;case 19:yn(r,n),vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Md(n,u)));break;case 30:break;case 21:break;default:yn(r,n),vn(n)}}function vn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(my(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Vd(n);Nc(n,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(Rn(E,""),o.flags&=-33);var b=Vd(n);Nc(n,b,E);break;case 3:case 4:var w=o.stateNode.containerInfo,B=Vd(n);Nd(n,B,w);break;default:throw Error(i(161))}}catch(X){ee(n,n.return,X)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function by(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;by(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Er(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)_y(n,r.alternate,r),r=r.sibling}function Ps(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:vr(4,r,r.return),Ps(r);break;case 1:li(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&fy(r,r.return,o),Ps(r);break;case 27:Pl(r.stateNode);case 26:case 5:li(r,r.return),Ps(r);break;case 22:r.memoizedState===null&&Ps(r);break;case 30:Ps(r);break;default:Ps(r)}n=n.sibling}}function Tr(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Tr(f,m,o),Il(4,m);break;case 1:if(Tr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){ee(u,u.return,B)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var w=f.shared.hiddenCallbacks;if(w!==null)for(f.shared.hiddenCallbacks=null,f=0;f<w.length;f++)Wp(w[f],b)}catch(B){ee(u,u.return,B)}}o&&E&64&&hy(m),wl(m,m.return);break;case 27:gy(m);case 26:case 5:Tr(f,m,o),o&&u===null&&E&4&&dy(m),wl(m,m.return);break;case 12:Tr(f,m,o);break;case 13:Tr(f,m,o),o&&E&4&&Ey(f,m);break;case 22:m.memoizedState===null&&Tr(f,m,o),wl(m,m.return);break;case 30:break;default:Tr(f,m,o)}r=r.sibling}}function Pd(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&hl(o))}function kd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hl(n))}function ui(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sy(n,r,o,u),r=r.sibling}function Sy(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ui(n,r,o,u),f&2048&&Il(9,r);break;case 1:ui(n,r,o,u);break;case 3:ui(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hl(n)));break;case 12:if(f&2048){ui(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,E=m.id,b=m.onPostCommit;typeof b=="function"&&b(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(w){ee(r,r.return,w)}}else ui(n,r,o,u);break;case 13:ui(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?ui(n,r,o,u):Rl(n,r):m._visibility&2?ui(n,r,o,u):(m._visibility|=2,qa(n,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&Pd(E,r);break;case 24:ui(n,r,o,u),f&2048&&kd(r.alternate,r);break;default:ui(n,r,o,u)}}function qa(n,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,E=r,b=o,w=u,B=E.flags;switch(E.tag){case 0:case 11:case 15:qa(m,E,b,w,f),Il(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?qa(m,E,b,w,f):Rl(m,E):(X._visibility|=2,qa(m,E,b,w,f)),f&&B&2048&&Pd(E.alternate,E);break;case 24:qa(m,E,b,w,f),f&&B&2048&&kd(E.alternate,E);break;default:qa(m,E,b,w,f)}r=r.sibling}}function Rl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:Rl(o,u),f&2048&&Pd(u.alternate,u);break;case 24:Rl(o,u),f&2048&&kd(u.alternate,u);break;default:Rl(o,u)}r=r.sibling}}var Cl=8192;function Fa(n){if(n.subtreeFlags&Cl)for(n=n.child;n!==null;)Ay(n),n=n.sibling}function Ay(n){switch(n.tag){case 26:Fa(n),n.flags&Cl&&n.memoizedState!==null&&QA(Hn,n.memoizedState,n.memoizedProps);break;case 5:Fa(n);break;case 3:case 4:var r=Hn;Hn=Hc(n.stateNode.containerInfo),Fa(n),Hn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Cl,Cl=16777216,Fa(n),Cl=r):Fa(n));break;default:Fa(n)}}function Iy(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Dl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ue=u,Ry(u,n)}Iy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wy(n),n=n.sibling}function wy(n){switch(n.tag){case 0:case 11:case 15:Dl(n),n.flags&2048&&vr(9,n,n.return);break;case 3:Dl(n);break;case 12:Dl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Oc(n)):Dl(n);break;default:Dl(n)}}function Oc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Ue=u,Ry(u,n)}Iy(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:vr(8,r,r.return),Oc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Oc(r));break;default:Oc(r)}n=n.sibling}}function Ry(n,r){for(;Ue!==null;){var o=Ue;switch(o.tag){case 0:case 11:case 15:vr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ue=u;else t:for(o=n;Ue!==null;){u=Ue;var f=u.sibling,m=u.return;if(yy(u),u===o){Ue=null;break t}if(f!==null){f.return=m,Ue=f;break t}Ue=m}}}var uA={getCacheForType:function(n){var r=We(De),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},cA=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ie=null,Ot=null,Bt=0,Qt=0,En=null,br=!1,Ga=!1,Ud=!1,ji=0,ge=0,Sr=0,ks=0,Ld=0,kn=0,Ha=0,xl=null,hn=null,Bd=!1,zd=0,Mc=1/0,Pc=null,Ar=null,He=0,Ir=null,Ka=null,Qa=0,jd=0,qd=null,Cy=null,Vl=0,Fd=null;function Tn(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(Y.T!==null){var n=Ma;return n!==0?n:$d()}return ar()}function Dy(){kn===0&&(kn=(Bt&536870912)===0||Ft?zo():536870912);var n=Pn.current;return n!==null&&(n.flags|=32),kn}function bn(n,r,o){(n===ie&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&(Ya(n,0),wr(n,Bt,kn,!1)),vi(n,o),((Kt&2)===0||n!==ie)&&(n===ie&&((Kt&2)===0&&(ks|=o),ge===4&&wr(n,Bt,kn,!1)),ci(n))}function xy(n,r,o){if((Kt&6)!==0)throw Error(i(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||ls(n,r),f=u?dA(n,r):Kd(n,r,!0),m=u;do{if(f===0){Ga&&!u&&wr(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!hA(o)){f=Kd(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var b=n;f=xl;var w=b.current.memoizedState.isDehydrated;if(w&&(Ya(b,E).flags|=256),E=Kd(b,E,!1),E!==2){if(Ud&&!w){b.errorRecoveryDisabledLanes|=m,ks|=m,f=4;break t}m=hn,hn=f,m!==null&&(hn===null?hn=m:hn.push.apply(hn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){Ya(n,0),wr(n,r,0,!0);break}t:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:wr(u,r,kn,!br);break t;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=zd+300-In(),10<f)){if(wr(u,r,kn,!br),ha(u,0,!0)!==0)break t;u.timeoutHandle=sv(Vy.bind(null,u,o,hn,Pc,Bd,r,kn,ks,Ha,br,m,2,-0,0),f);break t}Vy(u,o,hn,Pc,Bd,r,kn,ks,Ha,br,m,0,-0,0)}}break}while(!0);ci(n)}function Vy(n,r,o,u,f,m,E,b,w,B,X,J,q,F){if(n.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Ll={stylesheets:null,count:0,unsuspend:KA},Ay(r),J=YA(),J!==null)){n.cancelPendingCommit=J(Ly.bind(null,n,r,m,o,u,f,E,b,w,X,1,q,F)),wr(n,m,E,!B);return}Ly(n,r,m,o,u,f,E,b,w)}function hA(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!pn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function wr(n,r,o,u){r&=~Ld,r&=~ks,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-$e(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&Xn(n,o,r)}function kc(){return(Kt&6)===0?(Nl(0),!1):!0}function Gd(){if(Ot!==null){if(Qt===0)var n=Ot.return;else n=Ot,Oi=xs=null,od(n),za=null,bl=0,n=Ot;for(;n!==null;)cy(n.alternate,n),n=n.return;Ot=null}}function Ya(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,DA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Gd(),ie=n,Ot=o=xi(n.current,null),Bt=r,Qt=0,En=null,br=!1,Ga=ls(n,r),Ud=!1,Ha=kn=Ld=ks=Sr=ge=0,hn=xl=null,Bd=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-$e(u),m=1<<f;r|=n[f],u&=~m}return ji=r,rc(),o}function Ny(n,r){Dt=null,Y.H=Sc,r===dl||r===dc?(r=Xp(),Qt=3):r===Kp?(r=Xp(),Qt=4):Qt=r===$_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,En=r,Ot===null&&(ge=1,Cc(n,Vn(r,n.current)))}function Oy(){var n=Y.H;return Y.H=Sc,n===null?Sc:n}function My(){var n=Y.A;return Y.A=uA,n}function Hd(){ge=4,br||(Bt&4194048)!==Bt&&Pn.current!==null||(Ga=!0),(Sr&134217727)===0&&(ks&134217727)===0||ie===null||wr(ie,Bt,kn,!1)}function Kd(n,r,o){var u=Kt;Kt|=2;var f=Oy(),m=My();(ie!==n||Bt!==r)&&(Pc=null,Ya(n,r)),r=!1;var E=ge;t:do try{if(Qt!==0&&Ot!==null){var b=Ot,w=En;switch(Qt){case 8:Gd(),E=6;break t;case 3:case 2:case 9:case 6:Pn.current===null&&(r=!0);var B=Qt;if(Qt=0,En=null,Xa(n,b,w,B),o&&Ga){E=0;break t}break;default:B=Qt,Qt=0,En=null,Xa(n,b,w,B)}}fA(),E=ge;break}catch(X){Ny(n,X)}while(!0);return r&&n.shellSuspendCounter++,Oi=xs=null,Kt=u,Y.H=f,Y.A=m,Ot===null&&(ie=null,Bt=0,rc()),E}function fA(){for(;Ot!==null;)Py(Ot)}function dA(n,r){var o=Kt;Kt|=2;var u=Oy(),f=My();ie!==n||Bt!==r?(Pc=null,Mc=In()+500,Ya(n,r)):Ga=ls(n,r);t:do try{if(Qt!==0&&Ot!==null){r=Ot;var m=En;e:switch(Qt){case 1:Qt=0,En=null,Xa(n,r,m,1);break;case 2:case 9:if(Qp(m)){Qt=0,En=null,ky(r);break}r=function(){Qt!==2&&Qt!==9||ie!==n||(Qt=7),ci(n)},m.then(r,r);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Qp(m)?(Qt=0,En=null,ky(r)):(Qt=0,En=null,Xa(n,r,m,7));break;case 5:var E=null;switch(Ot.tag){case 26:E=Ot.memoizedState;case 5:case 27:var b=Ot;if(!E||_v(E)){Qt=0,En=null;var w=b.sibling;if(w!==null)Ot=w;else{var B=b.return;B!==null?(Ot=B,Uc(B)):Ot=null}break e}}Qt=0,En=null,Xa(n,r,m,5);break;case 6:Qt=0,En=null,Xa(n,r,m,6);break;case 8:Gd(),ge=6;break t;default:throw Error(i(462))}}mA();break}catch(X){Ny(n,X)}while(!0);return Oi=xs=null,Y.H=u,Y.A=f,Kt=o,Ot!==null?0:(ie=null,Bt=0,rc(),ge)}function mA(){for(;Ot!==null&&!ko();)Py(Ot)}function Py(n){var r=ly(n.alternate,n,ji);n.memoizedProps=n.pendingProps,r===null?Uc(n):Ot=r}function ky(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=ny(o,r,r.pendingProps,r.type,void 0,Bt);break;case 11:r=ny(o,r,r.pendingProps,r.type.render,r.ref,Bt);break;case 5:od(r);default:cy(o,r),r=Ot=Up(r,ji),r=ly(o,r,ji)}n.memoizedProps=n.pendingProps,r===null?Uc(n):Ot=r}function Xa(n,r,o,u){Oi=xs=null,od(r),za=null,bl=0;var f=r.return;try{if(iA(n,f,r,o,Bt)){ge=1,Cc(n,Vn(o,n.current)),Ot=null;return}}catch(m){if(f!==null)throw Ot=f,m;ge=1,Cc(n,Vn(o,n.current)),Ot=null;return}r.flags&32768?(Ft||u===1?n=!0:Ga||(Bt&536870912)!==0?n=!1:(br=n=!0,(u===2||u===9||u===3||u===6)&&(u=Pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Uy(r,n)):Uc(r)}function Uc(n){var r=n;do{if((r.flags&32768)!==0){Uy(r,br);return}n=r.return;var o=sA(r.alternate,r,ji);if(o!==null){Ot=o;return}if(r=r.sibling,r!==null){Ot=r;return}Ot=r=n}while(r!==null);ge===0&&(ge=5)}function Uy(n,r){do{var o=aA(n.alternate,n);if(o!==null){o.flags&=32767,Ot=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ot=n;return}Ot=n=o}while(n!==null);ge=6,Ot=null}function Ly(n,r,o,u,f,m,E,b,w){n.cancelPendingCommit=null;do Lc();while(He!==0);if((Kt&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=kf,qo(n,o,m,E,b,w),n===ie&&(Ot=ie=null,Bt=0),Ka=r,Ir=n,Qa=o,jd=m,qd=f,Cy=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,yA(rs,function(){return Fy(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=ot.p,ot.p=2,E=Kt,Kt|=4;try{oA(n,r,o)}finally{Kt=E,ot.p=f,Y.T=u}}He=1,By(),zy(),jy()}}function By(){if(He===1){He=0;var n=Ir,r=Ka,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ot.p;ot.p=2;var f=Kt;Kt|=4;try{Ty(r,n);var m=rm,E=Rp(n.containerInfo),b=m.focusedElem,w=m.selectionRange;if(E!==b&&b&&b.ownerDocument&&wp(b.ownerDocument.documentElement,b)){if(w!==null&&Vf(b)){var B=w.start,X=w.end;if(X===void 0&&(X=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(X,b.value.length);else{var J=b.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var F=q.getSelection(),St=b.textContent.length,Tt=Math.min(w.start,St),Jt=w.end===void 0?Tt:Math.min(w.end,St);!F.extend&&Tt>Jt&&(E=Jt,Jt=Tt,Tt=E);var P=Ip(b,Tt),N=Ip(b,Jt);if(P&&N&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==N.node||F.focusOffset!==N.offset)){var L=J.createRange();L.setStart(P.node,P.offset),F.removeAllRanges(),Tt>Jt?(F.addRange(L),F.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),F.addRange(L))}}}}for(J=[],F=b;F=F.parentNode;)F.nodeType===1&&J.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var $=J[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}$c=!!im,rm=im=null}finally{Kt=f,ot.p=u,Y.T=o}}n.current=r,He=2}}function zy(){if(He===2){He=0;var n=Ir,r=Ka,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ot.p;ot.p=2;var f=Kt;Kt|=4;try{_y(n,r.alternate,r)}finally{Kt=f,ot.p=u,Y.T=o}}He=3}}function jy(){if(He===4||He===3){He=0,Ou();var n=Ir,r=Ka,o=Qa,u=Cy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?He=5:(He=0,Ka=Ir=null,qy(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ar=null),fa(o),r=r.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Y.T,f=ot.p,ot.p=2,Y.T=null;try{for(var m=n.onRecoverableError,E=0;E<u.length;E++){var b=u[E];m(b.value,{componentStack:b.stack})}}finally{Y.T=r,ot.p=f}}(Qa&3)!==0&&Lc(),ci(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Fd?Vl++:(Vl=0,Fd=n):Vl=0,Nl(0)}}function qy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,hl(r)))}function Lc(n){return By(),zy(),jy(),Fy()}function Fy(){if(He!==5)return!1;var n=Ir,r=jd;jd=0;var o=fa(Qa),u=Y.T,f=ot.p;try{ot.p=32>o?32:o,Y.T=null,o=qd,qd=null;var m=Ir,E=Qa;if(He=0,Ka=Ir=null,Qa=0,(Kt&6)!==0)throw Error(i(331));var b=Kt;if(Kt|=4,wy(m.current),Sy(m,m.current,E,o),Kt=b,Nl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(de,m)}catch{}return!0}finally{ot.p=f,Y.T=u,qy(n,r)}}function Gy(n,r,o){r=Vn(o,r),r=Td(n.stateNode,r,2),n=gr(n,r,2),n!==null&&(vi(n,2),ci(n))}function ee(n,r,o){if(n.tag===3)Gy(n,n,o);else for(;r!==null;){if(r.tag===3){Gy(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ar===null||!Ar.has(u))){n=Vn(o,n),o=Y_(2),u=gr(r,o,2),u!==null&&(X_(o,u,r,n),vi(u,2),ci(u));break}}r=r.return}}function Qd(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new cA;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Ud=!0,f.add(o),n=gA.bind(null,n,r,o),r.then(n,n))}function gA(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ie===n&&(Bt&o)===o&&(ge===4||ge===3&&(Bt&62914560)===Bt&&300>In()-zd?(Kt&2)===0&&Ya(n,0):Ld|=o,Ha===Bt&&(Ha=0)),ci(n)}function Hy(n,r){r===0&&(r=jo()),n=xa(n,r),n!==null&&(vi(n,r),ci(n))}function pA(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Hy(n,o)}function _A(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Hy(n,o)}function yA(n,r){return ns(n,r)}var Bc=null,$a=null,Yd=!1,zc=!1,Xd=!1,Us=0;function ci(n){n!==$a&&n.next===null&&($a===null?Bc=$a=n:$a=$a.next=n),zc=!0,Yd||(Yd=!0,EA())}function Nl(n,r){if(!Xd&&zc){Xd=!0;do for(var o=!1,u=Bc;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-$e(42|n)+1)-1,m&=f&~(E&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Xy(u,m))}else m=Bt,m=ha(u,u===ie?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ls(u,m)||(o=!0,Xy(u,m));u=u.next}while(o);Xd=!1}}function vA(){Ky()}function Ky(){zc=Yd=!1;var n=0;Us!==0&&(CA()&&(n=Us),Us=0);for(var r=In(),o=null,u=Bc;u!==null;){var f=u.next,m=Qy(u,r);m===0?(u.next=null,o===null?Bc=f:o.next=f,f===null&&($a=o)):(o=u,(n!==0||(m&3)!==0)&&(zc=!0)),u=f}Nl(n)}function Qy(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-$e(m),b=1<<E,w=f[E];w===-1?((b&o)===0||(b&u)!==0)&&(f[E]=Bo(b,r)):w<=r&&(n.expiredLanes|=b),m&=~b}if(r=ie,o=Bt,o=ha(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&is(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ls(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&is(u),fa(o)){case 2:case 8:o=ua;break;case 32:o=rs;break;case 268435456:o=ca;break;default:o=rs}return u=Yy.bind(null,n),o=ns(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&is(u),n.callbackPriority=2,n.callbackNode=null,2}function Yy(n,r){if(He!==0&&He!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Lc()&&n.callbackNode!==o)return null;var u=Bt;return u=ha(n,n===ie?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(xy(n,u,r),Qy(n,In()),n.callbackNode!=null&&n.callbackNode===o?Yy.bind(null,n):null)}function Xy(n,r){if(Lc())return null;xy(n,r,!0)}function EA(){xA(function(){(Kt&6)!==0?ns(Uo,vA):Ky()})}function $d(){return Us===0&&(Us=zo()),Us}function $y(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ya(""+n)}function Wy(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function TA(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=$y((f[Ee]||null).action),E=u.submitter;E&&(r=(r=E[Ee]||null)?$y(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var b=new va("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Us!==0){var w=E?Wy(f,E):new FormData(f);pd(o,{pending:!0,data:w,method:f.method,action:m},null,w)}}else typeof m=="function"&&(b.preventDefault(),w=E?Wy(f,E):new FormData(f),pd(o,{pending:!0,data:w,method:f.method,action:m},m,w))},currentTarget:f}]})}}for(var Wd=0;Wd<Pf.length;Wd++){var Jd=Pf[Wd],bA=Jd.toLowerCase(),SA=Jd[0].toUpperCase()+Jd.slice(1);Gn(bA,"on"+SA)}Gn(xp,"onAnimationEnd"),Gn(Vp,"onAnimationIteration"),Gn(Np,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(zS,"onTransitionRun"),Gn(jS,"onTransitionStart"),Gn(qS,"onTransitionCancel"),Gn(Op,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function Jy(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var b=u[E],w=b.instance,B=b.currentTarget;if(b=b.listener,w!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=B;try{m(f)}catch(X){Rc(X)}f.currentTarget=null,m=w}else for(E=0;E<u.length;E++){if(b=u[E],w=b.instance,B=b.currentTarget,b=b.listener,w!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=B;try{m(f)}catch(X){Rc(X)}f.currentTarget=null,m=w}}}}function Mt(n,r){var o=r[Go];o===void 0&&(o=r[Go]=new Set);var u=n+"__bubble";o.has(u)||(Zy(r,n,2,!1),o.add(u))}function Zd(n,r,o){var u=0;r&&(u|=4),Zy(o,n,u,r)}var jc="_reactListening"+Math.random().toString(36).slice(2);function tm(n){if(!n[jc]){n[jc]=!0,Ho.forEach(function(o){o!=="selectionchange"&&(AA.has(o)||Zd(o,!1,n),Zd(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[jc]||(r[jc]=!0,Zd("selectionchange",!1,r))}}function Zy(n,r,o,u){switch(Sv(r)){case 2:var f=WA;break;case 8:f=JA;break;default:f=mm}o=f.bind(null,r,o,n),f=void 0,!Dn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function em(n,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=u.return;E!==null;){var w=E.tag;if((w===3||w===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=Ei(b),E===null)return;if(w=E.tag,w===5||w===6||w===26||w===27){u=m=E;continue t}b=b.parentNode}}u=u.return}Fu(function(){var B=m,X=Cn(o),J=[];t:{var q=Mp.get(n);if(q!==void 0){var F=va,St=n;switch(n){case"keypress":if(ei(o)===0)break t;case"keydown":case"keyup":F=Ia;break;case"focusin":St="focus",F=ba;break;case"focusout":St="blur",F=ba;break;case"beforeblur":case"afterblur":F=ba;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Wu;break;case xp:case Vp:case Np:F=Sa;break;case Op:F=Zu;break;case"scroll":case"scrollend":F=Gu;break;case"wheel":F=wa;break;case"copy":case"cut":case"paste":F=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=il;break;case"toggle":case"beforetoggle":F=ec}var Tt=(r&4)!==0,Jt=!Tt&&(n==="scroll"||n==="scrollend"),P=Tt?q!==null?q+"Capture":null:q;Tt=[];for(var N=B,L;N!==null;){var $=N;if(L=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||L===null||P===null||($=ps(N,P),$!=null&&Tt.push(Ml(N,$,L))),Jt)break;N=N.return}0<Tt.length&&(q=new F(q,St,null,o,X),J.push({event:q,listeners:Tt}))}}if((r&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",q&&o!==Ai&&(St=o.relatedTarget||o.fromElement)&&(Ei(St)||St[wn]))break t;if((F||q)&&(q=X.window===X?X:(q=X.ownerDocument)?q.defaultView||q.parentWindow:window,F?(St=o.relatedTarget||o.toElement,F=B,St=St?Ei(St):null,St!==null&&(Jt=l(St),Tt=St.tag,St!==Jt||Tt!==5&&Tt!==27&&Tt!==6)&&(St=null)):(F=null,St=B),F!==St)){if(Tt=xn,$="onMouseLeave",P="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=il,$="onPointerLeave",P="onPointerEnter",N="pointer"),Jt=F==null?q:Wn(F),L=St==null?q:Wn(St),q=new Tt($,N+"leave",F,o,X),q.target=Jt,q.relatedTarget=L,$=null,Ei(X)===B&&(Tt=new Tt(P,N+"enter",St,o,X),Tt.target=L,Tt.relatedTarget=Jt,$=Tt),Jt=$,F&&St)e:{for(Tt=F,P=St,N=0,L=Tt;L;L=Wa(L))N++;for(L=0,$=P;$;$=Wa($))L++;for(;0<N-L;)Tt=Wa(Tt),N--;for(;0<L-N;)P=Wa(P),L--;for(;N--;){if(Tt===P||P!==null&&Tt===P.alternate)break e;Tt=Wa(Tt),P=Wa(P)}Tt=null}else Tt=null;F!==null&&tv(J,q,F,Tt,!1),St!==null&&Jt!==null&&tv(J,Jt,St,Tt,!0)}}t:{if(q=B?Wn(B):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var dt=vp;else if(Ce(q))if(Ep)dt=US;else{dt=PS;var Nt=MS}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&$o(B.elementType)&&(dt=vp):dt=kS;if(dt&&(dt=dt(n,B))){Di(J,dt,o,X);break t}Nt&&Nt(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&cr(q,"number",q.value)}switch(Nt=B?Wn(B):window,n){case"focusin":(Ce(Nt)||Nt.contentEditable==="true")&&(Ra=Nt,Nf=B,al=null);break;case"focusout":al=Nf=Ra=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Cp(J,o,X);break;case"selectionchange":if(BS)break;case"keydown":case"keyup":Cp(J,o,X)}var pt;if(ri)t:{switch(n){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Ut?K(n,o)&&(bt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(bt="onCompositionStart");bt&&(v&&o.locale!=="ko"&&(Ut||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Ut&&(pt=Jo()):(ti=X,hr="value"in ti?ti.value:ti.textContent,Ut=!0)),Nt=qc(B,bt),0<Nt.length&&(bt=new el(bt,n,null,o,X),J.push({event:bt,listeners:Nt}),pt?bt.data=pt:(pt=at(o),pt!==null&&(bt.data=pt)))),(pt=_?Re(n,o):Lt(n,o))&&(bt=qc(B,"onBeforeInput"),0<bt.length&&(Nt=new el("onBeforeInput","beforeinput",null,o,X),J.push({event:Nt,listeners:bt}),Nt.data=pt)),TA(J,n,B,o,X)}Jy(J,r)})}function Ml(n,r,o){return{instance:n,listener:r,currentTarget:o}}function qc(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ps(n,o),f!=null&&u.unshift(Ml(n,f,m)),f=ps(n,r),f!=null&&u.push(Ml(n,f,m))),n.tag===3)return u;n=n.return}return[]}function Wa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function tv(n,r,o,u,f){for(var m=r._reactName,E=[];o!==null&&o!==u;){var b=o,w=b.alternate,B=b.stateNode;if(b=b.tag,w!==null&&w===u)break;b!==5&&b!==26&&b!==27||B===null||(w=B,f?(B=ps(o,m),B!=null&&E.unshift(Ml(o,B,w))):f||(B=ps(o,m),B!=null&&E.push(Ml(o,B,w)))),o=o.return}E.length!==0&&n.push({event:r,listeners:E})}var IA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function ev(n){return(typeof n=="string"?n:""+n).replace(IA,`
`).replace(wA,"")}function nv(n,r){return r=ev(r),ev(n)===r}function Fc(){}function Wt(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Rn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Rn(n,""+u);break;case"className":Jn(n,"class",u);break;case"tabIndex":Jn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(n,o,u);break;case"style":Xo(n,u,m);break;case"data":if(r!=="object"){Jn(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ya(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Wt(n,r,"name",f.name,f,null),Wt(n,r,"formEncType",f.formEncType,f,null),Wt(n,r,"formMethod",f.formMethod,f,null),Wt(n,r,"formTarget",f.formTarget,f,null)):(Wt(n,r,"encType",f.encType,f,null),Wt(n,r,"method",f.method,f,null),Wt(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ya(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Fc);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ya(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),ur(n,"popover",u);break;case"xlinkActuate":qe(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qe(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qe(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qe(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qe(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qe(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qe(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qe(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qe(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ur(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=If.get(o)||o,ur(n,o,u))}}function nm(n,r,o,u,f,m){switch(o){case"style":Xo(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Rn(n,u):(typeof u=="number"||typeof u=="bigint")&&Rn(n,""+u);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Ee]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ur(n,o,u)}}}function Ke(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Wt(n,r,m,E,o,null)}}f&&Wt(n,r,"srcSet",o.srcSet,o,null),u&&Wt(n,r,"src",o.src,o,null);return;case"input":Mt("invalid",n);var b=m=E=f=null,w=null,B=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":E=X;break;case"checked":w=X;break;case"defaultChecked":B=X;break;case"value":m=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:Wt(n,r,u,X,o,null)}}ds(n,m,b,w,B,E,f,!1),_a(n);return;case"select":Mt("invalid",n),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:Wt(n,r,f,b,o,null)}r=m,o=E,n.multiple=!!u,r!=null?Si(n,!!u,r,!1):o!=null&&Si(n,!!u,o,!0);return;case"textarea":Mt("invalid",n),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Wt(n,r,E,b,o,null)}ms(n,u,f,m),_a(n);return;case"option":for(w in o)if(o.hasOwnProperty(w)&&(u=o[w],u!=null))switch(w){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Wt(n,r,w,u,o,null)}return;case"dialog":Mt("beforetoggle",n),Mt("toggle",n),Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(u=0;u<Ol.length;u++)Mt(Ol[u],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Wt(n,r,B,u,o,null)}return;default:if($o(r)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&nm(n,r,X,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&Wt(n,r,b,u,o,null))}function RA(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,b=null,w=null,B=null,X=null;for(F in o){var J=o[F];if(o.hasOwnProperty(F)&&J!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":w=J;default:u.hasOwnProperty(F)||Wt(n,r,F,null,u,J)}}for(var q in u){var F=u[q];if(J=o[q],u.hasOwnProperty(q)&&(F!=null||J!=null))switch(q){case"type":m=F;break;case"name":f=F;break;case"checked":B=F;break;case"defaultChecked":X=F;break;case"value":E=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,r));break;default:F!==J&&Wt(n,r,q,F,u,J)}}gn(n,E,b,w,B,X,m,f);return;case"select":F=E=b=q=null;for(m in o)if(w=o[m],o.hasOwnProperty(m)&&w!=null)switch(m){case"value":break;case"multiple":F=w;default:u.hasOwnProperty(m)||Wt(n,r,m,null,u,w)}for(f in u)if(m=u[f],w=o[f],u.hasOwnProperty(f)&&(m!=null||w!=null))switch(f){case"value":q=m;break;case"defaultValue":b=m;break;case"multiple":E=m;default:m!==w&&Wt(n,r,f,m,u,w)}r=b,o=E,u=F,q!=null?Si(n,!!o,q,!1):!!u!=!!o&&(r!=null?Si(n,!!o,r,!0):Si(n,!!o,o?[]:"",!1));return;case"textarea":F=q=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Wt(n,r,b,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":q=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Wt(n,r,E,f,u,m)}Xt(n,q,F);return;case"option":for(var St in o)if(q=o[St],o.hasOwnProperty(St)&&q!=null&&!u.hasOwnProperty(St))switch(St){case"selected":n.selected=!1;break;default:Wt(n,r,St,null,u,q)}for(w in u)if(q=u[w],F=o[w],u.hasOwnProperty(w)&&q!==F&&(q!=null||F!=null))switch(w){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Wt(n,r,w,q,u,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in o)q=o[Tt],o.hasOwnProperty(Tt)&&q!=null&&!u.hasOwnProperty(Tt)&&Wt(n,r,Tt,null,u,q);for(B in u)if(q=u[B],F=o[B],u.hasOwnProperty(B)&&q!==F&&(q!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:Wt(n,r,B,q,u,F)}return;default:if($o(r)){for(var Jt in o)q=o[Jt],o.hasOwnProperty(Jt)&&q!==void 0&&!u.hasOwnProperty(Jt)&&nm(n,r,Jt,void 0,u,q);for(X in u)q=u[X],F=o[X],!u.hasOwnProperty(X)||q===F||q===void 0&&F===void 0||nm(n,r,X,q,u,F);return}}for(var P in o)q=o[P],o.hasOwnProperty(P)&&q!=null&&!u.hasOwnProperty(P)&&Wt(n,r,P,null,u,q);for(J in u)q=u[J],F=o[J],!u.hasOwnProperty(J)||q===F||q==null&&F==null||Wt(n,r,J,q,u,F)}var im=null,rm=null;function Gc(n){return n.nodeType===9?n:n.ownerDocument}function iv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function sm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var am=null;function CA(){var n=window.event;return n&&n.type==="popstate"?n===am?!1:(am=n,!0):(am=null,!1)}var sv=typeof setTimeout=="function"?setTimeout:void 0,DA=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(n){return av.resolve(null).then(n).catch(VA)}:sv;function VA(n){setTimeout(function(){throw n})}function Rr(n){return n==="head"}function ov(n,r){var o=r,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&Pl(E.documentElement),o&2&&Pl(E.body),o&4)for(o=E.head,Pl(o),E=o.firstChild;E;){var b=E.nextSibling,w=E.nodeName;E[us]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(f===0){n.removeChild(m),Fl(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Fl(r)}function om(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":om(o),lr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function NA(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[us])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function OA(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Kn(n.nextSibling),n===null))return null;return n}function lm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function MA(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Kn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var um=null;function lv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function uv(n,r,o){switch(r=Gc(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Pl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);lr(n)}var Un=new Map,cv=new Set;function Hc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var qi=ot.d;ot.d={f:PA,r:kA,D:UA,C:LA,L:BA,m:zA,X:qA,S:jA,M:FA};function PA(){var n=qi.f(),r=kc();return n||r}function kA(n){var r=$n(n);r!==null&&r.tag===5&&r.type==="form"?x_(r):qi.r(n)}var Ja=typeof document>"u"?null:document;function hv(n,r,o){var u=Ja;if(u&&typeof r=="string"&&r){var f=Te(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),cv.has(f)||(cv.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Ke(r,"link",n),_e(r),u.head.appendChild(r)))}}function UA(n){qi.D(n),hv("dns-prefetch",n,null)}function LA(n,r){qi.C(n,r),hv("preconnect",n,r)}function BA(n,r,o){qi.L(n,r,o);var u=Ja;if(u&&n&&r){var f='link[rel="preload"][as="'+Te(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Te(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Te(o.imageSizes)+'"]')):f+='[href="'+Te(n)+'"]';var m=f;switch(r){case"style":m=Za(n);break;case"script":m=to(n)}Un.has(m)||(n=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Un.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(kl(m))||r==="script"&&u.querySelector(Ul(m))||(r=u.createElement("link"),Ke(r,"link",n),_e(r),u.head.appendChild(r)))}}function zA(n,r){qi.m(n,r);var o=Ja;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=to(n)}if(!Un.has(m)&&(n=y({rel:"modulepreload",href:n},r),Un.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ul(m)))return}u=o.createElement("link"),Ke(u,"link",n),_e(u),o.head.appendChild(u)}}}function jA(n,r,o){qi.S(n,r,o);var u=Ja;if(u&&n){var f=en(u).hoistableStyles,m=Za(n);r=r||"default";var E=f.get(m);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(kl(m)))b.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Un.get(m))&&cm(n,o);var w=E=u.createElement("link");_e(w),Ke(w,"link",n),w._p=new Promise(function(B,X){w.onload=B,w.onerror=X}),w.addEventListener("load",function(){b.loading|=1}),w.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Kc(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(m,E)}}}function qA(n,r){qi.X(n,r);var o=Ja;if(o&&n){var u=en(o).hoistableScripts,f=to(n),m=u.get(f);m||(m=o.querySelector(Ul(f)),m||(n=y({src:n,async:!0},r),(r=Un.get(f))&&hm(n,r),m=o.createElement("script"),_e(m),Ke(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function FA(n,r){qi.M(n,r);var o=Ja;if(o&&n){var u=en(o).hoistableScripts,f=to(n),m=u.get(f);m||(m=o.querySelector(Ul(f)),m||(n=y({src:n,async:!0,type:"module"},r),(r=Un.get(f))&&hm(n,r),m=o.createElement("script"),_e(m),Ke(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function fv(n,r,o,u){var f=(f=At.current)?Hc(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Za(o.href),o=en(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Za(o.href);var m=en(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(kl(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Un.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Un.set(n,o),m||GA(f,n,o,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=to(o),o=en(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Za(n){return'href="'+Te(n)+'"'}function kl(n){return'link[rel="stylesheet"]['+n+"]"}function dv(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function GA(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ke(r,"link",o),_e(r),n.head.appendChild(r))}function to(n){return'[src="'+Te(n)+'"]'}function Ul(n){return"script[async]"+n}function mv(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Te(o.href)+'"]');if(u)return r.instance=u,_e(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_e(u),Ke(u,"style",f),Kc(u,o.precedence,n),r.instance=u;case"stylesheet":f=Za(o.href);var m=n.querySelector(kl(f));if(m)return r.state.loading|=4,r.instance=m,_e(m),m;u=dv(o),(f=Un.get(f))&&cm(u,f),m=(n.ownerDocument||n).createElement("link"),_e(m);var E=m;return E._p=new Promise(function(b,w){E.onload=b,E.onerror=w}),Ke(m,"link",u),r.state.loading|=4,Kc(m,o.precedence,n),r.instance=m;case"script":return m=to(o.src),(f=n.querySelector(Ul(m)))?(r.instance=f,_e(f),f):(u=o,(f=Un.get(m))&&(u=y({},o),hm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),_e(f),Ke(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Kc(u,o.precedence,n));return r.instance}function Kc(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===r)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function cm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function hm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Qc=null;function gv(n,r,o){if(Qc===null){var u=new Map,f=Qc=new Map;f.set(o,u)}else f=Qc,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[us]||m[we]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=n+E;var b=u.get(E);b?b.push(m):u.set(E,[m])}}return u}function pv(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function HA(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function _v(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ll=null;function KA(){}function QA(n,r,o){if(Ll===null)throw Error(i(475));var u=Ll;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Za(o.href),m=n.querySelector(kl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Yc.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=m,_e(m);return}m=n.ownerDocument||n,o=dv(o),(f=Un.get(f))&&cm(o,f),m=m.createElement("link"),_e(m);var E=m;E._p=new Promise(function(b,w){E.onload=b,E.onerror=w}),Ke(m,"link",o),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Yc.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function YA(){if(Ll===null)throw Error(i(475));var n=Ll;return n.stylesheets&&n.count===0&&fm(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&fm(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Yc(){if(this.count--,this.count===0){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xc=null;function fm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xc=new Map,r.forEach(XA,n),Xc=null,Yc.call(n))}function XA(n,r){if(!(r.state.loading&4)){var o=Xc.get(n);if(o)var u=o.get(null);else{o=new Map,Xc.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=Yc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bl={$$typeof:it,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function $A(n,r,o,u,f,m,E,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function yv(n,r,o,u,f,m,E,b,w,B,X,J){return n=new $A(n,r,o,E,b,w,B,J),r=1,m===!0&&(r|=24),m=_n(3,null,null,r),n.current=m,m.stateNode=n,r=Qf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},Wf(m),n}function vv(n){return n?(n=Va,n):Va}function Ev(n,r,o,u,f,m){f=vv(f),u.context===null?u.context=f:u.pendingContext=f,u=mr(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=gr(n,u,r),o!==null&&(bn(o,n,r),gl(o,n,r))}function Tv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function dm(n,r){Tv(n,r),(n=n.alternate)&&Tv(n,r)}function bv(n){if(n.tag===13){var r=xa(n,67108864);r!==null&&bn(r,n,67108864),dm(n,67108864)}}var $c=!0;function WA(n,r,o,u){var f=Y.T;Y.T=null;var m=ot.p;try{ot.p=2,mm(n,r,o,u)}finally{ot.p=m,Y.T=f}}function JA(n,r,o,u){var f=Y.T;Y.T=null;var m=ot.p;try{ot.p=8,mm(n,r,o,u)}finally{ot.p=m,Y.T=f}}function mm(n,r,o,u){if($c){var f=gm(u);if(f===null)em(n,r,u,Wc,o),Av(n,u);else if(tI(f,n,r,o,u))u.stopPropagation();else if(Av(n,u),r&4&&-1<ZA.indexOf(n)){for(;f!==null;){var m=$n(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=jn(m.pendingLanes);if(E!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var w=1<<31-$e(E);b.entanglements[1]|=w,E&=~w}ci(m),(Kt&6)===0&&(Mc=In()+500,Nl(0))}}break;case 13:b=xa(m,2),b!==null&&bn(b,m,2),kc(),dm(m,2)}if(m=gm(u),m===null&&em(n,r,u,Wc,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else em(n,r,u,null,o)}}function gm(n){return n=Cn(n),pm(n)}var Wc=null;function pm(n){if(Wc=null,n=Ei(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Wc=n,null}function Sv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vf()){case Uo:return 2;case ua:return 8;case rs:case Ef:return 32;case ca:return 268435456;default:return 32}default:return 32}}var _m=!1,Cr=null,Dr=null,xr=null,zl=new Map,jl=new Map,Vr=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(n,r){switch(n){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(r.pointerId)}}function ql(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=$n(r),r!==null&&bv(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function tI(n,r,o,u,f){switch(r){case"focusin":return Cr=ql(Cr,n,r,o,u,f),!0;case"dragenter":return Dr=ql(Dr,n,r,o,u,f),!0;case"mouseover":return xr=ql(xr,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return zl.set(m,ql(zl.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,jl.set(m,ql(jl.get(m)||null,n,r,o,u,f)),!0}return!1}function Iv(n){var r=Ei(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,ku(n.priority,function(){if(o.tag===13){var u=Tn();u=sr(u);var f=xa(o,u);f!==null&&bn(f,o,u),dm(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jc(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=gm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ai=u,o.target.dispatchEvent(u),Ai=null}else return r=$n(o),r!==null&&bv(r),n.blockedOn=o,!1;r.shift()}return!0}function wv(n,r,o){Jc(n)&&o.delete(r)}function eI(){_m=!1,Cr!==null&&Jc(Cr)&&(Cr=null),Dr!==null&&Jc(Dr)&&(Dr=null),xr!==null&&Jc(xr)&&(xr=null),zl.forEach(wv),jl.forEach(wv)}function Zc(n,r){n.blockedOn===r&&(n.blockedOn=null,_m||(_m=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,eI)))}var th=null;function Rv(n){th!==n&&(th=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){th===n&&(th=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(pm(u||o)===null)continue;break}var m=$n(o);m!==null&&(n.splice(r,3),r-=3,pd(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Fl(n){function r(w){return Zc(w,n)}Cr!==null&&Zc(Cr,n),Dr!==null&&Zc(Dr,n),xr!==null&&Zc(xr,n),zl.forEach(r),jl.forEach(r);for(var o=0;o<Vr.length;o++){var u=Vr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Vr.length&&(o=Vr[0],o.blockedOn===null);)Iv(o),o.blockedOn===null&&Vr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[Ee]||null;if(typeof m=="function")E||Rv(o);else if(E){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Ee]||null)b=E.formAction;else if(pm(f)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),Rv(o)}}}function ym(n){this._internalRoot=n}eh.prototype.render=ym.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Tn();Ev(o,u,n,r,null,null)},eh.prototype.unmount=ym.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ev(n.current,2,null,n,null,null),kc(),r[wn]=null}};function eh(n){this._internalRoot=n}eh.prototype.unstable_scheduleHydration=function(n){if(n){var r=ar();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Vr.length&&r!==0&&r<Vr[o].priority;o++);Vr.splice(o,0,n),o===0&&Iv(n)}};var Cv=t.version;if(Cv!=="19.1.0")throw Error(i(527,Cv,"19.1.0"));ot.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var nI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{de=nh.inject(nI),Ht=nh}catch{}}return Hl.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",f=G_,m=H_,E=K_,b=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=yv(n,1,!1,null,null,o,u,f,m,E,b,null),n[wn]=r.current,tm(n),new ym(r)},Hl.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=G_,E=H_,b=K_,w=null,B=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks),o.formState!==void 0&&(B=o.formState)),r=yv(n,1,!0,r,o??null,u,f,m,E,b,w,B),r.context=vv(null),o=r.current,u=Tn(),u=sr(u),f=mr(u),f.callback=null,gr(o,f,u),o=u,r.current.lanes=o,vi(r,o),ci(r),n[wn]=r.current,tm(n),new eh(r)},Hl.version="19.1.0",Hl}var Lv;function dI(){if(Lv)return Tm.exports;Lv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Tm.exports=fI(),Tm.exports}var mI=dI();const gI=RT(mI);DT();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},lu.apply(this,arguments)}var zr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(zr||(zr={}));const Bv="popstate";function pI(s){s===void 0&&(s={});function t(i,a){let{pathname:l,search:c,hash:d}=i.location;return Lm("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Ah(a)}return yI(t,e,null,s)}function ce(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function xT(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _I(){return Math.random().toString(36).substr(2,8)}function zv(s,t){return{usr:s.state,key:s.key,idx:t}}function Lm(s,t,e,i){return e===void 0&&(e=null),lu({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Co(t):t,{state:e,key:t&&t.key||i||_I()})}function Ah(s){let{pathname:t="/",search:e="",hash:i=""}=s;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Co(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substr(e),s=s.substr(0,e));let i=s.indexOf("?");i>=0&&(t.search=s.substr(i),s=s.substr(0,i)),s&&(t.pathname=s)}return t}function yI(s,t,e,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d=zr.Pop,g=null,p=y();p==null&&(p=0,c.replaceState(lu({},c.state,{idx:p}),""));function y(){return(c.state||{idx:null}).idx}function T(){d=zr.Pop;let z=y(),nt=z==null?null:z-p;p=z,g&&g({action:d,location:Q.location,delta:nt})}function I(z,nt){d=zr.Push;let et=Lm(Q.location,z,nt);p=y()+1;let it=zv(et,p),ut=Q.createHref(et);try{c.pushState(it,"",ut)}catch(ct){if(ct instanceof DOMException&&ct.name==="DataCloneError")throw ct;a.location.assign(ut)}l&&g&&g({action:d,location:Q.location,delta:1})}function M(z,nt){d=zr.Replace;let et=Lm(Q.location,z,nt);p=y();let it=zv(et,p),ut=Q.createHref(et);c.replaceState(it,"",ut),l&&g&&g({action:d,location:Q.location,delta:0})}function H(z){let nt=a.location.origin!=="null"?a.location.origin:a.location.href,et=typeof z=="string"?z:Ah(z);return et=et.replace(/ $/,"%20"),ce(nt,"No window.location.(origin|href) available to create URL for href: "+et),new URL(et,nt)}let Q={get action(){return d},get location(){return s(a,c)},listen(z){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(Bv,T),g=z,()=>{a.removeEventListener(Bv,T),g=null}},createHref(z){return t(a,z)},createURL:H,encodeLocation(z){let nt=H(z);return{pathname:nt.pathname,search:nt.search,hash:nt.hash}},push:I,replace:M,go(z){return c.go(z)}};return Q}var jv;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(jv||(jv={}));function vI(s,t,e){return e===void 0&&(e="/"),EI(s,t,e)}function EI(s,t,e,i){let a=typeof t=="string"?Co(t):t,l=po(a.pathname||"/",e);if(l==null)return null;let c=VT(s);TI(c);let d=null;for(let g=0;d==null&&g<c.length;++g){let p=NI(l);d=xI(c[g],p)}return d}function VT(s,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let a=(l,c,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};g.relativePath.startsWith("/")&&(ce(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let p=qr([i,g.relativePath]),y=e.concat(g);l.children&&l.children.length>0&&(ce(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),VT(l.children,t,y,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:CI(p,l.index),routesMeta:y})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let g of NT(l.path))a(l,c,g)}),t}function NT(s){let t=s.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=NT(i.join("/")),d=[];return d.push(...c.map(g=>g===""?l:[l,g].join("/"))),a&&d.push(...c),d.map(g=>s.startsWith("/")&&g===""?"/":g)}function TI(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:DI(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const bI=/^:[\w-]+$/,SI=3,AI=2,II=1,wI=10,RI=-2,qv=s=>s==="*";function CI(s,t){let e=s.split("/"),i=e.length;return e.some(qv)&&(i+=RI),t&&(i+=AI),e.filter(a=>!qv(a)).reduce((a,l)=>a+(bI.test(l)?SI:l===""?II:wI),i)}function DI(s,t){return s.length===t.length&&s.slice(0,-1).every((i,a)=>i===t[a])?s[s.length-1]-t[t.length-1]:0}function xI(s,t,e){let{routesMeta:i}=s,a={},l="/",c=[];for(let d=0;d<i.length;++d){let g=i[d],p=d===i.length-1,y=l==="/"?t:t.slice(l.length)||"/",T=Bm({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),I=g.route;if(!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:qr([l,T.pathname]),pathnameBase:kI(qr([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=qr([l,T.pathnameBase]))}return c}function Bm(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,i]=VI(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,y,T)=>{let{paramName:I,isOptional:M}=y;if(I==="*"){let Q=d[T]||"";c=l.slice(0,l.length-Q.length).replace(/(.)\/+$/,"$1")}const H=d[T];return M&&!H?p[I]=void 0:p[I]=(H||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function VI(s,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),xT(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,g)=>(i.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function NI(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xT(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function po(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=s.charAt(e);return i&&i!=="/"?null:s.slice(e)||"/"}function OI(s,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:a=""}=typeof s=="string"?Co(s):s;return{pathname:e?e.startsWith("/")?e:MI(e,t):t,search:UI(i),hash:LI(a)}}function MI(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Im(s,t,e,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PI(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function _g(s,t){let e=PI(s);return t?e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function yg(s,t,e,i){i===void 0&&(i=!1);let a;typeof s=="string"?a=Co(s):(a=lu({},s),ce(!a.pathname||!a.pathname.includes("?"),Im("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),Im("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),Im("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=e;else{let T=t.length-1;if(!i&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),T-=1;a.pathname=I.join("/")}d=T>=0?t[T]:"/"}let g=OI(a,d),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&e.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}const qr=s=>s.join("/").replace(/\/\/+/g,"/"),kI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),UI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,LI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function BI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const OT=["post","put","patch","delete"];new Set(OT);const zI=["get",...OT];new Set(zI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},uu.apply(this,arguments)}const Kh=W.createContext(null),MT=W.createContext(null),tr=W.createContext(null),Qh=W.createContext(null),er=W.createContext({outlet:null,matches:[],isDataRoute:!1}),PT=W.createContext(null);function jI(s,t){let{relative:e}=t===void 0?{}:t;Do()||ce(!1);let{basename:i,navigator:a}=W.useContext(tr),{hash:l,pathname:c,search:d}=Yh(s,{relative:e}),g=c;return i!=="/"&&(g=c==="/"?i:qr([i,c])),a.createHref({pathname:g,search:d,hash:l})}function Do(){return W.useContext(Qh)!=null}function sa(){return Do()||ce(!1),W.useContext(Qh).location}function kT(s){W.useContext(tr).static||W.useLayoutEffect(s)}function UT(){let{isDataRoute:s}=W.useContext(er);return s?nw():qI()}function qI(){Do()||ce(!1);let s=W.useContext(Kh),{basename:t,future:e,navigator:i}=W.useContext(tr),{matches:a}=W.useContext(er),{pathname:l}=sa(),c=JSON.stringify(_g(a,e.v7_relativeSplatPath)),d=W.useRef(!1);return kT(()=>{d.current=!0}),W.useCallback(function(p,y){if(y===void 0&&(y={}),!d.current)return;if(typeof p=="number"){i.go(p);return}let T=yg(p,JSON.parse(c),l,y.relative==="path");s==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:qr([t,T.pathname])),(y.replace?i.replace:i.push)(T,y.state,y)},[t,i,c,l,s])}const FI=W.createContext(null);function GI(s){let t=W.useContext(er).outlet;return t&&W.createElement(FI.Provider,{value:s},t)}function Yh(s,t){let{relative:e}=t===void 0?{}:t,{future:i}=W.useContext(tr),{matches:a}=W.useContext(er),{pathname:l}=sa(),c=JSON.stringify(_g(a,i.v7_relativeSplatPath));return W.useMemo(()=>yg(s,JSON.parse(c),l,e==="path"),[s,c,l,e])}function HI(s,t){return KI(s,t)}function KI(s,t,e,i){Do()||ce(!1);let{navigator:a,static:l}=W.useContext(tr),{matches:c}=W.useContext(er),d=c[c.length-1],g=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let y=sa(),T;if(t){var I;let nt=typeof t=="string"?Co(t):t;p==="/"||(I=nt.pathname)!=null&&I.startsWith(p)||ce(!1),T=nt}else T=y;let M=T.pathname||"/",H=M;if(p!=="/"){let nt=p.replace(/^\//,"").split("/");H="/"+M.replace(/^\//,"").split("/").slice(nt.length).join("/")}let Q=vI(s,{pathname:H}),z=WI(Q&&Q.map(nt=>Object.assign({},nt,{params:Object.assign({},g,nt.params),pathname:qr([p,a.encodeLocation?a.encodeLocation(nt.pathname).pathname:nt.pathname]),pathnameBase:nt.pathnameBase==="/"?p:qr([p,a.encodeLocation?a.encodeLocation(nt.pathnameBase).pathname:nt.pathnameBase])})),c,e,i);return t&&z?W.createElement(Qh.Provider,{value:{location:uu({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:zr.Pop}},z):z}function QI(){let s=ew(),t=BI(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),e?W.createElement("pre",{style:a},e):null,null)}const YI=W.createElement(QI,null);class XI extends W.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?W.createElement(er.Provider,{value:this.props.routeContext},W.createElement(PT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $I(s){let{routeContext:t,match:e,children:i}=s,a=W.useContext(Kh);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(er.Provider,{value:t},i)}function WI(s,t,e,i){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),s==null){var l;if(!e)return null;if(e.errors)s=e.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let c=s,d=(a=e)==null?void 0:a.errors;if(d!=null){let y=c.findIndex(T=>T.route.id&&(d==null?void 0:d[T.route.id])!==void 0);y>=0||ce(!1),c=c.slice(0,Math.min(c.length,y+1))}let g=!1,p=-1;if(e&&i&&i.v7_partialHydration)for(let y=0;y<c.length;y++){let T=c[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=y),T.route.id){let{loaderData:I,errors:M}=e,H=T.route.loader&&I[T.route.id]===void 0&&(!M||M[T.route.id]===void 0);if(T.route.lazy||H){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((y,T,I)=>{let M,H=!1,Q=null,z=null;e&&(M=d&&T.route.id?d[T.route.id]:void 0,Q=T.route.errorElement||YI,g&&(p<0&&I===0?(iw("route-fallback"),H=!0,z=null):p===I&&(H=!0,z=T.route.hydrateFallbackElement||null)));let nt=t.concat(c.slice(0,I+1)),et=()=>{let it;return M?it=Q:H?it=z:T.route.Component?it=W.createElement(T.route.Component,null):T.route.element?it=T.route.element:it=y,W.createElement($I,{match:T,routeContext:{outlet:y,matches:nt,isDataRoute:e!=null},children:it})};return e&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?W.createElement(XI,{location:e.location,revalidation:e.revalidation,component:Q,error:M,children:et(),routeContext:{outlet:null,matches:nt,isDataRoute:!0}}):et()},null)}var LT=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(LT||{}),BT=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(BT||{});function JI(s){let t=W.useContext(Kh);return t||ce(!1),t}function ZI(s){let t=W.useContext(MT);return t||ce(!1),t}function tw(s){let t=W.useContext(er);return t||ce(!1),t}function zT(s){let t=tw(),e=t.matches[t.matches.length-1];return e.route.id||ce(!1),e.route.id}function ew(){var s;let t=W.useContext(PT),e=ZI(),i=zT();return t!==void 0?t:(s=e.errors)==null?void 0:s[i]}function nw(){let{router:s}=JI(LT.UseNavigateStable),t=zT(BT.UseNavigateStable),e=W.useRef(!1);return kT(()=>{e.current=!0}),W.useCallback(function(a,l){l===void 0&&(l={}),e.current&&(typeof a=="number"?s.navigate(a):s.navigate(a,uu({fromRouteId:t},l)))},[s,t])}const Fv={};function iw(s,t,e){Fv[s]||(Fv[s]=!0)}function rw(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Gv(s){let{to:t,replace:e,state:i,relative:a}=s;Do()||ce(!1);let{future:l,static:c}=W.useContext(tr),{matches:d}=W.useContext(er),{pathname:g}=sa(),p=UT(),y=yg(t,_g(d,l.v7_relativeSplatPath),g,a==="path"),T=JSON.stringify(y);return W.useEffect(()=>p(JSON.parse(T),{replace:e,state:i,relative:a}),[p,T,a,e,i]),null}function sw(s){return GI(s.context)}function Fi(s){ce(!1)}function aw(s){let{basename:t="/",children:e=null,location:i,navigationType:a=zr.Pop,navigator:l,static:c=!1,future:d}=s;Do()&&ce(!1);let g=t.replace(/^\/*/,"/"),p=W.useMemo(()=>({basename:g,navigator:l,static:c,future:uu({v7_relativeSplatPath:!1},d)}),[g,d,l,c]);typeof i=="string"&&(i=Co(i));let{pathname:y="/",search:T="",hash:I="",state:M=null,key:H="default"}=i,Q=W.useMemo(()=>{let z=po(y,g);return z==null?null:{location:{pathname:z,search:T,hash:I,state:M,key:H},navigationType:a}},[g,y,T,I,M,H,a]);return Q==null?null:W.createElement(tr.Provider,{value:p},W.createElement(Qh.Provider,{children:e,value:Q}))}function ow(s){let{children:t,location:e}=s;return HI(zm(t),e)}new Promise(()=>{});function zm(s,t){t===void 0&&(t=[]);let e=[];return W.Children.forEach(s,(i,a)=>{if(!W.isValidElement(i))return;let l=[...t,a];if(i.type===W.Fragment){e.push.apply(e,zm(i.props.children,l));return}i.type!==Fi&&ce(!1),!i.props.index||!i.props.children||ce(!1);let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=zm(i.props.children,l)),e.push(c)}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ih(){return Ih=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},Ih.apply(this,arguments)}function jT(s,t){if(s==null)return{};var e={},i=Object.keys(s),a,l;for(l=0;l<i.length;l++)a=i[l],!(t.indexOf(a)>=0)&&(e[a]=s[a]);return e}function lw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function uw(s,t){return s.button===0&&(!t||t==="_self")&&!lw(s)}const cw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hw=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fw="6";try{window.__reactRouterVersion=fw}catch{}const dw=W.createContext({isTransitioning:!1}),mw="startTransition",Hv=lI[mw];function gw(s){let{basename:t,children:e,future:i,window:a}=s,l=W.useRef();l.current==null&&(l.current=pI({window:a,v5Compat:!0}));let c=l.current,[d,g]=W.useState({action:c.action,location:c.location}),{v7_startTransition:p}=i||{},y=W.useCallback(T=>{p&&Hv?Hv(()=>g(T)):g(T)},[g,p]);return W.useLayoutEffect(()=>c.listen(y),[c,y]),W.useEffect(()=>rw(i),[i]),W.createElement(aw,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,future:i})}const pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_w=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qT=W.forwardRef(function(t,e){let{onClick:i,relative:a,reloadDocument:l,replace:c,state:d,target:g,to:p,preventScrollReset:y,viewTransition:T}=t,I=jT(t,cw),{basename:M}=W.useContext(tr),H,Q=!1;if(typeof p=="string"&&_w.test(p)&&(H=p,pw))try{let it=new URL(window.location.href),ut=p.startsWith("//")?new URL(it.protocol+p):new URL(p),ct=po(ut.pathname,M);ut.origin===it.origin&&ct!=null?p=ct+ut.search+ut.hash:Q=!0}catch{}let z=jI(p,{relative:a}),nt=vw(p,{replace:c,state:d,target:g,preventScrollReset:y,relative:a,viewTransition:T});function et(it){i&&i(it),it.defaultPrevented||nt(it)}return W.createElement("a",Ih({},I,{href:H||z,onClick:Q||l?i:et,ref:e,target:g}))}),Kl=W.forwardRef(function(t,e){let{"aria-current":i="page",caseSensitive:a=!1,className:l="",end:c=!1,style:d,to:g,viewTransition:p,children:y}=t,T=jT(t,hw),I=Yh(g,{relative:T.relative}),M=sa(),H=W.useContext(MT),{navigator:Q,basename:z}=W.useContext(tr),nt=H!=null&&Ew(I)&&p===!0,et=Q.encodeLocation?Q.encodeLocation(I).pathname:I.pathname,it=M.pathname,ut=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;a||(it=it.toLowerCase(),ut=ut?ut.toLowerCase():null,et=et.toLowerCase()),ut&&z&&(ut=po(ut,z)||ut);const ct=et!=="/"&&et.endsWith("/")?et.length-1:et.length;let gt=it===et||!c&&it.startsWith(et)&&it.charAt(ct)==="/",D=ut!=null&&(ut===et||!c&&ut.startsWith(et)&&ut.charAt(et.length)==="/"),A={isActive:gt,isPending:D,isTransitioning:nt},R=gt?i:void 0,V;typeof l=="function"?V=l(A):V=[l,gt?"active":null,D?"pending":null,nt?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(A):d;return W.createElement(qT,Ih({},T,{"aria-current":R,className:V,ref:e,style:O,to:g,viewTransition:p}),typeof y=="function"?y(A):y)});var jm;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(jm||(jm={}));var Kv;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Kv||(Kv={}));function yw(s){let t=W.useContext(Kh);return t||ce(!1),t}function vw(s,t){let{target:e,replace:i,state:a,preventScrollReset:l,relative:c,viewTransition:d}=t===void 0?{}:t,g=UT(),p=sa(),y=Yh(s,{relative:c});return W.useCallback(T=>{if(uw(T,e)){T.preventDefault();let I=i!==void 0?i:Ah(p)===Ah(y);g(s,{replace:I,state:a,preventScrollReset:l,relative:c,viewTransition:d})}},[p,g,y,i,a,e,s,l,c,d])}function Ew(s,t){t===void 0&&(t={});let e=W.useContext(dw);e==null&&ce(!1);let{basename:i}=yw(jm.useViewTransitionState),a=Yh(s,{relative:t.relative});if(!e.isTransitioning)return!1;let l=po(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=po(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Bm(a.pathname,c)!=null||Bm(a.pathname,l)!=null}var Qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=function(s){const t=[];let e=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},Tw=function(s){const t=[];let e=0,i=0;for(;e<s.length;){const a=s[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[e++],c=s[e++],d=s[e++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(g>>10)),t[i++]=String.fromCharCode(56320+(g&1023))}else{const l=s[e++],c=s[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,y=l>>2,T=(l&3)<<4|d>>4;let I=(d&15)<<2|p>>6,M=p&63;g||(M=64,c||(I=64)),i.push(e[y],e[T],e[I],e[M])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(FT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):Tw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const l=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const p=a<s.length?e[s.charAt(a)]:64;++a;const T=a<s.length?e[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new bw;const I=l<<2|d>>4;if(i.push(I),p!==64){const M=d<<4&240|p>>2;if(i.push(M),T!==64){const H=p<<6&192|T;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sw=function(s){const t=FT(s);return GT.encodeByteArray(t,!0)},wh=function(s){return Sw(s).replace(/\./g,"")},HT=function(s){try{return GT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=()=>Aw().__FIREBASE_DEFAULTS__,ww=()=>{if(typeof process>"u"||typeof Qv>"u")return;const s=Qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Rw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&HT(s[1]);return t&&JSON.parse(t)},Xh=()=>{try{return Iw()||ww()||Rw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},KT=s=>{var t,e;return(e=(t=Xh())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},Cw=s=>{const t=KT(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},QT=()=>{var s;return(s=Xh())===null||s===void 0?void 0:s.config},YT=s=>{var t;return(t=Xh())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[wh(JSON.stringify(e)),wh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Nw(){var s;const t=(s=Xh())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ow(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Pw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kw(){const s=Ve();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function XT(){return!Nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function Uw(){return new Promise((s,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="FirebaseError";class nr extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Lw,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?Bw(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new nr(a,d,i)}}function Bw(s,t){return s.replace(zw,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const zw=/\{\$([^}]+)}/g;function jw(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Rh(s,t){if(s===t)return!0;const e=Object.keys(s),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=s[a],c=t[a];if(Yv(l)&&Yv(c)){if(!Rh(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Yv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(s){const t=[];for(const[e,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function qw(s,t){const e=new Fw(s,t);return e.subscribe.bind(e)}class Fw{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Gw(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=wm),a.error===void 0&&(a.error=wm),a.complete===void 0&&(a.complete=wm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gw(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(s){return s&&s._delegate?s._delegate:s}class Xs{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Dw;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Qw(t))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=Bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bs){return this.instances.has(t)}getOptions(t=Bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Kw(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Bs){return this.component?this.component.multipleInstances?t:Bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kw(s){return s===Bs?void 0:s}function Qw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Hw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const Xw={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},$w=Pt.INFO,Ww={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Jw=(s,t,...e)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),a=Ww[t];if(a)console[a](`[${i}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class vg{constructor(t){this.name=t,this._logLevel=$w,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Xw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const Zw=(s,t)=>t.some(e=>s instanceof e);let Xv,$v;function tR(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eR(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WT=new WeakMap,qm=new WeakMap,JT=new WeakMap,Rm=new WeakMap,Eg=new WeakMap;function nR(s){const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{e(Fr(s.result)),a()},c=()=>{i(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&WT.set(e,s)}).catch(()=>{}),Eg.set(t,s),t}function iR(s){if(qm.has(s))return;const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});qm.set(s,t)}let Fm={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return qm.get(s);if(t==="objectStoreNames")return s.objectStoreNames||JT.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function rR(s){Fm=s(Fm)}function sR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=s.call(Cm(this),t,...e);return JT.set(i,t.sort?t.sort():[t]),Fr(i)}:eR().includes(s)?function(...t){return s.apply(Cm(this),t),Fr(WT.get(this))}:function(...t){return Fr(s.apply(Cm(this),t))}}function aR(s){return typeof s=="function"?sR(s):(s instanceof IDBTransaction&&iR(s),Zw(s,tR())?new Proxy(s,Fm):s)}function Fr(s){if(s instanceof IDBRequest)return nR(s);if(Rm.has(s))return Rm.get(s);const t=aR(s);return t!==s&&(Rm.set(s,t),Eg.set(t,s)),t}const Cm=s=>Eg.get(s);function oR(s,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(s,t),d=Fr(c);return i&&c.addEventListener("upgradeneeded",g=>{i(Fr(c.result),g.oldVersion,g.newVersion,Fr(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const lR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],Dm=new Map;function Wv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Dm.get(t))return Dm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=uR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||lR.includes(e)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),a&&g.done]))[0]};return Dm.set(t,l),l}rR(s=>({...s,get:(t,e,i)=>Wv(t,e)||s.get(t,e,i),has:(t,e)=>!!Wv(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(hR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function hR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Gm="@firebase/app",Jv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new vg("@firebase/app"),fR="@firebase/app-compat",dR="@firebase/analytics-compat",mR="@firebase/analytics",gR="@firebase/app-check-compat",pR="@firebase/app-check",_R="@firebase/auth",yR="@firebase/auth-compat",vR="@firebase/database",ER="@firebase/data-connect",TR="@firebase/database-compat",bR="@firebase/functions",SR="@firebase/functions-compat",AR="@firebase/installations",IR="@firebase/installations-compat",wR="@firebase/messaging",RR="@firebase/messaging-compat",CR="@firebase/performance",DR="@firebase/performance-compat",xR="@firebase/remote-config",VR="@firebase/remote-config-compat",NR="@firebase/storage",OR="@firebase/storage-compat",MR="@firebase/firestore",PR="@firebase/vertexai-preview",kR="@firebase/firestore-compat",UR="firebase",LR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",BR={[Gm]:"fire-core",[fR]:"fire-core-compat",[mR]:"fire-analytics",[dR]:"fire-analytics-compat",[pR]:"fire-app-check",[gR]:"fire-app-check-compat",[_R]:"fire-auth",[yR]:"fire-auth-compat",[vR]:"fire-rtdb",[ER]:"fire-data-connect",[TR]:"fire-rtdb-compat",[bR]:"fire-fn",[SR]:"fire-fn-compat",[AR]:"fire-iid",[IR]:"fire-iid-compat",[wR]:"fire-fcm",[RR]:"fire-fcm-compat",[CR]:"fire-perf",[DR]:"fire-perf-compat",[xR]:"fire-rc",[VR]:"fire-rc-compat",[NR]:"fire-gcs",[OR]:"fire-gcs-compat",[MR]:"fire-fst",[kR]:"fire-fst-compat",[PR]:"fire-vertex","fire-js":"fire-js",[UR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new Map,zR=new Map,Km=new Map;function Zv(s,t){try{s.container.addComponent(t)}catch(e){Wi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function _o(s){const t=s.name;if(Km.has(t))return Wi.debug(`There were multiple attempts to register component ${t}.`),!1;Km.set(t,s);for(const e of Ch.values())Zv(e,s);for(const e of zR.values())Zv(e,s);return!0}function Tg(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Hi(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new Tu("app","Firebase",jR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=LR;function ZT(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},t),a=i.name;if(typeof a!="string"||!a)throw Gr.create("bad-app-name",{appName:String(a)});if(e||(e=QT()),!e)throw Gr.create("no-options");const l=Ch.get(a);if(l){if(Rh(e,l.options)&&Rh(i,l.config))return l;throw Gr.create("duplicate-app",{appName:a})}const c=new Yw(a);for(const g of Km.values())c.addComponent(g);const d=new qR(e,i,c);return Ch.set(a,d),d}function t0(s=Hm){const t=Ch.get(s);if(!t&&s===Hm&&QT())return ZT();if(!t)throw Gr.create("no-app",{appName:s});return t}function Hr(s,t,e){var i;let a=(i=BR[s])!==null&&i!==void 0?i:s;e&&(a+=`-${e}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wi.warn(d.join(" "));return}_o(new Xs(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="firebase-heartbeat-database",GR=1,cu="firebase-heartbeat-store";let xm=null;function e0(){return xm||(xm=oR(FR,GR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(cu)}catch(e){console.warn(e)}}}}).catch(s=>{throw Gr.create("idb-open",{originalErrorMessage:s.message})})),xm}async function HR(s){try{const e=(await e0()).transaction(cu),i=await e.objectStore(cu).get(n0(s));return await e.done,i}catch(t){if(t instanceof nr)Wi.warn(t.message);else{const e=Gr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Wi.warn(e.message)}}}async function tE(s,t){try{const i=(await e0()).transaction(cu,"readwrite");await i.objectStore(cu).put(t,n0(s)),await i.done}catch(e){if(e instanceof nr)Wi.warn(e.message);else{const i=Gr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(i.message)}}}function n0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,QR=30*24*60*60*1e3;class YR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $R(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=eE();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=QR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Wi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eE(),{heartbeatsToSend:i,unsentEntries:a}=XR(this._heartbeatsCache.heartbeats),l=wh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Wi.warn(e),""}}}function eE(){return new Date().toISOString().substring(0,10)}function XR(s,t=KR){const e=[];let i=s.slice();for(const a of s){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),nE(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),nE(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class $R{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?Uw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await HR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return tE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return tE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function nE(s){return wh(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(s){_o(new Xs("platform-logger",t=>new cR(t),"PRIVATE")),_o(new Xs("heartbeat",t=>new YR(t),"PRIVATE")),Hr(Gm,Jv,s),Hr(Gm,Jv,"esm2017"),Hr("fire-js","")}WR("");function bg(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(s);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(s,i[a])&&(e[i[a]]=s[i[a]]);return e}function i0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JR=i0,r0=new Tu("auth","Firebase",i0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new vg("@firebase/auth");function ZR(s,...t){Dh.logLevel<=Pt.WARN&&Dh.warn(`Auth (${xo}): ${s}`,...t)}function hh(s,...t){Dh.logLevel<=Pt.ERROR&&Dh.error(`Auth (${xo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(s,...t){throw Ag(s,...t)}function Qn(s,...t){return Ag(s,...t)}function Sg(s,t,e){const i=Object.assign(Object.assign({},JR()),{[t]:e});return new Tu("auth","Firebase",i).create(t,{appName:s.name})}function Ks(s){return Sg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t1(s,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&mi(s,"argument-error"),Sg(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ag(s,...t){if(typeof s!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(e,...i)}return r0.create(s,...t)}function It(s,t,...e){if(!s)throw Ag(t,...e)}function Ki(s){const t="INTERNAL ASSERTION FAILED: "+s;throw hh(t),new Error(t)}function Ji(s,t){s||Ki(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function e1(){return iE()==="http:"||iE()==="https:"}function iE(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e1()||Mw()||"connection"in navigator)?navigator.onLine:!0}function i1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ji(e>t,"Short delay should be less than long delay!"),this.isMobile=Vw()||Pw()}get(){return n1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(s,t){Ji(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new Su(3e4,6e4);function wg(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Vo(s,t,e,i,a={}){return a0(s,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const d=bu(Object.assign({key:s.config.apiKey},c)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p=Object.assign({method:t,headers:g},l);return Ow()||(p.referrerPolicy="no-referrer"),s0.fetch()(o0(s,s.config.apiHost,e,d),p)})}async function a0(s,t,e){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},r1),t);try{const a=new o1(s),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ih(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw ih(s,"user-disabled",c);const y=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Sg(s,y,p);mi(s,y)}}catch(a){if(a instanceof nr)throw a;mi(s,"network-request-failed",{message:String(a)})}}async function a1(s,t,e,i,a={}){const l=await Vo(s,t,e,i,a);return"mfaPendingCredential"in l&&mi(s,"multi-factor-auth-required",{_serverResponse:l}),l}function o0(s,t,e,i){const a=`${t}${e}?${i}`;return s.config.emulator?Ig(s.config,a):`${s.config.apiScheme}://${a}`}class o1{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Qn(this.auth,"network-request-failed")),s1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ih(s,t,e){const i={appName:s.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Qn(s,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(s,t){return Vo(s,"POST","/v1/accounts:delete",t)}async function l0(s,t){return Vo(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function u1(s,t=!1){const e=ze(s),i=await e.getIdToken(t),a=Rg(i);It(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:nu(Vm(a.auth_time)),issuedAtTime:nu(Vm(a.iat)),expirationTime:nu(Vm(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vm(s){return Number(s)*1e3}function Rg(s){const[t,e,i]=s.split(".");if(t===void 0||e===void 0||i===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const a=HT(e);return a?JSON.parse(a):(hh("Failed to decode base64 JWT payload"),null)}catch(a){return hh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function rE(s){const t=Rg(s);return It(t,"internal-error"),It(typeof t.exp<"u","internal-error"),It(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(s,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof nr&&c1(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function c1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(s){var t;const e=s.auth,i=await s.getIdToken(),a=await hu(s,l0(e,{idToken:i}));It(a==null?void 0:a.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?u0(l.providerUserInfo):[],d=d1(s.providerData,c),g=s.isAnonymous,p=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),y=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ym(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function f1(s){const t=ze(s);await xh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function d1(s,t){return[...s.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function u0(s){return s.map(t=>{var{providerId:e}=t,i=bg(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(s,t){const e=await a0(s,{},async()=>{const i=bu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=o0(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",s0.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function g1(s,t){return Vo(s,"POST","/v2/accounts:revokeToken",wg(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(typeof t.idToken<"u","internal-error"),It(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){It(t.length!==0,"internal-error");const e=rE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await m1(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new ho;return i&&(It(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(It(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(It(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(s,t){It(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Qi{constructor(t){var{uid:e,auth:i,stsTokenManager:a}=t,l=bg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ym(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const e=await hu(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return u1(this,t)}reload(){return f1(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Qi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hi(this.auth.app))return Promise.reject(Ks(this.auth));const t=await this.getIdToken();return await hu(this,l1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,a,l,c,d,g,p,y;const T=(i=e.displayName)!==null&&i!==void 0?i:void 0,I=(a=e.email)!==null&&a!==void 0?a:void 0,M=(l=e.phoneNumber)!==null&&l!==void 0?l:void 0,H=(c=e.photoURL)!==null&&c!==void 0?c:void 0,Q=(d=e.tenantId)!==null&&d!==void 0?d:void 0,z=(g=e._redirectEventId)!==null&&g!==void 0?g:void 0,nt=(p=e.createdAt)!==null&&p!==void 0?p:void 0,et=(y=e.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:it,emailVerified:ut,isAnonymous:ct,providerData:gt,stsTokenManager:D}=e;It(it&&D,t,"internal-error");const A=ho.fromJSON(this.name,D);It(typeof it=="string",t,"internal-error"),Or(T,t.name),Or(I,t.name),It(typeof ut=="boolean",t,"internal-error"),It(typeof ct=="boolean",t,"internal-error"),Or(M,t.name),Or(H,t.name),Or(Q,t.name),Or(z,t.name),Or(nt,t.name),Or(et,t.name);const R=new Qi({uid:it,auth:t,email:I,emailVerified:ut,displayName:T,isAnonymous:ct,photoURL:H,phoneNumber:M,tenantId:Q,stsTokenManager:A,createdAt:nt,lastLoginAt:et});return gt&&Array.isArray(gt)&&(R.providerData=gt.map(V=>Object.assign({},V))),z&&(R._redirectEventId=z),R}static async _fromIdTokenResponse(t,e,i=!1){const a=new ho;a.updateFromServerResponse(e);const l=new Qi({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await xh(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];It(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?u0(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new ho;d.updateFromIdToken(i);const g=new Qi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ym(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function Yi(s){Ji(s instanceof Function,"Expected a class definition");let t=sE.get(s);return t?(Ji(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,sE.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}c0.type="NONE";const aE=c0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s,t,e){return`firebase:${s}:${t}:${e}`}class fo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=fh(this.userKey,a.apiKey,l),this.fullPersistenceKey=fh("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Qi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new fo(Yi(aE),t,i);const a=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Yi(aE);const c=fh(i,t.config.apiKey,t.name);let d=null;for(const p of e)try{const y=await p._get(c);if(y){const T=Qi._fromJSON(t,y);p!==l&&(d=T),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new fo(l,t,i):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(e.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new fo(l,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(m0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(h0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(p0(t))return"Blackberry";if(_0(t))return"Webos";if(f0(t))return"Safari";if((t.includes("chrome/")||d0(t))&&!t.includes("edge/"))return"Chrome";if(g0(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function h0(s=Ve()){return/firefox\//i.test(s)}function f0(s=Ve()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function d0(s=Ve()){return/crios\//i.test(s)}function m0(s=Ve()){return/iemobile/i.test(s)}function g0(s=Ve()){return/android/i.test(s)}function p0(s=Ve()){return/blackberry/i.test(s)}function _0(s=Ve()){return/webos/i.test(s)}function Cg(s=Ve()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function p1(s=Ve()){var t;return Cg(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function _1(){return kw()&&document.documentMode===10}function y0(s=Ve()){return Cg(s)||g0(s)||_0(s)||p0(s)||/windows phone/i.test(s)||m0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(s,t=[]){let e;switch(s){case"Browser":e=oE(Ve());break;case"Worker":e=`${oE(Ve())}-${s}`;break;default:e=s}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(s,t={}){return Vo(s,"GET","/v2/passwordPolicy",wg(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=6;class T1{constructor(t){var e,i,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:E1,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(e=g.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new y1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Yi(e)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await fo.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await l0(this,{idToken:t}),i=await Qi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Hi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,d=a==null?void 0:a._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&(g!=null&&g.user)&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await xh(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=i1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hi(this.app))return Promise.reject(Ks(this));const e=t?ze(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hi(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hi(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await v1(this),e=new T1(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Tu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await g1(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Yi(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Yi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,i,a);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=v0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&ZR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $h(s){return ze(s)}class lE{constructor(t){this.auth=t,this.observer=null,this.addObserver=qw(e=>this.observer=e)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S1(s){Dg=s}function A1(s){return Dg.loadJS(s)}function I1(){return Dg.gapiScript}function w1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(s,t){const e=Tg(s,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(Rh(l,t??{}))return a;mi(a,"already-initialized")}return e.initialize({options:t})}function C1(s,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Yi);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function D1(s,t,e){const i=$h(s);It(i._canInitEmulator,i,"emulator-config-failed"),It(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,l=E0(t),{host:c,port:d}=x1(t),g=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${c}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})}),V1()}function E0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function x1(s){const t=E0(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:uE(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:uE(c)}}}function uE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function V1(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ki("not implemented")}_getIdTokenResponse(t){return Ki("not implemented")}_linkToIdToken(t,e){return Ki("not implemented")}_getReauthenticationResolver(t){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(s,t){return a1(s,"POST","/v1/accounts:signInWithIdp",wg(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="http://localhost";class $s extends T0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new $s(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):mi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=e,l=bg(e,["providerId","signInMethod"]);if(!i||!a)return null;const c=new $s(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return mo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,mo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,mo(t,e)}buildRequest(){const t={requestUri:N1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=bu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends xg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Au{constructor(){super("facebook.com")}static credential(t){return $s._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return $s._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Gi.credentialFromTaggedObject(t)}static credentialFromError(t){return Gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Gi.credential(e,i)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Au{constructor(){super("github.com")}static credential(t){return $s._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Au{constructor(){super("twitter.com")}static credential(t,e){return $s._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Lr.credentialFromTaggedObject(t)}static credentialFromError(t){return Lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Lr.credential(e,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await Qi._fromIdTokenResponse(t,i,a),c=cE(i);return new yo({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=cE(i);return new yo({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function cE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends nr{constructor(t,e,i,a){var l;super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Vh(t,e,i,a)}}function b0(s,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(s,l,t,i):l})}async function O1(s,t,e=!1){const i=await hu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return yo._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(s,t,e=!1){const{auth:i}=s;if(Hi(i.app))return Promise.reject(Ks(i));const a="reauthenticate";try{const l=await hu(s,b0(i,a,t,s),e);It(l.idToken,i,"internal-error");const c=Rg(l.idToken);It(c,i,"internal-error");const{sub:d}=c;return It(s.uid===d,i,"user-mismatch"),yo._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(s,t,e=!1){if(Hi(s.app))return Promise.reject(Ks(s));const i="signIn",a=await b0(s,i,t),l=await yo._fromIdTokenResponse(s,i,a);return e||await s._updateCurrentUser(l.user),l}function k1(s,t,e,i){return ze(s).onIdTokenChanged(t,e,i)}function U1(s,t,e){return ze(s).beforeAuthStateChanged(t,e)}function L1(s,t,e,i){return ze(s).onAuthStateChanged(t,e,i)}function S0(s){return ze(s).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=1e3,z1=10;class I0 extends A0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);_1()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,z1):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},B1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}I0.type="LOCAL";const j1=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends A0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}w0.type="SESSION";const R0=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new Wh(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(e.origin,l)),g=await q1(d);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(s="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return s+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const p=Vg("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const I=T;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function G1(s){di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function H1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K1(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function Q1(){return C0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="firebaseLocalStorageDb",Y1=1,Oh="firebaseLocalStorage",x0="fbase_key";class Iu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Jh(s,t){return s.transaction([Oh],t?"readwrite":"readonly").objectStore(Oh)}function X1(){const s=indexedDB.deleteDatabase(D0);return new Iu(s).toPromise()}function Xm(){const s=indexedDB.open(D0,Y1);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Oh,{keyPath:x0})}catch(a){e(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Oh)?t(i):(i.close(),await X1(),t(await Xm()))})})}async function hE(s,t,e){const i=Jh(s,!0).put({[x0]:t,value:e});return new Iu(i).toPromise()}async function $1(s,t){const e=Jh(s,!1).get(t),i=await new Iu(e).toPromise();return i===void 0?null:i.value}function fE(s,t){const e=Jh(s,!0).delete(t);return new Iu(e).toPromise()}const W1=800,J1=3;class V0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>J1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wh._getInstance(Q1()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await H1(),!this.activeServiceWorker)return;this.sender=new F1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||K1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Xm();return await hE(t,Nh,"1"),await fE(t,Nh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>hE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>$1(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>fE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Jh(a,!1).getAll();return new Iu(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V0.type="LOCAL";const Z1=V0;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(s,t){return t?Yi(t):(It(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends T0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return mo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function tC(s){return P1(s.auth,new Ng(s),s.bypassAuthState)}function eC(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),M1(e,new Ng(s),s.bypassAuthState)}async function nC(s){const{auth:t,user:e}=s;return It(e,t,"internal-error"),O1(e,new Ng(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return eC;default:mi(this.auth,"internal-error")}}resolve(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new Su(2e3,1e4);async function rC(s,t,e){if(Hi(s.app))return Promise.reject(Qn(s,"operation-not-supported-in-this-environment"));const i=$h(s);t1(s,t,xg);const a=N0(i,e);return new Hs(i,"signInViaPopup",t,a).executeNotNull()}class Hs extends O0{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const t=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iC.get())};t()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="pendingRedirect",dh=new Map;class aC extends O0{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=dh.get(this.auth._key());if(!t){try{const i=await oC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}dh.set(this.auth._key(),t)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oC(s,t){const e=cC(t),i=uC(s);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function lC(s,t){dh.set(s._key(),t)}function uC(s){return Yi(s._redirectPersistence)}function cC(s){return fh(sC,s.config.apiKey,s.name)}async function hC(s,t,e=!1){if(Hi(s.app))return Promise.reject(Ks(s));const i=$h(s),a=N0(i,t),c=await new aC(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=10*60*1e3;class dC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!M0(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Qn(this.auth,a))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=fC&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(t))}saveEventToCache(t){this.cachedEventUids.add(dE(t)),this.lastProcessedEventTime=Date.now()}}function dE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function M0({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function mC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(s,t={}){return Vo(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_C=/^https?/;async function yC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await gC(s);for(const e of t)try{if(vC(e))return}catch{}mi(s,"unauthorized-domain")}function vC(s){const t=Qm(),{protocol:e,hostname:i}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!_C.test(e))return!1;if(pC.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Su(3e4,6e4);function mE(){const s=di().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function TC(s){return new Promise((t,e)=>{var i,a,l;function c(){mE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mE(),e(Qn(s,"network-request-failed"))},timeout:EC.get()})}if(!((a=(i=di().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=di().gapi)===null||l===void 0)&&l.load)c();else{const d=w1("iframefcb");return di()[d]=()=>{gapi.load?c():e(Qn(s,"network-request-failed"))},A1(`${I1()}?onload=${d}`).catch(g=>e(g))}}).catch(t=>{throw mh=null,t})}let mh=null;function bC(s){return mh=mh||TC(s),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Su(5e3,15e3),AC="__/auth/iframe",IC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CC(s){const t=s.config;It(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Ig(t,IC):`https://${s.config.authDomain}/${AC}`,i={apiKey:t.apiKey,appName:s.name,v:xo},a=RC.get(s.config.apiHost);a&&(i.eid=a);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${bu(i).slice(1)}`}async function DC(s){const t=await bC(s),e=di().gapi;return It(e,s,"internal-error"),t.open({where:document.body,url:CC(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Qn(s,"network-request-failed"),d=di().setTimeout(()=>{l(c)},SC.get());function g(){di().clearTimeout(d),a(i)}i.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VC=500,NC=600,OC="_blank",MC="http://localhost";class gE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PC(s,t,e,i=VC,a=NC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const g=Object.assign(Object.assign({},xC),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Ve().toLowerCase();e&&(d=d0(p)?OC:e),h0(p)&&(t=t||MC,g.scrollbars="yes");const y=Object.entries(g).reduce((I,[M,H])=>`${I}${M}=${H},`,"");if(p1(p)&&d!=="_self")return kC(t||"",d),new gE(null);const T=window.open(t||"",d,y);It(T,s,"popup-blocked");try{T.focus()}catch{}return new gE(T)}function kC(s,t){const e=document.createElement("a");e.href=s,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="__/auth/handler",LC="emulator/auth/handler",BC=encodeURIComponent("fac");async function pE(s,t,e,i,a,l){It(s.config.authDomain,s,"auth-domain-config-required"),It(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:i,v:xo,eventId:a};if(t instanceof xg){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",jw(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,T]of Object.entries({}))c[y]=T}if(t instanceof Au){const y=t.getScopes().filter(T=>T!=="");y.length>0&&(c.scopes=y.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await s._getAppCheckToken(),p=g?`#${BC}=${encodeURIComponent(g)}`:"";return`${zC(s)}?${bu(d).slice(1)}${p}`}function zC({config:s}){return s.emulator?Ig(s,LC):`https://${s.authDomain}/${UC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class jC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R0,this._completeRedirectFn=hC,this._overrideRedirectResult=lC}async _openPopup(t,e,i,a){var l;Ji((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await pE(t,e,i,Qm(),a);return PC(t,c,Vg())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await pE(t,e,i,Qm(),a);return G1(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(Ji(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await DC(t),i=new dC(t);return e.register("authEvent",a=>(It(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Nm,{type:Nm},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Nm];c!==void 0&&e(!!c),mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=yC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return y0()||f0()||Cg()}}const qC=jC;var _E="@firebase/auth",yE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HC(s){_o(new Xs("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;It(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v0(s)},p=new b1(i,a,l,g);return C1(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),_o(new Xs("auth-internal",t=>{const e=$h(t.getProvider("auth").getImmediate());return(i=>new FC(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(_E,yE,GC(s)),Hr(_E,yE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=5*60,QC=YT("authIdTokenMaxAge")||KC;let vE=null;const YC=s=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>QC)return;const a=e==null?void 0:e.token;vE!==a&&(vE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function XC(s=t0()){const t=Tg(s,"auth");if(t.isInitialized())return t.getImmediate();const e=R1(s,{popupRedirectResolver:qC,persistence:[Z1,j1,R0]}),i=YT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=YC(l.toString());U1(e,c,()=>c(e.currentUser)),k1(e,d=>c(d))}}const a=KT("auth");return a&&D1(e,`http://${a}`),e}function $C(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}S1({loadJS(s){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=t,i.onerror=a=>{const l=Qn("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",$C().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HC("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function WC(s,t,e,i){function a(l){return l instanceof e?l:new e(function(c){c(l)})}return new(e||(e=Promise))(function(l,c){function d(y){try{p(i.next(y))}catch(T){c(T)}}function g(y){try{p(i.throw(y))}catch(T){c(T)}}function p(y){y.done?l(y.value):a(y.value).then(d,g)}p((i=i.apply(s,[])).next())})}function JC(s,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,a=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){e.label=p[1];break}if(p[0]===6&&e.label<l[1]){e.label=l[1],l=p;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(p);break}l[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(s,e)}catch(y){p=[6,y],a=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var co=function(){return co=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++){e=arguments[i];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},co.apply(this,arguments)},P0=function(s){return{loading:s==null,value:s}},ZC=function(){return function(s,t){switch(t.type){case"error":return co(co({},s),{error:t.error,loading:!1,value:void 0});case"reset":return P0(t.defaultValue);case"value":return co(co({},s),{error:void 0,loading:!1,value:t.value});default:return s}}},tD=function(s){var t=s?s():void 0,e=W.useReducer(ZC(),P0(t)),i=e[0],a=e[1],l=W.useCallback(function(){var g=s?s():void 0;a({type:"reset",defaultValue:g})},[s]),c=W.useCallback(function(g){a({type:"error",error:g})},[]),d=W.useCallback(function(g){a({type:"value",value:g})},[]);return W.useMemo(function(){return{error:i.error,loading:i.loading,reset:l,setError:c,setValue:d,value:i.value}},[i.error,i.loading,l,c,d,i.value])},eD=function(s,t){var e=tD(function(){return s.currentUser}),i=e.error,a=e.loading,l=e.setError,c=e.setValue,d=e.value;return W.useEffect(function(){var g=L1(s,function(p){return WC(void 0,void 0,void 0,function(){var y;return JC(this,function(T){switch(T.label){case 0:return[3,4];case 1:return T.trys.push([1,3,,4]),[4,t.onUserChanged(p)];case 2:return T.sent(),[3,4];case 3:return y=T.sent(),l(y),[3,4];case 4:return c(p),[2]}})})},l);return function(){g()}},[s]),[d,a,i]},nD="firebase",iD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(nD,iD,"app");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,k0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function R(){}R.prototype=A.prototype,D.D=A.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(V,O,k){for(var C=Array(arguments.length-2),je=2;je<arguments.length;je++)C[je-2]=arguments[je];return A.prototype[O].apply(V,C)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,R){R||(R=0);var V=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)V[O]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(O=0;16>O;++O)V[O]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=D.g[0],R=D.g[1],O=D.g[2];var k=D.g[3],C=A+(k^R&(O^k))+V[0]+3614090360&4294967295;A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+V[1]+3905402710&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+V[2]+606105819&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+V[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+V[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+V[5]+1200080426&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+V[6]+2821735955&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+V[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+V[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+V[9]+2336552879&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+V[10]+4294925233&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+V[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(k^R&(O^k))+V[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=k+(O^A&(R^O))+V[13]+4254626195&4294967295,k=A+(C<<12&4294967295|C>>>20),C=O+(R^k&(A^R))+V[14]+2792965006&4294967295,O=k+(C<<17&4294967295|C>>>15),C=R+(A^O&(k^A))+V[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(O^k&(R^O))+V[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+V[6]+3225465664&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+V[11]+643717713&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+V[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+V[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+V[10]+38016083&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+V[15]+3634488961&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+V[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+V[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+V[14]+3275163606&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+V[3]+4107603335&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+V[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^k&(R^O))+V[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=k+(R^O&(A^R))+V[2]+4243563512&4294967295,k=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(k^A))+V[7]+1735328473&4294967295,O=k+(C<<14&4294967295|C>>>18),C=R+(k^A&(O^k))+V[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(R^O^k)+V[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+V[8]+2272392833&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+V[11]+1839030562&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+V[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+V[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+V[4]+1272893353&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+V[7]+4139469664&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+V[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+V[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+V[0]+3936430074&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+V[3]+3572445317&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+V[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^k)+V[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=k+(A^R^O)+V[12]+3873151461&4294967295,k=A+(C<<11&4294967295|C>>>21),C=O+(k^A^R)+V[15]+530742520&4294967295,O=k+(C<<16&4294967295|C>>>16),C=R+(O^k^A)+V[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(O^(R|~k))+V[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+V[7]+1126891415&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+V[14]+2878612391&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+V[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+V[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+V[3]+2399980690&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+V[10]+4293915773&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+V[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+V[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+V[15]+4264355552&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+V[6]+2734768916&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+V[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~k))+V[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=k+(R^(A|~O))+V[11]+3174756917&4294967295,k=A+(C<<10&4294967295|C>>>22),C=O+(A^(k|~R))+V[2]+718787259&4294967295,O=k+(C<<15&4294967295|C>>>17),C=R+(k^(O|~A))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var R=A-this.blockSize,V=this.B,O=this.h,k=0;k<A;){if(O==0)for(;k<=R;)a(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<A;)if(V[O++]=D.charCodeAt(k++),O==this.blockSize){a(this,V),O=0;break}}else for(;k<A;)if(V[O++]=D[k++],O==this.blockSize){a(this,V),O=0;break}}this.h=O,this.o+=A},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var R=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=R&255,R/=256;for(this.u(D),D=Array(16),A=R=0;4>A;++A)for(var V=0;32>V;V+=8)D[R++]=this.g[A]>>>V&255;return D};function l(D,A){var R=d;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=A(D)}function c(D,A){this.h=A;for(var R=[],V=!0,O=D.length-1;0<=O;O--){var k=D[O]|0;V&&k==A||(R[O]=k,V=!1)}this.g=R}var d={};function g(D){return-128<=D&&128>D?l(D,function(A){return new c([A|0],0>A?-1:0)}):new c([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return z(p(-D));for(var A=[],R=1,V=0;D>=R;V++)A[V]=D/R|0,R*=4294967296;return new c(A,0)}function y(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return z(y(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(A,8)),V=T,O=0;O<D.length;O+=8){var k=Math.min(8,D.length-O),C=parseInt(D.substring(O,O+k),A);8>k?(k=p(Math.pow(A,k)),V=V.j(k).add(p(C))):(V=V.j(R),V=V.add(p(C)))}return V}var T=g(0),I=g(1),M=g(16777216);s=c.prototype,s.m=function(){if(Q(this))return-z(this).m();for(var D=0,A=1,R=0;R<this.g.length;R++){var V=this.i(R);D+=(0<=V?V:4294967296+V)*A,A*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(Q(this))return"-"+z(this).toString(D);for(var A=p(Math.pow(D,6)),R=this,V="";;){var O=ut(R,A).g;R=nt(R,O.j(A));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=O,H(R))return k+V;for(;6>k.length;)k="0"+k;V=k+V}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function Q(D){return D.h==-1}s.l=function(D){return D=nt(this,D),Q(D)?-1:H(D)?0:1};function z(D){for(var A=D.g.length,R=[],V=0;V<A;V++)R[V]=~D.g[V];return new c(R,~D.h).add(I)}s.abs=function(){return Q(this)?z(this):this},s.add=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],V=0,O=0;O<=A;O++){var k=V+(this.i(O)&65535)+(D.i(O)&65535),C=(k>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);V=C>>>16,k&=65535,C&=65535,R[O]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function nt(D,A){return D.add(z(A))}s.j=function(D){if(H(this)||H(D))return T;if(Q(this))return Q(D)?z(this).j(z(D)):z(z(this).j(D));if(Q(D))return z(this.j(z(D)));if(0>this.l(M)&&0>D.l(M))return p(this.m()*D.m());for(var A=this.g.length+D.g.length,R=[],V=0;V<2*A;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var O=0;O<D.g.length;O++){var k=this.i(V)>>>16,C=this.i(V)&65535,je=D.i(O)>>>16,fe=D.i(O)&65535;R[2*V+2*O]+=C*fe,et(R,2*V+2*O),R[2*V+2*O+1]+=k*fe,et(R,2*V+2*O+1),R[2*V+2*O+1]+=C*je,et(R,2*V+2*O+1),R[2*V+2*O+2]+=k*je,et(R,2*V+2*O+2)}for(V=0;V<A;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=A;V<2*A;V++)R[V]=0;return new c(R,0)};function et(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function it(D,A){this.g=D,this.h=A}function ut(D,A){if(H(A))throw Error("division by zero");if(H(D))return new it(T,T);if(Q(D))return A=ut(z(D),A),new it(z(A.g),z(A.h));if(Q(A))return A=ut(D,z(A)),new it(z(A.g),A.h);if(30<D.g.length){if(Q(D)||Q(A))throw Error("slowDivide_ only works with positive integers.");for(var R=I,V=A;0>=V.l(D);)R=ct(R),V=ct(V);var O=gt(R,1),k=gt(V,1);for(V=gt(V,2),R=gt(R,2);!H(V);){var C=k.add(V);0>=C.l(D)&&(O=O.add(R),k=C),V=gt(V,1),R=gt(R,1)}return A=nt(D,O.j(A)),new it(O,A)}for(O=T;0<=D.l(A);){for(R=Math.max(1,Math.floor(D.m()/A.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),k=p(R),C=k.j(A);Q(C)||0<C.l(D);)R-=V,k=p(R),C=k.j(A);H(k)&&(k=I),O=O.add(k),D=nt(D,C)}return new it(O,D)}s.A=function(D){return ut(this,D).h},s.and=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)&D.i(V);return new c(R,this.h&D.h)},s.or=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)|D.i(V);return new c(R,this.h|D.h)},s.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)^D.i(V);return new c(R,this.h^D.h)};function ct(D){for(var A=D.g.length+1,R=[],V=0;V<A;V++)R[V]=D.i(V)<<1|D.i(V-1)>>>31;return new c(R,D.h)}function gt(D,A){var R=A>>5;A%=32;for(var V=D.g.length-R,O=[],k=0;k<V;k++)O[k]=0<A?D.i(k+R)>>>A|D.i(k+R+1)<<32-A:D.i(k+R);return new c(O,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,k0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Qs=c}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U0,Jl,L0,gh,$m,B0,z0,j0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,v){return h==Array.prototype||h==Object.prototype||(h[_]=v.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var _=0;_<h.length;++_){var v=h[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=e(this);function a(h,_){if(_)t:{var v=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in v))break t;v=v[U]}h=h[h.length-1],S=v[h],_=_(S),_!=S&&_!=null&&t(v,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var v=0,S=!1,U={next:function(){if(!S&&v<h.length){var K=v++;return{value:_(K,h[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,v){return h.call.apply(h.bind,arguments)}function T(h,_,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),h.apply(_,U)}}return function(){return h.apply(_,arguments)}}function I(h,_,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,I.apply(null,arguments)}function M(h,_){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function H(h,_){function v(){}v.prototype=_.prototype,h.aa=_.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,U,K){for(var at=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)at[Ut-2]=arguments[Ut];return _.prototype[U].apply(S,at)}}function Q(h){const _=h.length;if(0<_){const v=Array(_);for(let S=0;S<_;S++)v[S]=h[S];return v}return[]}function z(h,_){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const U=h.length||0,K=S.length||0;h.length=U+K;for(let at=0;at<K;at++)h[U+at]=S[at]}else h.push(S)}}class nt{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function et(h){return/^[\s\xa0]*$/.test(h)}function it(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ut(h){return ut[" "](h),h}ut[" "]=function(){};var ct=it().indexOf("Gecko")!=-1&&!(it().toLowerCase().indexOf("webkit")!=-1&&it().indexOf("Edge")==-1)&&!(it().indexOf("Trident")!=-1||it().indexOf("MSIE")!=-1)&&it().indexOf("Edge")==-1;function gt(h,_,v){for(const S in h)_.call(v,h[S],S,h)}function D(h,_){for(const v in h)_.call(void 0,h[v],v,h)}function A(h){const _={};for(const v in h)_[v]=h[v];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,_){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)h[v]=S[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function O(h){var _=1;h=h.split(":");const v=[];for(;0<_&&h.length;)v.push(h.shift()),_--;return h.length&&v.push(h.join(":")),v}function k(h){d.setTimeout(()=>{throw h},0)}function C(){var h=qt;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class je{constructor(){this.h=this.g=null}add(_,v){const S=fe.get();S.set(_,v),this.h?this.h.next=S:this.g=S,this.h=S}}var fe=new nt(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,yt=!1,qt=new je,x=()=>{const h=d.Promise.resolve(void 0);ot=()=>{h.then(tt)}};var tt=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){k(v)}var _=fe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}yt=!1};function lt(){this.s=this.s,this.C=this.C}lt.prototype.s=!1,lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,_),d.removeEventListener("test",v,_)}catch{}return h}();function Vt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ct){t:{try{ut(_.nodeName);var U=!0;break t}catch{}U=!1}U||(_=null)}}else v=="mouseover"?_=h.fromElement:v=="mouseout"&&(_=h.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:At[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Vt.aa.h.call(this)}}H(Vt,st);var At={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),ne=0;function Yn(h,_,v,S,U){this.listener=h,this.proxy=null,this.src=_,this.type=v,this.capture=!!S,this.ha=U,this.key=++ne,this.da=this.fa=!1}function rr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _i(h){this.src=h,this.g={},this.h=0}_i.prototype.add=function(h,_,v,S,U){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var at=ns(h,_,S,U);return-1<at?(_=h[at],v||(_.fa=!1)):(_=new Yn(_,this.src,K,!!S,U),_.fa=v,h.push(_)),_};function es(h,_){var v=_.type;if(v in h.g){var S=h.g[v],U=Array.prototype.indexOf.call(S,_,void 0),K;(K=0<=U)&&Array.prototype.splice.call(S,U,1),K&&(rr(_),h.g[v].length==0&&(delete h.g[v],h.h--))}}function ns(h,_,v,S){for(var U=0;U<h.length;++U){var K=h[U];if(!K.da&&K.listener==_&&K.capture==!!v&&K.ha==S)return U}return-1}var is="closure_lm_"+(1e6*Math.random()|0),ko={};function Ou(h,_,v,S,U){if(Array.isArray(_)){for(var K=0;K<_.length;K++)Ou(h,_[K],v,S,U);return null}return v=Mu(v),h&&h[Oe]?h.K(_,v,p(S)?!!S.capture:!1,U):In(h,_,v,!1,S,U)}function In(h,_,v,S,U,K){if(!_)throw Error("Invalid event type");var at=p(U)?!!U.capture:!!U,Ut=ca(h);if(Ut||(h[is]=Ut=new _i(h)),v=Ut.add(_,v,S,at,K),v.proxy)return v;if(S=vf(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)vt||(U=at),U===void 0&&(U=!1),h.addEventListener(_.toString(),S,U);else if(h.attachEvent)h.attachEvent(rs(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function vf(){function h(v){return _.call(h.src,h.listener,v)}const _=Ef;return h}function Uo(h,_,v,S,U){if(Array.isArray(_))for(var K=0;K<_.length;K++)Uo(h,_[K],v,S,U);else S=p(S)?!!S.capture:!!S,v=Mu(v),h&&h[Oe]?(h=h.i,_=String(_).toString(),_ in h.g&&(K=h.g[_],v=ns(K,v,S,U),-1<v&&(rr(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete h.g[_],h.h--)))):h&&(h=ca(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ns(_,v,S,U)),(v=-1<h?_[h]:null)&&ua(v))}function ua(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])es(_.i,h);else{var v=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(v,S,h.capture):_.detachEvent?_.detachEvent(rs(v),S):_.addListener&&_.removeListener&&_.removeListener(S),(v=ca(_))?(es(v,h),v.h==0&&(v.src=null,_[is]=null)):rr(h)}}}function rs(h){return h in ko?ko[h]:ko[h]="on"+h}function Ef(h,_){if(h.da)h=!0;else{_=new Vt(_,this);var v=h.listener,S=h.ha||h.src;h.fa&&ua(h),h=v.call(S,_)}return h}function ca(h){return h=h[is],h instanceof _i?h:null}var Lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mu(h){return typeof h=="function"?h:(h[Lo]||(h[Lo]=function(_){return h.handleEvent(_)}),h[Lo])}function de(){lt.call(this),this.i=new _i(this),this.M=this,this.F=null}H(de,lt),de.prototype[Oe]=!0,de.prototype.removeEventListener=function(h,_,v,S){Uo(this,h,_,v,S)};function Ht(h,_){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var U=_;_=new st(S,h),V(_,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var at=_.g=v[K];U=mn(at,S,!0,_)&&U}if(at=_.g=h,U=mn(at,S,!0,_)&&U,U=mn(at,S,!1,_)&&U,v)for(K=0;K<v.length;K++)at=_.g=v[K],U=mn(at,S,!1,_)&&U}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var v=h.g[_],S=0;S<v.length;S++)rr(v[S]);delete h.g[_],h.h--}}this.F=null},de.prototype.K=function(h,_,v,S){return this.i.add(String(h),_,!1,v,S)},de.prototype.L=function(h,_,v,S){return this.i.add(String(h),_,!0,v,S)};function mn(h,_,v,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var U=!0,K=0;K<_.length;++K){var at=_[K];if(at&&!at.da&&at.capture==v){var Ut=at.listener,Re=at.ha||at.src;at.fa&&es(h.i,at),U=Ut.call(Re,S)!==!1&&U}}return U&&!S.defaultPrevented}function $e(h,_,v){if(typeof h=="function")v&&(h=I(h,v));else if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Pu(h){h.g=$e(()=>{h.g=null,h.i&&(h.i=!1,Pu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Tf extends lt{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(h){lt.call(this),this.h=h,this.g={}}H(ss,lt);var as=[];function os(h){gt(h.g,function(_,v){this.g.hasOwnProperty(v)&&ua(_)},h),h.g={}}ss.prototype.N=function(){ss.aa.N.call(this),os(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=d.JSON.stringify,ha=d.JSON.parse,ls=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Bo(){}Bo.prototype.h=null;function zo(h){return h.h||(h.h=h.i())}function jo(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){st.call(this,"d")}H(vi,st);function qo(){st.call(this,"c")}H(qo,st);var Xn={},Fo=null;function sr(){return Fo=Fo||new de}Xn.La="serverreachability";function fa(h){st.call(this,Xn.La,h)}H(fa,st);function ar(h){const _=sr();Ht(_,new fa(_))}Xn.STAT_EVENT="statevent";function ku(h,_){st.call(this,Xn.STAT_EVENT,h),this.stat=_}H(ku,st);function re(h){const _=sr();Ht(_,new ku(_,h))}Xn.Ma="timingevent";function we(h,_){st.call(this,Xn.Ma,h),this.size=_}H(we,st);function Ee(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Go(h,_,v,S,U,K){h.info(function(){if(h.g)if(K)for(var at="",Ut=K.split("&"),Re=0;Re<Ut.length;Re++){var Lt=Ut[Re].split("=");if(1<Lt.length){var Pe=Lt[0];Lt=Lt[1];var Ce=Pe.split("_");at=2<=Ce.length&&Ce[1]=="type"?at+(Pe+"="+Lt+"&"):at+(Pe+"=redacted&")}}else at=null;else at=K;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+_+`
`+v+`
`+at})}function bf(h,_,v,S,U,K,at){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+_+`
`+v+`
`+K+" "+at})}function or(h,_,v,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+us(h,v)+(S?" "+S:"")})}function Uu(h,_){h.info(function(){return"TIMEOUT: "+_})}wn.prototype.info=function(){};function us(h,_){if(!h.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var at=1;at<U.length;at++)U[at]=""}}}}return jn(v)}catch{return _}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Wn(){}H(Wn,Bo),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},$n=new Wn;function en(h,_,v,S){this.j=h,this.i=_,this.l=v,this.R=S||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var Ho={},da={};function qn(h,_,v){h.L=1,h.v=ms(gn(_)),h.m=v,h.P=!0,Ti(h,null)}function Ti(h,_){h.F=Date.now(),cs(h),h.A=gn(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Wo(v.i,"t",S),h.C=0,v=h.j.J,h.h=new _e,h.g=Zu(h.j,v?_:null,!h.m),0<h.O&&(h.M=new Tf(I(h.Y,h,h.g),h.O)),_=h.U,v=h.g,S=h.ca;var U="readystatechange";Array.isArray(U)||(U&&(as[0]=U.toString()),U=as);for(var K=0;K<U.length;K++){var at=Ou(v,U[K],S||_.handleEvent,!1,_.h||_);if(!at)break;_.g[at.key]=at}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),ar(),Go(h.i,h.u,h.A,h.l,h.R,h.m)}en.prototype.ca=function(h){h=h.target;const _=this.M;_&&xn(h)==3?_.j():this.Y(h)},en.prototype.Y=function(h){try{if(h==this.g)t:{const Ce=xn(this.g);var _=this.g.Ba();const Di=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||Hu(this.g)))){this.J||Ce!=4||_==7||(_==8||0>=Di?ar(3):ar(2)),ur(this);var v=this.g.Z();this.X=v;e:if(Lu(this)){var S=Hu(this.g);h="";var U=S.length,K=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),Jn(this);var at="";break e}this.h.i=new d.TextDecoder}for(_=0;_<U;_++)this.h.h=!0,h+=this.h.i.decode(S[_],{stream:!(K&&_==U-1)});S.length=0,this.h.g+=h,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=v==200,bf(this.i,this.u,this.A,this.l,this.R,Ce,v),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,Re=this.g;if((Ut=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(Ut)){var Lt=Ut;break e}}Lt=null}if(v=Lt)or(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,v);else{this.o=!1,this.s=3,re(12),qe(this),Jn(this);break t}}if(this.P){v=!0;let Fe;for(;!this.J&&this.C<at.length;)if(Fe=Bu(this,at),Fe==da){Ce==4&&(this.s=4,re(14),v=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==Ho){this.s=4,re(15),or(this.i,this.l,at,"[Invalid Chunk]"),v=!1;break}else or(this.i,this.l,Fe,null),hs(this,Fe);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||at.length!=0||this.h.h||(this.s=1,re(16),v=!1),this.o=this.o&&v,!v)or(this.i,this.l,at,"[Invalid Chunked Response]"),qe(this),Jn(this);else if(0<at.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),bs(Pe),Pe.M=!0,re(11))}}else or(this.i,this.l,at,null),hs(this,at);Ce==4&&qe(this),this.o&&!this.J&&(Ce==4?$u(this.j,this):(this.o=!1,cs(this)))}else Rf(this.g),v==400&&0<at.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),qe(this),Jn(this)}}}catch{}finally{}};function Lu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Bu(h,_){var v=h.C,S=_.indexOf(`
`,v);return S==-1?da:(v=Number(_.substring(v,S)),isNaN(v)?Ho:(S+=1,S+v>_.length?da:(_=_.slice(S,S+v),h.C=S+v,_)))}en.prototype.cancel=function(){this.J=!0,qe(this)};function cs(h){h.S=Date.now()+h.I,zu(h,h.I)}function zu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ee(I(h.ba,h),_)}function ur(h){h.B&&(d.clearTimeout(h.B),h.B=null)}en.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Uu(this.i,this.A),this.L!=2&&(ar(),re(17)),qe(this),this.s=2,Jn(this)):zu(this,this.S-h)};function Jn(h){h.j.G==0||h.J||$u(h.j,h)}function qe(h){ur(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,os(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function hs(h,_){try{var v=h.j;if(v.G!=0&&(v.g==h||Ko(v.h,h))){if(!h.K&&Ko(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Ia(v),Sa(v);else break t;nl(v),re(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ee(I(v.Za,v),6e3));if(1>=ga(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ci(v,11)}else if((h.K||v.g==h)&&Ia(v),!et(_))for(U=v.Da.g.parse(_),_=0;_<U.length;_++){let Lt=U[_];if(v.T=Lt[0],Lt=Lt[1],v.G==2)if(Lt[0]=="c"){v.K=Lt[1],v.ia=Lt[2];const Pe=Lt[3];Pe!=null&&(v.la=Pe,v.j.info("VER="+v.la));const Ce=Lt[4];Ce!=null&&(v.Aa=Ce,v.j.info("SVER="+v.Aa));const Di=Lt[5];Di!=null&&typeof Di=="number"&&0<Di&&(S=1.5*Di,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Fe=h.g;if(Fe){const si=Fe.g?Fe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var K=S.h;K.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(pa(K,K.h),K.h=null))}if(S.D){const rl=Fe.g?Fe.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(S.ya=rl,Xt(S.I,S.D,rl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var at=h;if(S.qa=Ju(S,S.J?S.ia:null,S.W),at.K){nn(S.h,at);var Ut=at,Re=S.L;Re&&(Ut.I=Re),Ut.B&&(ur(Ut),cs(Ut)),S.g=at}else Yu(S);0<v.i.length&&Aa(v)}else Lt[0]!="stop"&&Lt[0]!="close"||Ci(v,7);else v.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Ci(v,7):tl(v):Lt[0]!="noop"&&v.l&&v.l.ta(Lt),v.v=0)}}ar(4)}catch{}}var ju=class{constructor(h,_){this.g=h,this.map=_}};function bi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ma(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ga(h){return h.h?1:h.g?h.g.size:0}function Ko(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function pa(h,_){h.g?h.g.add(_):h.h=_}function nn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}bi.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Qo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const v of h.g.values())_=_.concat(v.D);return _}return Q(h.i)}function Sf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],v=h.length,S=0;S<v;S++)_.push(h[S]);return _}_=[],v=0;for(S in h)_[v++]=h[S];return _}function _a(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var v=0;v<h;v++)_.push(v);return _}_=[],v=0;for(const S in h)_[v++]=S;return _}}}function Yo(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var v=_a(h),S=Sf(h),U=S.length,K=0;K<U;K++)_.call(void 0,S[K],v&&v[K],h)}var fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(h,_){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),U=null;if(0<=S){var K=h[v].substring(0,S);U=h[v].substring(S+1)}else K=h[v];_(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Te(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Te){this.h=h.h,ds(this,h.j),this.o=h.o,this.g=h.g,cr(this,h.s),this.l=h.l;var _=h.i,v=new Ai;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),Si(this,v),this.m=h.m}else h&&(_=String(h).match(fs))?(this.h=!1,ds(this,_[1]||"",!0),this.o=Rn(_[2]||""),this.g=Rn(_[3]||"",!0),cr(this,_[4]),this.l=Rn(_[5]||"",!0),Si(this,_[6]||"",!0),this.m=Rn(_[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}Te.prototype.toString=function(){var h=[],_=this.j;_&&h.push(gs(_,Xo,!0),":");var v=this.g;return(v||_=="file")&&(h.push("//"),(_=this.o)&&h.push(gs(_,Xo,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(gs(v,v.charAt(0)=="/"?If:$o,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",gs(v,ya)),h.join("")};function gn(h){return new Te(h)}function ds(h,_,v){h.j=v?Rn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function cr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Si(h,_,v){_ instanceof Ai?(h.i=_,Fu(h.i,h.h)):(v||(_=gs(_,wf)),h.i=new Ai(_,h.h))}function Xt(h,_,v){h.i.set(_,v)}function ms(h){return Xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Rn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function gs(h,_,v){return typeof h=="string"?(h=encodeURI(h).replace(_,qu),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xo=/[#\/\?@]/g,$o=/[#\?:]/g,If=/[#\?]/g,wf=/[#\?@]/g,ya=/#/g;function Ai(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&Af(h.i,function(_,v){h.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}s=Ai.prototype,s.add=function(h,_){Cn(this),this.i=null,h=Zn(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(_),this.h+=1,this};function Ii(h,_){Cn(h),_=Zn(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function wi(h,_){return Cn(h),_=Zn(h,_),h.g.has(_)}s.forEach=function(h,_){Cn(this),this.g.forEach(function(v,S){v.forEach(function(U){h.call(_,U,S,this)},this)},this)},s.na=function(){Cn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let S=0;S<_.length;S++){const U=h[S];for(let K=0;K<U.length;K++)v.push(_[S])}return v},s.V=function(h){Cn(this);let _=[];if(typeof h=="string")wi(this,h)&&(_=_.concat(this.g.get(Zn(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)_=_.concat(h[v])}return _},s.set=function(h,_){return Cn(this),this.i=null,h=Zn(this,h),wi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},s.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Wo(h,_,v){Ii(h,_),0<v.length&&(h.i=null,h.g.set(Zn(h,_),Q(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var S=_[v];const K=encodeURIComponent(String(S)),at=this.V(S);for(S=0;S<at.length;S++){var U=K;at[S]!==""&&(U+="="+encodeURIComponent(String(at[S]))),h.push(U)}}return this.i=h.join("&")};function Zn(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Fu(h,_){_&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(Ii(this,S),Wo(this,U,v))},h)),h.j=_}function ps(h,_){const v=new wn;if(d.Image){const S=new Image;S.onload=M(Dn,v,"TestLoadImage: loaded",!0,_,S),S.onerror=M(Dn,v,"TestLoadImage: error",!1,_,S),S.onabort=M(Dn,v,"TestLoadImage: abort",!1,_,S),S.ontimeout=M(Dn,v,"TestLoadImage: timeout",!1,_,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Fn(h,_){const v=new wn,S=new AbortController,U=setTimeout(()=>{S.abort(),Dn(v,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(K=>{clearTimeout(U),K.ok?Dn(v,"TestPingServer: ok",!0,_):Dn(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),Dn(v,"TestPingServer: error",!1,_)})}function Dn(h,_,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function _s(){this.g=new ls}function ti(h,_,v){const S=v||"";try{Yo(h,function(U,K){let at=U;p(U)&&(at=jn(U)),_.push(S+K+"="+encodeURIComponent(at))})}catch(U){throw _.push(S+"type="+encodeURIComponent("_badmap")),U}}function hr(h){this.l=h.Ub||null,this.j=h.eb||!1}H(hr,Bo),hr.prototype.g=function(){return new Ri(this.l,this.j)},hr.prototype.i=function(h){return function(){return h}}({});function Ri(h,_){de.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Ri,de),s=Ri.prototype,s.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ni(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ei(this):ni(this),this.readyState==3&&Jo(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,ei(this))},s.Qa=function(h){this.g&&(this.response=h,ei(this))},s.ga=function(){this.g&&ei(this)};function ei(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}s.setRequestHeader=function(h,_){this.u.append(h,_)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=_.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Zo(h){let _="";return gt(h,function(v,S){_+=S,_+=":",_+=v,_+=`\r
`}),_}function Me(h,_,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Zo(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Xt(h,_,v))}function Gt(h){de.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Gt,de);var va=/^https?$/i,ys=["POST","PUT"];s=Gt.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,_,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?zo(this.o):zo($n),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(K){Gu(this,K);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())v.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ys,_,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,at]of v)this.g.setRequestHeader(K,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vs(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){Gu(this,K)}};function Gu(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Ea(h),ii(h)}function Ea(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ht(this,"complete"),Ht(this,"abort"),ii(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),Gt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},s.bb=function(){Ta(this)};function Ta(h){if(h.h&&typeof c<"u"&&(!h.v[1]||xn(h)!=4||h.Z()!=2)){if(h.u&&xn(h)==4)$e(h.Ea,0,h);else if(Ht(h,"readystatechange"),xn(h)==4){h.h=!1;try{const at=h.Z();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var v;if(!(v=_)){var S;if(S=at===0){var U=String(h.D).match(fs)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),S=!va.test(U?U.toLowerCase():"")}v=S}if(v)Ht(h,"complete"),Ht(h,"success");else{h.m=6;try{var K=2<xn(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",Ea(h)}}finally{ii(h)}}}}function ii(h,_){if(h.g){vs(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ht(h,"ready");try{v.onreadystatechange=S}catch{}}}function vs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function xn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),ha(_)}};function Hu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rf(h){const _={};h=(h.g&&2<=xn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(et(h[S]))continue;var v=O(h[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=_[U]||[];_[U]=K,K.push(v)}D(_,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(h,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||_}function ba(h){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,h),this.cb=Es("retryDelaySeedMs",1e4,h),this.Wa=Es("forwardChannelMaxRetries",2,h),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(h&&h.concurrentRequestLimit),this.Da=new _s,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ba.prototype,s.la=8,s.G=1,s.connect=function(h,_,v,S){re(0),this.W=h,this.H=_||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Ju(this,null,this.W),Aa(this)};function tl(h){if(Ku(h),h.G==3){var _=h.U++,v=gn(h.I);if(Xt(v,"SID",h.K),Xt(v,"RID",_),Xt(v,"TYPE","terminate"),Ts(h,v),_=new en(h,h.j,_),_.L=2,_.v=ms(gn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=_.v,v=!0),v||(_.g=Zu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),cs(_)}Wu(h)}function Sa(h){h.g&&(bs(h),h.g.cancel(),h.g=null)}function Ku(h){Sa(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ia(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Aa(h){if(!ma(h.h)&&!h.s){h.s=!0;var _=h.Ga;ot||x(),yt||(ot(),yt=!0),qt.add(_,h),h.B=0}}function Cf(h,_){return ga(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ee(I(h.Ga,h,_),il(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new en(this,this.j,h);let K=this.o;if(this.S&&(K?(K=A(K),V(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)t:{for(var _=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=v;break t}if(_===4096||v===this.i.length-1){_=v+1;break t}}_=1e3}else _=1e3;_=Qu(this,U,_),v=gn(this.I),Xt(v,"RID",h),Xt(v,"CVER",22),this.D&&Xt(v,"X-HTTP-Session-Id",this.D),Ts(this,v),K&&(this.O?_="headers="+encodeURIComponent(String(Zo(K)))+"&"+_:this.m&&Me(v,this.m,K)),pa(this.h,U),this.Ua&&Xt(v,"TYPE","init"),this.P?(Xt(v,"$req",_),Xt(v,"SID","null"),U.T=!0,qn(U,v,null)):qn(U,v,_),this.G=2}}else this.G==3&&(h?el(this,h):this.i.length==0||ma(this.h)||el(this))};function el(h,_){var v;_?v=_.l:v=h.U++;const S=gn(h.I);Xt(S,"SID",h.K),Xt(S,"RID",v),Xt(S,"AID",h.T),Ts(h,S),h.m&&h.o&&Me(S,h.m,h.o),v=new en(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Qu(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),pa(h.h,v),qn(v,S,_)}function Ts(h,_){h.H&&gt(h.H,function(v,S){Xt(_,S,v)}),h.l&&Yo({},function(v,S){Xt(_,S,v)})}function Qu(h,_,v){v=Math.min(h.i.length,v);var S=h.l?I(h.l.Na,h.l,h):null;t:{var U=h.i;let K=-1;for(;;){const at=["count="+v];K==-1?0<v?(K=U[0].g,at.push("ofs="+K)):K=0:at.push("ofs="+K);let Ut=!0;for(let Re=0;Re<v;Re++){let Lt=U[Re].g;const Pe=U[Re].map;if(Lt-=K,0>Lt)K=Math.max(0,U[Re].g-100),Ut=!1;else try{ti(Pe,at,"req"+Lt+"_")}catch{S&&S(Pe)}}if(Ut){S=at.join("&");break t}}}return h=h.i.splice(0,v),_.D=h,S}function Yu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ot||x(),yt||(ot(),yt=!0),qt.add(_,h),h.v=0}}function nl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ee(I(h.Fa,h),il(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ee(I(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Sa(this),Xu(this))};function bs(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Xu(h){h.g=new en(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=gn(h.qa);Xt(_,"RID","rpc"),Xt(_,"SID",h.K),Xt(_,"AID",h.T),Xt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xt(_,"TO",h.ja),Xt(_,"TYPE","xmlhttp"),Ts(h,_),h.m&&h.o&&Me(_,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ms(gn(_)),v.m=null,v.P=!0,Ti(v,h)}s.Za=function(){this.C!=null&&(this.C=null,Sa(this),nl(this),re(19))};function Ia(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $u(h,_){var v=null;if(h.g==_){Ia(h),bs(h),h.g=null;var S=2}else if(Ko(h.h,_))v=_.D,nn(h.h,_),S=1;else return;if(h.G!=0){if(_.o)if(S==1){v=_.m?_.m.length:0,_=Date.now()-_.F;var U=h.B;S=sr(),Ht(S,new we(S,v)),Aa(h)}else Yu(h);else if(U=_.s,U==3||U==0&&0<_.X||!(S==1&&Cf(h,_)||S==2&&nl(h)))switch(v&&0<v.length&&(_=h.h,_.i=_.i.concat(v)),U){case 1:Ci(h,5);break;case 4:Ci(h,10);break;case 3:Ci(h,6);break;default:Ci(h,2)}}}function il(h,_){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*_}function Ci(h,_){if(h.j.info("Error code "+_),_==2){var v=I(h.fb,h),S=h.Xa;const U=!S;S=new Te(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ds(S,"https"),ms(S),U?ps(S.toString(),v):Fn(S.toString(),v)}else re(2);h.G=0,h.l&&h.l.sa(_),Wu(h),Ku(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Wu(h){if(h.G=0,h.ka=[],h.l){const _=Qo(h.h);(_.length!=0||h.i.length!=0)&&(z(h.ka,_),z(h.ka,h.i),h.h.i.length=0,Q(h.i),h.i.length=0),h.l.ra()}}function Ju(h,_,v){var S=v instanceof Te?gn(v):new Te(v);if(S.g!="")_&&(S.g=_+"."+S.g),cr(S,S.s);else{var U=d.location;S=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;var K=new Te(null);S&&ds(K,S),_&&(K.g=_),U&&cr(K,U),v&&(K.l=v),S=K}return v=h.D,_=h.ya,v&&_&&Xt(S,v,_),Xt(S,"VER",h.la),Ts(h,S),S}function Zu(h,_,v){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Gt(new hr({eb:v})):new Gt(h.pa),_.Ha(h.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}s=tc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function wa(){}wa.prototype.g=function(h,_){return new rn(h,_)};function rn(h,_){de.call(this),this.g=new ba(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!et(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!et(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ri(this)}H(rn,de),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){tl(this.g)},rn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=jn(h),h=v);_.i.push(new ju(_.Ya++,h)),_.G==3&&Aa(_)},rn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,rn.aa.N.call(this)};function ec(h){vi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const v in _){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}H(ec,vi);function nc(){qo.call(this),this.status=1}H(nc,qo);function ri(h){this.g=h}H(ri,tc),ri.prototype.ua=function(){Ht(this.g,"a")},ri.prototype.ta=function(h){Ht(this.g,new ec(h))},ri.prototype.sa=function(h){Ht(this.g,new nc)},ri.prototype.ra=function(){Ht(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,j0=function(){return new wa},z0=function(){return sr()},B0=Xn,$m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,gh=lr,Ei.COMPLETE="complete",L0=Ei,jo.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",de.prototype.listen=de.prototype.K,Jl=jo,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,U0=Gt}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new vg("@firebase/firestore");function so(){return Ws.logLevel}function rt(s,...t){if(Ws.logLevel<=Pt.DEBUG){const e=t.map(Og);Ws.debug(`Firestore (${No}): ${s}`,...e)}}function an(s,...t){if(Ws.logLevel<=Pt.ERROR){const e=t.map(Og);Ws.error(`Firestore (${No}): ${s}`,...e)}}function Js(s,...t){if(Ws.logLevel<=Pt.WARN){const e=t.map(Og);Ws.warn(`Firestore (${No}): ${s}`,...e)}}function Og(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(s="Unexpected state"){const t=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+s;throw an(t),new Error(t)}function _t(s,t){s||mt()}function wt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends nr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Qe.UNAUTHENTICATED))}shutdown(){}}class sD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class aD{constructor(t){this.t=t,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0);let i=this.i;const a=g=>this.i!==i?(i=this.i,e(g)):Promise.resolve();let l=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new $i,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new $i)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string"),new q0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string"),new Qe(t)}}class oD{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lD{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new oD(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cD{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){_t(this.o===void 0);const i=l=>{l.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const a=l=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(_t(typeof e.token=="string"),this.R=e.token,new uD(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<s;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const a=hD(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%t.length))}return i}}function Rt(s,t){return s<t?-1:s>t?1:0}function vo(s,t,e){return s.length===t.length&&s.every((i,a)=>e(i,t[a]))}function G0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ft(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ft(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ft(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return he.fromMillis(Date.now())}static fromDate(t){return he.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new he(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Et(t)}static min(){return new Et(new he(0,0))}static max(){return new Et(new he(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,e,i){e===void 0?e=0:e>t.length&&mt(),i===void 0?i=t.length-e:i>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return fu.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fu?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=t.get(a),c=e.get(a);if(l<c)return-1;if(l>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yt extends fu{construct(t,e,i){return new Yt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ft(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new Yt(e)}static emptyPath(){return new Yt([])}}const fD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends fu{construct(t,e,i){return new ue(t,e,i)}static isValidIdentifier(t){return fD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ue(["__name__"])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ft(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new ft(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ft(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ft(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(e)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Yt.fromString(t))}static fromName(t){return new ht(Yt.fromString(t).popFirst(5))}static empty(){return new ht(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Yt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Yt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(t,e,i,a){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=a}}function Wm(s){return s.fields.find(t=>t.kind===2)}function zs(s){return s.fields.filter(t=>t.kind!==2)}Mh.UNKNOWN_ID=-1;class ph{constructor(t,e){this.fieldPath=t,this.kind=e}}class du{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new du(0,An.min())}}function dD(s,t){const e=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Et.fromTimestamp(i===1e9?new he(e+1,0):new he(e,i));return new An(a,ht.empty(),t)}function H0(s){return new An(s.readTime,s.key,-1)}class An{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new An(Et.min(),ht.empty(),-1)}static max(){return new An(Et.max(),ht.empty(),-1)}}function Mg(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(s.documentKey,t.documentKey),e!==0?e:Rt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==K0)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new j((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof j?e:j.resolve(e)}catch(e){return j.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):j.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):j.reject(e)}static resolve(t){return new j((e,i)=>{e(t)})}static reject(t){return new j((e,i)=>{i(t)})}static waitFor(t){return new j((e,i)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&e()},g=>i(g))}),c=!0,l===a&&e()})}static or(t){let e=j.resolve(!1);for(const i of t)e=e.next(a=>a?j.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,l)=>{i.push(e.call(this,a,l))}),this.waitFor(i)}static mapArray(t,e){return new j((i,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;e(t[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(t,e){return new j((i,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new $i,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new iu(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{const a=Pg(i.target.error);this.V.reject(new iu(t,a))}}static open(t,e,i,a){try{return new Zh(e,t.transaction(a,i))}catch(l){throw new iu(e,l)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(rt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new gD(e)}}class Kr{constructor(t,e,i){this.name=t,this.version=e,this.p=i,Kr.S(Ve())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return rt("SimpleDb","Removing database:",t),js(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!$T())return!1;if(Kr.v())return!0;const t=Ve(),e=Kr.S(t),i=0<e&&e<10,a=Y0(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||l)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(t){return this.db||(rt("SimpleDb","Opening database:",this.name),this.db=await new Promise((e,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{i(new iu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ft(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ft(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new iu(t,c))},a.onupgradeneeded=l=>{rt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.p.O(c,a.transaction,l.oldVersion,this.version).next(()=>{rt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,i,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(t);const d=Zh.open(this.db,t,l?"readonly":"readwrite",i),g=a(d).next(p=>(d.g(),p)).catch(p=>(d.abort(p),j.reject(p))).toPromise();return g.catch(()=>{}),await d.m,g}catch(d){const g=d,p=g.name!=="FirebaseError"&&c<3;if(rt("SimpleDb","Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Y0(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class mD{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return js(this.B.delete())}}class iu extends ft{constructor(t,e){super(Z.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Zr(s){return s.name==="IndexedDbTransactionError"}class gD{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(rt("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),js(i)}add(t){return rt("SimpleDb","ADD",this.store.name,t,t),js(this.store.add(t))}get(t){return js(this.store.get(t)).next(e=>(e===void 0&&(e=null),rt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return rt("SimpleDb","DELETE",this.store.name,t),js(this.store.delete(t))}count(){return rt("SimpleDb","COUNT",this.store.name),js(this.store.count())}U(t,e){const i=this.options(t,e),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new j((c,d)=>{l.onerror=g=>{d(g.target.error)},l.onsuccess=g=>{c(g.target.result)}})}{const l=this.cursor(i),c=[];return this.W(l,(d,g)=>{c.push(g)}).next(()=>c)}}G(t,e){const i=this.store.getAll(t,e===null?void 0:e);return new j((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}j(t,e){rt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const a=this.cursor(i);return this.W(a,(l,c,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const a=this.cursor(i);return this.W(a,e)}Y(t){const e=this.cursor({});return new j((i,a)=>{e.onerror=l=>{const c=Pg(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(t,e){const i=[];return new j((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const g=new mD(d),p=e(d.primaryKey,d.value,g);if(p instanceof j){const y=p.catch(T=>(g.done(),j.reject(T)));i.push(y)}g.isDone?a():g.K===null?d.continue():d.continue(g.K)}}).next(()=>j.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function js(s){return new j((t,e)=>{s.onsuccess=i=>{const a=i.target.result;t(a)},s.onerror=i=>{const a=Pg(i.target.error);e(a)}})}let bE=!1;function Pg(s){const t=Kr.S(Ve());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const i=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bE||(bE=!0,setTimeout(()=>{throw i},0)),i}}return s}class pD{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){rt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{rt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Zr(e)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await aa(e)}await this.X(6e4)})}}class _D{constructor(t,e){this.localStore=t,this.persistence=e}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))}te(t,e){const i=new Set;let a=e,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(c!==null&&!i.has(c))return rt("IndexBackfiller",`Processing collection: ${c}`),this.ne(t,c,a).next(d=>{a-=d,i.add(c)});l=!1})).next(()=>e-a)}ne(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(a=>this.localStore.localDocuments.getNextDocuments(t,e,a,i).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.re(a,l)).next(d=>(rt("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}re(t,e){let i=t;return e.changes.forEach((a,l)=>{const c=H0(l);Mg(c,i)>0&&(i=c)}),new An(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ie(i),this.se=i=>e.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Ln.oe=-1;function tf(s){return s==null}function mu(s){return s===0&&1/s==-1/0}function yD(s){return typeof s=="number"&&Number.isInteger(s)&&!mu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=SE(t)),t=vD(s.get(e),t);return SE(t)}function vD(s,t){let e=t;const i=s.length;for(let a=0;a<i;a++){const l=s.charAt(a);switch(l){case"\0":e+="";break;case"":e+="";break;default:e+=l}}return e}function SE(s){return s+""}function hi(s){const t=s.length;if(_t(t>=2),t===2)return _t(s.charAt(0)===""&&s.charAt(1)===""),Yt.emptyPath();const e=t-2,i=[];let a="";for(let l=0;l<t;){const c=s.indexOf("",l);switch((c<0||c>e)&&mt(),s.charAt(c+1)){case"":const d=s.substring(l,c);let g;a.length===0?g=d:(a+=d,g=a,a=""),i.push(g);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:mt()}l=c+2}return new Yt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(s,t){return[s,on(t)]}function X0(s,t,e){return[s,on(t),e]}const ED={},TD=["prefixPath","collectionGroup","readTime","documentId"],bD=["prefixPath","collectionGroup","documentId"],SD=["collectionGroup","readTime","prefixPath","documentId"],AD=["canonicalId","targetId"],ID=["targetId","path"],wD=["path","targetId"],RD=["collectionId","parent"],CD=["indexId","uid"],DD=["uid","sequenceNumber"],xD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VD=["indexId","uid","orderedDocumentKey"],ND=["userId","collectionPath","documentId"],OD=["userId","collectionPath","largestBatchId"],MD=["userId","collectionGroup","largestBatchId"],$0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PD=[...$0,"documentOverlays"],W0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],J0=W0,kg=[...J0,"indexConfiguration","indexState","indexEntries"],kD=kg,UD=[...kg,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Q0{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function Ne(s,t){const e=wt(s);return Kr.F(e._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function oa(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function Z0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,e){this.comparator=t,this.root=e||Ye.EMPTY}insert(t,e){return new oe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sh(this.root,t,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sh(this.root,t,this.comparator,!0)}}class sh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ye{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??Ye.RED,this.left=a??Ye.EMPTY,this.right=l??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new Ye(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Ye.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(t,e,i,a,l){return this}insert(t,e,i){return new Ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new wE(this.data.getIterator())}getIteratorFrom(t){return new wE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new te(this.comparator);return e.data=t,e}}class wE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function eo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new dn([])}unionWith(t){let e=new te(ue.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new dn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return vo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tb("Invalid base64 string: "+l):l}}(t);return new Ie(e)}static fromUint8Array(t){const e=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new Ie(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ie.EMPTY_BYTE_STRING=new Ie("");const LD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(s){if(_t(!!s),typeof s=="string"){let t=0;const e=LD.exec(s);if(_t(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ae(s.seconds),nanos:ae(s.nanos)}}function ae(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Xr(s){return typeof s=="string"?Ie.fromBase64String(s):Ie.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Lg(s){const t=s.mapValue.fields.__previous_value__;return Ug(t)?Lg(t):t}function gu(s){const t=Zi(s.mapValue.fields.__local_write_time__.timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,e,i,a,l,c,d,g,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p}}class Zs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Zs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Zs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yh={nullValue:"NULL_VALUE"};function ta(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ug(s)?4:eb(s)?9007199254740991:ef(s)?10:11:mt()}function gi(s,t){if(s===t)return!0;const e=ta(s);if(e!==ta(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return gu(s).isEqual(gu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Zi(a.timestampValue),d=Zi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(a,l){return Xr(a.bytesValue).isEqual(Xr(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(a,l){return ae(a.geoPointValue.latitude)===ae(l.geoPointValue.latitude)&&ae(a.geoPointValue.longitude)===ae(l.geoPointValue.longitude)}(s,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ae(a.integerValue)===ae(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ae(a.doubleValue),d=ae(l.doubleValue);return c===d?mu(c)===mu(d):isNaN(c)&&isNaN(d)}return!1}(s,t);case 9:return vo(s.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(IE(c)!==IE(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!gi(c[g],d[g])))return!1;return!0}(s,t);default:return mt()}}function pu(s,t){return(s.values||[]).find(e=>gi(e,t))!==void 0}function $r(s,t){if(s===t)return 0;const e=ta(s),i=ta(t);if(e!==i)return Rt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Rt(s.booleanValue,t.booleanValue);case 2:return function(l,c){const d=ae(l.integerValue||l.doubleValue),g=ae(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(s,t);case 3:return RE(s.timestampValue,t.timestampValue);case 4:return RE(gu(s),gu(t));case 5:return Rt(s.stringValue,t.stringValue);case 6:return function(l,c){const d=Xr(l),g=Xr(c);return d.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const y=Rt(d[p],g[p]);if(y!==0)return y}return Rt(d.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Rt(ae(l.latitude),ae(c.latitude));return d!==0?d:Rt(ae(l.longitude),ae(c.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return CE(s.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,p,y;const T=l.fields||{},I=c.fields||{},M=(d=T.value)===null||d===void 0?void 0:d.arrayValue,H=(g=I.value)===null||g===void 0?void 0:g.arrayValue,Q=Rt(((p=M==null?void 0:M.values)===null||p===void 0?void 0:p.length)||0,((y=H==null?void 0:H.values)===null||y===void 0?void 0:y.length)||0);return Q!==0?Q:CE(M,H)}(s.mapValue,t.mapValue);case 11:return function(l,c){if(l===jr.mapValue&&c===jr.mapValue)return 0;if(l===jr.mapValue)return 1;if(c===jr.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},y=Object.keys(p);g.sort(),y.sort();for(let T=0;T<g.length&&T<y.length;++T){const I=Rt(g[T],y[T]);if(I!==0)return I;const M=$r(d[g[T]],p[y[T]]);if(M!==0)return M}return Rt(g.length,y.length)}(s.mapValue,t.mapValue);default:throw mt()}}function RE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Rt(s,t);const e=Zi(s),i=Zi(t),a=Rt(e.seconds,i.seconds);return a!==0?a:Rt(e.nanos,i.nanos)}function CE(s,t){const e=s.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=$r(e[a],i[a]);if(l)return l}return Rt(e.length,i.length)}function Eo(s){return Zm(s)}function Zm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const i=Zi(e);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return Xr(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return ht.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=Zm(l);return i+"]"}(s.arrayValue):"mapValue"in s?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Zm(e.fields[c])}`;return a+"}"}(s.mapValue):mt()}function Bg(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function tg(s){return!!s&&"integerValue"in s}function _u(s){return!!s&&"arrayValue"in s}function DE(s){return!!s&&"nullValue"in s}function xE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vh(s){return!!s&&"mapValue"in s}function ef(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function ru(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return oa(s.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ru(i)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ru(s.arrayValue.values[e]);return t}return Object.assign({},s)}function eb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const nb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function zD(s){return"nullValue"in s?yh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Bg(Zs.empty(),ht.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?ef(s)?nb:{mapValue:{}}:mt()}function jD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Bg(Zs.empty(),ht.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?nb:"mapValue"in s?ef(s)?{mapValue:{}}:jr:mt()}function VE(s,t){const e=$r(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function NE(s,t){const e=$r(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.value=t}static empty(){return new tn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!vh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ru(e)}setAll(t){let e=ue.emptyPath(),i={},a=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,i,a),i={},a=[],e=d.popLast()}c?i[d.lastSegment()]=ru(c):a.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());vh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];vh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){oa(e,(a,l)=>t[a]=l);for(const a of i)delete t[a]}clone(){return new tn(ru(this.value))}}function ib(s){const t=[];return oa(s.fields,(e,i)=>{const a=new ue([e]);if(vh(i)){const l=ib(i.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new dn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,e,i,a,l,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new pe(t,0,Et.min(),Et.min(),Et.min(),tn.empty(),0)}static newFoundDocument(t,e,i,a){return new pe(t,1,e,Et.min(),i,a,0)}static newNoDocument(t,e){return new pe(t,2,e,Et.min(),Et.min(),tn.empty(),0)}static newUnknownDocument(t,e){return new pe(t,3,e,Et.min(),Et.min(),tn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,e){this.position=t,this.inclusive=e}}function OE(s,t,e){let i=0;for(let a=0;a<s.position.length;a++){const l=t[a],c=s.position[a];if(l.field.isKeyField()?i=ht.comparator(ht.fromName(c.referenceValue),e.key):i=$r(c,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ME(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!gi(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t,e="asc"){this.field=t,this.dir=e}}function qD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{}class kt extends rb{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new FD(t,e,i):e==="array-contains"?new KD(t,i):e==="in"?new cb(t,i):e==="not-in"?new QD(t,i):e==="array-contains-any"?new YD(t,i):new kt(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new GD(t,i):new HD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison($r(e,this.value)):e!==null&&ta(this.value)===ta(e)&&this.matchesComparison($r(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends rb{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Zt(t,e)}matches(t){return bo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bo(s){return s.op==="and"}function eg(s){return s.op==="or"}function zg(s){return sb(s)&&bo(s)}function sb(s){for(const t of s.filters)if(t instanceof Zt)return!1;return!0}function ng(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+Eo(s.value);if(zg(s))return s.filters.map(t=>ng(t)).join(",");{const t=s.filters.map(e=>ng(e)).join(",");return`${s.op}(${t})`}}function ab(s,t){return s instanceof kt?function(i,a){return a instanceof kt&&i.op===a.op&&i.field.isEqual(a.field)&&gi(i.value,a.value)}(s,t):s instanceof Zt?function(i,a){return a instanceof Zt&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&ab(c,a.filters[d]),!0):!1}(s,t):void mt()}function ob(s,t){const e=s.filters.concat(t);return Zt.create(e,s.op)}function lb(s){return s instanceof kt?function(e){return`${e.field.canonicalString()} ${e.op} ${Eo(e.value)}`}(s):s instanceof Zt?function(e){return e.op.toString()+" {"+e.getFilters().map(lb).join(" ,")+"}"}(s):"Filter"}class FD extends kt{constructor(t,e,i){super(t,e,i),this.key=ht.fromName(i.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class GD extends kt{constructor(t,e){super(t,"in",e),this.keys=ub("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class HD extends kt{constructor(t,e){super(t,"not-in",e),this.keys=ub("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function ub(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>ht.fromName(i.referenceValue))}class KD extends kt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return _u(e)&&pu(e.arrayValue,this.value)}}class cb extends kt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&pu(this.value.arrayValue,e)}}class QD extends kt{constructor(t,e){super(t,"not-in",e)}matches(t){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!pu(this.value.arrayValue,e)}}class YD extends kt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!_u(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>pu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t,e=null,i=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function ig(s,t=null,e=[],i=[],a=null,l=null,c=null){return new XD(s,t,e,i,a,l,c)}function ea(s){const t=wt(s);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>ng(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),tf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Eo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Eo(i)).join(",")),t.ue=e}return t.ue}function wu(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!qD(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!ab(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!ME(s.startAt,t.startAt)&&ME(s.endAt,t.endAt)}function kh(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Uh(s,t){return s.filters.filter(e=>e instanceof kt&&e.field.isEqual(t))}function PE(s,t,e){let i=yh,a=!0;for(const l of Uh(s,t)){let c=yh,d=!0;switch(l.op){case"<":case"<=":c=zD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=yh}VE({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];VE({value:i,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}function kE(s,t,e){let i=jr,a=!0;for(const l of Uh(s,t)){let c=jr,d=!0;switch(l.op){case">=":case">":c=jD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=jr}NE({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];NE({value:i,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(i=c,a=e.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,e=null,i=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $D(s,t,e,i,a,l,c,d){return new nf(s,t,e,i,a,l,c,d)}function jg(s){return new nf(s)}function UE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function WD(s){return s.collectionGroup!==null}function su(s){const t=wt(s);if(t.ce===null){t.ce=[];const e=new Set;for(const l of t.explicitOrderBy)t.ce.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new te(ue.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.ce.push(new Ph(l,i))}),e.has(ue.keyField().canonicalString())||t.ce.push(new Ph(ue.keyField(),i))}return t.ce}function Bn(s){const t=wt(s);return t.le||(t.le=JD(t,su(s))),t.le}function JD(s,t){if(s.limitType==="F")return ig(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Ph(a.field,l)});const e=s.endAt?new To(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new To(s.startAt.position,s.startAt.inclusive):null;return ig(s.path,s.collectionGroup,t,s.filters,s.limit,e,i)}}function rg(s,t,e){return new nf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function rf(s,t){return wu(Bn(s),Bn(t))&&s.limitType===t.limitType}function hb(s){return`${ea(Bn(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>lb(a)).join(", ")}]`),tf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Eo(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Eo(a)).join(",")),`Target(${i})`}(Bn(s))}; limitType=${s.limitType})`}function Ru(s,t){return t.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ht.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(s,t)&&function(i,a){for(const l of su(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,t)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(s,t)&&function(i,a){return!(i.startAt&&!function(c,d,g){const p=OE(c,d,g);return c.inclusive?p<=0:p<0}(i.startAt,su(i),a)||i.endAt&&!function(c,d,g){const p=OE(c,d,g);return c.inclusive?p>=0:p>0}(i.endAt,su(i),a))}(s,t)}function ZD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fb(s){return(t,e)=>{let i=!1;for(const a of su(s)){const l=tx(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function tx(s,t,e){const i=s.field.isKeyField()?ht.comparator(t.key,e.key):function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?$r(g,p):mt()}(s.field,t,e);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){oa(this.inner,(e,i)=>{for(const[a,l]of i)t(a,l)})}isEmpty(){return Z0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new oe(ht.comparator);function Sn(){return ex}const db=new oe(ht.comparator);function Zl(...s){let t=db;for(const e of s)t=t.insert(e.key,e);return t}function mb(s){let t=db;return s.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function fi(){return au()}function gb(){return au()}function au(){return new ts(s=>s.toString(),(s,t)=>s.isEqual(t))}const nx=new oe(ht.comparator),ix=new te(ht.comparator);function xt(...s){let t=ix;for(const e of s)t=t.add(e);return t}const rx=new te(Rt);function sx(){return rx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(t)?"-0":t}}function pb(s){return{integerValue:""+s}}function ax(s,t){return yD(t)?pb(t):qg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function ox(s,t,e){return s instanceof yu?function(a,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ug(l)&&(l=Lg(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(e,t):s instanceof So?yb(s,t):s instanceof Ao?vb(s,t):function(a,l){const c=_b(a,l),d=LE(c)+LE(a.Pe);return tg(c)&&tg(a.Pe)?pb(d):qg(a.serializer,d)}(s,t)}function lx(s,t,e){return s instanceof So?yb(s,t):s instanceof Ao?vb(s,t):e}function _b(s,t){return s instanceof vu?function(i){return tg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class yu extends sf{}class So extends sf{constructor(t){super(),this.elements=t}}function yb(s,t){const e=Eb(t);for(const i of s.elements)e.some(a=>gi(a,i))||e.push(i);return{arrayValue:{values:e}}}class Ao extends sf{constructor(t){super(),this.elements=t}}function vb(s,t){let e=Eb(t);for(const i of s.elements)e=e.filter(a=>!gi(a,i));return{arrayValue:{values:e}}}class vu extends sf{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function LE(s){return ae(s.integerValue||s.doubleValue)}function Eb(s){return _u(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t,e){this.field=t,this.transform=e}}function cx(s,t){return s.field.isEqual(t.field)&&function(i,a){return i instanceof So&&a instanceof So||i instanceof Ao&&a instanceof Ao?vo(i.elements,a.elements,gi):i instanceof vu&&a instanceof vu?gi(i.Pe,a.Pe):i instanceof yu&&a instanceof yu}(s.transform,t.transform)}class hx{constructor(t,e){this.version=t,this.transformResults=e}}class Xe{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Xe}static exists(t){return new Xe(void 0,t)}static updateTime(t){return new Xe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class af{}function Tb(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new of(s.key,Xe.none()):new Oo(s.key,s.data,Xe.none());{const e=s.data,i=tn.empty();let a=new te(ue.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ir(s.key,i,new dn(a.toArray()),Xe.none())}}function fx(s,t,e){s instanceof Oo?function(a,l,c){const d=a.value.clone(),g=zE(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,t,e):s instanceof ir?function(a,l,c){if(!Eh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=zE(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(bb(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(s,t,e):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function ou(s,t,e,i){return s instanceof Oo?function(l,c,d,g){if(!Eh(l.precondition,c))return d;const p=l.value.clone(),y=jE(l.fieldTransforms,g,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,t,e,i):s instanceof ir?function(l,c,d,g){if(!Eh(l.precondition,c))return d;const p=jE(l.fieldTransforms,g,c),y=c.data;return y.setAll(bb(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,t,e,i):function(l,c,d){return Eh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,t,e)}function dx(s,t){let e=null;for(const i of s.fieldTransforms){const a=t.data.field(i.field),l=_b(i.transform,a||null);l!=null&&(e===null&&(e=tn.empty()),e.set(i.field,l))}return e||null}function BE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&vo(i,a,(l,c)=>cx(l,c))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Oo extends af{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ir extends af{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bb(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=s.data.field(e);t.set(e,i)}}),t}function zE(s,t,e){const i=new Map;_t(s.length===e.length);for(let a=0;a<e.length;a++){const l=s[a],c=l.transform,d=t.data.field(l.field);i.set(l.field,lx(c,d,e[a]))}return i}function jE(s,t,e){const i=new Map;for(const a of s){const l=a.transform,c=e.data.field(a.field);i.set(a.field,ox(l,c,t))}return i}class of extends af{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sb extends af{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&fx(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=ou(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=ou(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=gb();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(a.key)?null:d;const g=Tb(c,d);g!==null&&i.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Et.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),xt())}isEqual(t){return this.batchId===t.batchId&&vo(this.mutations,t.mutations,(e,i)=>BE(e,i))&&vo(this.baseMutations,t.baseMutations,(e,i)=>BE(e,i))}}class Gg{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){_t(t.mutations.length===i.length);let a=function(){return nx}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Gg(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,zt;function gx(s){switch(s){default:return mt();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Ab(s){if(s===void 0)return an("GRPC error has no .code"),Z.UNKNOWN;switch(s){case Ae.OK:return Z.OK;case Ae.CANCELLED:return Z.CANCELLED;case Ae.UNKNOWN:return Z.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return Z.INTERNAL;case Ae.UNAVAILABLE:return Z.UNAVAILABLE;case Ae.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ae.NOT_FOUND:return Z.NOT_FOUND;case Ae.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ae.ABORTED:return Z.ABORTED;case Ae.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ae.DATA_LOSS:return Z.DATA_LOSS;default:return mt()}}(zt=Ae||(Ae={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Qs([4294967295,4294967295],0);function qE(s){const t=px().encode(s),e=new k0;return e.update(t),new Uint8Array(e.digest())}function FE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Qs([e,i],0),new Qs([a,l],0)]}class Kg{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new tu(`Invalid padding: ${e}`);if(i<0)throw new tu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new tu(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Qs.fromNumber(this.Ie)}Ee(t,e,i){let a=t.add(e.multiply(Qs.fromNumber(i)));return a.compare(_x)===1&&(a=new Qs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=qE(t),[i,a]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);if(!this.de(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Kg(l,a,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(this.Ie===0)return;const e=qE(t),[i,a]=FE(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);this.Ae(c)}}Ae(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Cu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new lf(Et.min(),a,new oe(Rt),Sn(),xt())}}class Cu{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Cu(i,e,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,e,i,a){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=a}}class Ib{constructor(t,e){this.targetId=t,this.me=e}}class wb{constructor(t,e,i=Ie.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class GE{constructor(){this.fe=0,this.ge=KE(),this.pe=Ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=xt(),e=xt(),i=xt();return this.ge.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:mt()}}),new Cu(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=KE()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Sn(),this.qe=HE(),this.Qe=new oe(Rt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,a)=>{this.ze(a)&&e(a)})}He(t){const e=t.targetId,i=t.me.count,a=this.Je(e);if(a){const l=a.target;if(kh(l))if(i===0){const c=new ht(l.path);this.Ue(e,c,pe.newNoDocument(c,Et.min()))}else _t(i===1);else{const c=this.Ye(e);if(c!==i){const d=this.Ze(t),g=d?this.Xe(d,t,c):1;if(g!==0){this.je(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,p)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let c,d;try{c=Xr(i).toUint8Array()}catch(g){if(g instanceof tb)return Js("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Kg(c,a,l)}catch(g){return Js(g instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ie===0?null:d}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){const i=this.Le.getRemoteKeysForTarget(e);let a=0;return i.forEach(l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.Ue(e,l,null),a++)}),a}rt(t){const e=new Map;this.Be.forEach((l,c)=>{const d=this.Je(c);if(d){if(l.current&&kh(d.target)){const g=new ht(d.target.path);this.ke.get(g)!==null||this.it(c,g)||this.Ue(c,g,pe.newNoDocument(g,t))}l.be&&(e.set(c,l.ve()),l.Ce())}});let i=xt();this.qe.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const p=this.Je(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(t));const a=new lf(t,e,this.Qe,this.ke,i);return this.ke=Sn(),this.qe=HE(),this.Qe=new oe(Rt),a}$e(t,e){if(!this.ze(t))return;const i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;const a=this.Ge(t);this.it(t,e)?a.Fe(e,1):a.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new GE,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new te(Rt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new GE),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function HE(){return new oe(ht.comparator)}function KE(){return new oe(ht.comparator)}const vx={asc:"ASCENDING",desc:"DESCENDING"},Ex={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tx={and:"AND",or:"OR"};class bx{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function sg(s,t){return s.useProto3Json||tf(t)?t:{value:t}}function Io(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rb(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Sx(s,t){return Io(s,t.toTimestamp())}function ln(s){return _t(!!s),Et.fromTimestamp(function(e){const i=Zi(e);return new he(i.seconds,i.nanos)}(s))}function Qg(s,t){return ag(s,t).canonicalString()}function ag(s,t){const e=function(a){return new Yt(["projects",a.projectId,"databases",a.database])}(s).child("documents");return t===void 0?e:e.child(t)}function Cb(s){const t=Yt.fromString(s);return _t(Ub(t)),t}function Lh(s,t){return Qg(s.databaseId,t.path)}function Ys(s,t){const e=Cb(t);if(e.get(1)!==s.databaseId.projectId)throw new ft(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new ft(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ht(Vb(e))}function Db(s,t){return Qg(s.databaseId,t)}function xb(s){const t=Cb(s);return t.length===4?Yt.emptyPath():Vb(t)}function og(s){return new Yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Vb(s){return _t(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function QE(s,t,e){return{name:Lh(s,t),fields:e.value.mapValue.fields}}function Ax(s,t,e){const i=Ys(s,t.name),a=ln(t.updateTime),l=t.createTime?ln(t.createTime):Et.min(),c=new tn({mapValue:{fields:t.fields}}),d=pe.newFoundDocument(i,a,l,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function Ix(s,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:mt()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(_t(y===void 0||typeof y=="string"),Ie.fromBase64String(y||"")):(_t(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Ie.fromUint8Array(y||new Uint8Array))}(s,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const y=p.code===void 0?Z.UNKNOWN:Ab(p.code);return new ft(y,p.message||"")}(c);e=new wb(i,a,l,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=Ys(s,i.document.name),l=ln(i.document.updateTime),c=i.document.createTime?ln(i.document.createTime):Et.min(),d=new tn({mapValue:{fields:i.document.fields}}),g=pe.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];e=new Th(p,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=Ys(s,i.document),l=i.readTime?ln(i.readTime):Et.min(),c=pe.newNoDocument(a,l),d=i.removedTargetIds||[];e=new Th([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=Ys(s,i.document),l=i.removedTargetIds||[];e=new Th([],l,a,null)}else{if(!("filter"in t))return mt();{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new mx(a,l),d=i.targetId;e=new Ib(d,c)}}return e}function Bh(s,t){let e;if(t instanceof Oo)e={update:QE(s,t.key,t.value)};else if(t instanceof of)e={delete:Lh(s,t.key)};else if(t instanceof ir)e={update:QE(s,t.key,t.data),updateMask:Vx(t.fieldMask)};else{if(!(t instanceof Sb))return mt();e={verify:Lh(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof yu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof So)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ao)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vu)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw mt()}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Sx(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:mt()}(s,t.precondition)),e}function lg(s,t){const e=t.currentDocument?function(l){return l.updateTime!==void 0?Xe.updateTime(ln(l.updateTime)):l.exists!==void 0?Xe.exists(l.exists):Xe.none()}(t.currentDocument):Xe.none(),i=t.updateTransforms?t.updateTransforms.map(a=>function(c,d){let g=null;if("setToServerValue"in d)_t(d.setToServerValue==="REQUEST_TIME"),g=new yu;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];g=new So(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];g=new Ao(y)}else"increment"in d?g=new vu(c,d.increment):mt();const p=ue.fromServerFormat(d.fieldPath);return new ux(p,g)}(s,a)):[];if(t.update){t.update.name;const a=Ys(s,t.update.name),l=new tn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=function(g){const p=g.fieldPaths||[];return new dn(p.map(y=>ue.fromServerFormat(y)))}(t.updateMask);return new ir(a,l,c,e,i)}return new Oo(a,l,e,i)}if(t.delete){const a=Ys(s,t.delete);return new of(a,e)}if(t.verify){const a=Ys(s,t.verify);return new Sb(a,e)}return mt()}function wx(s,t){return s&&s.length>0?(_t(t!==void 0),s.map(e=>function(a,l){let c=a.updateTime?ln(a.updateTime):ln(l);return c.isEqual(Et.min())&&(c=ln(l)),new hx(c,a.transformResults||[])}(e,t))):[]}function Nb(s,t){return{documents:[Db(s,t.path)]}}function Ob(s,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Db(s,a);const l=function(p){if(p.length!==0)return kb(Zt.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(I){return{field:oo(I.field),direction:Cx(I.dir)}}(y))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=sg(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{_t:e,parent:a}}function Mb(s){let t=xb(s.parent);const e=s.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){_t(i===1);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];e.where&&(l=function(T){const I=Pb(T);return I instanceof Zt&&zg(I)?I.getFilters():[I]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(I=>function(H){return new Ph(lo(H.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(I))}(e.orderBy));let d=null;e.limit&&(d=function(T){let I;return I=typeof T=="object"?T.value:T,tf(I)?null:I}(e.limit));let g=null;e.startAt&&(g=function(T){const I=!!T.before,M=T.values||[];return new To(M,I)}(e.startAt));let p=null;return e.endAt&&(p=function(T){const I=!T.before,M=T.values||[];return new To(M,I)}(e.endAt)),$D(t,a,c,l,d,"F",g,p)}function Rx(s,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Pb(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=lo(e.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=lo(e.unaryFilter.field);return kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=lo(e.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=lo(e.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(s):s.fieldFilter!==void 0?function(e){return kt.create(lo(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Zt.create(e.compositeFilter.filters.map(i=>Pb(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return mt()}}(e.compositeFilter.op))}(s):mt()}function Cx(s){return vx[s]}function Dx(s){return Ex[s]}function xx(s){return Tx[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return ue.fromServerFormat(s.fieldPath)}function kb(s){return s instanceof kt?function(e){if(e.op==="=="){if(xE(e.value))return{unaryFilter:{field:oo(e.field),op:"IS_NAN"}};if(DE(e.value))return{unaryFilter:{field:oo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(xE(e.value))return{unaryFilter:{field:oo(e.field),op:"IS_NOT_NAN"}};if(DE(e.value))return{unaryFilter:{field:oo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(e.field),op:Dx(e.op),value:e.value}}}(s):s instanceof Zt?function(e){const i=e.getFilters().map(a=>kb(a));return i.length===1?i[0]:{compositeFilter:{op:xx(e.op),filters:i}}}(s):mt()}function Vx(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ub(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,e,i,a,l=Et.min(),c=Et.min(),d=Ie.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Xi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.ct=t}}function Nx(s,t){let e;if(t.document)e=Ax(s.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ht.fromSegments(t.noDocument.path),a=ia(t.noDocument.readTime);e=pe.newNoDocument(i,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const i=ht.fromSegments(t.unknownDocument.path),a=ia(t.unknownDocument.version);e=pe.newUnknownDocument(i,a)}}return t.readTime&&e.setReadTime(function(a){const l=new he(a[0],a[1]);return Et.fromTimestamp(l)}(t.readTime)),e}function YE(s,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:zh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(l,c){return{name:Lh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Io(l,c.version.toTimestamp()),createTime:Io(l,c.createTime.toTimestamp())}}(s.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:na(t.version)};else{if(!t.isUnknownDocument())return mt();i.unknownDocument={path:e.path.toArray(),version:na(t.version)}}return i}function zh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function na(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ia(s){const t=new he(s.seconds,s.nanoseconds);return Et.fromTimestamp(t)}function qs(s,t){const e=(t.baseMutations||[]).map(l=>lg(s.ct,l));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const d=t.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const i=t.mutations.map(l=>lg(s.ct,l)),a=he.fromMillis(t.localWriteTimeMs);return new Fg(t.batchId,a,e,i)}function eu(s){const t=ia(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?ia(s.lastLimboFreeSnapshotVersion):Et.min();let i;return i=function(l){return l.documents!==void 0}(s.query)?function(l){return _t(l.documents.length===1),Bn(jg(xb(l.documents[0])))}(s.query):function(l){return Bn(Mb(l))}(s.query),new Xi(i,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Ie.fromBase64String(s.resumeToken))}function Bb(s,t){const e=na(t.snapshotVersion),i=na(t.lastLimboFreeSnapshotVersion);let a;a=kh(t.target)?Nb(s.ct,t.target):Ob(s.ct,t.target)._t;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ea(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function zb(s){const t=Mb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?rg(t,t.limit,"L"):t}function Om(s,t){return new Hg(t.largestBatchId,lg(s.ct,t.overlayMutation))}function XE(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function $E(s,t,e,i){return{indexId:s,uid:t,sequenceNumber:e,readTime:na(i.readTime),documentKey:on(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{getBundleMetadata(t,e){return WE(t).get(e).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:ia(l.createTime),version:l.version}}(i)})}saveBundleMetadata(t,e){return WE(t).put(function(a){return{bundleId:a.id,createTime:na(ln(a.createTime)),version:a.version}}(e))}getNamedQuery(t,e){return JE(t).get(e).next(i=>{if(i)return function(l){return{name:l.name,query:zb(l.bundledQuery),readTime:ia(l.readTime)}}(i)})}saveNamedQuery(t,e){return JE(t).put(function(a){return{name:a.name,readTime:na(ln(a.readTime)),bundledQuery:a.bundledQuery}}(e))}}function WE(s){return Ne(s,"bundles")}function JE(s){return Ne(s,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const i=e.uid||"";return new uf(t,i)}getOverlay(t,e){return Ql(t).get(XE(this.userId,e)).next(i=>i?Om(this.serializer,i):null)}getOverlays(t,e){const i=fi();return j.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){const a=[];return i.forEach((l,c)=>{const d=new Hg(e,c);a.push(this.ht(t,d))}),j.waitFor(a)}removeOverlaysForBatchId(t,e,i){const a=new Set;e.forEach(c=>a.add(on(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Ql(t).j("collectionPathOverlayIndex",d))}),j.waitFor(l)}getOverlaysForCollection(t,e,i){const a=fi(),l=on(e),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ql(t).U("collectionPathOverlayIndex",c).next(d=>{for(const g of d){const p=Om(this.serializer,g);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(t,e,i,a){const l=fi();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Ql(t).J({index:"collectionGroupOverlayIndex",range:d},(g,p,y)=>{const T=Om(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):y.done()}).next(()=>l)}ht(t,e){return Ql(t).put(function(a,l,c){const[d,g,p]=XE(l,c.mutation.key);return{userId:l,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Bh(a.ct,c.mutation)}}(this.serializer,this.userId,e))}}function Ql(s){return Ne(s,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{Pt(t){return Ne(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{const i=e==null?void 0:e.value;return i?Ie.fromUint8Array(i):Ie.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ae(t.integerValue));else if("doubleValue"in t){const i=ae(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),mu(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=Zi(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(Xr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?eb(t)?this.dt(e,Number.MAX_SAFE_INTEGER):ef(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):mt()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const i=t.fields||{};this.dt(e,55);for(const a of Object.keys(i))this.Vt(a,e),this.Tt(i[a],e)}wt(t,e){var i,a;const l=t.fields||{};this.dt(e,53);const c="value",d=((a=(i=l[c].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.dt(e,15),e.At(ae(d)),this.Vt(c,e),this.Tt(l[c],e)}bt(t,e){const i=t.values||[];this.dt(e,50);for(const a of i)this.Tt(a,e)}yt(t,e){this.dt(e,37),ht.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}Fs.vt=new Fs;function Px(s){if(s===0)return 8;let t=0;return s>>4==0&&(t+=4,s<<=4),s>>6==0&&(t+=2,s<<=2),s>>7==0&&(t+=1),t}function ZE(s){const t=64-function(i){let a=0;for(let l=0;l<8;++l){const c=Px(255&i[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(t/8)}class kx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ft(i.value),i=e.next();this.Mt()}xt(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ot(i.value),i=e.next();this.Nt()}Lt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const a=e.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const a=e.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(t){const e=this.qt(t),i=ZE(e);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=255&e[a]}Kt(t){const e=this.qt(t),i=ZE(e);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let a=e.length-i;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const e=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let a=1;a<e.length;++a)e[a]^=i?255:0;return e}Ft(t){const e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){const e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Ux{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Lx{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Yl{constructor(){this.jt=new kx,this.Ht=new Ux(this.jt),this.Jt=new Lx(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t,e,i,a){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=a}Zt(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Gs(this.indexId,this.documentKey,this.arrayValue,i)}}function Mr(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=tT(s.arrayValue,t.arrayValue),e!==0?e:(e=tT(s.directionalValue,t.directionalValue),e!==0?e:ht.comparator(s.documentKey,t.documentKey)))}function tT(s,t){for(let e=0;e<s.length&&e<t.length;++e){const i=s[e]-t[e];if(i!==0)return i}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t){this.Xt=new te((e,i)=>ue.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const e of t.filters){const i=e;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(_t(t.collectionGroup===this.collectionId),this.nn)return!1;const e=Wm(t);if(e!==void 0&&!this.sn(e))return!1;const i=zs(t);let a=new Set,l=0,c=0;for(;l<i.length&&this.sn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const g=i[l];if(!this.on(d,g)||!this._n(this.en[c++],g))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.en.length||!this._n(this.en[c++],d))return!1}return!0}an(){if(this.nn)return null;let t=new te(ue.comparator);const e=[];for(const i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new ph(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new ph(i.field,0))}for(const i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new ph(i.field,i.dir==="asc"?0:1)));return new Mh(Mh.UNKNOWN_ID,this.collectionId,e,du.empty())}sn(t){for(const e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(s){var t,e;if(_t(s instanceof kt||s instanceof Zt),s instanceof kt){if(s instanceof cb){const a=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(l=>kt.create(s.field,"==",l)))||[];return Zt.create(a,"or")}return s}const i=s.filters.map(a=>jb(a));return Zt.create(i,s.op)}function Bx(s){if(s.getFilters().length===0)return[];const t=hg(jb(s));return _t(qb(t)),ug(t)||cg(t)?[t]:t.getFilters()}function ug(s){return s instanceof kt}function cg(s){return s instanceof Zt&&zg(s)}function qb(s){return ug(s)||cg(s)||function(e){if(e instanceof Zt&&eg(e)){for(const i of e.getFilters())if(!ug(i)&&!cg(i))return!1;return!0}return!1}(s)}function hg(s){if(_t(s instanceof kt||s instanceof Zt),s instanceof kt)return s;if(s.filters.length===1)return hg(s.filters[0]);const t=s.filters.map(i=>hg(i));let e=Zt.create(t,s.op);return e=jh(e),qb(e)?e:(_t(e instanceof Zt),_t(bo(e)),_t(e.filters.length>1),e.filters.reduce((i,a)=>Yg(i,a)))}function Yg(s,t){let e;return _t(s instanceof kt||s instanceof Zt),_t(t instanceof kt||t instanceof Zt),e=s instanceof kt?t instanceof kt?function(a,l){return Zt.create([a,l],"and")}(s,t):nT(s,t):t instanceof kt?nT(t,s):function(a,l){if(_t(a.filters.length>0&&l.filters.length>0),bo(a)&&bo(l))return ob(a,l.getFilters());const c=eg(a)?a:l,d=eg(a)?l:a,g=c.filters.map(p=>Yg(p,d));return Zt.create(g,"or")}(s,t),jh(e)}function nT(s,t){if(bo(t))return ob(t,s.getFilters());{const e=t.filters.map(i=>Yg(s,i));return Zt.create(e,"or")}}function jh(s){if(_t(s instanceof kt||s instanceof Zt),s instanceof kt)return s;const t=s.getFilters();if(t.length===1)return jh(t[0]);if(sb(s))return s;const e=t.map(a=>jh(a)),i=[];return e.forEach(a=>{a instanceof kt?i.push(a):a instanceof Zt&&(a.op===s.op?i.push(...a.filters):i.push(a))}),i.length===1?i[0]:Zt.create(i,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.un=new Xg}addToCollectionParentIndex(t,e){return this.un.add(e),j.resolve()}getCollectionParents(t,e){return j.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return j.resolve()}deleteFieldIndex(t,e){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,e){return j.resolve()}getDocumentsMatchingTarget(t,e){return j.resolve(null)}getIndexType(t,e){return j.resolve(0)}getFieldIndexes(t,e){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,e){return j.resolve(An.min())}getMinOffsetFromCollectionGroup(t,e){return j.resolve(An.min())}updateCollectionGroup(t,e,i){return j.resolve()}updateIndexEntries(t,e){return j.resolve()}}class Xg{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new te(Yt.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new te(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Uint8Array(0);class jx{constructor(t,e){this.databaseId=e,this.cn=new Xg,this.ln=new ts(i=>ea(i),(i,a)=>wu(i,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){const i=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});const l={collectionId:i,parent:on(a)};return iT(t).put(l)}return j.resolve()}getCollectionParents(t,e){const i=[],a=IDBKeyRange.bound([e,""],[G0(e),""],!1,!0);return iT(t).U(a).next(l=>{for(const c of l){if(c.collectionId!==e)break;i.push(hi(c.parent))}return i})}addFieldIndex(t,e){const i=Xl(t),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete a.indexId;const l=i.add(a);if(e.indexState){const c=io(t);return l.next(d=>{c.put($E(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const i=Xl(t),a=io(t),l=no(t);return i.delete(e.indexId).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Xl(t),i=no(t),a=io(t);return e.j().next(()=>i.j()).next(()=>a.j())}createTargetIndexes(t,e){return j.forEach(this.hn(e),i=>this.getIndexType(t,i).next(a=>{if(a===0||a===1){const l=new eT(i).an();if(l!=null)return this.addFieldIndex(t,l)}}))}getDocumentsMatchingTarget(t,e){const i=no(t);let a=!0;const l=new Map;return j.forEach(this.hn(e),c=>this.Pn(t,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=xt();const d=[];return j.forEach(l,(g,p)=>{rt("IndexedDbIndexManager",`Using index ${function(it){return`id=${it.indexId}|cg=${it.collectionGroup}|f=${it.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`}(g)} to execute ${ea(e)}`);const y=function(it,ut){const ct=Wm(ut);if(ct===void 0)return null;for(const gt of Uh(it,ct.fieldPath))switch(gt.op){case"array-contains-any":return gt.value.arrayValue.values||[];case"array-contains":return[gt.value]}return null}(p,g),T=function(it,ut){const ct=new Map;for(const gt of zs(ut))for(const D of Uh(it,gt.fieldPath))switch(D.op){case"==":case"in":ct.set(gt.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return ct.set(gt.fieldPath.canonicalString(),D.value),Array.from(ct.values())}return null}(p,g),I=function(it,ut){const ct=[];let gt=!0;for(const D of zs(ut)){const A=D.kind===0?PE(it,D.fieldPath,it.startAt):kE(it,D.fieldPath,it.startAt);ct.push(A.value),gt&&(gt=A.inclusive)}return new To(ct,gt)}(p,g),M=function(it,ut){const ct=[];let gt=!0;for(const D of zs(ut)){const A=D.kind===0?kE(it,D.fieldPath,it.endAt):PE(it,D.fieldPath,it.endAt);ct.push(A.value),gt&&(gt=A.inclusive)}return new To(ct,gt)}(p,g),H=this.In(g,p,I),Q=this.In(g,p,M),z=this.Tn(g,p,T),nt=this.En(g.indexId,y,H,I.inclusive,Q,M.inclusive,z);return j.forEach(nt,et=>i.G(et,e.limit).next(it=>{it.forEach(ut=>{const ct=ht.fromSegments(ut.documentKey);c.has(ct)||(c=c.add(ct),d.push(ct))})}))}).next(()=>d)}return j.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=Bx(Zt.create(t.filters,"and")).map(i=>ig(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,i,a,l,c,d){const g=(e!=null?e.length:1)*Math.max(i.length,l.length),p=g/(e!=null?e.length:1),y=[];for(let T=0;T<g;++T){const I=e?this.dn(e[T/p]):ah,M=this.An(t,I,i[T%p],a),H=this.Rn(t,I,l[T%p],c),Q=d.map(z=>this.An(t,I,z,!0));y.push(...this.createRange(M,H,Q))}return y}An(t,e,i,a){const l=new Gs(t,ht.empty(),e,i);return a?l:l.Zt()}Rn(t,e,i,a){const l=new Gs(t,ht.empty(),e,i);return a?l.Zt():l}Pn(t,e){const i=new eT(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next(l=>{let c=null;for(const d of l)i.rn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const a=this.hn(e);return j.forEach(a,l=>this.Pn(t,l).next(c=>{c?i!==0&&c.fields.length<function(g){let p=new te(ue.comparator),y=!1;for(const T of g.filters)for(const I of T.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?y=!0:p=p.add(I.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(y?1:0)}(l)&&(i=1):i=0})).next(()=>function(c){return c.limit!==null}(e)&&a.length>1&&i===2?1:i)}Vn(t,e){const i=new Yl;for(const a of zs(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=i.Yt(a.kind);Fs.vt.It(l,c)}return i.zt()}dn(t){const e=new Yl;return Fs.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){const i=new Yl;return Fs.vt.It(Bg(this.databaseId,e),i.Yt(function(l){const c=zs(l);return c.length===0?0:c[c.length-1].kind}(t))),i.zt()}Tn(t,e,i){if(i===null)return[];let a=[];a.push(new Yl);let l=0;for(const c of zs(t)){const d=i[l++];for(const g of a)if(this.fn(e,c.fieldPath)&&_u(d))a=this.gn(a,c,d);else{const p=g.Yt(c.kind);Fs.vt.It(d,p)}}return this.pn(a)}In(t,e,i){return this.Tn(t,e,i.position)}pn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].zt();return e}gn(t,e,i){const a=[...t],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const g=new Yl;g.seed(d.zt()),Fs.vt.It(c,g.Yt(e.kind)),l.push(g)}return l}fn(t,e){return!!t.filters.find(i=>i instanceof kt&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){const i=Xl(t),a=io(t);return(e?i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.U()).next(l=>{const c=[];return j.forEach(l,d=>a.get([d.indexId,this.uid]).next(g=>{c.push(function(y,T){const I=T?new du(T.sequenceNumber,new An(ia(T.readTime),new ht(hi(T.documentKey)),T.largestBatchId)):du.empty(),M=y.fields.map(([H,Q])=>new ph(ue.fromServerFormat(H),Q));return new Mh(y.indexId,y.collectionGroup,M,I)}(d,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Rt(i.collectionGroup,a.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const a=Xl(t),l=io(t);return this.yn(t).next(c=>a.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>j.forEach(d,g=>l.put($E(g.indexId,this.uid,c,i)))))}updateIndexEntries(t,e){const i=new Map;return j.forEach(e,(a,l)=>{const c=i.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next(d=>(i.set(a.collectionGroup,d),j.forEach(d,g=>this.wn(t,a,g).next(p=>{const y=this.Sn(l,g);return p.isEqual(y)?j.resolve():this.bn(t,l,g,p,y)}))))})}Dn(t,e,i,a){return no(t).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(i,e.key),documentKey:e.key.path.toArray()})}vn(t,e,i,a){return no(t).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const a=no(t);let l=new te(Mr);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,e)])},(c,d)=>{l=l.add(new Gs(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>l)}Sn(t,e){let i=new te(Mr);const a=this.Vn(e,t);if(a==null)return i;const l=Wm(e);if(l!=null){const c=t.data.field(l.fieldPath);if(_u(c))for(const d of c.arrayValue.values||[])i=i.add(new Gs(e.indexId,t.key,this.dn(d),a))}else i=i.add(new Gs(e.indexId,t.key,ah,a));return i}bn(t,e,i,a,l){rt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(g,p,y,T,I){const M=g.getIterator(),H=p.getIterator();let Q=eo(M),z=eo(H);for(;Q||z;){let nt=!1,et=!1;if(Q&&z){const it=y(Q,z);it<0?et=!0:it>0&&(nt=!0)}else Q!=null?et=!0:nt=!0;nt?(T(z),z=eo(H)):et?(I(Q),Q=eo(M)):(Q=eo(M),z=eo(H))}}(a,l,Mr,d=>{c.push(this.Dn(t,e,i,d))},d=>{c.push(this.vn(t,e,i,d))}),j.waitFor(c)}yn(t){let e=1;return io(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),e=a.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Mr(c,d)).filter((c,d,g)=>!d||Mr(c,g[d-1])!==0);const a=[];a.push(t);for(const c of i){const d=Mr(c,t),g=Mr(c,e);if(d===0)a[0]=t.Zt();else if(d>0&&g<0)a.push(c),a.push(c.Zt());else if(g>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Cn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,ah,[]],g=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,ah,[]];l.push(IDBKeyRange.bound(d,g))}return l}Cn(t,e){return Mr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(rT)}getMinOffset(t,e){return j.mapArray(this.hn(e),i=>this.Pn(t,i).next(a=>a||mt())).next(rT)}}function iT(s){return Ne(s,"collectionParents")}function no(s){return Ne(s,"indexEntries")}function Xl(s){return Ne(s,"indexConfiguration")}function io(s){return Ne(s,"indexState")}function rT(s){_t(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<s.length;i++){const a=s[i].indexState.offset;Mg(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new An(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(s,t,e){const i=s.store("mutations"),a=s.store("documentMutations"),l=[],c=IDBKeyRange.only(e.batchId);let d=0;const g=i.J({range:c},(y,T,I)=>(d++,I.delete()));l.push(g.next(()=>{_t(d===1)}));const p=[];for(const y of e.mutations){const T=X0(t,y.key.path,e.batchId);l.push(a.delete(T)),p.push(y.key)}return j.waitFor(l).next(()=>p)}function qh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw mt();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class cf{constructor(t,e,i,a){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=a,this.Fn={}}static lt(t,e,i,a){_t(t.uid!=="");const l=t.isAuthenticated()?t.uid:"";return new cf(l,e,i,a)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pr(t).J({index:"userMutationsIndex",range:i},(a,l,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,a){const l=uo(t),c=Pr(t);return c.add({}).next(d=>{_t(typeof d=="number");const g=new Fg(d,e,i,a),p=function(M,H,Q){const z=Q.baseMutations.map(et=>Bh(M.ct,et)),nt=Q.mutations.map(et=>Bh(M.ct,et));return{userId:H,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:z,mutations:nt}}(this.serializer,this.userId,g),y=[];let T=new te((I,M)=>Rt(I.canonicalString(),M.canonicalString()));for(const I of a){const M=X0(this.userId,I.key.path,d);T=T.add(I.key.path.popLast()),y.push(c.put(p)),y.push(l.put(M,ED))}return T.forEach(I=>{y.push(this.indexManager.addToCollectionParentIndex(t,I))}),t.addOnCommittedListener(()=>{this.Fn[d]=g.keys()}),j.waitFor(y).next(()=>g)})}lookupMutationBatch(t,e){return Pr(t).get(e).next(i=>i?(_t(i.userId===this.userId),qs(this.serializer,i)):null)}Mn(t,e){return this.Fn[e]?j.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const a=i.keys();return this.Fn[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Pr(t).J({index:"userMutationsIndex",range:a},(c,d,g)=>{d.userId===this.userId&&(_t(d.batchId>=i),l=qs(this.serializer,d)),g.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Pr(t).J({index:"userMutationsIndex",range:e,reverse:!0},(a,l,c)=>{i=l.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pr(t).U("userMutationsIndex",e).next(i=>i.map(a=>qs(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=_h(this.userId,e.path),a=IDBKeyRange.lowerBound(i),l=[];return uo(t).J({range:a},(c,d,g)=>{const[p,y,T]=c,I=hi(y);if(p===this.userId&&e.path.isEqual(I))return Pr(t).get(T).next(M=>{if(!M)throw mt();_t(M.userId===this.userId),l.push(qs(this.serializer,M))});g.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new te(Rt);const a=[];return e.forEach(l=>{const c=_h(this.userId,l.path),d=IDBKeyRange.lowerBound(c),g=uo(t).J({range:d},(p,y,T)=>{const[I,M,H]=p,Q=hi(M);I===this.userId&&l.path.isEqual(Q)?i=i.add(H):T.done()});a.push(g)}),j.waitFor(a).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1,l=_h(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new te(Rt);return uo(t).J({range:c},(g,p,y)=>{const[T,I,M]=g,H=hi(I);T===this.userId&&i.isPrefixOf(H)?H.length===a&&(d=d.add(M)):y.done()}).next(()=>this.xn(t,d))}xn(t,e){const i=[],a=[];return e.forEach(l=>{a.push(Pr(t).get(l).next(c=>{if(c===null)throw mt();_t(c.userId===this.userId),i.push(qs(this.serializer,c))}))}),j.waitFor(a).next(()=>i)}removeMutationBatch(t,e){return Fb(t._e,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),j.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return j.resolve();const i=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return uo(t).J({range:i},(l,c,d)=>{if(l[0]===this.userId){const g=hi(l[1]);a.push(g)}else d.done()}).next(()=>{_t(a.length===0)})})}containsKey(t,e){return Gb(t,this.userId,e)}Nn(t){return Hb(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Gb(s,t,e){const i=_h(t,e.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return uo(s).J({range:l,H:!0},(d,g,p)=>{const[y,T,I]=d;y===t&&T===a&&(c=!0),p.done()}).next(()=>c)}function Pr(s){return Ne(s,"mutations")}function uo(s){return Ne(s,"documentMutations")}function Hb(s){return Ne(s,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new ra(0)}static kn(){return new ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{const i=new ra(e.highestTargetId);return e.highestTargetId=i.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>Et.fromTimestamp(new he(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.qn(t).next(a=>(a.highestListenSequenceNumber=e,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.Qn(t,a)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(e,i),this.Qn(t,i))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>ro(t).delete(e.targetId)).next(()=>this.qn(t)).next(i=>(_t(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,e,i){let a=0;const l=[];return ro(t).J((c,d)=>{const g=eu(d);g.sequenceNumber<=e&&i.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(t,g)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(t,e){return ro(t).J((i,a)=>{const l=eu(a);e(l)})}qn(t){return aT(t).get("targetGlobalKey").next(e=>(_t(e!==null),e))}Qn(t,e){return aT(t).put("targetGlobalKey",e)}Kn(t,e){return ro(t).put(Bb(this.serializer,e))}$n(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=ea(e),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return ro(t).J({range:a,index:"queryTargetsIndex"},(c,d,g)=>{const p=eu(d);wu(e,p.target)&&(l=p,g.done())}).next(()=>l)}addMatchingKeys(t,e,i){const a=[],l=Br(t);return e.forEach(c=>{const d=on(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(t,i,c))}),j.waitFor(a)}removeMatchingKeys(t,e,i){const a=Br(t);return j.forEach(e,l=>{const c=on(l.path);return j.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(t,i,l)])})}removeMatchingKeysForTargetId(t,e){const i=Br(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),a=Br(t);let l=xt();return a.J({range:i,H:!0},(c,d,g)=>{const p=hi(c[1]),y=new ht(p);l=l.add(y)}).next(()=>l)}containsKey(t,e){const i=on(e.path),a=IDBKeyRange.bound([i],[G0(i)],!1,!0);let l=0;return Br(t).J({index:"documentTargetsIndex",H:!0,range:a},([c,d],g,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}ot(t,e){return ro(t).get(e).next(i=>i?eu(i):null)}}function ro(s){return Ne(s,"targets")}function aT(s){return Ne(s,"targetGlobal")}function Br(s){return Ne(s,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT([s,t],[e,i]){const a=Rt(s,e);return a===0?Rt(t,i):a}class Fx{constructor(t){this.Un=t,this.buffer=new te(oT),this.Wn=0}Gn(){return++this.Wn}zn(t){const e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();oT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Gx{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){rt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Zr(e)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await aa(e)}await this.Hn(3e5)})}}class Hx{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return j.resolve(Ln.oe);const i=new Fx(e);return this.Jn.forEachTarget(t,a=>i.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(t,a=>i.zn(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(sT)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sT):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let i,a,l,c,d,g,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(t,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(t,i,e))).next(T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(p=Date.now(),so()<=Pt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function Kx(s,t){return new Hx(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(t,e){this.db=t,this.garbageCollector=Kx(this,e)}Yn(t){const e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}er(t){let e=0;return this.Zn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(i,a)=>e(a))}addReference(t,e,i){return oh(t,i)}removeReference(t,e,i){return oh(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return oh(t,e)}nr(t,e){return function(a,l){let c=!1;return Hb(a).Y(d=>Gb(a,d,l).next(g=>(g&&(c=!0),j.resolve(!g)))).next(()=>c)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(t,(c,d)=>{if(d<=e){const g=this.nr(t,c).next(p=>{if(!p)return l++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Et.min()),Br(t).delete(function(T){return[0,on(T.path)]}(c))))});a.push(g)}}).next(()=>j.waitFor(a)).next(()=>i.apply(t)).next(()=>l)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return oh(t,e)}tr(t,e){const i=Br(t);let a,l=Ln.oe;return i.J({index:"documentTargetsIndex"},([c,d],{path:g,sequenceNumber:p})=>{c===0?(l!==Ln.oe&&e(new ht(hi(a)),l),l=p,a=g):l=Ln.oe}).next(()=>{l!==Ln.oe&&e(new ht(hi(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function oh(s,t){return Br(s).put(function(i,a){return{targetId:0,path:on(i.path),sequenceNumber:a}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.changes=new ts(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?j.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Ls(t).put(i)}removeEntry(t,e,i){return Ls(t).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],zh(c),d[d.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.rr(t,i)))}getEntry(t,e){let i=pe.newInvalidDocument(e);return Ls(t).J({index:"documentKeyIndex",range:IDBKeyRange.only($l(e))},(a,l)=>{i=this.ir(e,l)}).next(()=>i)}sr(t,e){let i={size:0,document:pe.newInvalidDocument(e)};return Ls(t).J({index:"documentKeyIndex",range:IDBKeyRange.only($l(e))},(a,l)=>{i={document:this.ir(e,l),size:qh(l)}}).next(()=>i)}getEntries(t,e){let i=Sn();return this._r(t,e,(a,l)=>{const c=this.ir(a,l);i=i.insert(a,c)}).next(()=>i)}ar(t,e){let i=Sn(),a=new oe(ht.comparator);return this._r(t,e,(l,c)=>{const d=this.ir(l,c);i=i.insert(l,d),a=a.insert(l,qh(c))}).next(()=>({documents:i,ur:a}))}_r(t,e,i){if(e.isEmpty())return j.resolve();let a=new te(cT);e.forEach(g=>a=a.add(g));const l=IDBKeyRange.bound($l(a.first()),$l(a.last())),c=a.getIterator();let d=c.getNext();return Ls(t).J({index:"documentKeyIndex",range:l},(g,p,y)=>{const T=ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&cT(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,p),d=c.hasNext()?c.getNext():null),d?y.$($l(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,a,l){const c=e.path,d=[c.popLast().toArray(),c.lastSegment(),zh(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ls(t).U(IDBKeyRange.bound(d,g,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Sn();for(const T of p){const I=this.ir(ht.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);I.isFoundDocument()&&(Ru(e,I)||a.has(I.key))&&(y=y.insert(I.key,I))}return y})}getAllFromCollectionGroup(t,e,i,a){let l=Sn();const c=uT(e,i),d=uT(e,An.max());return Ls(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(g,p,y)=>{const T=this.ir(ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&y.done()}).next(()=>l)}newChangeBuffer(t){return new Xx(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return lT(t).get("remoteDocumentGlobalKey").next(e=>(_t(!!e),e))}rr(t,e){return lT(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){const i=Nx(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(Et.min())))return i}return pe.newInvalidDocument(t)}}function Qb(s){return new Yx(s)}class Xx extends Kb{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new ts(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(t){const e=[];let i=0,a=new te((l,c)=>Rt(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.lr.get(l);if(e.push(this.cr.removeEntry(t,l,d.readTime)),c.isValidDocument()){const g=YE(this.cr.serializer,c);a=a.add(l.path.popLast());const p=qh(g);i+=p-d.size,e.push(this.cr.addEntry(t,l,g))}else if(i-=d.size,this.trackRemovals){const g=YE(this.cr.serializer,c.convertToNoDocument(Et.min()));e.push(this.cr.addEntry(t,l,g))}}),a.forEach(l=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.cr.updateMetadata(t,i)),j.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(i=>(this.lr.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:i,ur:a})=>(a.forEach((l,c)=>{this.lr.set(l,{size:c,readTime:i.get(l).readTime})}),i))}}function lT(s){return Ne(s,"remoteDocumentGlobal")}function Ls(s){return Ne(s,"remoteDocumentsV14")}function $l(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uT(s,t){const e=t.documentKey.path.toArray();return[s,zh(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function cT(s,t){const e=s.path.toArray(),i=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<i.length-2;++l)if(a=Rt(e[l],i[l]),a)return a;return a=Rt(e.length,i.length),a||(a=Rt(e[e.length-2],i[i.length-2]),a||Rt(e[e.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&ou(i.mutation,a,dn.empty(),he.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,xt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=xt()){const a=fi();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(l=>{let c=Zl();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=fi();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,xt()))}populateOverlays(t,e,i){const a=[];return i.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,a){let l=Sn();const c=au(),d=function(){return au()}();return e.forEach((g,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ir)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),ou(y.mutation,p,y.mutation.getFieldMask(),he.now())):c.set(p.key,dn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((p,y)=>c.set(p,y)),e.forEach((p,y)=>{var T;return d.set(p,new $x(y,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(t,e){const i=au();let a=new oe((c,d)=>c-d),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(g=>{const p=e.get(g);if(p===null)return;let y=i.get(g)||dn.empty();y=d.applyToLocalView(p,y),i.set(g,y);const T=(a.get(d.batchId)||xt()).add(g);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,y=g.value,T=gb();y.forEach(I=>{if(!l.has(I)){const M=Tb(e.get(I),i.get(I));M!==null&&T.set(I,M),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return j.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return ht.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):WD(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):j.resolve(fi());let d=-1,g=l;return c.next(p=>j.forEach(p,(y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(y)?j.resolve():this.remoteDocumentCache.getEntry(t,y).next(I=>{g=g.insert(y,I)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,g,p,xt())).next(y=>({batchId:d,changes:mb(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next(i=>{let a=Zl();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let c=Zl();return this.indexManager.getCollectionParents(t,l).next(d=>j.forEach(d,g=>{const p=function(T,I){return new nf(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,a).next(y=>{y.forEach((T,I)=>{c=c.insert(T,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a))).next(c=>{l.forEach((g,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,pe.newInvalidDocument(y)))});let d=Zl();return c.forEach((g,p)=>{const y=l.get(g);y!==void 0&&ou(y.mutation,p,dn.empty(),he.now()),Ru(e,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return j.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:ln(a.createTime)}}(e)),j.resolve()}getNamedQuery(t,e){return j.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(a){return{name:a.name,query:zb(a.bundledQuery),readTime:ln(a.readTime)}}(e)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.overlays=new oe(ht.comparator),this.Ir=new Map}getOverlay(t,e){return j.resolve(this.overlays.get(e))}getOverlays(t,e){const i=fi();return j.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,l)=>{this.ht(t,e,l)}),j.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(t,e,i){const a=fi(),l=e.length+1,c=new ht(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return j.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new oe((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=fi(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=fi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return j.resolve(d)}ht(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Hg(e,i));let l=this.Ir.get(e);l===void 0&&(l=xt(),this.Ir.set(e,l)),this.Ir.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.sessionToken=Ie.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Tr=new te(Be.Er),this.dr=new te(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const i=new Be(t,e);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Vr(new Be(t,e))}mr(t,e){t.forEach(i=>this.removeReference(i,e))}gr(t){const e=new ht(new Yt([])),i=new Be(e,t),a=new Be(e,t+1),l=[];return this.dr.forEachInRange([i,a],c=>{this.Vr(c),l.push(c.key)}),l}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new ht(new Yt([])),i=new Be(e,t),a=new Be(e,t+1);let l=xt();return this.dr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Be(t,0),i=this.Tr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Be{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return ht.comparator(t.key,e.key)||Rt(t.wr,e.wr)}static Ar(t,e){return Rt(t.wr,e.wr)||ht.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new te(Be.Er)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Fg(l,e,i,a);this.mutationQueue.push(c);for(const d of a)this.br=this.br.add(new Be(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(t,e){return j.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.vr(i),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Be(e,0),a=new Be(e,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,a],c=>{const d=this.Dr(c.wr);l.push(d)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new te(Rt);return e.forEach(a=>{const l=new Be(a,0),c=new Be(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],d=>{i=i.add(d.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;ht.isDocumentKey(l)||(l=l.child(""));const c=new Be(new ht(l),0);let d=new te(Rt);return this.br.forEachWhile(g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(g.wr)),!0)},c),j.resolve(this.Cr(d))}Cr(t){const e=[];return t.forEach(i=>{const a=this.Dr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){_t(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(e.mutations,a=>{const l=new Be(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,e){const i=new Be(e,0),a=this.br.firstAfterOrEqual(i);return j.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(t){this.Mr=t,this.docs=function(){return new oe(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,c=this.Mr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return j.resolve(i?i.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let i=Sn();return e.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():pe.newInvalidDocument(a))}),j.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=Sn();const c=e.path,d=new ht(c.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:y}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Mg(H0(y),i)<=0||(a.has(y.key)||Ru(e,y))&&(l=l.insert(y.key,y.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(t,e,i,a){mt()}Or(t,e){return j.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new nV(this)}getSize(t){return j.resolve(this.size)}}class nV extends Kb{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.cr.addEntry(t,a)):this.cr.removeEntry(i)}),j.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(t){this.persistence=t,this.Nr=new ts(e=>ea(e),wu),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $g,this.targetCount=0,this.kr=ra.Bn()}forEachTarget(t,e){return this.Nr.forEach((i,a)=>e(a)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Lr&&(this.Lr=e),j.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new ra(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,j.resolve()}updateTargetData(t,e){return this.Kn(e),j.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,e){const i=this.Nr.get(e)||null;return j.resolve(i)}addMatchingKeys(t,e,i){return this.Br.Rr(e,i),j.resolve()}removeMatchingKeys(t,e,i){this.Br.mr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),j.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),j.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Br.yr(e);return j.resolve(i)}containsKey(t,e){return j.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Ln(0),this.Kr=!1,this.Kr=!0,this.$r=new Zx,this.referenceDelegate=t(this),this.Ur=new iV(this),this.indexManager=new zx,this.remoteDocumentCache=function(a){return new eV(a)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Lb(e),this.Gr=new Wx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Jx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.qr[t.toKey()];return i||(i=new tV(e,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,i){rt("MemoryPersistence","Starting transaction:",t);const a=new rV(this.Qr.next());return this.referenceDelegate.zr(),i(a).next(l=>this.referenceDelegate.jr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Hr(t,e){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,e)))}}class rV extends Q0{constructor(t){super(),this.currentSequenceNumber=t}}class hf{constructor(t){this.persistence=t,this.Jr=new $g,this.Yr=null}static Zr(t){return new hf(t)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(t,e,i){return this.Jr.addReference(i,e),this.Xr.delete(i.toString()),j.resolve()}removeReference(t,e,i){return this.Jr.removeReference(i,e),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),j.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(a=>this.Xr.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const a=ht.fromPath(i);return this.ei(t,a).next(l=>{l||e.removeEntry(a,Et.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(i=>{i?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return j.or([()=>j.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(t){this.serializer=t}O(t,e,i,a){const l=new Zh("createOrUpgrade",e);i<1&&a>=1&&(function(g){g.createObjectStore("owner")}(t),function(g){g.createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AE,{unique:!0}),g.createObjectStore("documentMutations")}(t),hT(t),function(g){g.createObjectStore("remoteDocuments")}(t));let c=j.resolve();return i<3&&a>=3&&(i!==0&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(t),hT(t)),c=c.next(()=>function(g){const p=g.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(l))),i<4&&a>=4&&(i!==0&&(c=c.next(()=>function(g,p){return p.store("mutations").U().next(y=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AE,{unique:!0});const T=p.store("mutations"),I=y.map(M=>T.put(M));return j.waitFor(I)})}(t,l))),c=c.next(()=>{(function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&a>=5&&(c=c.next(()=>this.ni(l))),i<6&&a>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(t),this.ri(l)))),i<7&&a>=7&&(c=c.next(()=>this.ii(l))),i<8&&a>=8&&(c=c.next(()=>this.si(t,l))),i<9&&a>=9&&(c=c.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&a>=10&&(c=c.next(()=>this.oi(l))),i<11&&a>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&a>=12&&(c=c.next(()=>{(function(g){const p=g.createObjectStore("documentOverlays",{keyPath:ND});p.createIndex("collectionPathOverlayIndex",OD,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",MD,{unique:!1})})(t)})),i<13&&a>=13&&(c=c.next(()=>function(g){const p=g.createObjectStore("remoteDocumentsV14",{keyPath:TD});p.createIndex("documentKeyIndex",bD),p.createIndex("collectionGroupIndex",SD)}(t)).next(()=>this._i(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(c=c.next(()=>this.ai(t,l))),i<15&&a>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:CD}).createIndex("sequenceNumberIndex",DD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:xD}).createIndex("documentKeyIndex",VD,{unique:!1})}(t))),i<16&&a>=16&&(c=c.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),i<17&&a>=17&&(c=c.next(()=>{(function(g){g.createObjectStore("globals",{keyPath:"name"})})(t)})),c}ri(t){let e=0;return t.store("remoteDocuments").J((i,a)=>{e+=qh(a)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.U().next(a=>j.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",c).next(d=>j.forEach(d,g=>{_t(g.userId===l.userId);const p=qs(this.serializer,g);return Fb(t,l.userId,p).next(()=>{})}))}))}ii(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.J((c,d)=>{const g=new Yt(c),p=function(T){return[0,on(T)]}(g);l.push(e.get(p).next(y=>y?j.resolve():(T=>e.put({targetId:0,path:on(T),sequenceNumber:a.highestListenSequenceNumber}))(g)))}).next(()=>j.waitFor(l))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:RD});const i=e.store("collectionParents"),a=new Xg,l=c=>{if(a.add(c)){const d=c.lastSegment(),g=c.popLast();return i.put({collectionId:d,parent:on(g)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const g=new Yt(c);return l(g.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,g],p)=>{const y=hi(d);return l(y.popLast())}))}oi(t){const e=t.store("targets");return e.J((i,a)=>{const l=eu(a),c=Bb(this.serializer,l);return e.put(c)})}_i(t,e){const i=e.store("remoteDocuments"),a=[];return i.J((l,c)=>{const d=e.store("remoteDocumentsV14"),g=function(T){return T.document?new ht(Yt.fromString(T.document.name).popFirst(5)):T.noDocument?ht.fromSegments(T.noDocument.path):T.unknownDocument?ht.fromSegments(T.unknownDocument.path):mt()}(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>j.waitFor(a))}ai(t,e){const i=e.store("mutations"),a=Qb(this.serializer),l=new Xb(hf.Zr,this.serializer.ct);return i.U().next(c=>{const d=new Map;return c.forEach(g=>{var p;let y=(p=d.get(g.userId))!==null&&p!==void 0?p:xt();qs(this.serializer,g).keys().forEach(T=>y=y.add(T)),d.set(g.userId,y)}),j.forEach(d,(g,p)=>{const y=new Qe(p),T=uf.lt(this.serializer,y),I=l.getIndexManager(y),M=cf.lt(y,this.serializer,I,l.referenceDelegate);return new Yb(a,M,T,I).recalculateAndSaveOverlaysForDocumentKeys(new Jm(e,Ln.oe),g).next()})})}}function hT(s){s.createObjectStore("targetDocuments",{keyPath:ID}).createIndex("documentTargetsIndex",wD,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AD,{unique:!0}),s.createObjectStore("targetGlobal")}const Mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wg{constructor(t,e,i,a,l,c,d,g,p,y,T=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ui=l,this.window=c,this.document=d,this.ci=p,this.li=y,this.hi=T,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=I=>Promise.resolve(),!Wg.D())throw new ft(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qx(this,a),this.Ai=e+"main",this.serializer=new Lb(g),this.Ri=new Kr(this.Ai,this.hi,new sV(this.serializer)),this.$r=new Mx,this.Ur=new qx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qb(this.serializer),this.Gr=new Ox,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&an("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(Z.FAILED_PRECONDITION,Mm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Ln(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>lh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(Zr(t))return rt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Wl(t).get("owner").next(e=>j.resolve(this.vi(e)))}Ci(t){return lh(t).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const i=Ne(e,"clientMetadata");return i.U().next(a=>{const l=this.xi(a,18e5),c=a.filter(d=>l.indexOf(d)===-1);return j.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Vi)for(const e of t)this.Vi.removeItem(this.Oi(e.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?j.resolve(!0):Wl(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new ft(Z.FAILED_PRECONDITION,Mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(t).U().next(i=>this.xi(i,5e3).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&rt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const e=new Jm(t,Ln.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()}xi(t,e){return t.filter(i=>this.Mi(i.updateTimeMs,e)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>lh(t).U().next(e=>this.xi(e,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return cf.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new jx(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return uf.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,i){rt("IndexedDbPersistence","Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=function(g){return g===17?UD:g===16?kD:g===15?kg:g===14?J0:g===13?W0:g===12?PD:g===11?$0:void mt()}(this.hi);let c;return this.Ri.runTransaction(t,a,l,d=>(c=new Jm(d,this.Qr?this.Qr.next():Ln.oe),e==="readwrite-primary"?this.wi(c).next(g=>!!g||this.Si(c)).next(g=>{if(!g)throw an(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ft(Z.FAILED_PRECONDITION,K0);return i(c)}).next(g=>this.Di(c).next(()=>g)):this.Ki(c).next(()=>i(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ki(t){return Wl(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ft(Z.FAILED_PRECONDITION,Mm)})}Di(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wl(t).put("owner",e)}static D(){return Kr.D()}bi(t){const e=Wl(t);return e.get("owner").next(i=>this.vi(i)?(rt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):j.resolve())}Mi(t,e){const i=Date.now();return!(t<i-e)&&(!(t>i)||(an(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;XT()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{const i=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return rt("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return an("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){an("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Wl(s){return Ne(s,"owner")}function lh(s){return Ne(s,"clientMetadata")}function aV(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.$i=i,this.Ui=a}static Wi(t,e){let i=xt(),a=xt();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Jg(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XT()?8:Y0(Ve())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.Yi(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Zi(t,e,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new oV;return this.Xi(t,e,c).next(d=>{if(l.result=d,this.zi)return this.es(t,e,c,d.size)})}).next(()=>l.result)}es(t,e,i,a){return i.documentReadCount<this.ji?(so()<=Pt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",ao(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(so()<=Pt.DEBUG&&rt("QueryEngine","Query:",ao(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(so()<=Pt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",ao(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bn(e))):j.resolve())}Yi(t,e){if(UE(e))return j.resolve(null);let i=Bn(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=rg(e,null,"F"),i=Bn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const c=xt(...l);return this.Ji.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(g=>{const p=this.ts(e,d);return this.ns(e,p,c,g.readTime)?this.Yi(t,rg(e,null,"F")):this.rs(t,p,e,g)}))})))}Zi(t,e,i,a){return UE(e)||a.isEqual(Et.min())?j.resolve(null):this.Ji.getDocuments(t,i).next(l=>{const c=this.ts(e,l);return this.ns(e,c,i,a)?j.resolve(null):(so()<=Pt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ao(e)),this.rs(t,c,e,dD(a,-1)).next(d=>d))})}ts(t,e){let i=new te(fb(t));return e.forEach((a,l)=>{Ru(t,l)&&(i=i.add(l))}),i}ns(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(t,e,i){return so()<=Pt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",ao(e)),this.Ji.getDocumentsMatchingQuery(t,e,An.min(),i)}rs(t,e,i,a){return this.Ji.getDocumentsMatchingQuery(t,i,a).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(t,e,i,a){this.persistence=t,this.ss=e,this.serializer=a,this.os=new oe(Rt),this._s=new ts(l=>ea(l),wu),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Yb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function Wb(s,t,e,i){return new lV(s,t,e,i)}async function Jb(s,t){const e=wt(s);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,e.ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let g=xt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}return e.localDocuments.getDocuments(i,g).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:d}))})})}function uV(s,t){const e=wt(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),l=e.cs.newChangeBuffer({trackRemovals:!0});return function(d,g,p,y){const T=p.batch,I=T.keys();let M=j.resolve();return I.forEach(H=>{M=M.next(()=>y.getEntry(g,H)).next(Q=>{const z=p.docVersions.get(H);_t(z!==null),Q.version.compareTo(z)<0&&(T.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),y.addEntry(Q)))})}),M.next(()=>d.mutationQueue.removeMutationBatch(g,T))}(e,i,t,l).next(()=>l.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let g=xt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function Zb(s){const t=wt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function cV(s,t){const e=wt(s),i=t.snapshotVersion;let a=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.cs.newChangeBuffer({trackRemovals:!0});a=e.os;const d=[];t.targetChanges.forEach((y,T)=>{const I=a.get(T);if(!I)return;d.push(e.Ur.removeMatchingKeys(l,y.removedDocuments,T).next(()=>e.Ur.addMatchingKeys(l,y.addedDocuments,T)));let M=I.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(T)!==null?M=M.withResumeToken(Ie.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),a=a.insert(T,M),function(Q,z,nt){return Q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0}(I,M,y)&&d.push(e.Ur.updateTargetData(l,M))});let g=Sn(),p=xt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(hV(l,c,t.documentUpdates).next(y=>{g=y.Ps,p=y.Is})),!i.isEqual(Et.min())){const y=e.Ur.getLastRemoteSnapshotVersion(l).next(T=>e.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return j.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(e.os=a,l))}function hV(s,t,e){let i=xt(),a=xt();return e.forEach(l=>i=i.add(l)),t.getEntries(s,i).next(l=>{let c=Sn();return e.forEach((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Et.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):rt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{Ps:c,Is:a}})}function fV(s,t){const e=wt(s);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function dV(s,t){const e=wt(s);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Ur.getTargetData(i,t).next(l=>l?(a=l,j.resolve(a)):e.Ur.allocateTargetId(i).next(c=>(a=new Xi(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Ur.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.os=e.os.insert(i.targetId,i),e._s.set(t,i.targetId)),i})}async function fg(s,t,e){const i=wt(s),a=i.os.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Zr(c))throw c;rt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.os=i.os.remove(t),i._s.delete(a.target)}function fT(s,t,e){const i=wt(s);let a=Et.min(),l=xt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(g,p,y){const T=wt(g),I=T._s.get(y);return I!==void 0?j.resolve(T.os.get(I)):T.Ur.getTargetData(p,y)}(i,c,Bn(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>i.ss.getDocumentsMatchingQuery(c,t,e?a:Et.min(),e?l:xt())).next(d=>(mV(i,ZD(t),d),{documents:d,Ts:l})))}function mV(s,t,e){let i=s.us.get(t)||Et.min();e.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),s.us.set(t,i)}class dT{constructor(){this.activeTargetIds=sx()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tS{constructor(){this.so=new dT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,i){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new dT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function Pm(){return uh===null?uh=function(){return 268435456+Math.round(2147483648*Math.random())}():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class yV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+e.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(e,i,a,l,c){const d=Pm(),g=this.xo(e,i.toUriEncodedString());rt("RestConnection",`Sending RPC '${e}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,c),this.No(e,g,p,a).then(y=>(rt("RestConnection",`Received RPC '${e}' ${d}: `,y),y),y=>{throw Js("RestConnection",`RPC '${e}' ${d} failed with error: `,y,"url: ",g,"request:",a),y})}Lo(e,i,a,l,c,d){return this.Mo(e,i,a,l,c)}Oo(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>e[c]=l),a&&a.headers.forEach((l,c)=>e[c]=l)}xo(e,i){const a=pV[e];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,i,a){const l=Pm();return new Promise((c,d)=>{const g=new U0;g.setWithCredentials(!0),g.listenOnce(L0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case gh.NO_ERROR:const y=g.getResponseJson();rt(Ze,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(y)),c(y);break;case gh.TIMEOUT:rt(Ze,`RPC '${t}' ${l} timed out`),d(new ft(Z.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const T=g.getStatus();if(rt(Ze,`RPC '${t}' ${l} failed with status:`,T,"response text:",g.getResponseText()),T>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I==null?void 0:I.error;if(M&&M.status&&M.message){const H=function(z){const nt=z.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(nt)>=0?nt:Z.UNKNOWN}(M.status);d(new ft(H,M.message))}else d(new ft(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ft(Z.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{rt(Ze,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(a);rt(Ze,`RPC '${t}' ${l} sending request:`,a),g.send(e,"POST",p,i,15)})}Bo(t,e,i){const a=Pm(),l=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=j0(),d=z0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,e,i),g.encodeInitMessageHeaders=!0;const y=l.join("");rt(Ze,`Creating RPC '${t}' stream ${a}: ${y}`,g);const T=c.createWebChannel(y,g);let I=!1,M=!1;const H=new _V({Io:z=>{M?rt(Ze,`Not sending because RPC '${t}' stream ${a} is closed:`,z):(I||(rt(Ze,`Opening RPC '${t}' stream ${a} transport.`),T.open(),I=!0),rt(Ze,`RPC '${t}' stream ${a} sending:`,z),T.send(z))},To:()=>T.close()}),Q=(z,nt,et)=>{z.listen(nt,it=>{try{et(it)}catch(ut){setTimeout(()=>{throw ut},0)}})};return Q(T,Jl.EventType.OPEN,()=>{M||(rt(Ze,`RPC '${t}' stream ${a} transport opened.`),H.yo())}),Q(T,Jl.EventType.CLOSE,()=>{M||(M=!0,rt(Ze,`RPC '${t}' stream ${a} transport closed`),H.So())}),Q(T,Jl.EventType.ERROR,z=>{M||(M=!0,Js(Ze,`RPC '${t}' stream ${a} transport errored:`,z),H.So(new ft(Z.UNAVAILABLE,"The operation could not be completed")))}),Q(T,Jl.EventType.MESSAGE,z=>{var nt;if(!M){const et=z.data[0];_t(!!et);const it=et,ut=it.error||((nt=it[0])===null||nt===void 0?void 0:nt.error);if(ut){rt(Ze,`RPC '${t}' stream ${a} received error:`,ut);const ct=ut.status;let gt=function(R){const V=Ae[R];if(V!==void 0)return Ab(V)}(ct),D=ut.message;gt===void 0&&(gt=Z.INTERNAL,D="Unknown error status: "+ct+" with message "+ut.message),M=!0,H.So(new ft(gt,D)),T.close()}else rt(Ze,`RPC '${t}' stream ${a} received:`,et),H.bo(et)}}),Q(d,B0.STAT_EVENT,z=>{z.stat===$m.PROXY?rt(Ze,`RPC '${t}' stream ${a} detected buffering proxy`):z.stat===$m.NOPROXY&&rt(Ze,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{H.wo()},0),H}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(){return typeof window<"u"?window:null}function bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(s){return new bx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t,e,i=1e3,a=1.5,l=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,e-i);a>0&&rt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(t,e,i,a,l,c,d,g){this.ui=t,this.Ho=i,this.Jo=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eS(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===Z.RESOURCE_EXHAUSTED?(an(e.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Yo===e&&this.P_(i,a)},i=>{t(()=>{const a=new ft(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)})})}P_(t,e){const i=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{i(()=>this.I_(a))}),this.stream.onMessage(a=>{i(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return rt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EV extends nS{constructor(t,e,i,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=Ix(this.serializer,t),i=function(l){if(!("targetChange"in l))return Et.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?ln(c.readTime):Et.min()}(t);return this.listener.d_(e,i)}A_(t){const e={};e.database=og(this.serializer),e.addTarget=function(l,c){let d;const g=c.target;if(d=kh(g)?{documents:Nb(l,g)}:{query:Ob(l,g)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Rb(l,c.resumeToken);const p=sg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Et.min())>0){d.readTime=Io(l,c.snapshotVersion.toTimestamp());const p=sg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const i=Rx(this.serializer,t);i&&(e.labels=i),this.a_(e)}R_(t){const e={};e.database=og(this.serializer),e.removeTarget=t,this.a_(e)}}class TV extends nS{constructor(t,e,i,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return _t(!!t.streamToken),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=wx(t.writeResults,t.commitTime),i=ln(t.commitTime);return this.listener.g_(i,e)}p_(){const t={};t.database=og(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Bh(this.serializer,i))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV extends class{}{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ft(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Mo(t,ag(e,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ft(Z.UNKNOWN,l.toString())})}Lo(t,e,i,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(t,ag(e,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(Z.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(an(e),this.D_=!1):rt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(c=>{i.enqueueAndForget(async()=>{la(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(g){const p=wt(g);p.L_.add(4),await Du(p),p.q_.set("Unknown"),p.L_.delete(4),await df(p)}(this))})}),this.q_=new SV(i,a)}}async function df(s){if(la(s))for(const t of s.B_)await t(!0)}async function Du(s){for(const t of s.B_)await t(!1)}function iS(s,t){const e=wt(s);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),np(e)?ep(e):Mo(e).r_()&&tp(e,t))}function Zg(s,t){const e=wt(s),i=Mo(e);e.N_.delete(t),i.r_()&&rS(e,t),e.N_.size===0&&(i.r_()?i.o_():la(e)&&e.q_.set("Unknown"))}function tp(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Mo(s).A_(t)}function rS(s,t){s.Q_.xe(t),Mo(s).R_(t)}function ep(s){s.Q_=new yx({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),Mo(s).start(),s.q_.v_()}function np(s){return la(s)&&!Mo(s).n_()&&s.N_.size>0}function la(s){return wt(s).L_.size===0}function sS(s){s.Q_=void 0}async function IV(s){s.q_.set("Online")}async function wV(s){s.N_.forEach((t,e)=>{tp(s,t)})}async function RV(s,t){sS(s),np(s)?(s.q_.M_(t),ep(s)):s.q_.set("Unknown")}async function CV(s,t,e){if(s.q_.set("Online"),t instanceof wb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.N_.delete(d),a.Q_.removeTarget(d))}(s,t)}catch(i){rt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Fh(s,i)}else if(t instanceof Th?s.Q_.Ke(t):t instanceof Ib?s.Q_.He(t):s.Q_.We(t),!e.isEqual(Et.min()))try{const i=await Zb(s.localStore);e.compareTo(i)>=0&&await function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.N_.get(p);y&&l.N_.set(p,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,p)=>{const y=l.N_.get(g);if(!y)return;l.N_.set(g,y.withResumeToken(Ie.EMPTY_BYTE_STRING,y.snapshotVersion)),rS(l,g);const T=new Xi(y.target,g,p,y.sequenceNumber);tp(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,e)}catch(i){rt("RemoteStore","Failed to raise snapshot:",i),await Fh(s,i)}}async function Fh(s,t,e){if(!Zr(t))throw t;s.L_.add(1),await Du(s),s.q_.set("Offline"),e||(e=()=>Zb(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await e(),s.L_.delete(1),await df(s)})}function aS(s,t){return t().catch(e=>Fh(s,e,t))}async function xu(s){const t=wt(s),e=Wr(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;DV(t);)try{const a=await fV(t.localStore,i);if(a===null){t.O_.length===0&&e.o_();break}i=a.batchId,xV(t,a)}catch(a){await Fh(t,a)}oS(t)&&lS(t)}function DV(s){return la(s)&&s.O_.length<10}function xV(s,t){s.O_.push(t);const e=Wr(s);e.r_()&&e.V_&&e.m_(t.mutations)}function oS(s){return la(s)&&!Wr(s).n_()&&s.O_.length>0}function lS(s){Wr(s).start()}async function VV(s){Wr(s).p_()}async function NV(s){const t=Wr(s);for(const e of s.O_)t.m_(e.mutations)}async function OV(s,t,e){const i=s.O_.shift(),a=Gg.from(i,t,e);await aS(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await xu(s)}async function MV(s,t){t&&Wr(s).V_&&await async function(i,a){if(function(c){return gx(c)&&c!==Z.ABORTED}(a.code)){const l=i.O_.shift();Wr(i).s_(),await aS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await xu(i)}}(s,t),oS(s)&&lS(s)}async function gT(s,t){const e=wt(s);e.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const i=la(e);e.L_.add(3),await Du(e),i&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await df(e)}async function PV(s,t){const e=wt(s);t?(e.L_.delete(2),await df(e)):t||(e.L_.add(2),await Du(e),e.q_.set("Unknown"))}function Mo(s){return s.K_||(s.K_=function(e,i,a){const l=wt(e);return l.w_(),new EV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:IV.bind(null,s),Ro:wV.bind(null,s),mo:RV.bind(null,s),d_:CV.bind(null,s)}),s.B_.push(async t=>{t?(s.K_.s_(),np(s)?ep(s):s.q_.set("Unknown")):(await s.K_.stop(),sS(s))})),s.K_}function Wr(s){return s.U_||(s.U_=function(e,i,a){const l=wt(e);return l.w_(),new TV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VV.bind(null,s),mo:MV.bind(null,s),f_:NV.bind(null,s),g_:OV.bind(null,s)}),s.B_.push(async t=>{t?(s.U_.s_(),await xu(s)):(await s.U_.stop(),s.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const c=Date.now()+i,d=new ip(t,e,c,a,l);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(s,t){if(an("AsyncQueue",`${t}: ${s}`),Zr(s))return new ft(Z.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ht.comparator(e.key,i.key):(e,i)=>ht.comparator(e.key,i.key),this.keyedMap=Zl(),this.sortedSet=new oe(this.comparator)}static emptySet(t){return new go(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof go)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new go;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.W_=new oe(ht.comparator)}track(t){const e=t.doc.key,i=this.W_.get(e);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(e,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(e):t.type===1&&i.type===2?this.W_=this.W_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):mt():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,i)=>{t.push(i)}),t}}class wo{constructor(t,e,i,a,l,c,d,g,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,a,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new wo(t,e,go.emptySet(e),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&rf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class UV{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,i){const a=wt(e),l=a.queries;a.queries=_T(),l.forEach((c,d)=>{for(const g of d.j_)g.onError(i)})})(this,new ft(Z.ABORTED,"Firestore shutting down"))}}function _T(){return new ts(s=>hb(s),rf)}async function LV(s,t){const e=wt(s);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.H_()&&t.J_()&&(i=2):(l=new kV,i=t.J_()?0:1);try{switch(i){case 0:l.z_=await e.onListen(a,!0);break;case 1:l.z_=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const d=rp(c,`Initialization of query '${ao(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,l),l.j_.push(t),t.Z_(e.onlineState),l.z_&&t.X_(l.z_)&&sp(e)}async function BV(s,t){const e=wt(s),i=t.query;let a=3;const l=e.queries.get(i);if(l){const c=l.j_.indexOf(t);c>=0&&(l.j_.splice(c,1),l.j_.length===0?a=t.J_()?0:1:!l.H_()&&t.J_()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function zV(s,t){const e=wt(s);let i=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const d of c.j_)d.X_(a)&&(i=!0);c.z_=a}}i&&sp(e)}function jV(s,t,e){const i=wt(s),a=i.queries.get(t);if(a)for(const l of a.j_)l.onError(e);i.queries.delete(t)}function sp(s){s.Y_.forEach(t=>{t.next()})}var dg,yT;(yT=dg||(dg={})).ea="default",yT.Cache="cache";class qV{constructor(t,e,i){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new wo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const i=e!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t){this.key=t}}class cS{constructor(t){this.key=t}}class FV{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xt(),this.mutatedKeys=xt(),this.Aa=fb(t),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(t,e){const i=e?e.fa:new pT,a=e?e.Ra:this.Ra;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,T)=>{const I=a.get(y),M=Ru(this.query,T)?T:null,H=!!I&&this.mutatedKeys.has(I.key),Q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let z=!1;I&&M?I.data.isEqual(M.data)?H!==Q&&(i.track({type:3,doc:M}),z=!0):this.ga(I,M)||(i.track({type:2,doc:M}),z=!0,(g&&this.Aa(M,g)>0||p&&this.Aa(M,p)<0)&&(d=!0)):!I&&M?(i.track({type:0,doc:M}),z=!0):I&&!M&&(i.track({type:1,doc:I}),z=!0,(g||p)&&(d=!0)),z&&(M?(c=c.add(M),l=Q?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Ra:c,fa:i,ns:d,mutatedKeys:l}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const c=t.fa.G_();c.sort((y,T)=>function(M,H){const Q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return Q(M)-Q(H)}(y.type,T.type)||this.Aa(y.doc,T.doc)),this.pa(i),a=a!=null&&a;const d=e&&!a?this.ya():[],g=this.da.size===0&&this.current&&!a?1:0,p=g!==this.Ea;return this.Ea=g,c.length!==0||p?{snapshot:new wo(this.query,t.Ra,l,c,t.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=xt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const e=[];return t.forEach(i=>{this.da.has(i)||e.push(new cS(i))}),this.da.forEach(i=>{t.has(i)||e.push(new uS(i))}),e}ba(t){this.Ta=t.Ts,this.da=xt();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class HV{constructor(t){this.key=t,this.va=!1}}class KV{constructor(t,e,i,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new ts(d=>hb(d),rf),this.Ma=new Map,this.xa=new Set,this.Oa=new oe(ht.comparator),this.Na=new Map,this.La=new $g,this.Ba={},this.ka=new Map,this.qa=ra.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function QV(s,t,e=!0){const i=pS(s);let a;const l=i.Fa.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await hS(i,t,e,!0),a}async function YV(s,t){const e=pS(s);await hS(e,t,!0,!1)}async function hS(s,t,e,i){const a=await dV(s.localStore,Bn(t)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,e);let d;return i&&(d=await XV(s,t,l,c==="current",a.resumeToken)),s.isPrimaryClient&&e&&iS(s.remoteStore,a),d}async function XV(s,t,e,i,a){s.Ka=(T,I,M)=>async function(Q,z,nt,et){let it=z.view.ma(nt);it.ns&&(it=await fT(Q.localStore,z.query,!1).then(({documents:D})=>z.view.ma(D,it)));const ut=et&&et.targetChanges.get(z.targetId),ct=et&&et.targetMismatches.get(z.targetId)!=null,gt=z.view.applyChanges(it,Q.isPrimaryClient,ut,ct);return ET(Q,z.targetId,gt.wa),gt.snapshot}(s,T,I,M);const l=await fT(s.localStore,t,!0),c=new FV(t,l.Ts),d=c.ma(l.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(e,i&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,g);ET(s,e,p.wa);const y=new GV(t,e,c);return s.Fa.set(t,y),s.Ma.has(e)?s.Ma.get(e).push(t):s.Ma.set(e,[t]),p.snapshot}async function $V(s,t,e){const i=wt(s),a=i.Fa.get(t),l=i.Ma.get(a.targetId);if(l.length>1)return i.Ma.set(a.targetId,l.filter(c=>!rf(c,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await fg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Zg(i.remoteStore,a.targetId),mg(i,a.targetId)}).catch(aa)):(mg(i,a.targetId),await fg(i.localStore,a.targetId,!0))}async function WV(s,t){const e=wt(s),i=e.Fa.get(t),a=e.Ma.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Zg(e.remoteStore,i.targetId))}async function JV(s,t,e){const i=_S(s);try{const a=await function(c,d){const g=wt(c),p=he.now(),y=d.reduce((M,H)=>M.add(H.key),xt());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",M=>{let H=Sn(),Q=xt();return g.cs.getEntries(M,y).next(z=>{H=z,H.forEach((nt,et)=>{et.isValidDocument()||(Q=Q.add(nt))})}).next(()=>g.localDocuments.getOverlayedDocuments(M,H)).next(z=>{T=z;const nt=[];for(const et of d){const it=dx(et,T.get(et.key).overlayedDocument);it!=null&&nt.push(new ir(et.key,it,ib(it.value.mapValue),Xe.exists(!0)))}return g.mutationQueue.addMutationBatch(M,p,nt,d)}).next(z=>{I=z;const nt=z.applyToLocalDocumentSet(T,Q);return g.documentOverlayCache.saveOverlays(M,z.batchId,nt)})}).then(()=>({batchId:I.batchId,changes:mb(T)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let p=c.Ba[c.currentUser.toKey()];p||(p=new oe(Rt)),p=p.insert(d,g),c.Ba[c.currentUser.toKey()]=p}(i,a.batchId,e),await Vu(i,a.changes),await xu(i.remoteStore)}catch(a){const l=rp(a,"Failed to persist write");e.reject(l)}}async function fS(s,t){const e=wt(s);try{const i=await cV(e.localStore,t);t.targetChanges.forEach((a,l)=>{const c=e.Na.get(l);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.va=!0:a.modifiedDocuments.size>0?_t(c.va):a.removedDocuments.size>0&&(_t(c.va),c.va=!1))}),await Vu(e,i,t)}catch(i){await aa(i)}}function vT(s,t,e){const i=wt(s);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Fa.forEach((l,c)=>{const d=c.view.Z_(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=wt(c);g.onlineState=d;let p=!1;g.queries.forEach((y,T)=>{for(const I of T.j_)I.Z_(d)&&(p=!0)}),p&&sp(g)}(i.eventManager,t),a.length&&i.Ca.d_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function ZV(s,t,e){const i=wt(s);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Na.get(t),l=a&&a.key;if(l){let c=new oe(ht.comparator);c=c.insert(l,pe.newNoDocument(l,Et.min()));const d=xt().add(l),g=new lf(Et.min(),new Map,new oe(Rt),c,d);await fS(i,g),i.Oa=i.Oa.remove(l),i.Na.delete(t),ap(i)}else await fg(i.localStore,t,!1).then(()=>mg(i,t,e)).catch(aa)}async function tN(s,t){const e=wt(s),i=t.batch.batchId;try{const a=await uV(e.localStore,t);mS(e,i,null),dS(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(e,a)}catch(a){await aa(a)}}async function eN(s,t,e){const i=wt(s);try{const a=await function(c,d){const g=wt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return g.mutationQueue.lookupMutationBatch(p,d).next(T=>(_t(T!==null),y=T.keys(),g.mutationQueue.removeMutationBatch(p,T))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>g.localDocuments.getDocuments(p,y))})}(i.localStore,t);mS(i,t,e),dS(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Vu(i,a)}catch(a){await aa(a)}}function dS(s,t){(s.ka.get(t)||[]).forEach(e=>{e.resolve()}),s.ka.delete(t)}function mS(s,t,e){const i=wt(s);let a=i.Ba[i.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),i.Ba[i.currentUser.toKey()]=a}}function mg(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const i of s.Ma.get(t))s.Fa.delete(i),e&&s.Ca.$a(i,e);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach(i=>{s.La.containsKey(i)||gS(s,i)})}function gS(s,t){s.xa.delete(t.path.canonicalString());const e=s.Oa.get(t);e!==null&&(Zg(s.remoteStore,e),s.Oa=s.Oa.remove(t),s.Na.delete(e),ap(s))}function ET(s,t,e){for(const i of e)i instanceof uS?(s.La.addReference(i.key,t),nN(s,i)):i instanceof cS?(rt("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,t),s.La.containsKey(i.key)||gS(s,i.key)):mt()}function nN(s,t){const e=t.key,i=e.path.canonicalString();s.Oa.get(e)||s.xa.has(i)||(rt("SyncEngine","New document in limbo: "+e),s.xa.add(i),ap(s))}function ap(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const e=new ht(Yt.fromString(t)),i=s.qa.next();s.Na.set(i,new HV(e)),s.Oa=s.Oa.insert(e,i),iS(s.remoteStore,new Xi(Bn(jg(e.path)),i,"TargetPurposeLimboResolution",Ln.oe))}}async function Vu(s,t,e){const i=wt(s),a=[],l=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((d,g)=>{c.push(i.Ka(g,t,e).then(p=>{var y;if((p||e)&&i.isPrimaryClient){const T=p?!p.fromCache:(y=e==null?void 0:e.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){a.push(p);const T=Jg.Wi(g.targetId,p);l.push(T)}}))}),await Promise.all(c),i.Ca.d_(a),await async function(g,p){const y=wt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>j.forEach(p,I=>j.forEach(I.$i,M=>y.persistence.referenceDelegate.addReference(T,I.targetId,M)).next(()=>j.forEach(I.Ui,M=>y.persistence.referenceDelegate.removeReference(T,I.targetId,M)))))}catch(T){if(!Zr(T))throw T;rt("LocalStore","Failed to update sequence numbers: "+T)}for(const T of p){const I=T.targetId;if(!T.fromCache){const M=y.os.get(I),H=M.snapshotVersion,Q=M.withLastLimboFreeSnapshotVersion(H);y.os=y.os.insert(I,Q)}}}(i.localStore,l))}async function iN(s,t){const e=wt(s);if(!e.currentUser.isEqual(t)){rt("SyncEngine","User change. New user:",t.toKey());const i=await Jb(e.localStore,t);e.currentUser=t,function(l,c){l.ka.forEach(d=>{d.forEach(g=>{g.reject(new ft(Z.CANCELLED,c))})}),l.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Vu(e,i.hs)}}function rN(s,t){const e=wt(s),i=e.Na.get(t);if(i&&i.va)return xt().add(i.key);{let a=xt();const l=e.Ma.get(t);if(!l)return a;for(const c of l){const d=e.Fa.get(c);a=a.unionWith(d.view.Va)}return a}}function pS(s){const t=wt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=fS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,t),t.Ca.d_=zV.bind(null,t.eventManager),t.Ca.$a=jV.bind(null,t.eventManager),t}function _S(s){const t=wt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eN.bind(null,t),t}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ff(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return Wb(this.persistence,new $b,t.initialUser,this.serializer)}Ga(t){return new Xb(hf.Zr,this.serializer)}Wa(t){return new tS}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class sN extends Eu{constructor(t,e,i){super(),this.Ja=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ja.initialize(this,t),await _S(this.Ja.syncEngine),await xu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(t){return Wb(this.persistence,new $b,t.initialUser,this.serializer)}ja(t,e){const i=this.persistence.referenceDelegate.garbageCollector;return new Gx(i,t.asyncQueue,e)}Ha(t,e){const i=new _D(e,this.persistence);return new pD(t.asyncQueue,i)}Ga(t){const e=aV(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new Wg(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,vV(),bh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new tS}}class Gh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iN.bind(null,this.syncEngine),await PV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new UV}()}createDatastore(t){const e=ff(t.databaseInfo.databaseId),i=function(l){return new yV(l)}(t.databaseInfo);return function(l,c,d,g){return new bV(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,l,c,d){return new AV(i,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>vT(this.syncEngine,e,0),function(){return mT.D()?new mT:new gV}())}createSyncEngine(t,e){return function(a,l,c,d,g,p,y){const T=new KV(a,l,c,d,g,p);return y&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=wt(a);rt("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Du(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Gh.provider={build:()=>new Gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):an("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=Qe.UNAUTHENTICATED,this.clientId=F0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{rt("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(rt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=rp(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function km(s,t){s.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let i=e.initialUser;s.setCredentialChangeListener(async a=>{i.isEqual(a)||(await Jb(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function TT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await lN(s);rt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(i=>gT(t.remoteStore,i)),s.setAppCheckTokenChangeListener((i,a)=>gT(t.remoteStore,a)),s._onlineComponents=t}async function lN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await km(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Js("Error using user provided cache. Falling back to memory cache: "+e),await km(s,new Eu)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await km(s,new Eu);return s._offlineComponents}async function yS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await TT(s,s._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await TT(s,new Gh))),s._onlineComponents}function uN(s){return yS(s).then(t=>t.syncEngine)}async function cN(s){const t=await yS(s),e=t.eventManager;return e.onListen=QV.bind(null,t.syncEngine),e.onUnlisten=$V.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=YV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=WV.bind(null,t.syncEngine),e}function hN(s,t,e={}){const i=new $i;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,p){const y=new aN({next:I=>{y.Za(),c.enqueueAndForget(()=>BV(l,T)),I.fromCache&&g.source==="server"?p.reject(new ft(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),T=new qV(d,y,{includeMetadataChanges:!0,_a:!0});return LV(l,T)}(await cN(s),s.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s,t,e){if(!e)throw new ft(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function fN(s,t,e,i){if(t===!0&&i===!0)throw new ft(Z.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function ST(s){if(!ht.isDocumentKey(s))throw new ft(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function AT(s){if(ht.isDocumentKey(s))throw new ft(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function op(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":mt()}function Jr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ft(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=op(s);throw new ft(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ft(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ft(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vS((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ft(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ft(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ft(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mf{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IT(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new rD;switch(i.type){case"firstParty":return new lD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ft(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=bT.get(e);i&&(rt("ComponentProvider","Removing Datastore"),bT.delete(e),i.terminate())}(this),Promise.resolve()}}function dN(s,t,e,i={}){var a;const l=(s=Jr(s,mf))._getSettings(),c=`${t}:${e}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,g;if(typeof i.mockUserToken=="string")d=i.mockUserToken,g=Qe.MOCK_USER;else{d=xw(i.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ft(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Qe(p)}s._authCredentials=new sD(new q0(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new gf(this.firestore,t,this._query)}}class zn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zn(this.firestore,t,this._key)}}class Qr extends gf{constructor(t,e,i){super(t,e,jg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zn(this.firestore,null,new ht(t))}withConverter(t){return new Qr(this.firestore,t,this._path)}}function pf(s,t,...e){if(s=ze(s),ES("collection","path",t),s instanceof mf){const i=Yt.fromString(t,...e);return AT(i),new Qr(s,null,i)}{if(!(s instanceof zn||s instanceof Qr))throw new ft(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Yt.fromString(t,...e));return AT(i),new Qr(s.firestore,null,i)}}function lp(s,t,...e){if(s=ze(s),arguments.length===1&&(t=F0.newId()),ES("doc","path",t),s instanceof mf){const i=Yt.fromString(t,...e);return ST(i),new zn(s,null,new ht(i))}{if(!(s instanceof zn||s instanceof Qr))throw new ft(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Yt.fromString(t,...e));return ST(i),new zn(s.firestore,s instanceof Qr?s.converter:null,new ht(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eS(this,"async_queue_retry"),this.Vu=()=>{const i=bh();i&&rt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const e=bh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=bh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new $i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Zr(t))throw t;rt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw an("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const a=ip.createAndSchedule(this,t,e,i,l=>this.yu(l));return this.Tu.push(a),a}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class Po extends mf{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new wT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new wT(t),this._firestoreClient=void 0,await t}}}function mN(s,t){const e=typeof s=="object"?s:t0(),i=typeof s=="string"?s:"(default)",a=Tg(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Cw("firestore");l&&dN(a,...l)}return a}function up(s){if(s._terminated)throw new ft(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||TS(s),s._firestoreClient}function TS(s){var t,e,i;const a=s._freezeSettings(),l=function(d,g,p,y){return new BD(d,g,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,vS(y.experimentalLongPollingOptions),y.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new oN(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(s._componentsProvider))}function gN(s,t){Js("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return pN(s,Gh.provider,{build:i=>new sN(i,e.cacheSizeBytes,void 0)}),Promise.resolve()}function pN(s,t,e){if((s=Jr(s,Po))._firestoreClient||s._terminated)throw new ft(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ft(Z.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},TS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ro(Ie.fromBase64String(t))}catch(e){throw new ft(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ro(Ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ft(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ft(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ft(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=/^__.*__$/;class yN{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ir(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oo(t,this.data,e,this.fieldTransforms)}}class bS{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ir(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function SS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class dp{constructor(t,e,i,a,l,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new dp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:i,xu:!1});return a.Ou(t),a}Nu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Hh(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(SS(this.Cu)&&_N.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class vN{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ff(t)}Qu(t,e,i,a=!1){return new dp({Cu:t,methodName:e,qu:i,path:ue.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(s){const t=s._freezeSettings(),e=ff(s._databaseId);return new vN(s._databaseId,!!t.ignoreUndefinedProperties,e)}function AS(s,t,e,i,a,l={}){const c=s.Qu(l.merge||l.mergeFields?2:0,t,e,a);gp("Data must be an object, but it was:",c,i);const d=RS(i,c);let g,p;if(l.merge)g=new dn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const I=gg(t,T,e);if(!c.contains(I))throw new ft(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);DS(y,I)||y.push(I)}g=new dn(y),p=c.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,p=c.fieldTransforms;return new yN(new tn(d),g,p)}class _f extends cp{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _f}}function IS(s,t,e,i){const a=s.Qu(1,t,e);gp("Data must be an object, but it was:",a,i);const l=[],c=tn.empty();oa(i,(g,p)=>{const y=pp(t,g,e);p=ze(p);const T=a.Nu(y);if(p instanceof _f)l.push(y);else{const I=yf(p,T);I!=null&&(l.push(y),c.set(y,I))}});const d=new dn(l);return new bS(c,d,a.fieldTransforms)}function wS(s,t,e,i,a,l){const c=s.Qu(1,t,e),d=[gg(t,i,e)],g=[a];if(l.length%2!=0)throw new ft(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(gg(t,l[I])),g.push(l[I+1]);const p=[],y=tn.empty();for(let I=d.length-1;I>=0;--I)if(!DS(p,d[I])){const M=d[I];let H=g[I];H=ze(H);const Q=c.Nu(M);if(H instanceof _f)p.push(M);else{const z=yf(H,Q);z!=null&&(p.push(M),y.set(M,z))}}const T=new dn(p);return new bS(y,T,c.fieldTransforms)}function yf(s,t){if(CS(s=ze(s)))return gp("Unsupported field value:",t,s),RS(s,t);if(s instanceof cp)return function(i,a){if(!SS(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let g=yf(d,a.Lu(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(s,t)}return function(i,a){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ax(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=he.fromDate(i);return{timestampValue:Io(a.serializer,l)}}if(i instanceof he){const l=new he(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Io(a.serializer,l)}}if(i instanceof hp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ro)return{bytesValue:Rb(a.serializer,i._byteString)};if(i instanceof zn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof fp)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Bu("VectorValues must only contain numeric values.");return qg(d.serializer,g)})}}}}}}(i,a);throw a.Bu(`Unsupported field value: ${op(i)}`)}(s,t)}function RS(s,t){const e={};return Z0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oa(s,(i,a)=>{const l=yf(a,t.Mu(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function CS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof he||s instanceof hp||s instanceof Ro||s instanceof zn||s instanceof cp||s instanceof fp)}function gp(s,t,e){if(!CS(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const i=op(e);throw i==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+i)}}function gg(s,t,e){if((t=ze(t))instanceof Nu)return t._internalPath;if(typeof t=="string")return pp(s,t);throw Hh("Field path arguments must be of type string or ",s,!1,void 0,e)}const EN=new RegExp("[~\\*/\\[\\]]");function pp(s,t,e){if(t.search(EN)>=0)throw Hh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Nu(...t.split("."))._internalPath}catch{throw Hh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Hh(s,t,e,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${i}`),c&&(g+=` in document ${a}`),g+=")"),new ft(Z.INVALID_ARGUMENT,d+s+g)}function DS(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(VS("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class TN extends xS{data(){return super.data()}}function VS(s,t){return typeof t=="string"?pp(s,t):t instanceof Nu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ft(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SN{convertValue(t,e="none"){switch(ta(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw mt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return oa(t,(a,l)=>{i[a]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,a;const l=(a=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>ae(c.doubleValue));return new fp(l)}convertGeoPoint(t){return new hp(ae(t.latitude),ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Lg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(gu(t));default:return null}}convertTimestamp(t){const e=Zi(t);return new he(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Yt.fromString(t);_t(Ub(i));const a=new Zs(i.get(1),i.get(3)),l=new ht(i.popFirst(5));return a.isEqual(e)||an(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(s,t,e){let i;return i=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class AN extends xS{constructor(t,e,i,a,l,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(VS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Sh extends AN{data(t={}){return super.data(t)}}class IN{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new ch(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Sh(this._firestore,this._userDataWriter,i.key,i,new ch(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ft(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ch(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ch(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:wN(d.type),doc:g,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}class RN extends SN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ro(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new zn(this.firestore,null,e)}}function _p(s){s=Jr(s,gf);const t=Jr(s.firestore,Po),e=up(t),i=new RN(t);return bN(s._query),hN(e,s._query).then(a=>new IN(t,i,s,a))}function CN(s,t,e,...i){s=Jr(s,zn);const a=Jr(s.firestore,Po),l=mp(a);let c;return c=typeof(t=ze(t))=="string"||t instanceof Nu?wS(l,"updateDoc",s._key,t,e,i):IS(l,"updateDoc",s._key,t),yp(a,[c.toMutation(s._key,Xe.exists(!0))])}function DN(s,t){const e=Jr(s.firestore,Po),i=lp(s),a=NS(s.converter,t);return yp(e,[AS(mp(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,Xe.exists(!1))]).then(()=>i)}function yp(s,t){return function(i,a){const l=new $i;return i.asyncQueue.enqueueAndForget(async()=>JV(await uN(i),a,l)),l.promise}(up(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=mp(t)}set(t,e,i){this._verifyNotCommitted();const a=Um(t,this._firestore),l=NS(a.converter,e,i),c=AS(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Xe.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const l=Um(t,this._firestore);let c;return c=typeof(e=ze(e))=="string"||e instanceof Nu?wS(this._dataReader,"WriteBatch.update",l._key,e,i,a):IS(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,Xe.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Um(t,this._firestore);return this._mutations=this._mutations.concat(new of(e._key,Xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Um(s,t){if((s=ze(s)).firestore!==t)throw new ft(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(s){return up(s=Jr(s,Po)),new xN(s,t=>yp(s,t))}(function(t,e=!0){(function(a){No=a})(xo),_o(new Xs("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Po(new aD(i.getProvider("auth-internal")),new cD(i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ft(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Hr(TE,"4.7.3",t),Hr(TE,"4.7.3","esm2017")})();const NN={apiKey:"AIzaSyCOa_tTly-MBkraG1MtlQcUx1yb5k2piBU",authDomain:"fluencyapp-37ad5.firebaseapp.com",projectId:"fluencyapp-37ad5",storageBucket:"fluencyapp-37ad5.firebasestorage.app",messagingSenderId:"135947529307",appId:"1:135947529307:web:4886c941d78d2fbd96e37e",measurementId:"G-1LKRZJZLXH"},OS=ZT(NN),pi=XC(OS),ON=new Gi,Yr=mN(OS);gN(Yr).catch(console.warn);const MN=({user:s})=>s?G.jsx("button",{onClick:()=>S0(pi),children:"Sign out"}):G.jsx("button",{onClick:()=>rC(pi,ON),children:"Sign in with Google"}),PN=({user:s,onToggleSidebar:t})=>{const[e,i]=W.useState(!1),a=W.useRef(null),l=()=>i(!e),c=()=>i(!1);return W.useEffect(()=>{const d=g=>{a.current&&!a.current.contains(g.target)&&c()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),G.jsxs("nav",{className:"navbar",children:[G.jsxs("div",{className:"navbar-left",children:[G.jsx("button",{className:"hamburger",onClick:()=>{window.innerWidth<=768?document.body.classList.toggle("menu-open"):t()},children:""}),G.jsx("span",{className:"navbar-title",children:"Fluency App"})]}),G.jsxs("div",{className:"profile-container",ref:a,children:[G.jsx("img",{src:s.photoURL||"/default-avatar.png",alt:"Profile",className:"profile-pic",onClick:l}),e&&G.jsxs("div",{className:"dropdown",children:[G.jsx("div",{className:"dropdown-item",children:s.displayName}),G.jsx("div",{className:"dropdown-item",children:s.email}),G.jsx("hr",{}),G.jsx(qT,{to:"/profile",className:"dropdown-item",children:"My Profile"}),G.jsx("button",{className:"dropdown-item logout",onClick:()=>S0(pi),children:"Log out"})]})]})]})},kN=()=>{const s=sa(),[t,e]=W.useState(!1);return W.useEffect(()=>{s.pathname.startsWith("/stats")&&e(!0)},[s.pathname]),G.jsx("aside",{className:"sidebar",children:G.jsxs("nav",{children:[G.jsx(Kl,{to:"/home",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Home"}),G.jsx(Kl,{to:"/practice",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Practice"}),G.jsx(Kl,{to:"/vocabulary",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Vocabulary"}),G.jsxs("div",{className:"nav-group",children:[G.jsx("div",{className:`nav-item nav-collapsible ${t?"expanded":""}`,onClick:()=>e(!t),children:"Stats "}),t&&G.jsx("div",{className:"nav-submenu",children:G.jsx(Kl,{to:"/stats/progress",className:({isActive:i})=>i?"nav-item sub-item active":"nav-item sub-item",children:"Your Progress"})})]}),G.jsx(Kl,{to:"/profile",className:({isActive:i})=>i?"nav-item active":"nav-item",children:"Profile"})]})})};function UN(){return G.jsx("h2",{children:"Welcome to Fluency App!"})}const LN=({onStart:s})=>{const[t,e]=W.useState("word-count"),[i,a]=W.useState(10),[l,c]=W.useState("random"),d=g=>{g.preventDefault(),s({mode:t,count:i,direction:l})};return G.jsxs("div",{children:[G.jsx("h2",{children:"Start Practice"}),G.jsxs("form",{onSubmit:d,children:[G.jsx("div",{children:G.jsxs("label",{children:["Mode:",G.jsxs("select",{value:t,onChange:g=>e(g.target.value),children:[G.jsx("option",{value:"word-count",children:"Fixed Number of Words"}),G.jsx("option",{value:"timed",children:"Timed (Minutes)"})]})]})}),G.jsx("div",{children:G.jsxs("label",{children:[t==="word-count"?"Number of Words:":"Session Time (minutes):",G.jsx("input",{type:"number",min:1,max:999,value:i,onChange:g=>a(Number(g.target.value))})]})}),G.jsx("div",{children:G.jsxs("label",{children:["Direction:",G.jsxs("select",{value:l,onChange:g=>c(g.target.value),children:[G.jsx("option",{value:"es-en",children:"Spanish  English"}),G.jsx("option",{value:"en-es",children:"English  Spanish"}),G.jsx("option",{value:"random",children:"Random"})]})]})}),G.jsx("button",{type:"submit",children:"Start"})]})]})},BN=({words:s,options:t,onComplete:e})=>{const i=W.useMemo(()=>{const D=Math.min(t.count,s.length);return(t.mode==="word-count"?s.slice(0,D):s).map(R=>{let V;return t.direction==="random"?V=Math.random()>.5?"es-en":"en-es":V=t.direction,{...R,direction:V}})},[s,t]),[a,l]=W.useState(0),[c,d]=W.useState(""),[g,p]=W.useState(0),[y,T]=W.useState([]),[I,M]=W.useState(!1),[H,Q]=W.useState(null),[z,nt]=W.useState(t.mode==="timed"?t.count*60:0),et=i[a];W.useEffect(()=>{if(t.mode==="timed"){const D=setInterval(()=>{nt(A=>A<=1?(clearInterval(D),e(g,i,y),0):A-1)},1e3);return()=>clearInterval(D)}},[t,g,y,e]);const it=()=>et.direction==="es-en"?et.spanish:et.english,ut=()=>et.direction==="es-en"?et.english:et.spanish,ct=()=>{const D=ut().toLowerCase().split("|").map(V=>V.trim()),A=c.trim().toLowerCase(),R=D.includes(A);if(Q(R),R){const V=et.id;if(!V)return;p(O=>O+1),T(O=>[...O,V])}M(!0)},gt=()=>{d(""),M(!1),Q(null);const D=a+1;D>=i.length?e(g,i,y):l(D)};return i.length?et?G.jsxs("div",{children:[t.mode==="timed"&&G.jsxs("div",{children:[" Time Left: ",Math.floor(z/60),":",String(z%60).padStart(2,"0")]}),G.jsx("h3",{children:"Translate:"}),G.jsx("div",{style:{fontSize:"1.5rem",margin:"1rem 0"},children:G.jsx("strong",{children:it()})}),I?G.jsxs(G.Fragment,{children:[G.jsx("h4",{style:{color:H?"green":"red"},children:H?" Correct!":" Incorrect"}),G.jsxs("p",{children:[G.jsx("strong",{children:"Your answer:"})," ",c||"(blank)"]}),G.jsxs("p",{children:[G.jsx("strong",{children:"Correct answer:"})," ",ut()]}),G.jsx("button",{onClick:gt,children:"Next"})]}):G.jsxs(G.Fragment,{children:[G.jsx("input",{value:c,onChange:D=>d(D.target.value),placeholder:"Your answer"}),G.jsx("button",{onClick:ct,children:"Check"})]})]}):null:G.jsx("div",{children:"No words available for practice."})};function zN(){const[s,t]=W.useState(null),[e,i]=W.useState([]),[a,l]=W.useState(!1),[c,d]=W.useState(0);W.useEffect(()=>{if(!s)return;(async()=>{const y=pi.currentUser;if(!y)return;const I=(await _p(pf(Yr,"users",y.uid,"words"))).docs.map(nt=>({id:nt.id,...nt.data()})),M=Date.now(),Q=I.map(nt=>{const et=nt.lastSeen||0,it=nt.correctCount||0,ut=(M-et)/(1+it);return{...nt,srScore:ut}}).sort((nt,et)=>et.srScore-nt.srScore),z=s.mode==="word-count"?Q.slice(0,s.count):Q;i(z)})()},[s]);const g=async(p,y,T)=>{d(p),l(!0);const I=pi.currentUser;if(!I)return;const M=VN(Yr),H=Date.now();y.forEach(Q=>{if(!Q.id){console.warn("Skipping update for word with missing ID",Q);return}const z=lp(Yr,"users",I.uid,"words",Q.id),nt={lastSeen:H};T.includes(Q.id)&&(nt.correctCount=(Q.correctCount||0)+1),M.update(z,nt)}),await M.commit()};return s?a?G.jsxs("div",{children:[G.jsx("h2",{children:" Practice Complete!"}),G.jsxs("p",{children:["You scored ",G.jsx("strong",{children:c})," out of"," ",G.jsx("strong",{children:e.length})]}),G.jsx("button",{onClick:()=>{t(null),i([]),d(0),l(!1)},children:"Start New Session"})]}):G.jsx("div",{children:G.jsx(BN,{words:e,options:s,onComplete:(p,y,T)=>g(p,y,T)})}):G.jsx(LN,{onStart:t})}function jN(){return G.jsx("h2",{children:"Coming soon: Your profile details!"})}function qN({onWordAdded:s}){const[t,e]=W.useState(""),[i,a]=W.useState(""),l=async c=>{c.preventDefault();const d=pi.currentUser;if(!d||!t||!i)return;const g=pf(Yr,"users",d.uid,"words");await DN(g,{english:t.trim(),spanish:i.trim(),correctCount:0,lastSeen:0}),e(""),a(""),s&&s()};return G.jsxs("form",{onSubmit:l,children:[G.jsx("input",{type:"text",placeholder:"English",value:t,onChange:c=>e(c.target.value),required:!0}),G.jsx("input",{type:"text",placeholder:"Spanish",value:i,onChange:c=>a(c.target.value),required:!0}),G.jsx("button",{type:"submit",children:"Add Word"})]})}function FN(){const[s,t]=W.useState([]),[e,i]=W.useState(null),[a,l]=W.useState(""),[c,d]=W.useState(""),g=async()=>{const y=pi.currentUser;if(!y)return;const T=await _p(pf(Yr,"users",y.uid,"words")),I=Date.now(),M=T.docs.map(H=>{const Q=H.data(),z=Q.lastSeen||0,nt=Q.correctCount||0,et=(I-z)/(1+nt);return{...Q,id:H.id,srScore:et}});t(M)};W.useEffect(()=>{g()},[]);const p=async y=>{const T=pi.currentUser;if(!T||!y)return;const I=lp(Yr,"users",T.uid,"words",y);await CN(I,{english:a,spanish:c}),t(M=>M.map(H=>H.id===y?{...H,english:a,spanish:c}:H)),i(null),l(""),d("")};return G.jsxs("div",{children:[G.jsx("h2",{children:"Add / Edit Vocabulary"}),G.jsx(qN,{onWordAdded:g}),G.jsx("h3",{style:{marginTop:"2rem"},children:"Your Words"}),G.jsxs("table",{children:[G.jsx("thead",{children:G.jsxs("tr",{children:[G.jsx("th",{children:"Spanish"}),G.jsx("th",{children:"English"}),G.jsx("th",{children:"SR Score"}),G.jsx("th",{children:"Correct"}),G.jsx("th",{children:"Last Seen"}),G.jsx("th",{children:"Actions"})]})}),G.jsx("tbody",{children:s.map(y=>G.jsxs("tr",{children:[G.jsx("td",{children:e===y.id?G.jsx("input",{value:c,onChange:T=>d(T.target.value)}):y.spanish}),G.jsx("td",{children:e===y.id?G.jsx("input",{value:a,onChange:T=>l(T.target.value)}):y.english}),G.jsx("td",{children:Math.round(y.srScore)}),G.jsx("td",{children:y.correctCount??0}),G.jsx("td",{children:y.lastSeen?new Date(y.lastSeen).toLocaleDateString():"Never"}),G.jsx("td",{children:e===y.id?G.jsx("button",{onClick:()=>p(y.id),children:"Save"}):G.jsx("button",{onClick:()=>{i(y.id),l(y.english),d(y.spanish)},children:"Edit"})})]},y.id))})]})]})}function GN(){return G.jsxs("div",{children:[G.jsx("h2",{children:" Stats"}),G.jsx(sw,{})]})}const HN=()=>{const[s,t]=W.useState({total:0,totalCorrect:0,accuracy:0,practicedToday:0,practicedWeek:0,practicedMonth:0});return W.useEffect(()=>{(async()=>{const i=pi.currentUser;if(!i)return;const a=Date.now(),l=1e3*60*60*24,c=l*7,d=l*30,p=(await _p(pf(Yr,"users",i.uid,"words"))).docs.map(z=>({id:z.id,...z.data()})),y=p.length,T=p.reduce((z,nt)=>z+(nt.correctCount||0),0),I=y>0?Math.round(T/y*100):0,M=p.filter(z=>a-z.lastSeen<l).length,H=p.filter(z=>a-z.lastSeen<c).length,Q=p.filter(z=>a-z.lastSeen<d).length;t({total:y,totalCorrect:T,accuracy:I,practicedToday:M,practicedWeek:H,practicedMonth:Q})})()},[]),G.jsxs("div",{children:[G.jsx("h2",{children:" Your Progress"}),G.jsxs("ul",{children:[G.jsxs("li",{children:[G.jsx("strong",{children:"Total words:"})," ",s.total]}),G.jsxs("li",{children:[G.jsx("strong",{children:"Total correct answers:"})," ",s.totalCorrect]}),G.jsxs("li",{children:[G.jsx("strong",{children:"Accuracy:"})," ",s.accuracy,"%"]}),G.jsxs("li",{children:[G.jsx("strong",{children:"Practiced today:"})," ",s.practicedToday]}),G.jsxs("li",{children:[G.jsx("strong",{children:"Practiced this week:"})," ",s.practicedWeek]}),G.jsxs("li",{children:[G.jsx("strong",{children:"Practiced this month:"})," ",s.practicedMonth]})]})]})};function KN(){return G.jsxs("div",{children:[G.jsx("h3",{children:"Your Progress"}),G.jsx(HN,{})]})}const QN=({user:s})=>{const[t,e]=W.useState(!1);return G.jsxs("div",{className:`app-layout ${t?"collapsed":""}`,children:[G.jsx(PN,{user:s,onToggleSidebar:()=>e(i=>!i)}),G.jsxs("div",{className:"app-body",children:[G.jsx(kN,{}),G.jsx("main",{className:"app-content",children:G.jsxs(ow,{children:[G.jsx(Fi,{path:"/",element:G.jsx(Gv,{to:"/home"})}),G.jsx(Fi,{path:"/home",element:G.jsx(UN,{})}),G.jsx(Fi,{path:"/practice",element:G.jsx(zN,{})}),G.jsx(Fi,{path:"/vocabulary",element:G.jsx(FN,{})}),G.jsx(Fi,{path:"/profile",element:G.jsx(jN,{})}),G.jsxs(Fi,{path:"/stats",element:G.jsx(GN,{}),children:[G.jsx(Fi,{index:!0,element:G.jsx(Gv,{to:"progress"})}),G.jsx(Fi,{path:"progress",element:G.jsx(KN,{})})]})]})})]})]})};function YN(){const[s]=eD(pi);return s?G.jsx(QN,{user:s}):G.jsx(MN,{user:s})}gI.createRoot(document.getElementById("root")).render(G.jsx(CT.StrictMode,{children:G.jsx(gw,{children:G.jsx(YN,{})})}));
